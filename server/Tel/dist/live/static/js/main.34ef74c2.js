/*! For license information please see main.34ef74c2.js.LICENSE.txt */
!function(){var e={618:function(e,t){"use strict"},895:function(e,t,n){var r,i;!function(a,o){"use strict";r=function(){var e=function(){},t="undefined",n=typeof window!==t&&typeof window.navigator!==t&&/Trident\/|MSIE /.test(window.navigator.userAgent),r=["trace","debug","info","warn","error"];function i(e,t){var n=e[t];if("function"===typeof n.bind)return n.bind(e);try{return Function.prototype.bind.call(n,e)}catch(r){return function(){return Function.prototype.apply.apply(n,[e,arguments])}}}function a(){console.log&&(console.log.apply?console.log.apply(console,arguments):Function.prototype.apply.apply(console.log,[console,arguments])),console.trace&&console.trace()}function o(r){return"debug"===r&&(r="log"),typeof console!==t&&("trace"===r&&n?a:void 0!==console[r]?i(console,r):void 0!==console.log?i(console,"log"):e)}function s(t,n){for(var i=0;i<r.length;i++){var a=r[i];this[a]=i<t?e:this.methodFactory(a,t,n)}this.log=this.debug}function c(e,n,r){return function(){typeof console!==t&&(s.call(this,n,r),this[e].apply(this,arguments))}}function u(e,t,n){return o(e)||c.apply(this,arguments)}function l(e,n,i){var a,o=this;n=null==n?"WARN":n;var c="loglevel";function l(e){var n=(r[e]||"silent").toUpperCase();if(typeof window!==t&&c){try{return void(window.localStorage[c]=n)}catch(i){}try{window.document.cookie=encodeURIComponent(c)+"="+n+";"}catch(i){}}}function d(){var e;if(typeof window!==t&&c){try{e=window.localStorage[c]}catch(i){}if(typeof e===t)try{var n=window.document.cookie,r=n.indexOf(encodeURIComponent(c)+"=");-1!==r&&(e=/^([^;]+)/.exec(n.slice(r))[1])}catch(i){}return void 0===o.levels[e]&&(e=void 0),e}}function f(){if(typeof window!==t&&c){try{return void window.localStorage.removeItem(c)}catch(e){}try{window.document.cookie=encodeURIComponent(c)+"=; expires=Thu, 01 Jan 1970 00:00:00 UTC"}catch(e){}}}"string"===typeof e?c+=":"+e:"symbol"===typeof e&&(c=void 0),o.name=e,o.levels={TRACE:0,DEBUG:1,INFO:2,WARN:3,ERROR:4,SILENT:5},o.methodFactory=i||u,o.getLevel=function(){return a},o.setLevel=function(n,r){if("string"===typeof n&&void 0!==o.levels[n.toUpperCase()]&&(n=o.levels[n.toUpperCase()]),!("number"===typeof n&&n>=0&&n<=o.levels.SILENT))throw"log.setLevel() called with invalid level: "+n;if(a=n,!1!==r&&l(n),s.call(o,n,e),typeof console===t&&n<o.levels.SILENT)return"No console available for logging"},o.setDefaultLevel=function(e){n=e,d()||o.setLevel(e,!1)},o.resetLevel=function(){o.setLevel(n,!1),f()},o.enableAll=function(e){o.setLevel(o.levels.TRACE,e)},o.disableAll=function(e){o.setLevel(o.levels.SILENT,e)};var p=d();null==p&&(p=n),o.setLevel(p,!1)}var d=new l,f={};d.getLogger=function(e){if("symbol"!==typeof e&&"string"!==typeof e||""===e)throw new TypeError("You must supply a name when creating a logger.");var t=f[e];return t||(t=f[e]=new l(e,d.getLevel(),d.methodFactory)),t};var p=typeof window!==t?window.log:void 0;return d.noConflict=function(){return typeof window!==t&&window.log===d&&(window.log=p),d},d.getLoggers=function(){return f},d.default=d,d},void 0===(i="function"===typeof r?r.call(t,n,t,e):r)||(e.exports=i)}()},463:function(e,t,n){"use strict";var r=n(791),i=n(296);function a(e){for(var t="https://reactjs.org/docs/error-decoder.html?invariant="+e,n=1;n<arguments.length;n++)t+="&args[]="+encodeURIComponent(arguments[n]);return"Minified React error #"+e+"; visit "+t+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var o=new Set,s={};function c(e,t){u(e,t),u(e+"Capture",t)}function u(e,t){for(s[e]=t,e=0;e<t.length;e++)o.add(t[e])}var l=!("undefined"===typeof window||"undefined"===typeof window.document||"undefined"===typeof window.document.createElement),d=Object.prototype.hasOwnProperty,f=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,p={},h={};function v(e,t,n,r,i,a,o){this.acceptsBooleans=2===t||3===t||4===t,this.attributeName=r,this.attributeNamespace=i,this.mustUseProperty=n,this.propertyName=e,this.type=t,this.sanitizeURL=a,this.removeEmptyString=o}var m={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach((function(e){m[e]=new v(e,0,!1,e,null,!1,!1)})),[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach((function(e){var t=e[0];m[t]=new v(t,1,!1,e[1],null,!1,!1)})),["contentEditable","draggable","spellCheck","value"].forEach((function(e){m[e]=new v(e,2,!1,e.toLowerCase(),null,!1,!1)})),["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach((function(e){m[e]=new v(e,2,!1,e,null,!1,!1)})),"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach((function(e){m[e]=new v(e,3,!1,e.toLowerCase(),null,!1,!1)})),["checked","multiple","muted","selected"].forEach((function(e){m[e]=new v(e,3,!0,e,null,!1,!1)})),["capture","download"].forEach((function(e){m[e]=new v(e,4,!1,e,null,!1,!1)})),["cols","rows","size","span"].forEach((function(e){m[e]=new v(e,6,!1,e,null,!1,!1)})),["rowSpan","start"].forEach((function(e){m[e]=new v(e,5,!1,e.toLowerCase(),null,!1,!1)}));var g=/[\-:]([a-z])/g;function b(e){return e[1].toUpperCase()}function y(e,t,n,r){var i=m.hasOwnProperty(t)?m[t]:null;(null!==i?0!==i.type:r||!(2<t.length)||"o"!==t[0]&&"O"!==t[0]||"n"!==t[1]&&"N"!==t[1])&&(function(e,t,n,r){if(null===t||"undefined"===typeof t||function(e,t,n,r){if(null!==n&&0===n.type)return!1;switch(typeof t){case"function":case"symbol":return!0;case"boolean":return!r&&(null!==n?!n.acceptsBooleans:"data-"!==(e=e.toLowerCase().slice(0,5))&&"aria-"!==e);default:return!1}}(e,t,n,r))return!0;if(r)return!1;if(null!==n)switch(n.type){case 3:return!t;case 4:return!1===t;case 5:return isNaN(t);case 6:return isNaN(t)||1>t}return!1}(t,n,i,r)&&(n=null),r||null===i?function(e){return!!d.call(h,e)||!d.call(p,e)&&(f.test(e)?h[e]=!0:(p[e]=!0,!1))}(t)&&(null===n?e.removeAttribute(t):e.setAttribute(t,""+n)):i.mustUseProperty?e[i.propertyName]=null===n?3!==i.type&&"":n:(t=i.attributeName,r=i.attributeNamespace,null===n?e.removeAttribute(t):(n=3===(i=i.type)||4===i&&!0===n?"":""+n,r?e.setAttributeNS(r,t,n):e.setAttribute(t,n))))}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach((function(e){var t=e.replace(g,b);m[t]=new v(t,1,!1,e,null,!1,!1)})),"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach((function(e){var t=e.replace(g,b);m[t]=new v(t,1,!1,e,"http://www.w3.org/1999/xlink",!1,!1)})),["xml:base","xml:lang","xml:space"].forEach((function(e){var t=e.replace(g,b);m[t]=new v(t,1,!1,e,"http://www.w3.org/XML/1998/namespace",!1,!1)})),["tabIndex","crossOrigin"].forEach((function(e){m[e]=new v(e,1,!1,e.toLowerCase(),null,!1,!1)})),m.xlinkHref=new v("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1),["src","href","action","formAction"].forEach((function(e){m[e]=new v(e,1,!1,e.toLowerCase(),null,!0,!0)}));var k=r.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,w=Symbol.for("react.element"),S=Symbol.for("react.portal"),C=Symbol.for("react.fragment"),E=Symbol.for("react.strict_mode"),x=Symbol.for("react.profiler"),P=Symbol.for("react.provider"),T=Symbol.for("react.context"),R=Symbol.for("react.forward_ref"),N=Symbol.for("react.suspense"),O=Symbol.for("react.suspense_list"),I=Symbol.for("react.memo"),_=Symbol.for("react.lazy");Symbol.for("react.scope"),Symbol.for("react.debug_trace_mode");var D=Symbol.for("react.offscreen");Symbol.for("react.legacy_hidden"),Symbol.for("react.cache"),Symbol.for("react.tracing_marker");var A=Symbol.iterator;function L(e){return null===e||"object"!==typeof e?null:"function"===typeof(e=A&&e[A]||e["@@iterator"])?e:null}var M,U=Object.assign;function F(e){if(void 0===M)try{throw Error()}catch(n){var t=n.stack.trim().match(/\n( *(at )?)/);M=t&&t[1]||""}return"\n"+M+e}var j=!1;function B(e,t){if(!e||j)return"";j=!0;var n=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(t)if(t=function(){throw Error()},Object.defineProperty(t.prototype,"props",{set:function(){throw Error()}}),"object"===typeof Reflect&&Reflect.construct){try{Reflect.construct(t,[])}catch(u){var r=u}Reflect.construct(e,[],t)}else{try{t.call()}catch(u){r=u}e.call(t.prototype)}else{try{throw Error()}catch(u){r=u}e()}}catch(u){if(u&&r&&"string"===typeof u.stack){for(var i=u.stack.split("\n"),a=r.stack.split("\n"),o=i.length-1,s=a.length-1;1<=o&&0<=s&&i[o]!==a[s];)s--;for(;1<=o&&0<=s;o--,s--)if(i[o]!==a[s]){if(1!==o||1!==s)do{if(o--,0>--s||i[o]!==a[s]){var c="\n"+i[o].replace(" at new "," at ");return e.displayName&&c.includes("<anonymous>")&&(c=c.replace("<anonymous>",e.displayName)),c}}while(1<=o&&0<=s);break}}}finally{j=!1,Error.prepareStackTrace=n}return(e=e?e.displayName||e.name:"")?F(e):""}function z(e){switch(e.tag){case 5:return F(e.type);case 16:return F("Lazy");case 13:return F("Suspense");case 19:return F("SuspenseList");case 0:case 2:case 15:return e=B(e.type,!1);case 11:return e=B(e.type.render,!1);case 1:return e=B(e.type,!0);default:return""}}function $(e){if(null==e)return null;if("function"===typeof e)return e.displayName||e.name||null;if("string"===typeof e)return e;switch(e){case C:return"Fragment";case S:return"Portal";case x:return"Profiler";case E:return"StrictMode";case N:return"Suspense";case O:return"SuspenseList"}if("object"===typeof e)switch(e.$$typeof){case T:return(e.displayName||"Context")+".Consumer";case P:return(e._context.displayName||"Context")+".Provider";case R:var t=e.render;return(e=e.displayName)||(e=""!==(e=t.displayName||t.name||"")?"ForwardRef("+e+")":"ForwardRef"),e;case I:return null!==(t=e.displayName||null)?t:$(e.type)||"Memo";case _:t=e._payload,e=e._init;try{return $(e(t))}catch(n){}}return null}function V(e){var t=e.type;switch(e.tag){case 24:return"Cache";case 9:return(t.displayName||"Context")+".Consumer";case 10:return(t._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return e=(e=t.render).displayName||e.name||"",t.displayName||(""!==e?"ForwardRef("+e+")":"ForwardRef");case 7:return"Fragment";case 5:return t;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return $(t);case 8:return t===E?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if("function"===typeof t)return t.displayName||t.name||null;if("string"===typeof t)return t}return null}function J(e){switch(typeof e){case"boolean":case"number":case"string":case"undefined":case"object":return e;default:return""}}function W(e){var t=e.type;return(e=e.nodeName)&&"input"===e.toLowerCase()&&("checkbox"===t||"radio"===t)}function q(e){e._valueTracker||(e._valueTracker=function(e){var t=W(e)?"checked":"value",n=Object.getOwnPropertyDescriptor(e.constructor.prototype,t),r=""+e[t];if(!e.hasOwnProperty(t)&&"undefined"!==typeof n&&"function"===typeof n.get&&"function"===typeof n.set){var i=n.get,a=n.set;return Object.defineProperty(e,t,{configurable:!0,get:function(){return i.call(this)},set:function(e){r=""+e,a.call(this,e)}}),Object.defineProperty(e,t,{enumerable:n.enumerable}),{getValue:function(){return r},setValue:function(e){r=""+e},stopTracking:function(){e._valueTracker=null,delete e[t]}}}}(e))}function H(e){if(!e)return!1;var t=e._valueTracker;if(!t)return!0;var n=t.getValue(),r="";return e&&(r=W(e)?e.checked?"true":"false":e.value),(e=r)!==n&&(t.setValue(e),!0)}function G(e){if("undefined"===typeof(e=e||("undefined"!==typeof document?document:void 0)))return null;try{return e.activeElement||e.body}catch(t){return e.body}}function Q(e,t){var n=t.checked;return U({},t,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:null!=n?n:e._wrapperState.initialChecked})}function Z(e,t){var n=null==t.defaultValue?"":t.defaultValue,r=null!=t.checked?t.checked:t.defaultChecked;n=J(null!=t.value?t.value:n),e._wrapperState={initialChecked:r,initialValue:n,controlled:"checkbox"===t.type||"radio"===t.type?null!=t.checked:null!=t.value}}function K(e,t){null!=(t=t.checked)&&y(e,"checked",t,!1)}function Y(e,t){K(e,t);var n=J(t.value),r=t.type;if(null!=n)"number"===r?(0===n&&""===e.value||e.value!=n)&&(e.value=""+n):e.value!==""+n&&(e.value=""+n);else if("submit"===r||"reset"===r)return void e.removeAttribute("value");t.hasOwnProperty("value")?ee(e,t.type,n):t.hasOwnProperty("defaultValue")&&ee(e,t.type,J(t.defaultValue)),null==t.checked&&null!=t.defaultChecked&&(e.defaultChecked=!!t.defaultChecked)}function X(e,t,n){if(t.hasOwnProperty("value")||t.hasOwnProperty("defaultValue")){var r=t.type;if(!("submit"!==r&&"reset"!==r||void 0!==t.value&&null!==t.value))return;t=""+e._wrapperState.initialValue,n||t===e.value||(e.value=t),e.defaultValue=t}""!==(n=e.name)&&(e.name=""),e.defaultChecked=!!e._wrapperState.initialChecked,""!==n&&(e.name=n)}function ee(e,t,n){"number"===t&&G(e.ownerDocument)===e||(null==n?e.defaultValue=""+e._wrapperState.initialValue:e.defaultValue!==""+n&&(e.defaultValue=""+n))}var te=Array.isArray;function ne(e,t,n,r){if(e=e.options,t){t={};for(var i=0;i<n.length;i++)t["$"+n[i]]=!0;for(n=0;n<e.length;n++)i=t.hasOwnProperty("$"+e[n].value),e[n].selected!==i&&(e[n].selected=i),i&&r&&(e[n].defaultSelected=!0)}else{for(n=""+J(n),t=null,i=0;i<e.length;i++){if(e[i].value===n)return e[i].selected=!0,void(r&&(e[i].defaultSelected=!0));null!==t||e[i].disabled||(t=e[i])}null!==t&&(t.selected=!0)}}function re(e,t){if(null!=t.dangerouslySetInnerHTML)throw Error(a(91));return U({},t,{value:void 0,defaultValue:void 0,children:""+e._wrapperState.initialValue})}function ie(e,t){var n=t.value;if(null==n){if(n=t.children,t=t.defaultValue,null!=n){if(null!=t)throw Error(a(92));if(te(n)){if(1<n.length)throw Error(a(93));n=n[0]}t=n}null==t&&(t=""),n=t}e._wrapperState={initialValue:J(n)}}function ae(e,t){var n=J(t.value),r=J(t.defaultValue);null!=n&&((n=""+n)!==e.value&&(e.value=n),null==t.defaultValue&&e.defaultValue!==n&&(e.defaultValue=n)),null!=r&&(e.defaultValue=""+r)}function oe(e){var t=e.textContent;t===e._wrapperState.initialValue&&""!==t&&null!==t&&(e.value=t)}function se(e){switch(e){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function ce(e,t){return null==e||"http://www.w3.org/1999/xhtml"===e?se(t):"http://www.w3.org/2000/svg"===e&&"foreignObject"===t?"http://www.w3.org/1999/xhtml":e}var ue,le,de=(le=function(e,t){if("http://www.w3.org/2000/svg"!==e.namespaceURI||"innerHTML"in e)e.innerHTML=t;else{for((ue=ue||document.createElement("div")).innerHTML="<svg>"+t.valueOf().toString()+"</svg>",t=ue.firstChild;e.firstChild;)e.removeChild(e.firstChild);for(;t.firstChild;)e.appendChild(t.firstChild)}},"undefined"!==typeof MSApp&&MSApp.execUnsafeLocalFunction?function(e,t,n,r){MSApp.execUnsafeLocalFunction((function(){return le(e,t)}))}:le);function fe(e,t){if(t){var n=e.firstChild;if(n&&n===e.lastChild&&3===n.nodeType)return void(n.nodeValue=t)}e.textContent=t}var pe={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},he=["Webkit","ms","Moz","O"];function ve(e,t,n){return null==t||"boolean"===typeof t||""===t?"":n||"number"!==typeof t||0===t||pe.hasOwnProperty(e)&&pe[e]?(""+t).trim():t+"px"}function me(e,t){for(var n in e=e.style,t)if(t.hasOwnProperty(n)){var r=0===n.indexOf("--"),i=ve(n,t[n],r);"float"===n&&(n="cssFloat"),r?e.setProperty(n,i):e[n]=i}}Object.keys(pe).forEach((function(e){he.forEach((function(t){t=t+e.charAt(0).toUpperCase()+e.substring(1),pe[t]=pe[e]}))}));var ge=U({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function be(e,t){if(t){if(ge[e]&&(null!=t.children||null!=t.dangerouslySetInnerHTML))throw Error(a(137,e));if(null!=t.dangerouslySetInnerHTML){if(null!=t.children)throw Error(a(60));if("object"!==typeof t.dangerouslySetInnerHTML||!("__html"in t.dangerouslySetInnerHTML))throw Error(a(61))}if(null!=t.style&&"object"!==typeof t.style)throw Error(a(62))}}function ye(e,t){if(-1===e.indexOf("-"))return"string"===typeof t.is;switch(e){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var ke=null;function we(e){return(e=e.target||e.srcElement||window).correspondingUseElement&&(e=e.correspondingUseElement),3===e.nodeType?e.parentNode:e}var Se=null,Ce=null,Ee=null;function xe(e){if(e=yi(e)){if("function"!==typeof Se)throw Error(a(280));var t=e.stateNode;t&&(t=wi(t),Se(e.stateNode,e.type,t))}}function Pe(e){Ce?Ee?Ee.push(e):Ee=[e]:Ce=e}function Te(){if(Ce){var e=Ce,t=Ee;if(Ee=Ce=null,xe(e),t)for(e=0;e<t.length;e++)xe(t[e])}}function Re(e,t){return e(t)}function Ne(){}var Oe=!1;function Ie(e,t,n){if(Oe)return e(t,n);Oe=!0;try{return Re(e,t,n)}finally{Oe=!1,(null!==Ce||null!==Ee)&&(Ne(),Te())}}function _e(e,t){var n=e.stateNode;if(null===n)return null;var r=wi(n);if(null===r)return null;n=r[t];e:switch(t){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(r=!r.disabled)||(r=!("button"===(e=e.type)||"input"===e||"select"===e||"textarea"===e)),e=!r;break e;default:e=!1}if(e)return null;if(n&&"function"!==typeof n)throw Error(a(231,t,typeof n));return n}var De=!1;if(l)try{var Ae={};Object.defineProperty(Ae,"passive",{get:function(){De=!0}}),window.addEventListener("test",Ae,Ae),window.removeEventListener("test",Ae,Ae)}catch(le){De=!1}function Le(e,t,n,r,i,a,o,s,c){var u=Array.prototype.slice.call(arguments,3);try{t.apply(n,u)}catch(l){this.onError(l)}}var Me=!1,Ue=null,Fe=!1,je=null,Be={onError:function(e){Me=!0,Ue=e}};function ze(e,t,n,r,i,a,o,s,c){Me=!1,Ue=null,Le.apply(Be,arguments)}function $e(e){var t=e,n=e;if(e.alternate)for(;t.return;)t=t.return;else{e=t;do{0!==(4098&(t=e).flags)&&(n=t.return),e=t.return}while(e)}return 3===t.tag?n:null}function Ve(e){if(13===e.tag){var t=e.memoizedState;if(null===t&&(null!==(e=e.alternate)&&(t=e.memoizedState)),null!==t)return t.dehydrated}return null}function Je(e){if($e(e)!==e)throw Error(a(188))}function We(e){return null!==(e=function(e){var t=e.alternate;if(!t){if(null===(t=$e(e)))throw Error(a(188));return t!==e?null:e}for(var n=e,r=t;;){var i=n.return;if(null===i)break;var o=i.alternate;if(null===o){if(null!==(r=i.return)){n=r;continue}break}if(i.child===o.child){for(o=i.child;o;){if(o===n)return Je(i),e;if(o===r)return Je(i),t;o=o.sibling}throw Error(a(188))}if(n.return!==r.return)n=i,r=o;else{for(var s=!1,c=i.child;c;){if(c===n){s=!0,n=i,r=o;break}if(c===r){s=!0,r=i,n=o;break}c=c.sibling}if(!s){for(c=o.child;c;){if(c===n){s=!0,n=o,r=i;break}if(c===r){s=!0,r=o,n=i;break}c=c.sibling}if(!s)throw Error(a(189))}}if(n.alternate!==r)throw Error(a(190))}if(3!==n.tag)throw Error(a(188));return n.stateNode.current===n?e:t}(e))?qe(e):null}function qe(e){if(5===e.tag||6===e.tag)return e;for(e=e.child;null!==e;){var t=qe(e);if(null!==t)return t;e=e.sibling}return null}var He=i.unstable_scheduleCallback,Ge=i.unstable_cancelCallback,Qe=i.unstable_shouldYield,Ze=i.unstable_requestPaint,Ke=i.unstable_now,Ye=i.unstable_getCurrentPriorityLevel,Xe=i.unstable_ImmediatePriority,et=i.unstable_UserBlockingPriority,tt=i.unstable_NormalPriority,nt=i.unstable_LowPriority,rt=i.unstable_IdlePriority,it=null,at=null;var ot=Math.clz32?Math.clz32:function(e){return e>>>=0,0===e?32:31-(st(e)/ct|0)|0},st=Math.log,ct=Math.LN2;var ut=64,lt=4194304;function dt(e){switch(e&-e){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return 4194240&e;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return 130023424&e;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return e}}function ft(e,t){var n=e.pendingLanes;if(0===n)return 0;var r=0,i=e.suspendedLanes,a=e.pingedLanes,o=268435455&n;if(0!==o){var s=o&~i;0!==s?r=dt(s):0!==(a&=o)&&(r=dt(a))}else 0!==(o=n&~i)?r=dt(o):0!==a&&(r=dt(a));if(0===r)return 0;if(0!==t&&t!==r&&0===(t&i)&&((i=r&-r)>=(a=t&-t)||16===i&&0!==(4194240&a)))return t;if(0!==(4&r)&&(r|=16&n),0!==(t=e.entangledLanes))for(e=e.entanglements,t&=r;0<t;)i=1<<(n=31-ot(t)),r|=e[n],t&=~i;return r}function pt(e,t){switch(e){case 1:case 2:case 4:return t+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t+5e3;default:return-1}}function ht(e){return 0!==(e=-1073741825&e.pendingLanes)?e:1073741824&e?1073741824:0}function vt(){var e=ut;return 0===(4194240&(ut<<=1))&&(ut=64),e}function mt(e){for(var t=[],n=0;31>n;n++)t.push(e);return t}function gt(e,t,n){e.pendingLanes|=t,536870912!==t&&(e.suspendedLanes=0,e.pingedLanes=0),(e=e.eventTimes)[t=31-ot(t)]=n}function bt(e,t){var n=e.entangledLanes|=t;for(e=e.entanglements;n;){var r=31-ot(n),i=1<<r;i&t|e[r]&t&&(e[r]|=t),n&=~i}}var yt=0;function kt(e){return 1<(e&=-e)?4<e?0!==(268435455&e)?16:536870912:4:1}var wt,St,Ct,Et,xt,Pt=!1,Tt=[],Rt=null,Nt=null,Ot=null,It=new Map,_t=new Map,Dt=[],At="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function Lt(e,t){switch(e){case"focusin":case"focusout":Rt=null;break;case"dragenter":case"dragleave":Nt=null;break;case"mouseover":case"mouseout":Ot=null;break;case"pointerover":case"pointerout":It.delete(t.pointerId);break;case"gotpointercapture":case"lostpointercapture":_t.delete(t.pointerId)}}function Mt(e,t,n,r,i,a){return null===e||e.nativeEvent!==a?(e={blockedOn:t,domEventName:n,eventSystemFlags:r,nativeEvent:a,targetContainers:[i]},null!==t&&(null!==(t=yi(t))&&St(t)),e):(e.eventSystemFlags|=r,t=e.targetContainers,null!==i&&-1===t.indexOf(i)&&t.push(i),e)}function Ut(e){var t=bi(e.target);if(null!==t){var n=$e(t);if(null!==n)if(13===(t=n.tag)){if(null!==(t=Ve(n)))return e.blockedOn=t,void xt(e.priority,(function(){Ct(n)}))}else if(3===t&&n.stateNode.current.memoizedState.isDehydrated)return void(e.blockedOn=3===n.tag?n.stateNode.containerInfo:null)}e.blockedOn=null}function Ft(e){if(null!==e.blockedOn)return!1;for(var t=e.targetContainers;0<t.length;){var n=Qt(e.domEventName,e.eventSystemFlags,t[0],e.nativeEvent);if(null!==n)return null!==(t=yi(n))&&St(t),e.blockedOn=n,!1;var r=new(n=e.nativeEvent).constructor(n.type,n);ke=r,n.target.dispatchEvent(r),ke=null,t.shift()}return!0}function jt(e,t,n){Ft(e)&&n.delete(t)}function Bt(){Pt=!1,null!==Rt&&Ft(Rt)&&(Rt=null),null!==Nt&&Ft(Nt)&&(Nt=null),null!==Ot&&Ft(Ot)&&(Ot=null),It.forEach(jt),_t.forEach(jt)}function zt(e,t){e.blockedOn===t&&(e.blockedOn=null,Pt||(Pt=!0,i.unstable_scheduleCallback(i.unstable_NormalPriority,Bt)))}function $t(e){function t(t){return zt(t,e)}if(0<Tt.length){zt(Tt[0],e);for(var n=1;n<Tt.length;n++){var r=Tt[n];r.blockedOn===e&&(r.blockedOn=null)}}for(null!==Rt&&zt(Rt,e),null!==Nt&&zt(Nt,e),null!==Ot&&zt(Ot,e),It.forEach(t),_t.forEach(t),n=0;n<Dt.length;n++)(r=Dt[n]).blockedOn===e&&(r.blockedOn=null);for(;0<Dt.length&&null===(n=Dt[0]).blockedOn;)Ut(n),null===n.blockedOn&&Dt.shift()}var Vt=k.ReactCurrentBatchConfig,Jt=!0;function Wt(e,t,n,r){var i=yt,a=Vt.transition;Vt.transition=null;try{yt=1,Ht(e,t,n,r)}finally{yt=i,Vt.transition=a}}function qt(e,t,n,r){var i=yt,a=Vt.transition;Vt.transition=null;try{yt=4,Ht(e,t,n,r)}finally{yt=i,Vt.transition=a}}function Ht(e,t,n,r){if(Jt){var i=Qt(e,t,n,r);if(null===i)Jr(e,t,r,Gt,n),Lt(e,r);else if(function(e,t,n,r,i){switch(t){case"focusin":return Rt=Mt(Rt,e,t,n,r,i),!0;case"dragenter":return Nt=Mt(Nt,e,t,n,r,i),!0;case"mouseover":return Ot=Mt(Ot,e,t,n,r,i),!0;case"pointerover":var a=i.pointerId;return It.set(a,Mt(It.get(a)||null,e,t,n,r,i)),!0;case"gotpointercapture":return a=i.pointerId,_t.set(a,Mt(_t.get(a)||null,e,t,n,r,i)),!0}return!1}(i,e,t,n,r))r.stopPropagation();else if(Lt(e,r),4&t&&-1<At.indexOf(e)){for(;null!==i;){var a=yi(i);if(null!==a&&wt(a),null===(a=Qt(e,t,n,r))&&Jr(e,t,r,Gt,n),a===i)break;i=a}null!==i&&r.stopPropagation()}else Jr(e,t,r,null,n)}}var Gt=null;function Qt(e,t,n,r){if(Gt=null,null!==(e=bi(e=we(r))))if(null===(t=$e(e)))e=null;else if(13===(n=t.tag)){if(null!==(e=Ve(t)))return e;e=null}else if(3===n){if(t.stateNode.current.memoizedState.isDehydrated)return 3===t.tag?t.stateNode.containerInfo:null;e=null}else t!==e&&(e=null);return Gt=e,null}function Zt(e){switch(e){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(Ye()){case Xe:return 1;case et:return 4;case tt:case nt:return 16;case rt:return 536870912;default:return 16}default:return 16}}var Kt=null,Yt=null,Xt=null;function en(){if(Xt)return Xt;var e,t,n=Yt,r=n.length,i="value"in Kt?Kt.value:Kt.textContent,a=i.length;for(e=0;e<r&&n[e]===i[e];e++);var o=r-e;for(t=1;t<=o&&n[r-t]===i[a-t];t++);return Xt=i.slice(e,1<t?1-t:void 0)}function tn(e){var t=e.keyCode;return"charCode"in e?0===(e=e.charCode)&&13===t&&(e=13):e=t,10===e&&(e=13),32<=e||13===e?e:0}function nn(){return!0}function rn(){return!1}function an(e){function t(t,n,r,i,a){for(var o in this._reactName=t,this._targetInst=r,this.type=n,this.nativeEvent=i,this.target=a,this.currentTarget=null,e)e.hasOwnProperty(o)&&(t=e[o],this[o]=t?t(i):i[o]);return this.isDefaultPrevented=(null!=i.defaultPrevented?i.defaultPrevented:!1===i.returnValue)?nn:rn,this.isPropagationStopped=rn,this}return U(t.prototype,{preventDefault:function(){this.defaultPrevented=!0;var e=this.nativeEvent;e&&(e.preventDefault?e.preventDefault():"unknown"!==typeof e.returnValue&&(e.returnValue=!1),this.isDefaultPrevented=nn)},stopPropagation:function(){var e=this.nativeEvent;e&&(e.stopPropagation?e.stopPropagation():"unknown"!==typeof e.cancelBubble&&(e.cancelBubble=!0),this.isPropagationStopped=nn)},persist:function(){},isPersistent:nn}),t}var on,sn,cn,un={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(e){return e.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},ln=an(un),dn=U({},un,{view:0,detail:0}),fn=an(dn),pn=U({},dn,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:xn,button:0,buttons:0,relatedTarget:function(e){return void 0===e.relatedTarget?e.fromElement===e.srcElement?e.toElement:e.fromElement:e.relatedTarget},movementX:function(e){return"movementX"in e?e.movementX:(e!==cn&&(cn&&"mousemove"===e.type?(on=e.screenX-cn.screenX,sn=e.screenY-cn.screenY):sn=on=0,cn=e),on)},movementY:function(e){return"movementY"in e?e.movementY:sn}}),hn=an(pn),vn=an(U({},pn,{dataTransfer:0})),mn=an(U({},dn,{relatedTarget:0})),gn=an(U({},un,{animationName:0,elapsedTime:0,pseudoElement:0})),bn=U({},un,{clipboardData:function(e){return"clipboardData"in e?e.clipboardData:window.clipboardData}}),yn=an(bn),kn=an(U({},un,{data:0})),wn={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},Sn={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},Cn={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function En(e){var t=this.nativeEvent;return t.getModifierState?t.getModifierState(e):!!(e=Cn[e])&&!!t[e]}function xn(){return En}var Pn=U({},dn,{key:function(e){if(e.key){var t=wn[e.key]||e.key;if("Unidentified"!==t)return t}return"keypress"===e.type?13===(e=tn(e))?"Enter":String.fromCharCode(e):"keydown"===e.type||"keyup"===e.type?Sn[e.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:xn,charCode:function(e){return"keypress"===e.type?tn(e):0},keyCode:function(e){return"keydown"===e.type||"keyup"===e.type?e.keyCode:0},which:function(e){return"keypress"===e.type?tn(e):"keydown"===e.type||"keyup"===e.type?e.keyCode:0}}),Tn=an(Pn),Rn=an(U({},pn,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0})),Nn=an(U({},dn,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:xn})),On=an(U({},un,{propertyName:0,elapsedTime:0,pseudoElement:0})),In=U({},pn,{deltaX:function(e){return"deltaX"in e?e.deltaX:"wheelDeltaX"in e?-e.wheelDeltaX:0},deltaY:function(e){return"deltaY"in e?e.deltaY:"wheelDeltaY"in e?-e.wheelDeltaY:"wheelDelta"in e?-e.wheelDelta:0},deltaZ:0,deltaMode:0}),_n=an(In),Dn=[9,13,27,32],An=l&&"CompositionEvent"in window,Ln=null;l&&"documentMode"in document&&(Ln=document.documentMode);var Mn=l&&"TextEvent"in window&&!Ln,Un=l&&(!An||Ln&&8<Ln&&11>=Ln),Fn=String.fromCharCode(32),jn=!1;function Bn(e,t){switch(e){case"keyup":return-1!==Dn.indexOf(t.keyCode);case"keydown":return 229!==t.keyCode;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function zn(e){return"object"===typeof(e=e.detail)&&"data"in e?e.data:null}var $n=!1;var Vn={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function Jn(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return"input"===t?!!Vn[e.type]:"textarea"===t}function Wn(e,t,n,r){Pe(r),0<(t=qr(t,"onChange")).length&&(n=new ln("onChange","change",null,n,r),e.push({event:n,listeners:t}))}var qn=null,Hn=null;function Gn(e){Fr(e,0)}function Qn(e){if(H(ki(e)))return e}function Zn(e,t){if("change"===e)return t}var Kn=!1;if(l){var Yn;if(l){var Xn="oninput"in document;if(!Xn){var er=document.createElement("div");er.setAttribute("oninput","return;"),Xn="function"===typeof er.oninput}Yn=Xn}else Yn=!1;Kn=Yn&&(!document.documentMode||9<document.documentMode)}function tr(){qn&&(qn.detachEvent("onpropertychange",nr),Hn=qn=null)}function nr(e){if("value"===e.propertyName&&Qn(Hn)){var t=[];Wn(t,Hn,e,we(e)),Ie(Gn,t)}}function rr(e,t,n){"focusin"===e?(tr(),Hn=n,(qn=t).attachEvent("onpropertychange",nr)):"focusout"===e&&tr()}function ir(e){if("selectionchange"===e||"keyup"===e||"keydown"===e)return Qn(Hn)}function ar(e,t){if("click"===e)return Qn(t)}function or(e,t){if("input"===e||"change"===e)return Qn(t)}var sr="function"===typeof Object.is?Object.is:function(e,t){return e===t&&(0!==e||1/e===1/t)||e!==e&&t!==t};function cr(e,t){if(sr(e,t))return!0;if("object"!==typeof e||null===e||"object"!==typeof t||null===t)return!1;var n=Object.keys(e),r=Object.keys(t);if(n.length!==r.length)return!1;for(r=0;r<n.length;r++){var i=n[r];if(!d.call(t,i)||!sr(e[i],t[i]))return!1}return!0}function ur(e){for(;e&&e.firstChild;)e=e.firstChild;return e}function lr(e,t){var n,r=ur(e);for(e=0;r;){if(3===r.nodeType){if(n=e+r.textContent.length,e<=t&&n>=t)return{node:r,offset:t-e};e=n}e:{for(;r;){if(r.nextSibling){r=r.nextSibling;break e}r=r.parentNode}r=void 0}r=ur(r)}}function dr(e,t){return!(!e||!t)&&(e===t||(!e||3!==e.nodeType)&&(t&&3===t.nodeType?dr(e,t.parentNode):"contains"in e?e.contains(t):!!e.compareDocumentPosition&&!!(16&e.compareDocumentPosition(t))))}function fr(){for(var e=window,t=G();t instanceof e.HTMLIFrameElement;){try{var n="string"===typeof t.contentWindow.location.href}catch(r){n=!1}if(!n)break;t=G((e=t.contentWindow).document)}return t}function pr(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t&&("input"===t&&("text"===e.type||"search"===e.type||"tel"===e.type||"url"===e.type||"password"===e.type)||"textarea"===t||"true"===e.contentEditable)}function hr(e){var t=fr(),n=e.focusedElem,r=e.selectionRange;if(t!==n&&n&&n.ownerDocument&&dr(n.ownerDocument.documentElement,n)){if(null!==r&&pr(n))if(t=r.start,void 0===(e=r.end)&&(e=t),"selectionStart"in n)n.selectionStart=t,n.selectionEnd=Math.min(e,n.value.length);else if((e=(t=n.ownerDocument||document)&&t.defaultView||window).getSelection){e=e.getSelection();var i=n.textContent.length,a=Math.min(r.start,i);r=void 0===r.end?a:Math.min(r.end,i),!e.extend&&a>r&&(i=r,r=a,a=i),i=lr(n,a);var o=lr(n,r);i&&o&&(1!==e.rangeCount||e.anchorNode!==i.node||e.anchorOffset!==i.offset||e.focusNode!==o.node||e.focusOffset!==o.offset)&&((t=t.createRange()).setStart(i.node,i.offset),e.removeAllRanges(),a>r?(e.addRange(t),e.extend(o.node,o.offset)):(t.setEnd(o.node,o.offset),e.addRange(t)))}for(t=[],e=n;e=e.parentNode;)1===e.nodeType&&t.push({element:e,left:e.scrollLeft,top:e.scrollTop});for("function"===typeof n.focus&&n.focus(),n=0;n<t.length;n++)(e=t[n]).element.scrollLeft=e.left,e.element.scrollTop=e.top}}var vr=l&&"documentMode"in document&&11>=document.documentMode,mr=null,gr=null,br=null,yr=!1;function kr(e,t,n){var r=n.window===n?n.document:9===n.nodeType?n:n.ownerDocument;yr||null==mr||mr!==G(r)||("selectionStart"in(r=mr)&&pr(r)?r={start:r.selectionStart,end:r.selectionEnd}:r={anchorNode:(r=(r.ownerDocument&&r.ownerDocument.defaultView||window).getSelection()).anchorNode,anchorOffset:r.anchorOffset,focusNode:r.focusNode,focusOffset:r.focusOffset},br&&cr(br,r)||(br=r,0<(r=qr(gr,"onSelect")).length&&(t=new ln("onSelect","select",null,t,n),e.push({event:t,listeners:r}),t.target=mr)))}function wr(e,t){var n={};return n[e.toLowerCase()]=t.toLowerCase(),n["Webkit"+e]="webkit"+t,n["Moz"+e]="moz"+t,n}var Sr={animationend:wr("Animation","AnimationEnd"),animationiteration:wr("Animation","AnimationIteration"),animationstart:wr("Animation","AnimationStart"),transitionend:wr("Transition","TransitionEnd")},Cr={},Er={};function xr(e){if(Cr[e])return Cr[e];if(!Sr[e])return e;var t,n=Sr[e];for(t in n)if(n.hasOwnProperty(t)&&t in Er)return Cr[e]=n[t];return e}l&&(Er=document.createElement("div").style,"AnimationEvent"in window||(delete Sr.animationend.animation,delete Sr.animationiteration.animation,delete Sr.animationstart.animation),"TransitionEvent"in window||delete Sr.transitionend.transition);var Pr=xr("animationend"),Tr=xr("animationiteration"),Rr=xr("animationstart"),Nr=xr("transitionend"),Or=new Map,Ir="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function _r(e,t){Or.set(e,t),c(t,[e])}for(var Dr=0;Dr<Ir.length;Dr++){var Ar=Ir[Dr];_r(Ar.toLowerCase(),"on"+(Ar[0].toUpperCase()+Ar.slice(1)))}_r(Pr,"onAnimationEnd"),_r(Tr,"onAnimationIteration"),_r(Rr,"onAnimationStart"),_r("dblclick","onDoubleClick"),_r("focusin","onFocus"),_r("focusout","onBlur"),_r(Nr,"onTransitionEnd"),u("onMouseEnter",["mouseout","mouseover"]),u("onMouseLeave",["mouseout","mouseover"]),u("onPointerEnter",["pointerout","pointerover"]),u("onPointerLeave",["pointerout","pointerover"]),c("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),c("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),c("onBeforeInput",["compositionend","keypress","textInput","paste"]),c("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),c("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),c("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Lr="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),Mr=new Set("cancel close invalid load scroll toggle".split(" ").concat(Lr));function Ur(e,t,n){var r=e.type||"unknown-event";e.currentTarget=n,function(e,t,n,r,i,o,s,c,u){if(ze.apply(this,arguments),Me){if(!Me)throw Error(a(198));var l=Ue;Me=!1,Ue=null,Fe||(Fe=!0,je=l)}}(r,t,void 0,e),e.currentTarget=null}function Fr(e,t){t=0!==(4&t);for(var n=0;n<e.length;n++){var r=e[n],i=r.event;r=r.listeners;e:{var a=void 0;if(t)for(var o=r.length-1;0<=o;o--){var s=r[o],c=s.instance,u=s.currentTarget;if(s=s.listener,c!==a&&i.isPropagationStopped())break e;Ur(i,s,u),a=c}else for(o=0;o<r.length;o++){if(c=(s=r[o]).instance,u=s.currentTarget,s=s.listener,c!==a&&i.isPropagationStopped())break e;Ur(i,s,u),a=c}}}if(Fe)throw e=je,Fe=!1,je=null,e}function jr(e,t){var n=t[vi];void 0===n&&(n=t[vi]=new Set);var r=e+"__bubble";n.has(r)||(Vr(t,e,2,!1),n.add(r))}function Br(e,t,n){var r=0;t&&(r|=4),Vr(n,e,r,t)}var zr="_reactListening"+Math.random().toString(36).slice(2);function $r(e){if(!e[zr]){e[zr]=!0,o.forEach((function(t){"selectionchange"!==t&&(Mr.has(t)||Br(t,!1,e),Br(t,!0,e))}));var t=9===e.nodeType?e:e.ownerDocument;null===t||t[zr]||(t[zr]=!0,Br("selectionchange",!1,t))}}function Vr(e,t,n,r){switch(Zt(t)){case 1:var i=Wt;break;case 4:i=qt;break;default:i=Ht}n=i.bind(null,t,n,e),i=void 0,!De||"touchstart"!==t&&"touchmove"!==t&&"wheel"!==t||(i=!0),r?void 0!==i?e.addEventListener(t,n,{capture:!0,passive:i}):e.addEventListener(t,n,!0):void 0!==i?e.addEventListener(t,n,{passive:i}):e.addEventListener(t,n,!1)}function Jr(e,t,n,r,i){var a=r;if(0===(1&t)&&0===(2&t)&&null!==r)e:for(;;){if(null===r)return;var o=r.tag;if(3===o||4===o){var s=r.stateNode.containerInfo;if(s===i||8===s.nodeType&&s.parentNode===i)break;if(4===o)for(o=r.return;null!==o;){var c=o.tag;if((3===c||4===c)&&((c=o.stateNode.containerInfo)===i||8===c.nodeType&&c.parentNode===i))return;o=o.return}for(;null!==s;){if(null===(o=bi(s)))return;if(5===(c=o.tag)||6===c){r=a=o;continue e}s=s.parentNode}}r=r.return}Ie((function(){var r=a,i=we(n),o=[];e:{var s=Or.get(e);if(void 0!==s){var c=ln,u=e;switch(e){case"keypress":if(0===tn(n))break e;case"keydown":case"keyup":c=Tn;break;case"focusin":u="focus",c=mn;break;case"focusout":u="blur",c=mn;break;case"beforeblur":case"afterblur":c=mn;break;case"click":if(2===n.button)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":c=hn;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":c=vn;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":c=Nn;break;case Pr:case Tr:case Rr:c=gn;break;case Nr:c=On;break;case"scroll":c=fn;break;case"wheel":c=_n;break;case"copy":case"cut":case"paste":c=yn;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":c=Rn}var l=0!==(4&t),d=!l&&"scroll"===e,f=l?null!==s?s+"Capture":null:s;l=[];for(var p,h=r;null!==h;){var v=(p=h).stateNode;if(5===p.tag&&null!==v&&(p=v,null!==f&&(null!=(v=_e(h,f))&&l.push(Wr(h,v,p)))),d)break;h=h.return}0<l.length&&(s=new c(s,u,null,n,i),o.push({event:s,listeners:l}))}}if(0===(7&t)){if(c="mouseout"===e||"pointerout"===e,(!(s="mouseover"===e||"pointerover"===e)||n===ke||!(u=n.relatedTarget||n.fromElement)||!bi(u)&&!u[hi])&&(c||s)&&(s=i.window===i?i:(s=i.ownerDocument)?s.defaultView||s.parentWindow:window,c?(c=r,null!==(u=(u=n.relatedTarget||n.toElement)?bi(u):null)&&(u!==(d=$e(u))||5!==u.tag&&6!==u.tag)&&(u=null)):(c=null,u=r),c!==u)){if(l=hn,v="onMouseLeave",f="onMouseEnter",h="mouse","pointerout"!==e&&"pointerover"!==e||(l=Rn,v="onPointerLeave",f="onPointerEnter",h="pointer"),d=null==c?s:ki(c),p=null==u?s:ki(u),(s=new l(v,h+"leave",c,n,i)).target=d,s.relatedTarget=p,v=null,bi(i)===r&&((l=new l(f,h+"enter",u,n,i)).target=p,l.relatedTarget=d,v=l),d=v,c&&u)e:{for(f=u,h=0,p=l=c;p;p=Hr(p))h++;for(p=0,v=f;v;v=Hr(v))p++;for(;0<h-p;)l=Hr(l),h--;for(;0<p-h;)f=Hr(f),p--;for(;h--;){if(l===f||null!==f&&l===f.alternate)break e;l=Hr(l),f=Hr(f)}l=null}else l=null;null!==c&&Gr(o,s,c,l,!1),null!==u&&null!==d&&Gr(o,d,u,l,!0)}if("select"===(c=(s=r?ki(r):window).nodeName&&s.nodeName.toLowerCase())||"input"===c&&"file"===s.type)var m=Zn;else if(Jn(s))if(Kn)m=or;else{m=ir;var g=rr}else(c=s.nodeName)&&"input"===c.toLowerCase()&&("checkbox"===s.type||"radio"===s.type)&&(m=ar);switch(m&&(m=m(e,r))?Wn(o,m,n,i):(g&&g(e,s,r),"focusout"===e&&(g=s._wrapperState)&&g.controlled&&"number"===s.type&&ee(s,"number",s.value)),g=r?ki(r):window,e){case"focusin":(Jn(g)||"true"===g.contentEditable)&&(mr=g,gr=r,br=null);break;case"focusout":br=gr=mr=null;break;case"mousedown":yr=!0;break;case"contextmenu":case"mouseup":case"dragend":yr=!1,kr(o,n,i);break;case"selectionchange":if(vr)break;case"keydown":case"keyup":kr(o,n,i)}var b;if(An)e:{switch(e){case"compositionstart":var y="onCompositionStart";break e;case"compositionend":y="onCompositionEnd";break e;case"compositionupdate":y="onCompositionUpdate";break e}y=void 0}else $n?Bn(e,n)&&(y="onCompositionEnd"):"keydown"===e&&229===n.keyCode&&(y="onCompositionStart");y&&(Un&&"ko"!==n.locale&&($n||"onCompositionStart"!==y?"onCompositionEnd"===y&&$n&&(b=en()):(Yt="value"in(Kt=i)?Kt.value:Kt.textContent,$n=!0)),0<(g=qr(r,y)).length&&(y=new kn(y,e,null,n,i),o.push({event:y,listeners:g}),b?y.data=b:null!==(b=zn(n))&&(y.data=b))),(b=Mn?function(e,t){switch(e){case"compositionend":return zn(t);case"keypress":return 32!==t.which?null:(jn=!0,Fn);case"textInput":return(e=t.data)===Fn&&jn?null:e;default:return null}}(e,n):function(e,t){if($n)return"compositionend"===e||!An&&Bn(e,t)?(e=en(),Xt=Yt=Kt=null,$n=!1,e):null;switch(e){case"paste":default:return null;case"keypress":if(!(t.ctrlKey||t.altKey||t.metaKey)||t.ctrlKey&&t.altKey){if(t.char&&1<t.char.length)return t.char;if(t.which)return String.fromCharCode(t.which)}return null;case"compositionend":return Un&&"ko"!==t.locale?null:t.data}}(e,n))&&(0<(r=qr(r,"onBeforeInput")).length&&(i=new kn("onBeforeInput","beforeinput",null,n,i),o.push({event:i,listeners:r}),i.data=b))}Fr(o,t)}))}function Wr(e,t,n){return{instance:e,listener:t,currentTarget:n}}function qr(e,t){for(var n=t+"Capture",r=[];null!==e;){var i=e,a=i.stateNode;5===i.tag&&null!==a&&(i=a,null!=(a=_e(e,n))&&r.unshift(Wr(e,a,i)),null!=(a=_e(e,t))&&r.push(Wr(e,a,i))),e=e.return}return r}function Hr(e){if(null===e)return null;do{e=e.return}while(e&&5!==e.tag);return e||null}function Gr(e,t,n,r,i){for(var a=t._reactName,o=[];null!==n&&n!==r;){var s=n,c=s.alternate,u=s.stateNode;if(null!==c&&c===r)break;5===s.tag&&null!==u&&(s=u,i?null!=(c=_e(n,a))&&o.unshift(Wr(n,c,s)):i||null!=(c=_e(n,a))&&o.push(Wr(n,c,s))),n=n.return}0!==o.length&&e.push({event:t,listeners:o})}var Qr=/\r\n?/g,Zr=/\u0000|\uFFFD/g;function Kr(e){return("string"===typeof e?e:""+e).replace(Qr,"\n").replace(Zr,"")}function Yr(e,t,n){if(t=Kr(t),Kr(e)!==t&&n)throw Error(a(425))}function Xr(){}var ei=null,ti=null;function ni(e,t){return"textarea"===e||"noscript"===e||"string"===typeof t.children||"number"===typeof t.children||"object"===typeof t.dangerouslySetInnerHTML&&null!==t.dangerouslySetInnerHTML&&null!=t.dangerouslySetInnerHTML.__html}var ri="function"===typeof setTimeout?setTimeout:void 0,ii="function"===typeof clearTimeout?clearTimeout:void 0,ai="function"===typeof Promise?Promise:void 0,oi="function"===typeof queueMicrotask?queueMicrotask:"undefined"!==typeof ai?function(e){return ai.resolve(null).then(e).catch(si)}:ri;function si(e){setTimeout((function(){throw e}))}function ci(e,t){var n=t,r=0;do{var i=n.nextSibling;if(e.removeChild(n),i&&8===i.nodeType)if("/$"===(n=i.data)){if(0===r)return e.removeChild(i),void $t(t);r--}else"$"!==n&&"$?"!==n&&"$!"!==n||r++;n=i}while(n);$t(t)}function ui(e){for(;null!=e;e=e.nextSibling){var t=e.nodeType;if(1===t||3===t)break;if(8===t){if("$"===(t=e.data)||"$!"===t||"$?"===t)break;if("/$"===t)return null}}return e}function li(e){e=e.previousSibling;for(var t=0;e;){if(8===e.nodeType){var n=e.data;if("$"===n||"$!"===n||"$?"===n){if(0===t)return e;t--}else"/$"===n&&t++}e=e.previousSibling}return null}var di=Math.random().toString(36).slice(2),fi="__reactFiber$"+di,pi="__reactProps$"+di,hi="__reactContainer$"+di,vi="__reactEvents$"+di,mi="__reactListeners$"+di,gi="__reactHandles$"+di;function bi(e){var t=e[fi];if(t)return t;for(var n=e.parentNode;n;){if(t=n[hi]||n[fi]){if(n=t.alternate,null!==t.child||null!==n&&null!==n.child)for(e=li(e);null!==e;){if(n=e[fi])return n;e=li(e)}return t}n=(e=n).parentNode}return null}function yi(e){return!(e=e[fi]||e[hi])||5!==e.tag&&6!==e.tag&&13!==e.tag&&3!==e.tag?null:e}function ki(e){if(5===e.tag||6===e.tag)return e.stateNode;throw Error(a(33))}function wi(e){return e[pi]||null}var Si=[],Ci=-1;function Ei(e){return{current:e}}function xi(e){0>Ci||(e.current=Si[Ci],Si[Ci]=null,Ci--)}function Pi(e,t){Ci++,Si[Ci]=e.current,e.current=t}var Ti={},Ri=Ei(Ti),Ni=Ei(!1),Oi=Ti;function Ii(e,t){var n=e.type.contextTypes;if(!n)return Ti;var r=e.stateNode;if(r&&r.__reactInternalMemoizedUnmaskedChildContext===t)return r.__reactInternalMemoizedMaskedChildContext;var i,a={};for(i in n)a[i]=t[i];return r&&((e=e.stateNode).__reactInternalMemoizedUnmaskedChildContext=t,e.__reactInternalMemoizedMaskedChildContext=a),a}function _i(e){return null!==(e=e.childContextTypes)&&void 0!==e}function Di(){xi(Ni),xi(Ri)}function Ai(e,t,n){if(Ri.current!==Ti)throw Error(a(168));Pi(Ri,t),Pi(Ni,n)}function Li(e,t,n){var r=e.stateNode;if(t=t.childContextTypes,"function"!==typeof r.getChildContext)return n;for(var i in r=r.getChildContext())if(!(i in t))throw Error(a(108,V(e)||"Unknown",i));return U({},n,r)}function Mi(e){return e=(e=e.stateNode)&&e.__reactInternalMemoizedMergedChildContext||Ti,Oi=Ri.current,Pi(Ri,e),Pi(Ni,Ni.current),!0}function Ui(e,t,n){var r=e.stateNode;if(!r)throw Error(a(169));n?(e=Li(e,t,Oi),r.__reactInternalMemoizedMergedChildContext=e,xi(Ni),xi(Ri),Pi(Ri,e)):xi(Ni),Pi(Ni,n)}var Fi=null,ji=!1,Bi=!1;function zi(e){null===Fi?Fi=[e]:Fi.push(e)}function $i(){if(!Bi&&null!==Fi){Bi=!0;var e=0,t=yt;try{var n=Fi;for(yt=1;e<n.length;e++){var r=n[e];do{r=r(!0)}while(null!==r)}Fi=null,ji=!1}catch(i){throw null!==Fi&&(Fi=Fi.slice(e+1)),He(Xe,$i),i}finally{yt=t,Bi=!1}}return null}var Vi=[],Ji=0,Wi=null,qi=0,Hi=[],Gi=0,Qi=null,Zi=1,Ki="";function Yi(e,t){Vi[Ji++]=qi,Vi[Ji++]=Wi,Wi=e,qi=t}function Xi(e,t,n){Hi[Gi++]=Zi,Hi[Gi++]=Ki,Hi[Gi++]=Qi,Qi=e;var r=Zi;e=Ki;var i=32-ot(r)-1;r&=~(1<<i),n+=1;var a=32-ot(t)+i;if(30<a){var o=i-i%5;a=(r&(1<<o)-1).toString(32),r>>=o,i-=o,Zi=1<<32-ot(t)+i|n<<i|r,Ki=a+e}else Zi=1<<a|n<<i|r,Ki=e}function ea(e){null!==e.return&&(Yi(e,1),Xi(e,1,0))}function ta(e){for(;e===Wi;)Wi=Vi[--Ji],Vi[Ji]=null,qi=Vi[--Ji],Vi[Ji]=null;for(;e===Qi;)Qi=Hi[--Gi],Hi[Gi]=null,Ki=Hi[--Gi],Hi[Gi]=null,Zi=Hi[--Gi],Hi[Gi]=null}var na=null,ra=null,ia=!1,aa=null;function oa(e,t){var n=_u(5,null,null,0);n.elementType="DELETED",n.stateNode=t,n.return=e,null===(t=e.deletions)?(e.deletions=[n],e.flags|=16):t.push(n)}function sa(e,t){switch(e.tag){case 5:var n=e.type;return null!==(t=1!==t.nodeType||n.toLowerCase()!==t.nodeName.toLowerCase()?null:t)&&(e.stateNode=t,na=e,ra=ui(t.firstChild),!0);case 6:return null!==(t=""===e.pendingProps||3!==t.nodeType?null:t)&&(e.stateNode=t,na=e,ra=null,!0);case 13:return null!==(t=8!==t.nodeType?null:t)&&(n=null!==Qi?{id:Zi,overflow:Ki}:null,e.memoizedState={dehydrated:t,treeContext:n,retryLane:1073741824},(n=_u(18,null,null,0)).stateNode=t,n.return=e,e.child=n,na=e,ra=null,!0);default:return!1}}function ca(e){return 0!==(1&e.mode)&&0===(128&e.flags)}function ua(e){if(ia){var t=ra;if(t){var n=t;if(!sa(e,t)){if(ca(e))throw Error(a(418));t=ui(n.nextSibling);var r=na;t&&sa(e,t)?oa(r,n):(e.flags=-4097&e.flags|2,ia=!1,na=e)}}else{if(ca(e))throw Error(a(418));e.flags=-4097&e.flags|2,ia=!1,na=e}}}function la(e){for(e=e.return;null!==e&&5!==e.tag&&3!==e.tag&&13!==e.tag;)e=e.return;na=e}function da(e){if(e!==na)return!1;if(!ia)return la(e),ia=!0,!1;var t;if((t=3!==e.tag)&&!(t=5!==e.tag)&&(t="head"!==(t=e.type)&&"body"!==t&&!ni(e.type,e.memoizedProps)),t&&(t=ra)){if(ca(e))throw fa(),Error(a(418));for(;t;)oa(e,t),t=ui(t.nextSibling)}if(la(e),13===e.tag){if(!(e=null!==(e=e.memoizedState)?e.dehydrated:null))throw Error(a(317));e:{for(e=e.nextSibling,t=0;e;){if(8===e.nodeType){var n=e.data;if("/$"===n){if(0===t){ra=ui(e.nextSibling);break e}t--}else"$"!==n&&"$!"!==n&&"$?"!==n||t++}e=e.nextSibling}ra=null}}else ra=na?ui(e.stateNode.nextSibling):null;return!0}function fa(){for(var e=ra;e;)e=ui(e.nextSibling)}function pa(){ra=na=null,ia=!1}function ha(e){null===aa?aa=[e]:aa.push(e)}var va=k.ReactCurrentBatchConfig;function ma(e,t){if(e&&e.defaultProps){for(var n in t=U({},t),e=e.defaultProps)void 0===t[n]&&(t[n]=e[n]);return t}return t}var ga=Ei(null),ba=null,ya=null,ka=null;function wa(){ka=ya=ba=null}function Sa(e){var t=ga.current;xi(ga),e._currentValue=t}function Ca(e,t,n){for(;null!==e;){var r=e.alternate;if((e.childLanes&t)!==t?(e.childLanes|=t,null!==r&&(r.childLanes|=t)):null!==r&&(r.childLanes&t)!==t&&(r.childLanes|=t),e===n)break;e=e.return}}function Ea(e,t){ba=e,ka=ya=null,null!==(e=e.dependencies)&&null!==e.firstContext&&(0!==(e.lanes&t)&&(ks=!0),e.firstContext=null)}function xa(e){var t=e._currentValue;if(ka!==e)if(e={context:e,memoizedValue:t,next:null},null===ya){if(null===ba)throw Error(a(308));ya=e,ba.dependencies={lanes:0,firstContext:e}}else ya=ya.next=e;return t}var Pa=null;function Ta(e){null===Pa?Pa=[e]:Pa.push(e)}function Ra(e,t,n,r){var i=t.interleaved;return null===i?(n.next=n,Ta(t)):(n.next=i.next,i.next=n),t.interleaved=n,Na(e,r)}function Na(e,t){e.lanes|=t;var n=e.alternate;for(null!==n&&(n.lanes|=t),n=e,e=e.return;null!==e;)e.childLanes|=t,null!==(n=e.alternate)&&(n.childLanes|=t),n=e,e=e.return;return 3===n.tag?n.stateNode:null}var Oa=!1;function Ia(e){e.updateQueue={baseState:e.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function _a(e,t){e=e.updateQueue,t.updateQueue===e&&(t.updateQueue={baseState:e.baseState,firstBaseUpdate:e.firstBaseUpdate,lastBaseUpdate:e.lastBaseUpdate,shared:e.shared,effects:e.effects})}function Da(e,t){return{eventTime:e,lane:t,tag:0,payload:null,callback:null,next:null}}function Aa(e,t,n){var r=e.updateQueue;if(null===r)return null;if(r=r.shared,0!==(2&Nc)){var i=r.pending;return null===i?t.next=t:(t.next=i.next,i.next=t),r.pending=t,Na(e,n)}return null===(i=r.interleaved)?(t.next=t,Ta(r)):(t.next=i.next,i.next=t),r.interleaved=t,Na(e,n)}function La(e,t,n){if(null!==(t=t.updateQueue)&&(t=t.shared,0!==(4194240&n))){var r=t.lanes;n|=r&=e.pendingLanes,t.lanes=n,bt(e,n)}}function Ma(e,t){var n=e.updateQueue,r=e.alternate;if(null!==r&&n===(r=r.updateQueue)){var i=null,a=null;if(null!==(n=n.firstBaseUpdate)){do{var o={eventTime:n.eventTime,lane:n.lane,tag:n.tag,payload:n.payload,callback:n.callback,next:null};null===a?i=a=o:a=a.next=o,n=n.next}while(null!==n);null===a?i=a=t:a=a.next=t}else i=a=t;return n={baseState:r.baseState,firstBaseUpdate:i,lastBaseUpdate:a,shared:r.shared,effects:r.effects},void(e.updateQueue=n)}null===(e=n.lastBaseUpdate)?n.firstBaseUpdate=t:e.next=t,n.lastBaseUpdate=t}function Ua(e,t,n,r){var i=e.updateQueue;Oa=!1;var a=i.firstBaseUpdate,o=i.lastBaseUpdate,s=i.shared.pending;if(null!==s){i.shared.pending=null;var c=s,u=c.next;c.next=null,null===o?a=u:o.next=u,o=c;var l=e.alternate;null!==l&&((s=(l=l.updateQueue).lastBaseUpdate)!==o&&(null===s?l.firstBaseUpdate=u:s.next=u,l.lastBaseUpdate=c))}if(null!==a){var d=i.baseState;for(o=0,l=u=c=null,s=a;;){var f=s.lane,p=s.eventTime;if((r&f)===f){null!==l&&(l=l.next={eventTime:p,lane:0,tag:s.tag,payload:s.payload,callback:s.callback,next:null});e:{var h=e,v=s;switch(f=t,p=n,v.tag){case 1:if("function"===typeof(h=v.payload)){d=h.call(p,d,f);break e}d=h;break e;case 3:h.flags=-65537&h.flags|128;case 0:if(null===(f="function"===typeof(h=v.payload)?h.call(p,d,f):h)||void 0===f)break e;d=U({},d,f);break e;case 2:Oa=!0}}null!==s.callback&&0!==s.lane&&(e.flags|=64,null===(f=i.effects)?i.effects=[s]:f.push(s))}else p={eventTime:p,lane:f,tag:s.tag,payload:s.payload,callback:s.callback,next:null},null===l?(u=l=p,c=d):l=l.next=p,o|=f;if(null===(s=s.next)){if(null===(s=i.shared.pending))break;s=(f=s).next,f.next=null,i.lastBaseUpdate=f,i.shared.pending=null}}if(null===l&&(c=d),i.baseState=c,i.firstBaseUpdate=u,i.lastBaseUpdate=l,null!==(t=i.shared.interleaved)){i=t;do{o|=i.lane,i=i.next}while(i!==t)}else null===a&&(i.shared.lanes=0);Uc|=o,e.lanes=o,e.memoizedState=d}}function Fa(e,t,n){if(e=t.effects,t.effects=null,null!==e)for(t=0;t<e.length;t++){var r=e[t],i=r.callback;if(null!==i){if(r.callback=null,r=n,"function"!==typeof i)throw Error(a(191,i));i.call(r)}}}var ja=(new r.Component).refs;function Ba(e,t,n,r){n=null===(n=n(r,t=e.memoizedState))||void 0===n?t:U({},t,n),e.memoizedState=n,0===e.lanes&&(e.updateQueue.baseState=n)}var za={isMounted:function(e){return!!(e=e._reactInternals)&&$e(e)===e},enqueueSetState:function(e,t,n){e=e._reactInternals;var r=tu(),i=nu(e),a=Da(r,i);a.payload=t,void 0!==n&&null!==n&&(a.callback=n),null!==(t=Aa(e,a,i))&&(ru(t,e,i,r),La(t,e,i))},enqueueReplaceState:function(e,t,n){e=e._reactInternals;var r=tu(),i=nu(e),a=Da(r,i);a.tag=1,a.payload=t,void 0!==n&&null!==n&&(a.callback=n),null!==(t=Aa(e,a,i))&&(ru(t,e,i,r),La(t,e,i))},enqueueForceUpdate:function(e,t){e=e._reactInternals;var n=tu(),r=nu(e),i=Da(n,r);i.tag=2,void 0!==t&&null!==t&&(i.callback=t),null!==(t=Aa(e,i,r))&&(ru(t,e,r,n),La(t,e,r))}};function $a(e,t,n,r,i,a,o){return"function"===typeof(e=e.stateNode).shouldComponentUpdate?e.shouldComponentUpdate(r,a,o):!t.prototype||!t.prototype.isPureReactComponent||(!cr(n,r)||!cr(i,a))}function Va(e,t,n){var r=!1,i=Ti,a=t.contextType;return"object"===typeof a&&null!==a?a=xa(a):(i=_i(t)?Oi:Ri.current,a=(r=null!==(r=t.contextTypes)&&void 0!==r)?Ii(e,i):Ti),t=new t(n,a),e.memoizedState=null!==t.state&&void 0!==t.state?t.state:null,t.updater=za,e.stateNode=t,t._reactInternals=e,r&&((e=e.stateNode).__reactInternalMemoizedUnmaskedChildContext=i,e.__reactInternalMemoizedMaskedChildContext=a),t}function Ja(e,t,n,r){e=t.state,"function"===typeof t.componentWillReceiveProps&&t.componentWillReceiveProps(n,r),"function"===typeof t.UNSAFE_componentWillReceiveProps&&t.UNSAFE_componentWillReceiveProps(n,r),t.state!==e&&za.enqueueReplaceState(t,t.state,null)}function Wa(e,t,n,r){var i=e.stateNode;i.props=n,i.state=e.memoizedState,i.refs=ja,Ia(e);var a=t.contextType;"object"===typeof a&&null!==a?i.context=xa(a):(a=_i(t)?Oi:Ri.current,i.context=Ii(e,a)),i.state=e.memoizedState,"function"===typeof(a=t.getDerivedStateFromProps)&&(Ba(e,t,a,n),i.state=e.memoizedState),"function"===typeof t.getDerivedStateFromProps||"function"===typeof i.getSnapshotBeforeUpdate||"function"!==typeof i.UNSAFE_componentWillMount&&"function"!==typeof i.componentWillMount||(t=i.state,"function"===typeof i.componentWillMount&&i.componentWillMount(),"function"===typeof i.UNSAFE_componentWillMount&&i.UNSAFE_componentWillMount(),t!==i.state&&za.enqueueReplaceState(i,i.state,null),Ua(e,n,i,r),i.state=e.memoizedState),"function"===typeof i.componentDidMount&&(e.flags|=4194308)}function qa(e,t,n){if(null!==(e=n.ref)&&"function"!==typeof e&&"object"!==typeof e){if(n._owner){if(n=n._owner){if(1!==n.tag)throw Error(a(309));var r=n.stateNode}if(!r)throw Error(a(147,e));var i=r,o=""+e;return null!==t&&null!==t.ref&&"function"===typeof t.ref&&t.ref._stringRef===o?t.ref:(t=function(e){var t=i.refs;t===ja&&(t=i.refs={}),null===e?delete t[o]:t[o]=e},t._stringRef=o,t)}if("string"!==typeof e)throw Error(a(284));if(!n._owner)throw Error(a(290,e))}return e}function Ha(e,t){throw e=Object.prototype.toString.call(t),Error(a(31,"[object Object]"===e?"object with keys {"+Object.keys(t).join(", ")+"}":e))}function Ga(e){return(0,e._init)(e._payload)}function Qa(e){function t(t,n){if(e){var r=t.deletions;null===r?(t.deletions=[n],t.flags|=16):r.push(n)}}function n(n,r){if(!e)return null;for(;null!==r;)t(n,r),r=r.sibling;return null}function r(e,t){for(e=new Map;null!==t;)null!==t.key?e.set(t.key,t):e.set(t.index,t),t=t.sibling;return e}function i(e,t){return(e=Au(e,t)).index=0,e.sibling=null,e}function o(t,n,r){return t.index=r,e?null!==(r=t.alternate)?(r=r.index)<n?(t.flags|=2,n):r:(t.flags|=2,n):(t.flags|=1048576,n)}function s(t){return e&&null===t.alternate&&(t.flags|=2),t}function c(e,t,n,r){return null===t||6!==t.tag?((t=Fu(n,e.mode,r)).return=e,t):((t=i(t,n)).return=e,t)}function u(e,t,n,r){var a=n.type;return a===C?d(e,t,n.props.children,r,n.key):null!==t&&(t.elementType===a||"object"===typeof a&&null!==a&&a.$$typeof===_&&Ga(a)===t.type)?((r=i(t,n.props)).ref=qa(e,t,n),r.return=e,r):((r=Lu(n.type,n.key,n.props,null,e.mode,r)).ref=qa(e,t,n),r.return=e,r)}function l(e,t,n,r){return null===t||4!==t.tag||t.stateNode.containerInfo!==n.containerInfo||t.stateNode.implementation!==n.implementation?((t=ju(n,e.mode,r)).return=e,t):((t=i(t,n.children||[])).return=e,t)}function d(e,t,n,r,a){return null===t||7!==t.tag?((t=Mu(n,e.mode,r,a)).return=e,t):((t=i(t,n)).return=e,t)}function f(e,t,n){if("string"===typeof t&&""!==t||"number"===typeof t)return(t=Fu(""+t,e.mode,n)).return=e,t;if("object"===typeof t&&null!==t){switch(t.$$typeof){case w:return(n=Lu(t.type,t.key,t.props,null,e.mode,n)).ref=qa(e,null,t),n.return=e,n;case S:return(t=ju(t,e.mode,n)).return=e,t;case _:return f(e,(0,t._init)(t._payload),n)}if(te(t)||L(t))return(t=Mu(t,e.mode,n,null)).return=e,t;Ha(e,t)}return null}function p(e,t,n,r){var i=null!==t?t.key:null;if("string"===typeof n&&""!==n||"number"===typeof n)return null!==i?null:c(e,t,""+n,r);if("object"===typeof n&&null!==n){switch(n.$$typeof){case w:return n.key===i?u(e,t,n,r):null;case S:return n.key===i?l(e,t,n,r):null;case _:return p(e,t,(i=n._init)(n._payload),r)}if(te(n)||L(n))return null!==i?null:d(e,t,n,r,null);Ha(e,n)}return null}function h(e,t,n,r,i){if("string"===typeof r&&""!==r||"number"===typeof r)return c(t,e=e.get(n)||null,""+r,i);if("object"===typeof r&&null!==r){switch(r.$$typeof){case w:return u(t,e=e.get(null===r.key?n:r.key)||null,r,i);case S:return l(t,e=e.get(null===r.key?n:r.key)||null,r,i);case _:return h(e,t,n,(0,r._init)(r._payload),i)}if(te(r)||L(r))return d(t,e=e.get(n)||null,r,i,null);Ha(t,r)}return null}function v(i,a,s,c){for(var u=null,l=null,d=a,v=a=0,m=null;null!==d&&v<s.length;v++){d.index>v?(m=d,d=null):m=d.sibling;var g=p(i,d,s[v],c);if(null===g){null===d&&(d=m);break}e&&d&&null===g.alternate&&t(i,d),a=o(g,a,v),null===l?u=g:l.sibling=g,l=g,d=m}if(v===s.length)return n(i,d),ia&&Yi(i,v),u;if(null===d){for(;v<s.length;v++)null!==(d=f(i,s[v],c))&&(a=o(d,a,v),null===l?u=d:l.sibling=d,l=d);return ia&&Yi(i,v),u}for(d=r(i,d);v<s.length;v++)null!==(m=h(d,i,v,s[v],c))&&(e&&null!==m.alternate&&d.delete(null===m.key?v:m.key),a=o(m,a,v),null===l?u=m:l.sibling=m,l=m);return e&&d.forEach((function(e){return t(i,e)})),ia&&Yi(i,v),u}function m(i,s,c,u){var l=L(c);if("function"!==typeof l)throw Error(a(150));if(null==(c=l.call(c)))throw Error(a(151));for(var d=l=null,v=s,m=s=0,g=null,b=c.next();null!==v&&!b.done;m++,b=c.next()){v.index>m?(g=v,v=null):g=v.sibling;var y=p(i,v,b.value,u);if(null===y){null===v&&(v=g);break}e&&v&&null===y.alternate&&t(i,v),s=o(y,s,m),null===d?l=y:d.sibling=y,d=y,v=g}if(b.done)return n(i,v),ia&&Yi(i,m),l;if(null===v){for(;!b.done;m++,b=c.next())null!==(b=f(i,b.value,u))&&(s=o(b,s,m),null===d?l=b:d.sibling=b,d=b);return ia&&Yi(i,m),l}for(v=r(i,v);!b.done;m++,b=c.next())null!==(b=h(v,i,m,b.value,u))&&(e&&null!==b.alternate&&v.delete(null===b.key?m:b.key),s=o(b,s,m),null===d?l=b:d.sibling=b,d=b);return e&&v.forEach((function(e){return t(i,e)})),ia&&Yi(i,m),l}return function e(r,a,o,c){if("object"===typeof o&&null!==o&&o.type===C&&null===o.key&&(o=o.props.children),"object"===typeof o&&null!==o){switch(o.$$typeof){case w:e:{for(var u=o.key,l=a;null!==l;){if(l.key===u){if((u=o.type)===C){if(7===l.tag){n(r,l.sibling),(a=i(l,o.props.children)).return=r,r=a;break e}}else if(l.elementType===u||"object"===typeof u&&null!==u&&u.$$typeof===_&&Ga(u)===l.type){n(r,l.sibling),(a=i(l,o.props)).ref=qa(r,l,o),a.return=r,r=a;break e}n(r,l);break}t(r,l),l=l.sibling}o.type===C?((a=Mu(o.props.children,r.mode,c,o.key)).return=r,r=a):((c=Lu(o.type,o.key,o.props,null,r.mode,c)).ref=qa(r,a,o),c.return=r,r=c)}return s(r);case S:e:{for(l=o.key;null!==a;){if(a.key===l){if(4===a.tag&&a.stateNode.containerInfo===o.containerInfo&&a.stateNode.implementation===o.implementation){n(r,a.sibling),(a=i(a,o.children||[])).return=r,r=a;break e}n(r,a);break}t(r,a),a=a.sibling}(a=ju(o,r.mode,c)).return=r,r=a}return s(r);case _:return e(r,a,(l=o._init)(o._payload),c)}if(te(o))return v(r,a,o,c);if(L(o))return m(r,a,o,c);Ha(r,o)}return"string"===typeof o&&""!==o||"number"===typeof o?(o=""+o,null!==a&&6===a.tag?(n(r,a.sibling),(a=i(a,o)).return=r,r=a):(n(r,a),(a=Fu(o,r.mode,c)).return=r,r=a),s(r)):n(r,a)}}var Za=Qa(!0),Ka=Qa(!1),Ya={},Xa=Ei(Ya),eo=Ei(Ya),to=Ei(Ya);function no(e){if(e===Ya)throw Error(a(174));return e}function ro(e,t){switch(Pi(to,t),Pi(eo,e),Pi(Xa,Ya),e=t.nodeType){case 9:case 11:t=(t=t.documentElement)?t.namespaceURI:ce(null,"");break;default:t=ce(t=(e=8===e?t.parentNode:t).namespaceURI||null,e=e.tagName)}xi(Xa),Pi(Xa,t)}function io(){xi(Xa),xi(eo),xi(to)}function ao(e){no(to.current);var t=no(Xa.current),n=ce(t,e.type);t!==n&&(Pi(eo,e),Pi(Xa,n))}function oo(e){eo.current===e&&(xi(Xa),xi(eo))}var so=Ei(0);function co(e){for(var t=e;null!==t;){if(13===t.tag){var n=t.memoizedState;if(null!==n&&(null===(n=n.dehydrated)||"$?"===n.data||"$!"===n.data))return t}else if(19===t.tag&&void 0!==t.memoizedProps.revealOrder){if(0!==(128&t.flags))return t}else if(null!==t.child){t.child.return=t,t=t.child;continue}if(t===e)break;for(;null===t.sibling;){if(null===t.return||t.return===e)return null;t=t.return}t.sibling.return=t.return,t=t.sibling}return null}var uo=[];function lo(){for(var e=0;e<uo.length;e++)uo[e]._workInProgressVersionPrimary=null;uo.length=0}var fo=k.ReactCurrentDispatcher,po=k.ReactCurrentBatchConfig,ho=0,vo=null,mo=null,go=null,bo=!1,yo=!1,ko=0,wo=0;function So(){throw Error(a(321))}function Co(e,t){if(null===t)return!1;for(var n=0;n<t.length&&n<e.length;n++)if(!sr(e[n],t[n]))return!1;return!0}function Eo(e,t,n,r,i,o){if(ho=o,vo=t,t.memoizedState=null,t.updateQueue=null,t.lanes=0,fo.current=null===e||null===e.memoizedState?ss:cs,e=n(r,i),yo){o=0;do{if(yo=!1,ko=0,25<=o)throw Error(a(301));o+=1,go=mo=null,t.updateQueue=null,fo.current=us,e=n(r,i)}while(yo)}if(fo.current=os,t=null!==mo&&null!==mo.next,ho=0,go=mo=vo=null,bo=!1,t)throw Error(a(300));return e}function xo(){var e=0!==ko;return ko=0,e}function Po(){var e={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return null===go?vo.memoizedState=go=e:go=go.next=e,go}function To(){if(null===mo){var e=vo.alternate;e=null!==e?e.memoizedState:null}else e=mo.next;var t=null===go?vo.memoizedState:go.next;if(null!==t)go=t,mo=e;else{if(null===e)throw Error(a(310));e={memoizedState:(mo=e).memoizedState,baseState:mo.baseState,baseQueue:mo.baseQueue,queue:mo.queue,next:null},null===go?vo.memoizedState=go=e:go=go.next=e}return go}function Ro(e,t){return"function"===typeof t?t(e):t}function No(e){var t=To(),n=t.queue;if(null===n)throw Error(a(311));n.lastRenderedReducer=e;var r=mo,i=r.baseQueue,o=n.pending;if(null!==o){if(null!==i){var s=i.next;i.next=o.next,o.next=s}r.baseQueue=i=o,n.pending=null}if(null!==i){o=i.next,r=r.baseState;var c=s=null,u=null,l=o;do{var d=l.lane;if((ho&d)===d)null!==u&&(u=u.next={lane:0,action:l.action,hasEagerState:l.hasEagerState,eagerState:l.eagerState,next:null}),r=l.hasEagerState?l.eagerState:e(r,l.action);else{var f={lane:d,action:l.action,hasEagerState:l.hasEagerState,eagerState:l.eagerState,next:null};null===u?(c=u=f,s=r):u=u.next=f,vo.lanes|=d,Uc|=d}l=l.next}while(null!==l&&l!==o);null===u?s=r:u.next=c,sr(r,t.memoizedState)||(ks=!0),t.memoizedState=r,t.baseState=s,t.baseQueue=u,n.lastRenderedState=r}if(null!==(e=n.interleaved)){i=e;do{o=i.lane,vo.lanes|=o,Uc|=o,i=i.next}while(i!==e)}else null===i&&(n.lanes=0);return[t.memoizedState,n.dispatch]}function Oo(e){var t=To(),n=t.queue;if(null===n)throw Error(a(311));n.lastRenderedReducer=e;var r=n.dispatch,i=n.pending,o=t.memoizedState;if(null!==i){n.pending=null;var s=i=i.next;do{o=e(o,s.action),s=s.next}while(s!==i);sr(o,t.memoizedState)||(ks=!0),t.memoizedState=o,null===t.baseQueue&&(t.baseState=o),n.lastRenderedState=o}return[o,r]}function Io(){}function _o(e,t){var n=vo,r=To(),i=t(),o=!sr(r.memoizedState,i);if(o&&(r.memoizedState=i,ks=!0),r=r.queue,Jo(Lo.bind(null,n,r,e),[e]),r.getSnapshot!==t||o||null!==go&&1&go.memoizedState.tag){if(n.flags|=2048,jo(9,Ao.bind(null,n,r,i,t),void 0,null),null===Oc)throw Error(a(349));0!==(30&ho)||Do(n,t,i)}return i}function Do(e,t,n){e.flags|=16384,e={getSnapshot:t,value:n},null===(t=vo.updateQueue)?(t={lastEffect:null,stores:null},vo.updateQueue=t,t.stores=[e]):null===(n=t.stores)?t.stores=[e]:n.push(e)}function Ao(e,t,n,r){t.value=n,t.getSnapshot=r,Mo(t)&&Uo(e)}function Lo(e,t,n){return n((function(){Mo(t)&&Uo(e)}))}function Mo(e){var t=e.getSnapshot;e=e.value;try{var n=t();return!sr(e,n)}catch(r){return!0}}function Uo(e){var t=Na(e,1);null!==t&&ru(t,e,1,-1)}function Fo(e){var t=Po();return"function"===typeof e&&(e=e()),t.memoizedState=t.baseState=e,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:Ro,lastRenderedState:e},t.queue=e,e=e.dispatch=ns.bind(null,vo,e),[t.memoizedState,e]}function jo(e,t,n,r){return e={tag:e,create:t,destroy:n,deps:r,next:null},null===(t=vo.updateQueue)?(t={lastEffect:null,stores:null},vo.updateQueue=t,t.lastEffect=e.next=e):null===(n=t.lastEffect)?t.lastEffect=e.next=e:(r=n.next,n.next=e,e.next=r,t.lastEffect=e),e}function Bo(){return To().memoizedState}function zo(e,t,n,r){var i=Po();vo.flags|=e,i.memoizedState=jo(1|t,n,void 0,void 0===r?null:r)}function $o(e,t,n,r){var i=To();r=void 0===r?null:r;var a=void 0;if(null!==mo){var o=mo.memoizedState;if(a=o.destroy,null!==r&&Co(r,o.deps))return void(i.memoizedState=jo(t,n,a,r))}vo.flags|=e,i.memoizedState=jo(1|t,n,a,r)}function Vo(e,t){return zo(8390656,8,e,t)}function Jo(e,t){return $o(2048,8,e,t)}function Wo(e,t){return $o(4,2,e,t)}function qo(e,t){return $o(4,4,e,t)}function Ho(e,t){return"function"===typeof t?(e=e(),t(e),function(){t(null)}):null!==t&&void 0!==t?(e=e(),t.current=e,function(){t.current=null}):void 0}function Go(e,t,n){return n=null!==n&&void 0!==n?n.concat([e]):null,$o(4,4,Ho.bind(null,t,e),n)}function Qo(){}function Zo(e,t){var n=To();t=void 0===t?null:t;var r=n.memoizedState;return null!==r&&null!==t&&Co(t,r[1])?r[0]:(n.memoizedState=[e,t],e)}function Ko(e,t){var n=To();t=void 0===t?null:t;var r=n.memoizedState;return null!==r&&null!==t&&Co(t,r[1])?r[0]:(e=e(),n.memoizedState=[e,t],e)}function Yo(e,t,n){return 0===(21&ho)?(e.baseState&&(e.baseState=!1,ks=!0),e.memoizedState=n):(sr(n,t)||(n=vt(),vo.lanes|=n,Uc|=n,e.baseState=!0),t)}function Xo(e,t){var n=yt;yt=0!==n&&4>n?n:4,e(!0);var r=po.transition;po.transition={};try{e(!1),t()}finally{yt=n,po.transition=r}}function es(){return To().memoizedState}function ts(e,t,n){var r=nu(e);if(n={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null},rs(e))is(t,n);else if(null!==(n=Ra(e,t,n,r))){ru(n,e,r,tu()),as(n,t,r)}}function ns(e,t,n){var r=nu(e),i={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null};if(rs(e))is(t,i);else{var a=e.alternate;if(0===e.lanes&&(null===a||0===a.lanes)&&null!==(a=t.lastRenderedReducer))try{var o=t.lastRenderedState,s=a(o,n);if(i.hasEagerState=!0,i.eagerState=s,sr(s,o)){var c=t.interleaved;return null===c?(i.next=i,Ta(t)):(i.next=c.next,c.next=i),void(t.interleaved=i)}}catch(u){}null!==(n=Ra(e,t,i,r))&&(ru(n,e,r,i=tu()),as(n,t,r))}}function rs(e){var t=e.alternate;return e===vo||null!==t&&t===vo}function is(e,t){yo=bo=!0;var n=e.pending;null===n?t.next=t:(t.next=n.next,n.next=t),e.pending=t}function as(e,t,n){if(0!==(4194240&n)){var r=t.lanes;n|=r&=e.pendingLanes,t.lanes=n,bt(e,n)}}var os={readContext:xa,useCallback:So,useContext:So,useEffect:So,useImperativeHandle:So,useInsertionEffect:So,useLayoutEffect:So,useMemo:So,useReducer:So,useRef:So,useState:So,useDebugValue:So,useDeferredValue:So,useTransition:So,useMutableSource:So,useSyncExternalStore:So,useId:So,unstable_isNewReconciler:!1},ss={readContext:xa,useCallback:function(e,t){return Po().memoizedState=[e,void 0===t?null:t],e},useContext:xa,useEffect:Vo,useImperativeHandle:function(e,t,n){return n=null!==n&&void 0!==n?n.concat([e]):null,zo(4194308,4,Ho.bind(null,t,e),n)},useLayoutEffect:function(e,t){return zo(4194308,4,e,t)},useInsertionEffect:function(e,t){return zo(4,2,e,t)},useMemo:function(e,t){var n=Po();return t=void 0===t?null:t,e=e(),n.memoizedState=[e,t],e},useReducer:function(e,t,n){var r=Po();return t=void 0!==n?n(t):t,r.memoizedState=r.baseState=t,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:e,lastRenderedState:t},r.queue=e,e=e.dispatch=ts.bind(null,vo,e),[r.memoizedState,e]},useRef:function(e){return e={current:e},Po().memoizedState=e},useState:Fo,useDebugValue:Qo,useDeferredValue:function(e){return Po().memoizedState=e},useTransition:function(){var e=Fo(!1),t=e[0];return e=Xo.bind(null,e[1]),Po().memoizedState=e,[t,e]},useMutableSource:function(){},useSyncExternalStore:function(e,t,n){var r=vo,i=Po();if(ia){if(void 0===n)throw Error(a(407));n=n()}else{if(n=t(),null===Oc)throw Error(a(349));0!==(30&ho)||Do(r,t,n)}i.memoizedState=n;var o={value:n,getSnapshot:t};return i.queue=o,Vo(Lo.bind(null,r,o,e),[e]),r.flags|=2048,jo(9,Ao.bind(null,r,o,n,t),void 0,null),n},useId:function(){var e=Po(),t=Oc.identifierPrefix;if(ia){var n=Ki;t=":"+t+"R"+(n=(Zi&~(1<<32-ot(Zi)-1)).toString(32)+n),0<(n=ko++)&&(t+="H"+n.toString(32)),t+=":"}else t=":"+t+"r"+(n=wo++).toString(32)+":";return e.memoizedState=t},unstable_isNewReconciler:!1},cs={readContext:xa,useCallback:Zo,useContext:xa,useEffect:Jo,useImperativeHandle:Go,useInsertionEffect:Wo,useLayoutEffect:qo,useMemo:Ko,useReducer:No,useRef:Bo,useState:function(){return No(Ro)},useDebugValue:Qo,useDeferredValue:function(e){return Yo(To(),mo.memoizedState,e)},useTransition:function(){return[No(Ro)[0],To().memoizedState]},useMutableSource:Io,useSyncExternalStore:_o,useId:es,unstable_isNewReconciler:!1},us={readContext:xa,useCallback:Zo,useContext:xa,useEffect:Jo,useImperativeHandle:Go,useInsertionEffect:Wo,useLayoutEffect:qo,useMemo:Ko,useReducer:Oo,useRef:Bo,useState:function(){return Oo(Ro)},useDebugValue:Qo,useDeferredValue:function(e){var t=To();return null===mo?t.memoizedState=e:Yo(t,mo.memoizedState,e)},useTransition:function(){return[Oo(Ro)[0],To().memoizedState]},useMutableSource:Io,useSyncExternalStore:_o,useId:es,unstable_isNewReconciler:!1};function ls(e,t){try{var n="",r=t;do{n+=z(r),r=r.return}while(r);var i=n}catch(a){i="\nError generating stack: "+a.message+"\n"+a.stack}return{value:e,source:t,stack:i,digest:null}}function ds(e,t,n){return{value:e,source:null,stack:null!=n?n:null,digest:null!=t?t:null}}function fs(e,t){try{console.error(t.value)}catch(n){setTimeout((function(){throw n}))}}var ps="function"===typeof WeakMap?WeakMap:Map;function hs(e,t,n){(n=Da(-1,n)).tag=3,n.payload={element:null};var r=t.value;return n.callback=function(){Wc||(Wc=!0,qc=r),fs(0,t)},n}function vs(e,t,n){(n=Da(-1,n)).tag=3;var r=e.type.getDerivedStateFromError;if("function"===typeof r){var i=t.value;n.payload=function(){return r(i)},n.callback=function(){fs(0,t)}}var a=e.stateNode;return null!==a&&"function"===typeof a.componentDidCatch&&(n.callback=function(){fs(0,t),"function"!==typeof r&&(null===Hc?Hc=new Set([this]):Hc.add(this));var e=t.stack;this.componentDidCatch(t.value,{componentStack:null!==e?e:""})}),n}function ms(e,t,n){var r=e.pingCache;if(null===r){r=e.pingCache=new ps;var i=new Set;r.set(t,i)}else void 0===(i=r.get(t))&&(i=new Set,r.set(t,i));i.has(n)||(i.add(n),e=Pu.bind(null,e,t,n),t.then(e,e))}function gs(e){do{var t;if((t=13===e.tag)&&(t=null===(t=e.memoizedState)||null!==t.dehydrated),t)return e;e=e.return}while(null!==e);return null}function bs(e,t,n,r,i){return 0===(1&e.mode)?(e===t?e.flags|=65536:(e.flags|=128,n.flags|=131072,n.flags&=-52805,1===n.tag&&(null===n.alternate?n.tag=17:((t=Da(-1,1)).tag=2,Aa(n,t,1))),n.lanes|=1),e):(e.flags|=65536,e.lanes=i,e)}var ys=k.ReactCurrentOwner,ks=!1;function ws(e,t,n,r){t.child=null===e?Ka(t,null,n,r):Za(t,e.child,n,r)}function Ss(e,t,n,r,i){n=n.render;var a=t.ref;return Ea(t,i),r=Eo(e,t,n,r,a,i),n=xo(),null===e||ks?(ia&&n&&ea(t),t.flags|=1,ws(e,t,r,i),t.child):(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~i,Ws(e,t,i))}function Cs(e,t,n,r,i){if(null===e){var a=n.type;return"function"!==typeof a||Du(a)||void 0!==a.defaultProps||null!==n.compare||void 0!==n.defaultProps?((e=Lu(n.type,null,r,t,t.mode,i)).ref=t.ref,e.return=t,t.child=e):(t.tag=15,t.type=a,Es(e,t,a,r,i))}if(a=e.child,0===(e.lanes&i)){var o=a.memoizedProps;if((n=null!==(n=n.compare)?n:cr)(o,r)&&e.ref===t.ref)return Ws(e,t,i)}return t.flags|=1,(e=Au(a,r)).ref=t.ref,e.return=t,t.child=e}function Es(e,t,n,r,i){if(null!==e){var a=e.memoizedProps;if(cr(a,r)&&e.ref===t.ref){if(ks=!1,t.pendingProps=r=a,0===(e.lanes&i))return t.lanes=e.lanes,Ws(e,t,i);0!==(131072&e.flags)&&(ks=!0)}}return Ts(e,t,n,r,i)}function xs(e,t,n){var r=t.pendingProps,i=r.children,a=null!==e?e.memoizedState:null;if("hidden"===r.mode)if(0===(1&t.mode))t.memoizedState={baseLanes:0,cachePool:null,transitions:null},Pi(Ac,Dc),Dc|=n;else{if(0===(1073741824&n))return e=null!==a?a.baseLanes|n:n,t.lanes=t.childLanes=1073741824,t.memoizedState={baseLanes:e,cachePool:null,transitions:null},t.updateQueue=null,Pi(Ac,Dc),Dc|=e,null;t.memoizedState={baseLanes:0,cachePool:null,transitions:null},r=null!==a?a.baseLanes:n,Pi(Ac,Dc),Dc|=r}else null!==a?(r=a.baseLanes|n,t.memoizedState=null):r=n,Pi(Ac,Dc),Dc|=r;return ws(e,t,i,n),t.child}function Ps(e,t){var n=t.ref;(null===e&&null!==n||null!==e&&e.ref!==n)&&(t.flags|=512,t.flags|=2097152)}function Ts(e,t,n,r,i){var a=_i(n)?Oi:Ri.current;return a=Ii(t,a),Ea(t,i),n=Eo(e,t,n,r,a,i),r=xo(),null===e||ks?(ia&&r&&ea(t),t.flags|=1,ws(e,t,n,i),t.child):(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~i,Ws(e,t,i))}function Rs(e,t,n,r,i){if(_i(n)){var a=!0;Mi(t)}else a=!1;if(Ea(t,i),null===t.stateNode)Js(e,t),Va(t,n,r),Wa(t,n,r,i),r=!0;else if(null===e){var o=t.stateNode,s=t.memoizedProps;o.props=s;var c=o.context,u=n.contextType;"object"===typeof u&&null!==u?u=xa(u):u=Ii(t,u=_i(n)?Oi:Ri.current);var l=n.getDerivedStateFromProps,d="function"===typeof l||"function"===typeof o.getSnapshotBeforeUpdate;d||"function"!==typeof o.UNSAFE_componentWillReceiveProps&&"function"!==typeof o.componentWillReceiveProps||(s!==r||c!==u)&&Ja(t,o,r,u),Oa=!1;var f=t.memoizedState;o.state=f,Ua(t,r,o,i),c=t.memoizedState,s!==r||f!==c||Ni.current||Oa?("function"===typeof l&&(Ba(t,n,l,r),c=t.memoizedState),(s=Oa||$a(t,n,s,r,f,c,u))?(d||"function"!==typeof o.UNSAFE_componentWillMount&&"function"!==typeof o.componentWillMount||("function"===typeof o.componentWillMount&&o.componentWillMount(),"function"===typeof o.UNSAFE_componentWillMount&&o.UNSAFE_componentWillMount()),"function"===typeof o.componentDidMount&&(t.flags|=4194308)):("function"===typeof o.componentDidMount&&(t.flags|=4194308),t.memoizedProps=r,t.memoizedState=c),o.props=r,o.state=c,o.context=u,r=s):("function"===typeof o.componentDidMount&&(t.flags|=4194308),r=!1)}else{o=t.stateNode,_a(e,t),s=t.memoizedProps,u=t.type===t.elementType?s:ma(t.type,s),o.props=u,d=t.pendingProps,f=o.context,"object"===typeof(c=n.contextType)&&null!==c?c=xa(c):c=Ii(t,c=_i(n)?Oi:Ri.current);var p=n.getDerivedStateFromProps;(l="function"===typeof p||"function"===typeof o.getSnapshotBeforeUpdate)||"function"!==typeof o.UNSAFE_componentWillReceiveProps&&"function"!==typeof o.componentWillReceiveProps||(s!==d||f!==c)&&Ja(t,o,r,c),Oa=!1,f=t.memoizedState,o.state=f,Ua(t,r,o,i);var h=t.memoizedState;s!==d||f!==h||Ni.current||Oa?("function"===typeof p&&(Ba(t,n,p,r),h=t.memoizedState),(u=Oa||$a(t,n,u,r,f,h,c)||!1)?(l||"function"!==typeof o.UNSAFE_componentWillUpdate&&"function"!==typeof o.componentWillUpdate||("function"===typeof o.componentWillUpdate&&o.componentWillUpdate(r,h,c),"function"===typeof o.UNSAFE_componentWillUpdate&&o.UNSAFE_componentWillUpdate(r,h,c)),"function"===typeof o.componentDidUpdate&&(t.flags|=4),"function"===typeof o.getSnapshotBeforeUpdate&&(t.flags|=1024)):("function"!==typeof o.componentDidUpdate||s===e.memoizedProps&&f===e.memoizedState||(t.flags|=4),"function"!==typeof o.getSnapshotBeforeUpdate||s===e.memoizedProps&&f===e.memoizedState||(t.flags|=1024),t.memoizedProps=r,t.memoizedState=h),o.props=r,o.state=h,o.context=c,r=u):("function"!==typeof o.componentDidUpdate||s===e.memoizedProps&&f===e.memoizedState||(t.flags|=4),"function"!==typeof o.getSnapshotBeforeUpdate||s===e.memoizedProps&&f===e.memoizedState||(t.flags|=1024),r=!1)}return Ns(e,t,n,r,a,i)}function Ns(e,t,n,r,i,a){Ps(e,t);var o=0!==(128&t.flags);if(!r&&!o)return i&&Ui(t,n,!1),Ws(e,t,a);r=t.stateNode,ys.current=t;var s=o&&"function"!==typeof n.getDerivedStateFromError?null:r.render();return t.flags|=1,null!==e&&o?(t.child=Za(t,e.child,null,a),t.child=Za(t,null,s,a)):ws(e,t,s,a),t.memoizedState=r.state,i&&Ui(t,n,!0),t.child}function Os(e){var t=e.stateNode;t.pendingContext?Ai(0,t.pendingContext,t.pendingContext!==t.context):t.context&&Ai(0,t.context,!1),ro(e,t.containerInfo)}function Is(e,t,n,r,i){return pa(),ha(i),t.flags|=256,ws(e,t,n,r),t.child}var _s,Ds,As,Ls,Ms={dehydrated:null,treeContext:null,retryLane:0};function Us(e){return{baseLanes:e,cachePool:null,transitions:null}}function Fs(e,t,n){var r,i=t.pendingProps,o=so.current,s=!1,c=0!==(128&t.flags);if((r=c)||(r=(null===e||null!==e.memoizedState)&&0!==(2&o)),r?(s=!0,t.flags&=-129):null!==e&&null===e.memoizedState||(o|=1),Pi(so,1&o),null===e)return ua(t),null!==(e=t.memoizedState)&&null!==(e=e.dehydrated)?(0===(1&t.mode)?t.lanes=1:"$!"===e.data?t.lanes=8:t.lanes=1073741824,null):(c=i.children,e=i.fallback,s?(i=t.mode,s=t.child,c={mode:"hidden",children:c},0===(1&i)&&null!==s?(s.childLanes=0,s.pendingProps=c):s=Uu(c,i,0,null),e=Mu(e,i,n,null),s.return=t,e.return=t,s.sibling=e,t.child=s,t.child.memoizedState=Us(n),t.memoizedState=Ms,e):js(t,c));if(null!==(o=e.memoizedState)&&null!==(r=o.dehydrated))return function(e,t,n,r,i,o,s){if(n)return 256&t.flags?(t.flags&=-257,Bs(e,t,s,r=ds(Error(a(422))))):null!==t.memoizedState?(t.child=e.child,t.flags|=128,null):(o=r.fallback,i=t.mode,r=Uu({mode:"visible",children:r.children},i,0,null),(o=Mu(o,i,s,null)).flags|=2,r.return=t,o.return=t,r.sibling=o,t.child=r,0!==(1&t.mode)&&Za(t,e.child,null,s),t.child.memoizedState=Us(s),t.memoizedState=Ms,o);if(0===(1&t.mode))return Bs(e,t,s,null);if("$!"===i.data){if(r=i.nextSibling&&i.nextSibling.dataset)var c=r.dgst;return r=c,Bs(e,t,s,r=ds(o=Error(a(419)),r,void 0))}if(c=0!==(s&e.childLanes),ks||c){if(null!==(r=Oc)){switch(s&-s){case 4:i=2;break;case 16:i=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:i=32;break;case 536870912:i=268435456;break;default:i=0}0!==(i=0!==(i&(r.suspendedLanes|s))?0:i)&&i!==o.retryLane&&(o.retryLane=i,Na(e,i),ru(r,e,i,-1))}return mu(),Bs(e,t,s,r=ds(Error(a(421))))}return"$?"===i.data?(t.flags|=128,t.child=e.child,t=Ru.bind(null,e),i._reactRetry=t,null):(e=o.treeContext,ra=ui(i.nextSibling),na=t,ia=!0,aa=null,null!==e&&(Hi[Gi++]=Zi,Hi[Gi++]=Ki,Hi[Gi++]=Qi,Zi=e.id,Ki=e.overflow,Qi=t),t=js(t,r.children),t.flags|=4096,t)}(e,t,c,i,r,o,n);if(s){s=i.fallback,c=t.mode,r=(o=e.child).sibling;var u={mode:"hidden",children:i.children};return 0===(1&c)&&t.child!==o?((i=t.child).childLanes=0,i.pendingProps=u,t.deletions=null):(i=Au(o,u)).subtreeFlags=14680064&o.subtreeFlags,null!==r?s=Au(r,s):(s=Mu(s,c,n,null)).flags|=2,s.return=t,i.return=t,i.sibling=s,t.child=i,i=s,s=t.child,c=null===(c=e.child.memoizedState)?Us(n):{baseLanes:c.baseLanes|n,cachePool:null,transitions:c.transitions},s.memoizedState=c,s.childLanes=e.childLanes&~n,t.memoizedState=Ms,i}return e=(s=e.child).sibling,i=Au(s,{mode:"visible",children:i.children}),0===(1&t.mode)&&(i.lanes=n),i.return=t,i.sibling=null,null!==e&&(null===(n=t.deletions)?(t.deletions=[e],t.flags|=16):n.push(e)),t.child=i,t.memoizedState=null,i}function js(e,t){return(t=Uu({mode:"visible",children:t},e.mode,0,null)).return=e,e.child=t}function Bs(e,t,n,r){return null!==r&&ha(r),Za(t,e.child,null,n),(e=js(t,t.pendingProps.children)).flags|=2,t.memoizedState=null,e}function zs(e,t,n){e.lanes|=t;var r=e.alternate;null!==r&&(r.lanes|=t),Ca(e.return,t,n)}function $s(e,t,n,r,i){var a=e.memoizedState;null===a?e.memoizedState={isBackwards:t,rendering:null,renderingStartTime:0,last:r,tail:n,tailMode:i}:(a.isBackwards=t,a.rendering=null,a.renderingStartTime=0,a.last=r,a.tail=n,a.tailMode=i)}function Vs(e,t,n){var r=t.pendingProps,i=r.revealOrder,a=r.tail;if(ws(e,t,r.children,n),0!==(2&(r=so.current)))r=1&r|2,t.flags|=128;else{if(null!==e&&0!==(128&e.flags))e:for(e=t.child;null!==e;){if(13===e.tag)null!==e.memoizedState&&zs(e,n,t);else if(19===e.tag)zs(e,n,t);else if(null!==e.child){e.child.return=e,e=e.child;continue}if(e===t)break e;for(;null===e.sibling;){if(null===e.return||e.return===t)break e;e=e.return}e.sibling.return=e.return,e=e.sibling}r&=1}if(Pi(so,r),0===(1&t.mode))t.memoizedState=null;else switch(i){case"forwards":for(n=t.child,i=null;null!==n;)null!==(e=n.alternate)&&null===co(e)&&(i=n),n=n.sibling;null===(n=i)?(i=t.child,t.child=null):(i=n.sibling,n.sibling=null),$s(t,!1,i,n,a);break;case"backwards":for(n=null,i=t.child,t.child=null;null!==i;){if(null!==(e=i.alternate)&&null===co(e)){t.child=i;break}e=i.sibling,i.sibling=n,n=i,i=e}$s(t,!0,n,null,a);break;case"together":$s(t,!1,null,null,void 0);break;default:t.memoizedState=null}return t.child}function Js(e,t){0===(1&t.mode)&&null!==e&&(e.alternate=null,t.alternate=null,t.flags|=2)}function Ws(e,t,n){if(null!==e&&(t.dependencies=e.dependencies),Uc|=t.lanes,0===(n&t.childLanes))return null;if(null!==e&&t.child!==e.child)throw Error(a(153));if(null!==t.child){for(n=Au(e=t.child,e.pendingProps),t.child=n,n.return=t;null!==e.sibling;)e=e.sibling,(n=n.sibling=Au(e,e.pendingProps)).return=t;n.sibling=null}return t.child}function qs(e,t){if(!ia)switch(e.tailMode){case"hidden":t=e.tail;for(var n=null;null!==t;)null!==t.alternate&&(n=t),t=t.sibling;null===n?e.tail=null:n.sibling=null;break;case"collapsed":n=e.tail;for(var r=null;null!==n;)null!==n.alternate&&(r=n),n=n.sibling;null===r?t||null===e.tail?e.tail=null:e.tail.sibling=null:r.sibling=null}}function Hs(e){var t=null!==e.alternate&&e.alternate.child===e.child,n=0,r=0;if(t)for(var i=e.child;null!==i;)n|=i.lanes|i.childLanes,r|=14680064&i.subtreeFlags,r|=14680064&i.flags,i.return=e,i=i.sibling;else for(i=e.child;null!==i;)n|=i.lanes|i.childLanes,r|=i.subtreeFlags,r|=i.flags,i.return=e,i=i.sibling;return e.subtreeFlags|=r,e.childLanes=n,t}function Gs(e,t,n){var r=t.pendingProps;switch(ta(t),t.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Hs(t),null;case 1:case 17:return _i(t.type)&&Di(),Hs(t),null;case 3:return r=t.stateNode,io(),xi(Ni),xi(Ri),lo(),r.pendingContext&&(r.context=r.pendingContext,r.pendingContext=null),null!==e&&null!==e.child||(da(t)?t.flags|=4:null===e||e.memoizedState.isDehydrated&&0===(256&t.flags)||(t.flags|=1024,null!==aa&&(su(aa),aa=null))),Ds(e,t),Hs(t),null;case 5:oo(t);var i=no(to.current);if(n=t.type,null!==e&&null!=t.stateNode)As(e,t,n,r,i),e.ref!==t.ref&&(t.flags|=512,t.flags|=2097152);else{if(!r){if(null===t.stateNode)throw Error(a(166));return Hs(t),null}if(e=no(Xa.current),da(t)){r=t.stateNode,n=t.type;var o=t.memoizedProps;switch(r[fi]=t,r[pi]=o,e=0!==(1&t.mode),n){case"dialog":jr("cancel",r),jr("close",r);break;case"iframe":case"object":case"embed":jr("load",r);break;case"video":case"audio":for(i=0;i<Lr.length;i++)jr(Lr[i],r);break;case"source":jr("error",r);break;case"img":case"image":case"link":jr("error",r),jr("load",r);break;case"details":jr("toggle",r);break;case"input":Z(r,o),jr("invalid",r);break;case"select":r._wrapperState={wasMultiple:!!o.multiple},jr("invalid",r);break;case"textarea":ie(r,o),jr("invalid",r)}for(var c in be(n,o),i=null,o)if(o.hasOwnProperty(c)){var u=o[c];"children"===c?"string"===typeof u?r.textContent!==u&&(!0!==o.suppressHydrationWarning&&Yr(r.textContent,u,e),i=["children",u]):"number"===typeof u&&r.textContent!==""+u&&(!0!==o.suppressHydrationWarning&&Yr(r.textContent,u,e),i=["children",""+u]):s.hasOwnProperty(c)&&null!=u&&"onScroll"===c&&jr("scroll",r)}switch(n){case"input":q(r),X(r,o,!0);break;case"textarea":q(r),oe(r);break;case"select":case"option":break;default:"function"===typeof o.onClick&&(r.onclick=Xr)}r=i,t.updateQueue=r,null!==r&&(t.flags|=4)}else{c=9===i.nodeType?i:i.ownerDocument,"http://www.w3.org/1999/xhtml"===e&&(e=se(n)),"http://www.w3.org/1999/xhtml"===e?"script"===n?((e=c.createElement("div")).innerHTML="<script><\/script>",e=e.removeChild(e.firstChild)):"string"===typeof r.is?e=c.createElement(n,{is:r.is}):(e=c.createElement(n),"select"===n&&(c=e,r.multiple?c.multiple=!0:r.size&&(c.size=r.size))):e=c.createElementNS(e,n),e[fi]=t,e[pi]=r,_s(e,t,!1,!1),t.stateNode=e;e:{switch(c=ye(n,r),n){case"dialog":jr("cancel",e),jr("close",e),i=r;break;case"iframe":case"object":case"embed":jr("load",e),i=r;break;case"video":case"audio":for(i=0;i<Lr.length;i++)jr(Lr[i],e);i=r;break;case"source":jr("error",e),i=r;break;case"img":case"image":case"link":jr("error",e),jr("load",e),i=r;break;case"details":jr("toggle",e),i=r;break;case"input":Z(e,r),i=Q(e,r),jr("invalid",e);break;case"option":default:i=r;break;case"select":e._wrapperState={wasMultiple:!!r.multiple},i=U({},r,{value:void 0}),jr("invalid",e);break;case"textarea":ie(e,r),i=re(e,r),jr("invalid",e)}for(o in be(n,i),u=i)if(u.hasOwnProperty(o)){var l=u[o];"style"===o?me(e,l):"dangerouslySetInnerHTML"===o?null!=(l=l?l.__html:void 0)&&de(e,l):"children"===o?"string"===typeof l?("textarea"!==n||""!==l)&&fe(e,l):"number"===typeof l&&fe(e,""+l):"suppressContentEditableWarning"!==o&&"suppressHydrationWarning"!==o&&"autoFocus"!==o&&(s.hasOwnProperty(o)?null!=l&&"onScroll"===o&&jr("scroll",e):null!=l&&y(e,o,l,c))}switch(n){case"input":q(e),X(e,r,!1);break;case"textarea":q(e),oe(e);break;case"option":null!=r.value&&e.setAttribute("value",""+J(r.value));break;case"select":e.multiple=!!r.multiple,null!=(o=r.value)?ne(e,!!r.multiple,o,!1):null!=r.defaultValue&&ne(e,!!r.multiple,r.defaultValue,!0);break;default:"function"===typeof i.onClick&&(e.onclick=Xr)}switch(n){case"button":case"input":case"select":case"textarea":r=!!r.autoFocus;break e;case"img":r=!0;break e;default:r=!1}}r&&(t.flags|=4)}null!==t.ref&&(t.flags|=512,t.flags|=2097152)}return Hs(t),null;case 6:if(e&&null!=t.stateNode)Ls(e,t,e.memoizedProps,r);else{if("string"!==typeof r&&null===t.stateNode)throw Error(a(166));if(n=no(to.current),no(Xa.current),da(t)){if(r=t.stateNode,n=t.memoizedProps,r[fi]=t,(o=r.nodeValue!==n)&&null!==(e=na))switch(e.tag){case 3:Yr(r.nodeValue,n,0!==(1&e.mode));break;case 5:!0!==e.memoizedProps.suppressHydrationWarning&&Yr(r.nodeValue,n,0!==(1&e.mode))}o&&(t.flags|=4)}else(r=(9===n.nodeType?n:n.ownerDocument).createTextNode(r))[fi]=t,t.stateNode=r}return Hs(t),null;case 13:if(xi(so),r=t.memoizedState,null===e||null!==e.memoizedState&&null!==e.memoizedState.dehydrated){if(ia&&null!==ra&&0!==(1&t.mode)&&0===(128&t.flags))fa(),pa(),t.flags|=98560,o=!1;else if(o=da(t),null!==r&&null!==r.dehydrated){if(null===e){if(!o)throw Error(a(318));if(!(o=null!==(o=t.memoizedState)?o.dehydrated:null))throw Error(a(317));o[fi]=t}else pa(),0===(128&t.flags)&&(t.memoizedState=null),t.flags|=4;Hs(t),o=!1}else null!==aa&&(su(aa),aa=null),o=!0;if(!o)return 65536&t.flags?t:null}return 0!==(128&t.flags)?(t.lanes=n,t):((r=null!==r)!==(null!==e&&null!==e.memoizedState)&&r&&(t.child.flags|=8192,0!==(1&t.mode)&&(null===e||0!==(1&so.current)?0===Lc&&(Lc=3):mu())),null!==t.updateQueue&&(t.flags|=4),Hs(t),null);case 4:return io(),Ds(e,t),null===e&&$r(t.stateNode.containerInfo),Hs(t),null;case 10:return Sa(t.type._context),Hs(t),null;case 19:if(xi(so),null===(o=t.memoizedState))return Hs(t),null;if(r=0!==(128&t.flags),null===(c=o.rendering))if(r)qs(o,!1);else{if(0!==Lc||null!==e&&0!==(128&e.flags))for(e=t.child;null!==e;){if(null!==(c=co(e))){for(t.flags|=128,qs(o,!1),null!==(r=c.updateQueue)&&(t.updateQueue=r,t.flags|=4),t.subtreeFlags=0,r=n,n=t.child;null!==n;)e=r,(o=n).flags&=14680066,null===(c=o.alternate)?(o.childLanes=0,o.lanes=e,o.child=null,o.subtreeFlags=0,o.memoizedProps=null,o.memoizedState=null,o.updateQueue=null,o.dependencies=null,o.stateNode=null):(o.childLanes=c.childLanes,o.lanes=c.lanes,o.child=c.child,o.subtreeFlags=0,o.deletions=null,o.memoizedProps=c.memoizedProps,o.memoizedState=c.memoizedState,o.updateQueue=c.updateQueue,o.type=c.type,e=c.dependencies,o.dependencies=null===e?null:{lanes:e.lanes,firstContext:e.firstContext}),n=n.sibling;return Pi(so,1&so.current|2),t.child}e=e.sibling}null!==o.tail&&Ke()>Vc&&(t.flags|=128,r=!0,qs(o,!1),t.lanes=4194304)}else{if(!r)if(null!==(e=co(c))){if(t.flags|=128,r=!0,null!==(n=e.updateQueue)&&(t.updateQueue=n,t.flags|=4),qs(o,!0),null===o.tail&&"hidden"===o.tailMode&&!c.alternate&&!ia)return Hs(t),null}else 2*Ke()-o.renderingStartTime>Vc&&1073741824!==n&&(t.flags|=128,r=!0,qs(o,!1),t.lanes=4194304);o.isBackwards?(c.sibling=t.child,t.child=c):(null!==(n=o.last)?n.sibling=c:t.child=c,o.last=c)}return null!==o.tail?(t=o.tail,o.rendering=t,o.tail=t.sibling,o.renderingStartTime=Ke(),t.sibling=null,n=so.current,Pi(so,r?1&n|2:1&n),t):(Hs(t),null);case 22:case 23:return fu(),r=null!==t.memoizedState,null!==e&&null!==e.memoizedState!==r&&(t.flags|=8192),r&&0!==(1&t.mode)?0!==(1073741824&Dc)&&(Hs(t),6&t.subtreeFlags&&(t.flags|=8192)):Hs(t),null;case 24:case 25:return null}throw Error(a(156,t.tag))}function Qs(e,t){switch(ta(t),t.tag){case 1:return _i(t.type)&&Di(),65536&(e=t.flags)?(t.flags=-65537&e|128,t):null;case 3:return io(),xi(Ni),xi(Ri),lo(),0!==(65536&(e=t.flags))&&0===(128&e)?(t.flags=-65537&e|128,t):null;case 5:return oo(t),null;case 13:if(xi(so),null!==(e=t.memoizedState)&&null!==e.dehydrated){if(null===t.alternate)throw Error(a(340));pa()}return 65536&(e=t.flags)?(t.flags=-65537&e|128,t):null;case 19:return xi(so),null;case 4:return io(),null;case 10:return Sa(t.type._context),null;case 22:case 23:return fu(),null;default:return null}}_s=function(e,t){for(var n=t.child;null!==n;){if(5===n.tag||6===n.tag)e.appendChild(n.stateNode);else if(4!==n.tag&&null!==n.child){n.child.return=n,n=n.child;continue}if(n===t)break;for(;null===n.sibling;){if(null===n.return||n.return===t)return;n=n.return}n.sibling.return=n.return,n=n.sibling}},Ds=function(){},As=function(e,t,n,r){var i=e.memoizedProps;if(i!==r){e=t.stateNode,no(Xa.current);var a,o=null;switch(n){case"input":i=Q(e,i),r=Q(e,r),o=[];break;case"select":i=U({},i,{value:void 0}),r=U({},r,{value:void 0}),o=[];break;case"textarea":i=re(e,i),r=re(e,r),o=[];break;default:"function"!==typeof i.onClick&&"function"===typeof r.onClick&&(e.onclick=Xr)}for(l in be(n,r),n=null,i)if(!r.hasOwnProperty(l)&&i.hasOwnProperty(l)&&null!=i[l])if("style"===l){var c=i[l];for(a in c)c.hasOwnProperty(a)&&(n||(n={}),n[a]="")}else"dangerouslySetInnerHTML"!==l&&"children"!==l&&"suppressContentEditableWarning"!==l&&"suppressHydrationWarning"!==l&&"autoFocus"!==l&&(s.hasOwnProperty(l)?o||(o=[]):(o=o||[]).push(l,null));for(l in r){var u=r[l];if(c=null!=i?i[l]:void 0,r.hasOwnProperty(l)&&u!==c&&(null!=u||null!=c))if("style"===l)if(c){for(a in c)!c.hasOwnProperty(a)||u&&u.hasOwnProperty(a)||(n||(n={}),n[a]="");for(a in u)u.hasOwnProperty(a)&&c[a]!==u[a]&&(n||(n={}),n[a]=u[a])}else n||(o||(o=[]),o.push(l,n)),n=u;else"dangerouslySetInnerHTML"===l?(u=u?u.__html:void 0,c=c?c.__html:void 0,null!=u&&c!==u&&(o=o||[]).push(l,u)):"children"===l?"string"!==typeof u&&"number"!==typeof u||(o=o||[]).push(l,""+u):"suppressContentEditableWarning"!==l&&"suppressHydrationWarning"!==l&&(s.hasOwnProperty(l)?(null!=u&&"onScroll"===l&&jr("scroll",e),o||c===u||(o=[])):(o=o||[]).push(l,u))}n&&(o=o||[]).push("style",n);var l=o;(t.updateQueue=l)&&(t.flags|=4)}},Ls=function(e,t,n,r){n!==r&&(t.flags|=4)};var Zs=!1,Ks=!1,Ys="function"===typeof WeakSet?WeakSet:Set,Xs=null;function ec(e,t){var n=e.ref;if(null!==n)if("function"===typeof n)try{n(null)}catch(r){xu(e,t,r)}else n.current=null}function tc(e,t,n){try{n()}catch(r){xu(e,t,r)}}var nc=!1;function rc(e,t,n){var r=t.updateQueue;if(null!==(r=null!==r?r.lastEffect:null)){var i=r=r.next;do{if((i.tag&e)===e){var a=i.destroy;i.destroy=void 0,void 0!==a&&tc(t,n,a)}i=i.next}while(i!==r)}}function ic(e,t){if(null!==(t=null!==(t=t.updateQueue)?t.lastEffect:null)){var n=t=t.next;do{if((n.tag&e)===e){var r=n.create;n.destroy=r()}n=n.next}while(n!==t)}}function ac(e){var t=e.ref;if(null!==t){var n=e.stateNode;e.tag,e=n,"function"===typeof t?t(e):t.current=e}}function oc(e){var t=e.alternate;null!==t&&(e.alternate=null,oc(t)),e.child=null,e.deletions=null,e.sibling=null,5===e.tag&&(null!==(t=e.stateNode)&&(delete t[fi],delete t[pi],delete t[vi],delete t[mi],delete t[gi])),e.stateNode=null,e.return=null,e.dependencies=null,e.memoizedProps=null,e.memoizedState=null,e.pendingProps=null,e.stateNode=null,e.updateQueue=null}function sc(e){return 5===e.tag||3===e.tag||4===e.tag}function cc(e){e:for(;;){for(;null===e.sibling;){if(null===e.return||sc(e.return))return null;e=e.return}for(e.sibling.return=e.return,e=e.sibling;5!==e.tag&&6!==e.tag&&18!==e.tag;){if(2&e.flags)continue e;if(null===e.child||4===e.tag)continue e;e.child.return=e,e=e.child}if(!(2&e.flags))return e.stateNode}}function uc(e,t,n){var r=e.tag;if(5===r||6===r)e=e.stateNode,t?8===n.nodeType?n.parentNode.insertBefore(e,t):n.insertBefore(e,t):(8===n.nodeType?(t=n.parentNode).insertBefore(e,n):(t=n).appendChild(e),null!==(n=n._reactRootContainer)&&void 0!==n||null!==t.onclick||(t.onclick=Xr));else if(4!==r&&null!==(e=e.child))for(uc(e,t,n),e=e.sibling;null!==e;)uc(e,t,n),e=e.sibling}function lc(e,t,n){var r=e.tag;if(5===r||6===r)e=e.stateNode,t?n.insertBefore(e,t):n.appendChild(e);else if(4!==r&&null!==(e=e.child))for(lc(e,t,n),e=e.sibling;null!==e;)lc(e,t,n),e=e.sibling}var dc=null,fc=!1;function pc(e,t,n){for(n=n.child;null!==n;)hc(e,t,n),n=n.sibling}function hc(e,t,n){if(at&&"function"===typeof at.onCommitFiberUnmount)try{at.onCommitFiberUnmount(it,n)}catch(s){}switch(n.tag){case 5:Ks||ec(n,t);case 6:var r=dc,i=fc;dc=null,pc(e,t,n),fc=i,null!==(dc=r)&&(fc?(e=dc,n=n.stateNode,8===e.nodeType?e.parentNode.removeChild(n):e.removeChild(n)):dc.removeChild(n.stateNode));break;case 18:null!==dc&&(fc?(e=dc,n=n.stateNode,8===e.nodeType?ci(e.parentNode,n):1===e.nodeType&&ci(e,n),$t(e)):ci(dc,n.stateNode));break;case 4:r=dc,i=fc,dc=n.stateNode.containerInfo,fc=!0,pc(e,t,n),dc=r,fc=i;break;case 0:case 11:case 14:case 15:if(!Ks&&(null!==(r=n.updateQueue)&&null!==(r=r.lastEffect))){i=r=r.next;do{var a=i,o=a.destroy;a=a.tag,void 0!==o&&(0!==(2&a)||0!==(4&a))&&tc(n,t,o),i=i.next}while(i!==r)}pc(e,t,n);break;case 1:if(!Ks&&(ec(n,t),"function"===typeof(r=n.stateNode).componentWillUnmount))try{r.props=n.memoizedProps,r.state=n.memoizedState,r.componentWillUnmount()}catch(s){xu(n,t,s)}pc(e,t,n);break;case 21:pc(e,t,n);break;case 22:1&n.mode?(Ks=(r=Ks)||null!==n.memoizedState,pc(e,t,n),Ks=r):pc(e,t,n);break;default:pc(e,t,n)}}function vc(e){var t=e.updateQueue;if(null!==t){e.updateQueue=null;var n=e.stateNode;null===n&&(n=e.stateNode=new Ys),t.forEach((function(t){var r=Nu.bind(null,e,t);n.has(t)||(n.add(t),t.then(r,r))}))}}function mc(e,t){var n=t.deletions;if(null!==n)for(var r=0;r<n.length;r++){var i=n[r];try{var o=e,s=t,c=s;e:for(;null!==c;){switch(c.tag){case 5:dc=c.stateNode,fc=!1;break e;case 3:case 4:dc=c.stateNode.containerInfo,fc=!0;break e}c=c.return}if(null===dc)throw Error(a(160));hc(o,s,i),dc=null,fc=!1;var u=i.alternate;null!==u&&(u.return=null),i.return=null}catch(l){xu(i,t,l)}}if(12854&t.subtreeFlags)for(t=t.child;null!==t;)gc(t,e),t=t.sibling}function gc(e,t){var n=e.alternate,r=e.flags;switch(e.tag){case 0:case 11:case 14:case 15:if(mc(t,e),bc(e),4&r){try{rc(3,e,e.return),ic(3,e)}catch(m){xu(e,e.return,m)}try{rc(5,e,e.return)}catch(m){xu(e,e.return,m)}}break;case 1:mc(t,e),bc(e),512&r&&null!==n&&ec(n,n.return);break;case 5:if(mc(t,e),bc(e),512&r&&null!==n&&ec(n,n.return),32&e.flags){var i=e.stateNode;try{fe(i,"")}catch(m){xu(e,e.return,m)}}if(4&r&&null!=(i=e.stateNode)){var o=e.memoizedProps,s=null!==n?n.memoizedProps:o,c=e.type,u=e.updateQueue;if(e.updateQueue=null,null!==u)try{"input"===c&&"radio"===o.type&&null!=o.name&&K(i,o),ye(c,s);var l=ye(c,o);for(s=0;s<u.length;s+=2){var d=u[s],f=u[s+1];"style"===d?me(i,f):"dangerouslySetInnerHTML"===d?de(i,f):"children"===d?fe(i,f):y(i,d,f,l)}switch(c){case"input":Y(i,o);break;case"textarea":ae(i,o);break;case"select":var p=i._wrapperState.wasMultiple;i._wrapperState.wasMultiple=!!o.multiple;var h=o.value;null!=h?ne(i,!!o.multiple,h,!1):p!==!!o.multiple&&(null!=o.defaultValue?ne(i,!!o.multiple,o.defaultValue,!0):ne(i,!!o.multiple,o.multiple?[]:"",!1))}i[pi]=o}catch(m){xu(e,e.return,m)}}break;case 6:if(mc(t,e),bc(e),4&r){if(null===e.stateNode)throw Error(a(162));i=e.stateNode,o=e.memoizedProps;try{i.nodeValue=o}catch(m){xu(e,e.return,m)}}break;case 3:if(mc(t,e),bc(e),4&r&&null!==n&&n.memoizedState.isDehydrated)try{$t(t.containerInfo)}catch(m){xu(e,e.return,m)}break;case 4:default:mc(t,e),bc(e);break;case 13:mc(t,e),bc(e),8192&(i=e.child).flags&&(o=null!==i.memoizedState,i.stateNode.isHidden=o,!o||null!==i.alternate&&null!==i.alternate.memoizedState||($c=Ke())),4&r&&vc(e);break;case 22:if(d=null!==n&&null!==n.memoizedState,1&e.mode?(Ks=(l=Ks)||d,mc(t,e),Ks=l):mc(t,e),bc(e),8192&r){if(l=null!==e.memoizedState,(e.stateNode.isHidden=l)&&!d&&0!==(1&e.mode))for(Xs=e,d=e.child;null!==d;){for(f=Xs=d;null!==Xs;){switch(h=(p=Xs).child,p.tag){case 0:case 11:case 14:case 15:rc(4,p,p.return);break;case 1:ec(p,p.return);var v=p.stateNode;if("function"===typeof v.componentWillUnmount){r=p,n=p.return;try{t=r,v.props=t.memoizedProps,v.state=t.memoizedState,v.componentWillUnmount()}catch(m){xu(r,n,m)}}break;case 5:ec(p,p.return);break;case 22:if(null!==p.memoizedState){Sc(f);continue}}null!==h?(h.return=p,Xs=h):Sc(f)}d=d.sibling}e:for(d=null,f=e;;){if(5===f.tag){if(null===d){d=f;try{i=f.stateNode,l?"function"===typeof(o=i.style).setProperty?o.setProperty("display","none","important"):o.display="none":(c=f.stateNode,s=void 0!==(u=f.memoizedProps.style)&&null!==u&&u.hasOwnProperty("display")?u.display:null,c.style.display=ve("display",s))}catch(m){xu(e,e.return,m)}}}else if(6===f.tag){if(null===d)try{f.stateNode.nodeValue=l?"":f.memoizedProps}catch(m){xu(e,e.return,m)}}else if((22!==f.tag&&23!==f.tag||null===f.memoizedState||f===e)&&null!==f.child){f.child.return=f,f=f.child;continue}if(f===e)break e;for(;null===f.sibling;){if(null===f.return||f.return===e)break e;d===f&&(d=null),f=f.return}d===f&&(d=null),f.sibling.return=f.return,f=f.sibling}}break;case 19:mc(t,e),bc(e),4&r&&vc(e);case 21:}}function bc(e){var t=e.flags;if(2&t){try{e:{for(var n=e.return;null!==n;){if(sc(n)){var r=n;break e}n=n.return}throw Error(a(160))}switch(r.tag){case 5:var i=r.stateNode;32&r.flags&&(fe(i,""),r.flags&=-33),lc(e,cc(e),i);break;case 3:case 4:var o=r.stateNode.containerInfo;uc(e,cc(e),o);break;default:throw Error(a(161))}}catch(s){xu(e,e.return,s)}e.flags&=-3}4096&t&&(e.flags&=-4097)}function yc(e,t,n){Xs=e,kc(e,t,n)}function kc(e,t,n){for(var r=0!==(1&e.mode);null!==Xs;){var i=Xs,a=i.child;if(22===i.tag&&r){var o=null!==i.memoizedState||Zs;if(!o){var s=i.alternate,c=null!==s&&null!==s.memoizedState||Ks;s=Zs;var u=Ks;if(Zs=o,(Ks=c)&&!u)for(Xs=i;null!==Xs;)c=(o=Xs).child,22===o.tag&&null!==o.memoizedState?Cc(i):null!==c?(c.return=o,Xs=c):Cc(i);for(;null!==a;)Xs=a,kc(a,t,n),a=a.sibling;Xs=i,Zs=s,Ks=u}wc(e)}else 0!==(8772&i.subtreeFlags)&&null!==a?(a.return=i,Xs=a):wc(e)}}function wc(e){for(;null!==Xs;){var t=Xs;if(0!==(8772&t.flags)){var n=t.alternate;try{if(0!==(8772&t.flags))switch(t.tag){case 0:case 11:case 15:Ks||ic(5,t);break;case 1:var r=t.stateNode;if(4&t.flags&&!Ks)if(null===n)r.componentDidMount();else{var i=t.elementType===t.type?n.memoizedProps:ma(t.type,n.memoizedProps);r.componentDidUpdate(i,n.memoizedState,r.__reactInternalSnapshotBeforeUpdate)}var o=t.updateQueue;null!==o&&Fa(t,o,r);break;case 3:var s=t.updateQueue;if(null!==s){if(n=null,null!==t.child)switch(t.child.tag){case 5:case 1:n=t.child.stateNode}Fa(t,s,n)}break;case 5:var c=t.stateNode;if(null===n&&4&t.flags){n=c;var u=t.memoizedProps;switch(t.type){case"button":case"input":case"select":case"textarea":u.autoFocus&&n.focus();break;case"img":u.src&&(n.src=u.src)}}break;case 6:case 4:case 12:case 19:case 17:case 21:case 22:case 23:case 25:break;case 13:if(null===t.memoizedState){var l=t.alternate;if(null!==l){var d=l.memoizedState;if(null!==d){var f=d.dehydrated;null!==f&&$t(f)}}}break;default:throw Error(a(163))}Ks||512&t.flags&&ac(t)}catch(p){xu(t,t.return,p)}}if(t===e){Xs=null;break}if(null!==(n=t.sibling)){n.return=t.return,Xs=n;break}Xs=t.return}}function Sc(e){for(;null!==Xs;){var t=Xs;if(t===e){Xs=null;break}var n=t.sibling;if(null!==n){n.return=t.return,Xs=n;break}Xs=t.return}}function Cc(e){for(;null!==Xs;){var t=Xs;try{switch(t.tag){case 0:case 11:case 15:var n=t.return;try{ic(4,t)}catch(c){xu(t,n,c)}break;case 1:var r=t.stateNode;if("function"===typeof r.componentDidMount){var i=t.return;try{r.componentDidMount()}catch(c){xu(t,i,c)}}var a=t.return;try{ac(t)}catch(c){xu(t,a,c)}break;case 5:var o=t.return;try{ac(t)}catch(c){xu(t,o,c)}}}catch(c){xu(t,t.return,c)}if(t===e){Xs=null;break}var s=t.sibling;if(null!==s){s.return=t.return,Xs=s;break}Xs=t.return}}var Ec,xc=Math.ceil,Pc=k.ReactCurrentDispatcher,Tc=k.ReactCurrentOwner,Rc=k.ReactCurrentBatchConfig,Nc=0,Oc=null,Ic=null,_c=0,Dc=0,Ac=Ei(0),Lc=0,Mc=null,Uc=0,Fc=0,jc=0,Bc=null,zc=null,$c=0,Vc=1/0,Jc=null,Wc=!1,qc=null,Hc=null,Gc=!1,Qc=null,Zc=0,Kc=0,Yc=null,Xc=-1,eu=0;function tu(){return 0!==(6&Nc)?Ke():-1!==Xc?Xc:Xc=Ke()}function nu(e){return 0===(1&e.mode)?1:0!==(2&Nc)&&0!==_c?_c&-_c:null!==va.transition?(0===eu&&(eu=vt()),eu):0!==(e=yt)?e:e=void 0===(e=window.event)?16:Zt(e.type)}function ru(e,t,n,r){if(50<Kc)throw Kc=0,Yc=null,Error(a(185));gt(e,n,r),0!==(2&Nc)&&e===Oc||(e===Oc&&(0===(2&Nc)&&(Fc|=n),4===Lc&&cu(e,_c)),iu(e,r),1===n&&0===Nc&&0===(1&t.mode)&&(Vc=Ke()+500,ji&&$i()))}function iu(e,t){var n=e.callbackNode;!function(e,t){for(var n=e.suspendedLanes,r=e.pingedLanes,i=e.expirationTimes,a=e.pendingLanes;0<a;){var o=31-ot(a),s=1<<o,c=i[o];-1===c?0!==(s&n)&&0===(s&r)||(i[o]=pt(s,t)):c<=t&&(e.expiredLanes|=s),a&=~s}}(e,t);var r=ft(e,e===Oc?_c:0);if(0===r)null!==n&&Ge(n),e.callbackNode=null,e.callbackPriority=0;else if(t=r&-r,e.callbackPriority!==t){if(null!=n&&Ge(n),1===t)0===e.tag?function(e){ji=!0,zi(e)}(uu.bind(null,e)):zi(uu.bind(null,e)),oi((function(){0===(6&Nc)&&$i()})),n=null;else{switch(kt(r)){case 1:n=Xe;break;case 4:n=et;break;case 16:default:n=tt;break;case 536870912:n=rt}n=Ou(n,au.bind(null,e))}e.callbackPriority=t,e.callbackNode=n}}function au(e,t){if(Xc=-1,eu=0,0!==(6&Nc))throw Error(a(327));var n=e.callbackNode;if(Cu()&&e.callbackNode!==n)return null;var r=ft(e,e===Oc?_c:0);if(0===r)return null;if(0!==(30&r)||0!==(r&e.expiredLanes)||t)t=gu(e,r);else{t=r;var i=Nc;Nc|=2;var o=vu();for(Oc===e&&_c===t||(Jc=null,Vc=Ke()+500,pu(e,t));;)try{yu();break}catch(c){hu(e,c)}wa(),Pc.current=o,Nc=i,null!==Ic?t=0:(Oc=null,_c=0,t=Lc)}if(0!==t){if(2===t&&(0!==(i=ht(e))&&(r=i,t=ou(e,i))),1===t)throw n=Mc,pu(e,0),cu(e,r),iu(e,Ke()),n;if(6===t)cu(e,r);else{if(i=e.current.alternate,0===(30&r)&&!function(e){for(var t=e;;){if(16384&t.flags){var n=t.updateQueue;if(null!==n&&null!==(n=n.stores))for(var r=0;r<n.length;r++){var i=n[r],a=i.getSnapshot;i=i.value;try{if(!sr(a(),i))return!1}catch(s){return!1}}}if(n=t.child,16384&t.subtreeFlags&&null!==n)n.return=t,t=n;else{if(t===e)break;for(;null===t.sibling;){if(null===t.return||t.return===e)return!0;t=t.return}t.sibling.return=t.return,t=t.sibling}}return!0}(i)&&(2===(t=gu(e,r))&&(0!==(o=ht(e))&&(r=o,t=ou(e,o))),1===t))throw n=Mc,pu(e,0),cu(e,r),iu(e,Ke()),n;switch(e.finishedWork=i,e.finishedLanes=r,t){case 0:case 1:throw Error(a(345));case 2:case 5:Su(e,zc,Jc);break;case 3:if(cu(e,r),(130023424&r)===r&&10<(t=$c+500-Ke())){if(0!==ft(e,0))break;if(((i=e.suspendedLanes)&r)!==r){tu(),e.pingedLanes|=e.suspendedLanes&i;break}e.timeoutHandle=ri(Su.bind(null,e,zc,Jc),t);break}Su(e,zc,Jc);break;case 4:if(cu(e,r),(4194240&r)===r)break;for(t=e.eventTimes,i=-1;0<r;){var s=31-ot(r);o=1<<s,(s=t[s])>i&&(i=s),r&=~o}if(r=i,10<(r=(120>(r=Ke()-r)?120:480>r?480:1080>r?1080:1920>r?1920:3e3>r?3e3:4320>r?4320:1960*xc(r/1960))-r)){e.timeoutHandle=ri(Su.bind(null,e,zc,Jc),r);break}Su(e,zc,Jc);break;default:throw Error(a(329))}}}return iu(e,Ke()),e.callbackNode===n?au.bind(null,e):null}function ou(e,t){var n=Bc;return e.current.memoizedState.isDehydrated&&(pu(e,t).flags|=256),2!==(e=gu(e,t))&&(t=zc,zc=n,null!==t&&su(t)),e}function su(e){null===zc?zc=e:zc.push.apply(zc,e)}function cu(e,t){for(t&=~jc,t&=~Fc,e.suspendedLanes|=t,e.pingedLanes&=~t,e=e.expirationTimes;0<t;){var n=31-ot(t),r=1<<n;e[n]=-1,t&=~r}}function uu(e){if(0!==(6&Nc))throw Error(a(327));Cu();var t=ft(e,0);if(0===(1&t))return iu(e,Ke()),null;var n=gu(e,t);if(0!==e.tag&&2===n){var r=ht(e);0!==r&&(t=r,n=ou(e,r))}if(1===n)throw n=Mc,pu(e,0),cu(e,t),iu(e,Ke()),n;if(6===n)throw Error(a(345));return e.finishedWork=e.current.alternate,e.finishedLanes=t,Su(e,zc,Jc),iu(e,Ke()),null}function lu(e,t){var n=Nc;Nc|=1;try{return e(t)}finally{0===(Nc=n)&&(Vc=Ke()+500,ji&&$i())}}function du(e){null!==Qc&&0===Qc.tag&&0===(6&Nc)&&Cu();var t=Nc;Nc|=1;var n=Rc.transition,r=yt;try{if(Rc.transition=null,yt=1,e)return e()}finally{yt=r,Rc.transition=n,0===(6&(Nc=t))&&$i()}}function fu(){Dc=Ac.current,xi(Ac)}function pu(e,t){e.finishedWork=null,e.finishedLanes=0;var n=e.timeoutHandle;if(-1!==n&&(e.timeoutHandle=-1,ii(n)),null!==Ic)for(n=Ic.return;null!==n;){var r=n;switch(ta(r),r.tag){case 1:null!==(r=r.type.childContextTypes)&&void 0!==r&&Di();break;case 3:io(),xi(Ni),xi(Ri),lo();break;case 5:oo(r);break;case 4:io();break;case 13:case 19:xi(so);break;case 10:Sa(r.type._context);break;case 22:case 23:fu()}n=n.return}if(Oc=e,Ic=e=Au(e.current,null),_c=Dc=t,Lc=0,Mc=null,jc=Fc=Uc=0,zc=Bc=null,null!==Pa){for(t=0;t<Pa.length;t++)if(null!==(r=(n=Pa[t]).interleaved)){n.interleaved=null;var i=r.next,a=n.pending;if(null!==a){var o=a.next;a.next=i,r.next=o}n.pending=r}Pa=null}return e}function hu(e,t){for(;;){var n=Ic;try{if(wa(),fo.current=os,bo){for(var r=vo.memoizedState;null!==r;){var i=r.queue;null!==i&&(i.pending=null),r=r.next}bo=!1}if(ho=0,go=mo=vo=null,yo=!1,ko=0,Tc.current=null,null===n||null===n.return){Lc=1,Mc=t,Ic=null;break}e:{var o=e,s=n.return,c=n,u=t;if(t=_c,c.flags|=32768,null!==u&&"object"===typeof u&&"function"===typeof u.then){var l=u,d=c,f=d.tag;if(0===(1&d.mode)&&(0===f||11===f||15===f)){var p=d.alternate;p?(d.updateQueue=p.updateQueue,d.memoizedState=p.memoizedState,d.lanes=p.lanes):(d.updateQueue=null,d.memoizedState=null)}var h=gs(s);if(null!==h){h.flags&=-257,bs(h,s,c,0,t),1&h.mode&&ms(o,l,t),u=l;var v=(t=h).updateQueue;if(null===v){var m=new Set;m.add(u),t.updateQueue=m}else v.add(u);break e}if(0===(1&t)){ms(o,l,t),mu();break e}u=Error(a(426))}else if(ia&&1&c.mode){var g=gs(s);if(null!==g){0===(65536&g.flags)&&(g.flags|=256),bs(g,s,c,0,t),ha(ls(u,c));break e}}o=u=ls(u,c),4!==Lc&&(Lc=2),null===Bc?Bc=[o]:Bc.push(o),o=s;do{switch(o.tag){case 3:o.flags|=65536,t&=-t,o.lanes|=t,Ma(o,hs(0,u,t));break e;case 1:c=u;var b=o.type,y=o.stateNode;if(0===(128&o.flags)&&("function"===typeof b.getDerivedStateFromError||null!==y&&"function"===typeof y.componentDidCatch&&(null===Hc||!Hc.has(y)))){o.flags|=65536,t&=-t,o.lanes|=t,Ma(o,vs(o,c,t));break e}}o=o.return}while(null!==o)}wu(n)}catch(k){t=k,Ic===n&&null!==n&&(Ic=n=n.return);continue}break}}function vu(){var e=Pc.current;return Pc.current=os,null===e?os:e}function mu(){0!==Lc&&3!==Lc&&2!==Lc||(Lc=4),null===Oc||0===(268435455&Uc)&&0===(268435455&Fc)||cu(Oc,_c)}function gu(e,t){var n=Nc;Nc|=2;var r=vu();for(Oc===e&&_c===t||(Jc=null,pu(e,t));;)try{bu();break}catch(i){hu(e,i)}if(wa(),Nc=n,Pc.current=r,null!==Ic)throw Error(a(261));return Oc=null,_c=0,Lc}function bu(){for(;null!==Ic;)ku(Ic)}function yu(){for(;null!==Ic&&!Qe();)ku(Ic)}function ku(e){var t=Ec(e.alternate,e,Dc);e.memoizedProps=e.pendingProps,null===t?wu(e):Ic=t,Tc.current=null}function wu(e){var t=e;do{var n=t.alternate;if(e=t.return,0===(32768&t.flags)){if(null!==(n=Gs(n,t,Dc)))return void(Ic=n)}else{if(null!==(n=Qs(n,t)))return n.flags&=32767,void(Ic=n);if(null===e)return Lc=6,void(Ic=null);e.flags|=32768,e.subtreeFlags=0,e.deletions=null}if(null!==(t=t.sibling))return void(Ic=t);Ic=t=e}while(null!==t);0===Lc&&(Lc=5)}function Su(e,t,n){var r=yt,i=Rc.transition;try{Rc.transition=null,yt=1,function(e,t,n,r){do{Cu()}while(null!==Qc);if(0!==(6&Nc))throw Error(a(327));n=e.finishedWork;var i=e.finishedLanes;if(null===n)return null;if(e.finishedWork=null,e.finishedLanes=0,n===e.current)throw Error(a(177));e.callbackNode=null,e.callbackPriority=0;var o=n.lanes|n.childLanes;if(function(e,t){var n=e.pendingLanes&~t;e.pendingLanes=t,e.suspendedLanes=0,e.pingedLanes=0,e.expiredLanes&=t,e.mutableReadLanes&=t,e.entangledLanes&=t,t=e.entanglements;var r=e.eventTimes;for(e=e.expirationTimes;0<n;){var i=31-ot(n),a=1<<i;t[i]=0,r[i]=-1,e[i]=-1,n&=~a}}(e,o),e===Oc&&(Ic=Oc=null,_c=0),0===(2064&n.subtreeFlags)&&0===(2064&n.flags)||Gc||(Gc=!0,Ou(tt,(function(){return Cu(),null}))),o=0!==(15990&n.flags),0!==(15990&n.subtreeFlags)||o){o=Rc.transition,Rc.transition=null;var s=yt;yt=1;var c=Nc;Nc|=4,Tc.current=null,function(e,t){if(ei=Jt,pr(e=fr())){if("selectionStart"in e)var n={start:e.selectionStart,end:e.selectionEnd};else e:{var r=(n=(n=e.ownerDocument)&&n.defaultView||window).getSelection&&n.getSelection();if(r&&0!==r.rangeCount){n=r.anchorNode;var i=r.anchorOffset,o=r.focusNode;r=r.focusOffset;try{n.nodeType,o.nodeType}catch(w){n=null;break e}var s=0,c=-1,u=-1,l=0,d=0,f=e,p=null;t:for(;;){for(var h;f!==n||0!==i&&3!==f.nodeType||(c=s+i),f!==o||0!==r&&3!==f.nodeType||(u=s+r),3===f.nodeType&&(s+=f.nodeValue.length),null!==(h=f.firstChild);)p=f,f=h;for(;;){if(f===e)break t;if(p===n&&++l===i&&(c=s),p===o&&++d===r&&(u=s),null!==(h=f.nextSibling))break;p=(f=p).parentNode}f=h}n=-1===c||-1===u?null:{start:c,end:u}}else n=null}n=n||{start:0,end:0}}else n=null;for(ti={focusedElem:e,selectionRange:n},Jt=!1,Xs=t;null!==Xs;)if(e=(t=Xs).child,0!==(1028&t.subtreeFlags)&&null!==e)e.return=t,Xs=e;else for(;null!==Xs;){t=Xs;try{var v=t.alternate;if(0!==(1024&t.flags))switch(t.tag){case 0:case 11:case 15:case 5:case 6:case 4:case 17:break;case 1:if(null!==v){var m=v.memoizedProps,g=v.memoizedState,b=t.stateNode,y=b.getSnapshotBeforeUpdate(t.elementType===t.type?m:ma(t.type,m),g);b.__reactInternalSnapshotBeforeUpdate=y}break;case 3:var k=t.stateNode.containerInfo;1===k.nodeType?k.textContent="":9===k.nodeType&&k.documentElement&&k.removeChild(k.documentElement);break;default:throw Error(a(163))}}catch(w){xu(t,t.return,w)}if(null!==(e=t.sibling)){e.return=t.return,Xs=e;break}Xs=t.return}v=nc,nc=!1}(e,n),gc(n,e),hr(ti),Jt=!!ei,ti=ei=null,e.current=n,yc(n,e,i),Ze(),Nc=c,yt=s,Rc.transition=o}else e.current=n;if(Gc&&(Gc=!1,Qc=e,Zc=i),o=e.pendingLanes,0===o&&(Hc=null),function(e){if(at&&"function"===typeof at.onCommitFiberRoot)try{at.onCommitFiberRoot(it,e,void 0,128===(128&e.current.flags))}catch(t){}}(n.stateNode),iu(e,Ke()),null!==t)for(r=e.onRecoverableError,n=0;n<t.length;n++)i=t[n],r(i.value,{componentStack:i.stack,digest:i.digest});if(Wc)throw Wc=!1,e=qc,qc=null,e;0!==(1&Zc)&&0!==e.tag&&Cu(),o=e.pendingLanes,0!==(1&o)?e===Yc?Kc++:(Kc=0,Yc=e):Kc=0,$i()}(e,t,n,r)}finally{Rc.transition=i,yt=r}return null}function Cu(){if(null!==Qc){var e=kt(Zc),t=Rc.transition,n=yt;try{if(Rc.transition=null,yt=16>e?16:e,null===Qc)var r=!1;else{if(e=Qc,Qc=null,Zc=0,0!==(6&Nc))throw Error(a(331));var i=Nc;for(Nc|=4,Xs=e.current;null!==Xs;){var o=Xs,s=o.child;if(0!==(16&Xs.flags)){var c=o.deletions;if(null!==c){for(var u=0;u<c.length;u++){var l=c[u];for(Xs=l;null!==Xs;){var d=Xs;switch(d.tag){case 0:case 11:case 15:rc(8,d,o)}var f=d.child;if(null!==f)f.return=d,Xs=f;else for(;null!==Xs;){var p=(d=Xs).sibling,h=d.return;if(oc(d),d===l){Xs=null;break}if(null!==p){p.return=h,Xs=p;break}Xs=h}}}var v=o.alternate;if(null!==v){var m=v.child;if(null!==m){v.child=null;do{var g=m.sibling;m.sibling=null,m=g}while(null!==m)}}Xs=o}}if(0!==(2064&o.subtreeFlags)&&null!==s)s.return=o,Xs=s;else e:for(;null!==Xs;){if(0!==(2048&(o=Xs).flags))switch(o.tag){case 0:case 11:case 15:rc(9,o,o.return)}var b=o.sibling;if(null!==b){b.return=o.return,Xs=b;break e}Xs=o.return}}var y=e.current;for(Xs=y;null!==Xs;){var k=(s=Xs).child;if(0!==(2064&s.subtreeFlags)&&null!==k)k.return=s,Xs=k;else e:for(s=y;null!==Xs;){if(0!==(2048&(c=Xs).flags))try{switch(c.tag){case 0:case 11:case 15:ic(9,c)}}catch(S){xu(c,c.return,S)}if(c===s){Xs=null;break e}var w=c.sibling;if(null!==w){w.return=c.return,Xs=w;break e}Xs=c.return}}if(Nc=i,$i(),at&&"function"===typeof at.onPostCommitFiberRoot)try{at.onPostCommitFiberRoot(it,e)}catch(S){}r=!0}return r}finally{yt=n,Rc.transition=t}}return!1}function Eu(e,t,n){e=Aa(e,t=hs(0,t=ls(n,t),1),1),t=tu(),null!==e&&(gt(e,1,t),iu(e,t))}function xu(e,t,n){if(3===e.tag)Eu(e,e,n);else for(;null!==t;){if(3===t.tag){Eu(t,e,n);break}if(1===t.tag){var r=t.stateNode;if("function"===typeof t.type.getDerivedStateFromError||"function"===typeof r.componentDidCatch&&(null===Hc||!Hc.has(r))){t=Aa(t,e=vs(t,e=ls(n,e),1),1),e=tu(),null!==t&&(gt(t,1,e),iu(t,e));break}}t=t.return}}function Pu(e,t,n){var r=e.pingCache;null!==r&&r.delete(t),t=tu(),e.pingedLanes|=e.suspendedLanes&n,Oc===e&&(_c&n)===n&&(4===Lc||3===Lc&&(130023424&_c)===_c&&500>Ke()-$c?pu(e,0):jc|=n),iu(e,t)}function Tu(e,t){0===t&&(0===(1&e.mode)?t=1:(t=lt,0===(130023424&(lt<<=1))&&(lt=4194304)));var n=tu();null!==(e=Na(e,t))&&(gt(e,t,n),iu(e,n))}function Ru(e){var t=e.memoizedState,n=0;null!==t&&(n=t.retryLane),Tu(e,n)}function Nu(e,t){var n=0;switch(e.tag){case 13:var r=e.stateNode,i=e.memoizedState;null!==i&&(n=i.retryLane);break;case 19:r=e.stateNode;break;default:throw Error(a(314))}null!==r&&r.delete(t),Tu(e,n)}function Ou(e,t){return He(e,t)}function Iu(e,t,n,r){this.tag=e,this.key=n,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=t,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=r,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function _u(e,t,n,r){return new Iu(e,t,n,r)}function Du(e){return!(!(e=e.prototype)||!e.isReactComponent)}function Au(e,t){var n=e.alternate;return null===n?((n=_u(e.tag,t,e.key,e.mode)).elementType=e.elementType,n.type=e.type,n.stateNode=e.stateNode,n.alternate=e,e.alternate=n):(n.pendingProps=t,n.type=e.type,n.flags=0,n.subtreeFlags=0,n.deletions=null),n.flags=14680064&e.flags,n.childLanes=e.childLanes,n.lanes=e.lanes,n.child=e.child,n.memoizedProps=e.memoizedProps,n.memoizedState=e.memoizedState,n.updateQueue=e.updateQueue,t=e.dependencies,n.dependencies=null===t?null:{lanes:t.lanes,firstContext:t.firstContext},n.sibling=e.sibling,n.index=e.index,n.ref=e.ref,n}function Lu(e,t,n,r,i,o){var s=2;if(r=e,"function"===typeof e)Du(e)&&(s=1);else if("string"===typeof e)s=5;else e:switch(e){case C:return Mu(n.children,i,o,t);case E:s=8,i|=8;break;case x:return(e=_u(12,n,t,2|i)).elementType=x,e.lanes=o,e;case N:return(e=_u(13,n,t,i)).elementType=N,e.lanes=o,e;case O:return(e=_u(19,n,t,i)).elementType=O,e.lanes=o,e;case D:return Uu(n,i,o,t);default:if("object"===typeof e&&null!==e)switch(e.$$typeof){case P:s=10;break e;case T:s=9;break e;case R:s=11;break e;case I:s=14;break e;case _:s=16,r=null;break e}throw Error(a(130,null==e?e:typeof e,""))}return(t=_u(s,n,t,i)).elementType=e,t.type=r,t.lanes=o,t}function Mu(e,t,n,r){return(e=_u(7,e,r,t)).lanes=n,e}function Uu(e,t,n,r){return(e=_u(22,e,r,t)).elementType=D,e.lanes=n,e.stateNode={isHidden:!1},e}function Fu(e,t,n){return(e=_u(6,e,null,t)).lanes=n,e}function ju(e,t,n){return(t=_u(4,null!==e.children?e.children:[],e.key,t)).lanes=n,t.stateNode={containerInfo:e.containerInfo,pendingChildren:null,implementation:e.implementation},t}function Bu(e,t,n,r,i){this.tag=t,this.containerInfo=e,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=mt(0),this.expirationTimes=mt(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=mt(0),this.identifierPrefix=r,this.onRecoverableError=i,this.mutableSourceEagerHydrationData=null}function zu(e,t,n,r,i,a,o,s,c){return e=new Bu(e,t,n,s,c),1===t?(t=1,!0===a&&(t|=8)):t=0,a=_u(3,null,null,t),e.current=a,a.stateNode=e,a.memoizedState={element:r,isDehydrated:n,cache:null,transitions:null,pendingSuspenseBoundaries:null},Ia(a),e}function $u(e){if(!e)return Ti;e:{if($e(e=e._reactInternals)!==e||1!==e.tag)throw Error(a(170));var t=e;do{switch(t.tag){case 3:t=t.stateNode.context;break e;case 1:if(_i(t.type)){t=t.stateNode.__reactInternalMemoizedMergedChildContext;break e}}t=t.return}while(null!==t);throw Error(a(171))}if(1===e.tag){var n=e.type;if(_i(n))return Li(e,n,t)}return t}function Vu(e,t,n,r,i,a,o,s,c){return(e=zu(n,r,!0,e,0,a,0,s,c)).context=$u(null),n=e.current,(a=Da(r=tu(),i=nu(n))).callback=void 0!==t&&null!==t?t:null,Aa(n,a,i),e.current.lanes=i,gt(e,i,r),iu(e,r),e}function Ju(e,t,n,r){var i=t.current,a=tu(),o=nu(i);return n=$u(n),null===t.context?t.context=n:t.pendingContext=n,(t=Da(a,o)).payload={element:e},null!==(r=void 0===r?null:r)&&(t.callback=r),null!==(e=Aa(i,t,o))&&(ru(e,i,o,a),La(e,i,o)),o}function Wu(e){return(e=e.current).child?(e.child.tag,e.child.stateNode):null}function qu(e,t){if(null!==(e=e.memoizedState)&&null!==e.dehydrated){var n=e.retryLane;e.retryLane=0!==n&&n<t?n:t}}function Hu(e,t){qu(e,t),(e=e.alternate)&&qu(e,t)}Ec=function(e,t,n){if(null!==e)if(e.memoizedProps!==t.pendingProps||Ni.current)ks=!0;else{if(0===(e.lanes&n)&&0===(128&t.flags))return ks=!1,function(e,t,n){switch(t.tag){case 3:Os(t),pa();break;case 5:ao(t);break;case 1:_i(t.type)&&Mi(t);break;case 4:ro(t,t.stateNode.containerInfo);break;case 10:var r=t.type._context,i=t.memoizedProps.value;Pi(ga,r._currentValue),r._currentValue=i;break;case 13:if(null!==(r=t.memoizedState))return null!==r.dehydrated?(Pi(so,1&so.current),t.flags|=128,null):0!==(n&t.child.childLanes)?Fs(e,t,n):(Pi(so,1&so.current),null!==(e=Ws(e,t,n))?e.sibling:null);Pi(so,1&so.current);break;case 19:if(r=0!==(n&t.childLanes),0!==(128&e.flags)){if(r)return Vs(e,t,n);t.flags|=128}if(null!==(i=t.memoizedState)&&(i.rendering=null,i.tail=null,i.lastEffect=null),Pi(so,so.current),r)break;return null;case 22:case 23:return t.lanes=0,xs(e,t,n)}return Ws(e,t,n)}(e,t,n);ks=0!==(131072&e.flags)}else ks=!1,ia&&0!==(1048576&t.flags)&&Xi(t,qi,t.index);switch(t.lanes=0,t.tag){case 2:var r=t.type;Js(e,t),e=t.pendingProps;var i=Ii(t,Ri.current);Ea(t,n),i=Eo(null,t,r,e,i,n);var o=xo();return t.flags|=1,"object"===typeof i&&null!==i&&"function"===typeof i.render&&void 0===i.$$typeof?(t.tag=1,t.memoizedState=null,t.updateQueue=null,_i(r)?(o=!0,Mi(t)):o=!1,t.memoizedState=null!==i.state&&void 0!==i.state?i.state:null,Ia(t),i.updater=za,t.stateNode=i,i._reactInternals=t,Wa(t,r,e,n),t=Ns(null,t,r,!0,o,n)):(t.tag=0,ia&&o&&ea(t),ws(null,t,i,n),t=t.child),t;case 16:r=t.elementType;e:{switch(Js(e,t),e=t.pendingProps,r=(i=r._init)(r._payload),t.type=r,i=t.tag=function(e){if("function"===typeof e)return Du(e)?1:0;if(void 0!==e&&null!==e){if((e=e.$$typeof)===R)return 11;if(e===I)return 14}return 2}(r),e=ma(r,e),i){case 0:t=Ts(null,t,r,e,n);break e;case 1:t=Rs(null,t,r,e,n);break e;case 11:t=Ss(null,t,r,e,n);break e;case 14:t=Cs(null,t,r,ma(r.type,e),n);break e}throw Error(a(306,r,""))}return t;case 0:return r=t.type,i=t.pendingProps,Ts(e,t,r,i=t.elementType===r?i:ma(r,i),n);case 1:return r=t.type,i=t.pendingProps,Rs(e,t,r,i=t.elementType===r?i:ma(r,i),n);case 3:e:{if(Os(t),null===e)throw Error(a(387));r=t.pendingProps,i=(o=t.memoizedState).element,_a(e,t),Ua(t,r,null,n);var s=t.memoizedState;if(r=s.element,o.isDehydrated){if(o={element:r,isDehydrated:!1,cache:s.cache,pendingSuspenseBoundaries:s.pendingSuspenseBoundaries,transitions:s.transitions},t.updateQueue.baseState=o,t.memoizedState=o,256&t.flags){t=Is(e,t,r,n,i=ls(Error(a(423)),t));break e}if(r!==i){t=Is(e,t,r,n,i=ls(Error(a(424)),t));break e}for(ra=ui(t.stateNode.containerInfo.firstChild),na=t,ia=!0,aa=null,n=Ka(t,null,r,n),t.child=n;n;)n.flags=-3&n.flags|4096,n=n.sibling}else{if(pa(),r===i){t=Ws(e,t,n);break e}ws(e,t,r,n)}t=t.child}return t;case 5:return ao(t),null===e&&ua(t),r=t.type,i=t.pendingProps,o=null!==e?e.memoizedProps:null,s=i.children,ni(r,i)?s=null:null!==o&&ni(r,o)&&(t.flags|=32),Ps(e,t),ws(e,t,s,n),t.child;case 6:return null===e&&ua(t),null;case 13:return Fs(e,t,n);case 4:return ro(t,t.stateNode.containerInfo),r=t.pendingProps,null===e?t.child=Za(t,null,r,n):ws(e,t,r,n),t.child;case 11:return r=t.type,i=t.pendingProps,Ss(e,t,r,i=t.elementType===r?i:ma(r,i),n);case 7:return ws(e,t,t.pendingProps,n),t.child;case 8:case 12:return ws(e,t,t.pendingProps.children,n),t.child;case 10:e:{if(r=t.type._context,i=t.pendingProps,o=t.memoizedProps,s=i.value,Pi(ga,r._currentValue),r._currentValue=s,null!==o)if(sr(o.value,s)){if(o.children===i.children&&!Ni.current){t=Ws(e,t,n);break e}}else for(null!==(o=t.child)&&(o.return=t);null!==o;){var c=o.dependencies;if(null!==c){s=o.child;for(var u=c.firstContext;null!==u;){if(u.context===r){if(1===o.tag){(u=Da(-1,n&-n)).tag=2;var l=o.updateQueue;if(null!==l){var d=(l=l.shared).pending;null===d?u.next=u:(u.next=d.next,d.next=u),l.pending=u}}o.lanes|=n,null!==(u=o.alternate)&&(u.lanes|=n),Ca(o.return,n,t),c.lanes|=n;break}u=u.next}}else if(10===o.tag)s=o.type===t.type?null:o.child;else if(18===o.tag){if(null===(s=o.return))throw Error(a(341));s.lanes|=n,null!==(c=s.alternate)&&(c.lanes|=n),Ca(s,n,t),s=o.sibling}else s=o.child;if(null!==s)s.return=o;else for(s=o;null!==s;){if(s===t){s=null;break}if(null!==(o=s.sibling)){o.return=s.return,s=o;break}s=s.return}o=s}ws(e,t,i.children,n),t=t.child}return t;case 9:return i=t.type,r=t.pendingProps.children,Ea(t,n),r=r(i=xa(i)),t.flags|=1,ws(e,t,r,n),t.child;case 14:return i=ma(r=t.type,t.pendingProps),Cs(e,t,r,i=ma(r.type,i),n);case 15:return Es(e,t,t.type,t.pendingProps,n);case 17:return r=t.type,i=t.pendingProps,i=t.elementType===r?i:ma(r,i),Js(e,t),t.tag=1,_i(r)?(e=!0,Mi(t)):e=!1,Ea(t,n),Va(t,r,i),Wa(t,r,i,n),Ns(null,t,r,!0,e,n);case 19:return Vs(e,t,n);case 22:return xs(e,t,n)}throw Error(a(156,t.tag))};var Gu="function"===typeof reportError?reportError:function(e){console.error(e)};function Qu(e){this._internalRoot=e}function Zu(e){this._internalRoot=e}function Ku(e){return!(!e||1!==e.nodeType&&9!==e.nodeType&&11!==e.nodeType)}function Yu(e){return!(!e||1!==e.nodeType&&9!==e.nodeType&&11!==e.nodeType&&(8!==e.nodeType||" react-mount-point-unstable "!==e.nodeValue))}function Xu(){}function el(e,t,n,r,i){var a=n._reactRootContainer;if(a){var o=a;if("function"===typeof i){var s=i;i=function(){var e=Wu(o);s.call(e)}}Ju(t,o,e,i)}else o=function(e,t,n,r,i){if(i){if("function"===typeof r){var a=r;r=function(){var e=Wu(o);a.call(e)}}var o=Vu(t,r,e,0,null,!1,0,"",Xu);return e._reactRootContainer=o,e[hi]=o.current,$r(8===e.nodeType?e.parentNode:e),du(),o}for(;i=e.lastChild;)e.removeChild(i);if("function"===typeof r){var s=r;r=function(){var e=Wu(c);s.call(e)}}var c=zu(e,0,!1,null,0,!1,0,"",Xu);return e._reactRootContainer=c,e[hi]=c.current,$r(8===e.nodeType?e.parentNode:e),du((function(){Ju(t,c,n,r)})),c}(n,t,e,i,r);return Wu(o)}Zu.prototype.render=Qu.prototype.render=function(e){var t=this._internalRoot;if(null===t)throw Error(a(409));Ju(e,t,null,null)},Zu.prototype.unmount=Qu.prototype.unmount=function(){var e=this._internalRoot;if(null!==e){this._internalRoot=null;var t=e.containerInfo;du((function(){Ju(null,e,null,null)})),t[hi]=null}},Zu.prototype.unstable_scheduleHydration=function(e){if(e){var t=Et();e={blockedOn:null,target:e,priority:t};for(var n=0;n<Dt.length&&0!==t&&t<Dt[n].priority;n++);Dt.splice(n,0,e),0===n&&Ut(e)}},wt=function(e){switch(e.tag){case 3:var t=e.stateNode;if(t.current.memoizedState.isDehydrated){var n=dt(t.pendingLanes);0!==n&&(bt(t,1|n),iu(t,Ke()),0===(6&Nc)&&(Vc=Ke()+500,$i()))}break;case 13:du((function(){var t=Na(e,1);if(null!==t){var n=tu();ru(t,e,1,n)}})),Hu(e,1)}},St=function(e){if(13===e.tag){var t=Na(e,134217728);if(null!==t)ru(t,e,134217728,tu());Hu(e,134217728)}},Ct=function(e){if(13===e.tag){var t=nu(e),n=Na(e,t);if(null!==n)ru(n,e,t,tu());Hu(e,t)}},Et=function(){return yt},xt=function(e,t){var n=yt;try{return yt=e,t()}finally{yt=n}},Se=function(e,t,n){switch(t){case"input":if(Y(e,n),t=n.name,"radio"===n.type&&null!=t){for(n=e;n.parentNode;)n=n.parentNode;for(n=n.querySelectorAll("input[name="+JSON.stringify(""+t)+'][type="radio"]'),t=0;t<n.length;t++){var r=n[t];if(r!==e&&r.form===e.form){var i=wi(r);if(!i)throw Error(a(90));H(r),Y(r,i)}}}break;case"textarea":ae(e,n);break;case"select":null!=(t=n.value)&&ne(e,!!n.multiple,t,!1)}},Re=lu,Ne=du;var tl={usingClientEntryPoint:!1,Events:[yi,ki,wi,Pe,Te,lu]},nl={findFiberByHostInstance:bi,bundleType:0,version:"18.2.0",rendererPackageName:"react-dom"},rl={bundleType:nl.bundleType,version:nl.version,rendererPackageName:nl.rendererPackageName,rendererConfig:nl.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:k.ReactCurrentDispatcher,findHostInstanceByFiber:function(e){return null===(e=We(e))?null:e.stateNode},findFiberByHostInstance:nl.findFiberByHostInstance||function(){return null},findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.2.0-next-9e3b772b8-20220608"};if("undefined"!==typeof __REACT_DEVTOOLS_GLOBAL_HOOK__){var il=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!il.isDisabled&&il.supportsFiber)try{it=il.inject(rl),at=il}catch(le){}}t.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=tl,t.createPortal=function(e,t){var n=2<arguments.length&&void 0!==arguments[2]?arguments[2]:null;if(!Ku(t))throw Error(a(200));return function(e,t,n){var r=3<arguments.length&&void 0!==arguments[3]?arguments[3]:null;return{$$typeof:S,key:null==r?null:""+r,children:e,containerInfo:t,implementation:n}}(e,t,null,n)},t.createRoot=function(e,t){if(!Ku(e))throw Error(a(299));var n=!1,r="",i=Gu;return null!==t&&void 0!==t&&(!0===t.unstable_strictMode&&(n=!0),void 0!==t.identifierPrefix&&(r=t.identifierPrefix),void 0!==t.onRecoverableError&&(i=t.onRecoverableError)),t=zu(e,1,!1,null,0,n,0,r,i),e[hi]=t.current,$r(8===e.nodeType?e.parentNode:e),new Qu(t)},t.findDOMNode=function(e){if(null==e)return null;if(1===e.nodeType)return e;var t=e._reactInternals;if(void 0===t){if("function"===typeof e.render)throw Error(a(188));throw e=Object.keys(e).join(","),Error(a(268,e))}return e=null===(e=We(t))?null:e.stateNode},t.flushSync=function(e){return du(e)},t.hydrate=function(e,t,n){if(!Yu(t))throw Error(a(200));return el(null,e,t,!0,n)},t.hydrateRoot=function(e,t,n){if(!Ku(e))throw Error(a(405));var r=null!=n&&n.hydratedSources||null,i=!1,o="",s=Gu;if(null!==n&&void 0!==n&&(!0===n.unstable_strictMode&&(i=!0),void 0!==n.identifierPrefix&&(o=n.identifierPrefix),void 0!==n.onRecoverableError&&(s=n.onRecoverableError)),t=Vu(t,null,e,1,null!=n?n:null,i,0,o,s),e[hi]=t.current,$r(e),r)for(e=0;e<r.length;e++)i=(i=(n=r[e])._getVersion)(n._source),null==t.mutableSourceEagerHydrationData?t.mutableSourceEagerHydrationData=[n,i]:t.mutableSourceEagerHydrationData.push(n,i);return new Zu(t)},t.render=function(e,t,n){if(!Yu(t))throw Error(a(200));return el(null,e,t,!1,n)},t.unmountComponentAtNode=function(e){if(!Yu(e))throw Error(a(40));return!!e._reactRootContainer&&(du((function(){el(null,null,e,!1,(function(){e._reactRootContainer=null,e[hi]=null}))})),!0)},t.unstable_batchedUpdates=lu,t.unstable_renderSubtreeIntoContainer=function(e,t,n,r){if(!Yu(n))throw Error(a(200));if(null==e||void 0===e._reactInternals)throw Error(a(38));return el(e,t,n,!1,r)},t.version="18.2.0-next-9e3b772b8-20220608"},250:function(e,t,n){"use strict";var r=n(164);t.createRoot=r.createRoot,t.hydrateRoot=r.hydrateRoot},164:function(e,t,n){"use strict";!function e(){if("undefined"!==typeof __REACT_DEVTOOLS_GLOBAL_HOOK__&&"function"===typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE)try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(e)}catch(t){console.error(t)}}(),e.exports=n(463)},374:function(e,t,n){"use strict";var r=n(791),i=Symbol.for("react.element"),a=Symbol.for("react.fragment"),o=Object.prototype.hasOwnProperty,s=r.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,c={key:!0,ref:!0,__self:!0,__source:!0};function u(e,t,n){var r,a={},u=null,l=null;for(r in void 0!==n&&(u=""+n),void 0!==t.key&&(u=""+t.key),void 0!==t.ref&&(l=t.ref),t)o.call(t,r)&&!c.hasOwnProperty(r)&&(a[r]=t[r]);if(e&&e.defaultProps)for(r in t=e.defaultProps)void 0===a[r]&&(a[r]=t[r]);return{$$typeof:i,type:e,key:u,ref:l,props:a,_owner:s.current}}t.jsx=u},117:function(e,t){"use strict";var n=Symbol.for("react.element"),r=Symbol.for("react.portal"),i=Symbol.for("react.fragment"),a=Symbol.for("react.strict_mode"),o=Symbol.for("react.profiler"),s=Symbol.for("react.provider"),c=Symbol.for("react.context"),u=Symbol.for("react.forward_ref"),l=Symbol.for("react.suspense"),d=Symbol.for("react.memo"),f=Symbol.for("react.lazy"),p=Symbol.iterator;var h={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},v=Object.assign,m={};function g(e,t,n){this.props=e,this.context=t,this.refs=m,this.updater=n||h}function b(){}function y(e,t,n){this.props=e,this.context=t,this.refs=m,this.updater=n||h}g.prototype.isReactComponent={},g.prototype.setState=function(e,t){if("object"!==typeof e&&"function"!==typeof e&&null!=e)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,e,t,"setState")},g.prototype.forceUpdate=function(e){this.updater.enqueueForceUpdate(this,e,"forceUpdate")},b.prototype=g.prototype;var k=y.prototype=new b;k.constructor=y,v(k,g.prototype),k.isPureReactComponent=!0;var w=Array.isArray,S=Object.prototype.hasOwnProperty,C={current:null},E={key:!0,ref:!0,__self:!0,__source:!0};function x(e,t,r){var i,a={},o=null,s=null;if(null!=t)for(i in void 0!==t.ref&&(s=t.ref),void 0!==t.key&&(o=""+t.key),t)S.call(t,i)&&!E.hasOwnProperty(i)&&(a[i]=t[i]);var c=arguments.length-2;if(1===c)a.children=r;else if(1<c){for(var u=Array(c),l=0;l<c;l++)u[l]=arguments[l+2];a.children=u}if(e&&e.defaultProps)for(i in c=e.defaultProps)void 0===a[i]&&(a[i]=c[i]);return{$$typeof:n,type:e,key:o,ref:s,props:a,_owner:C.current}}function P(e){return"object"===typeof e&&null!==e&&e.$$typeof===n}var T=/\/+/g;function R(e,t){return"object"===typeof e&&null!==e&&null!=e.key?function(e){var t={"=":"=0",":":"=2"};return"$"+e.replace(/[=:]/g,(function(e){return t[e]}))}(""+e.key):t.toString(36)}function N(e,t,i,a,o){var s=typeof e;"undefined"!==s&&"boolean"!==s||(e=null);var c=!1;if(null===e)c=!0;else switch(s){case"string":case"number":c=!0;break;case"object":switch(e.$$typeof){case n:case r:c=!0}}if(c)return o=o(c=e),e=""===a?"."+R(c,0):a,w(o)?(i="",null!=e&&(i=e.replace(T,"$&/")+"/"),N(o,t,i,"",(function(e){return e}))):null!=o&&(P(o)&&(o=function(e,t){return{$$typeof:n,type:e.type,key:t,ref:e.ref,props:e.props,_owner:e._owner}}(o,i+(!o.key||c&&c.key===o.key?"":(""+o.key).replace(T,"$&/")+"/")+e)),t.push(o)),1;if(c=0,a=""===a?".":a+":",w(e))for(var u=0;u<e.length;u++){var l=a+R(s=e[u],u);c+=N(s,t,i,l,o)}else if(l=function(e){return null===e||"object"!==typeof e?null:"function"===typeof(e=p&&e[p]||e["@@iterator"])?e:null}(e),"function"===typeof l)for(e=l.call(e),u=0;!(s=e.next()).done;)c+=N(s=s.value,t,i,l=a+R(s,u++),o);else if("object"===s)throw t=String(e),Error("Objects are not valid as a React child (found: "+("[object Object]"===t?"object with keys {"+Object.keys(e).join(", ")+"}":t)+"). If you meant to render a collection of children, use an array instead.");return c}function O(e,t,n){if(null==e)return e;var r=[],i=0;return N(e,r,"","",(function(e){return t.call(n,e,i++)})),r}function I(e){if(-1===e._status){var t=e._result;(t=t()).then((function(t){0!==e._status&&-1!==e._status||(e._status=1,e._result=t)}),(function(t){0!==e._status&&-1!==e._status||(e._status=2,e._result=t)})),-1===e._status&&(e._status=0,e._result=t)}if(1===e._status)return e._result.default;throw e._result}var _={current:null},D={transition:null},A={ReactCurrentDispatcher:_,ReactCurrentBatchConfig:D,ReactCurrentOwner:C};t.Children={map:O,forEach:function(e,t,n){O(e,(function(){t.apply(this,arguments)}),n)},count:function(e){var t=0;return O(e,(function(){t++})),t},toArray:function(e){return O(e,(function(e){return e}))||[]},only:function(e){if(!P(e))throw Error("React.Children.only expected to receive a single React element child.");return e}},t.Component=g,t.Fragment=i,t.Profiler=o,t.PureComponent=y,t.StrictMode=a,t.Suspense=l,t.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=A,t.cloneElement=function(e,t,r){if(null===e||void 0===e)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+e+".");var i=v({},e.props),a=e.key,o=e.ref,s=e._owner;if(null!=t){if(void 0!==t.ref&&(o=t.ref,s=C.current),void 0!==t.key&&(a=""+t.key),e.type&&e.type.defaultProps)var c=e.type.defaultProps;for(u in t)S.call(t,u)&&!E.hasOwnProperty(u)&&(i[u]=void 0===t[u]&&void 0!==c?c[u]:t[u])}var u=arguments.length-2;if(1===u)i.children=r;else if(1<u){c=Array(u);for(var l=0;l<u;l++)c[l]=arguments[l+2];i.children=c}return{$$typeof:n,type:e.type,key:a,ref:o,props:i,_owner:s}},t.createContext=function(e){return(e={$$typeof:c,_currentValue:e,_currentValue2:e,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null}).Provider={$$typeof:s,_context:e},e.Consumer=e},t.createElement=x,t.createFactory=function(e){var t=x.bind(null,e);return t.type=e,t},t.createRef=function(){return{current:null}},t.forwardRef=function(e){return{$$typeof:u,render:e}},t.isValidElement=P,t.lazy=function(e){return{$$typeof:f,_payload:{_status:-1,_result:e},_init:I}},t.memo=function(e,t){return{$$typeof:d,type:e,compare:void 0===t?null:t}},t.startTransition=function(e){var t=D.transition;D.transition={};try{e()}finally{D.transition=t}},t.unstable_act=function(){throw Error("act(...) is not supported in production builds of React.")},t.useCallback=function(e,t){return _.current.useCallback(e,t)},t.useContext=function(e){return _.current.useContext(e)},t.useDebugValue=function(){},t.useDeferredValue=function(e){return _.current.useDeferredValue(e)},t.useEffect=function(e,t){return _.current.useEffect(e,t)},t.useId=function(){return _.current.useId()},t.useImperativeHandle=function(e,t,n){return _.current.useImperativeHandle(e,t,n)},t.useInsertionEffect=function(e,t){return _.current.useInsertionEffect(e,t)},t.useLayoutEffect=function(e,t){return _.current.useLayoutEffect(e,t)},t.useMemo=function(e,t){return _.current.useMemo(e,t)},t.useReducer=function(e,t,n){return _.current.useReducer(e,t,n)},t.useRef=function(e){return _.current.useRef(e)},t.useState=function(e){return _.current.useState(e)},t.useSyncExternalStore=function(e,t,n){return _.current.useSyncExternalStore(e,t,n)},t.useTransition=function(){return _.current.useTransition()},t.version="18.2.0"},791:function(e,t,n){"use strict";e.exports=n(117)},184:function(e,t,n){"use strict";e.exports=n(374)},813:function(e,t){"use strict";function n(e,t){var n=e.length;e.push(t);e:for(;0<n;){var r=n-1>>>1,i=e[r];if(!(0<a(i,t)))break e;e[r]=t,e[n]=i,n=r}}function r(e){return 0===e.length?null:e[0]}function i(e){if(0===e.length)return null;var t=e[0],n=e.pop();if(n!==t){e[0]=n;e:for(var r=0,i=e.length,o=i>>>1;r<o;){var s=2*(r+1)-1,c=e[s],u=s+1,l=e[u];if(0>a(c,n))u<i&&0>a(l,c)?(e[r]=l,e[u]=n,r=u):(e[r]=c,e[s]=n,r=s);else{if(!(u<i&&0>a(l,n)))break e;e[r]=l,e[u]=n,r=u}}}return t}function a(e,t){var n=e.sortIndex-t.sortIndex;return 0!==n?n:e.id-t.id}if("object"===typeof performance&&"function"===typeof performance.now){var o=performance;t.unstable_now=function(){return o.now()}}else{var s=Date,c=s.now();t.unstable_now=function(){return s.now()-c}}var u=[],l=[],d=1,f=null,p=3,h=!1,v=!1,m=!1,g="function"===typeof setTimeout?setTimeout:null,b="function"===typeof clearTimeout?clearTimeout:null,y="undefined"!==typeof setImmediate?setImmediate:null;function k(e){for(var t=r(l);null!==t;){if(null===t.callback)i(l);else{if(!(t.startTime<=e))break;i(l),t.sortIndex=t.expirationTime,n(u,t)}t=r(l)}}function w(e){if(m=!1,k(e),!v)if(null!==r(u))v=!0,D(S);else{var t=r(l);null!==t&&A(w,t.startTime-e)}}function S(e,n){v=!1,m&&(m=!1,b(P),P=-1),h=!0;var a=p;try{for(k(n),f=r(u);null!==f&&(!(f.expirationTime>n)||e&&!N());){var o=f.callback;if("function"===typeof o){f.callback=null,p=f.priorityLevel;var s=o(f.expirationTime<=n);n=t.unstable_now(),"function"===typeof s?f.callback=s:f===r(u)&&i(u),k(n)}else i(u);f=r(u)}if(null!==f)var c=!0;else{var d=r(l);null!==d&&A(w,d.startTime-n),c=!1}return c}finally{f=null,p=a,h=!1}}"undefined"!==typeof navigator&&void 0!==navigator.scheduling&&void 0!==navigator.scheduling.isInputPending&&navigator.scheduling.isInputPending.bind(navigator.scheduling);var C,E=!1,x=null,P=-1,T=5,R=-1;function N(){return!(t.unstable_now()-R<T)}function O(){if(null!==x){var e=t.unstable_now();R=e;var n=!0;try{n=x(!0,e)}finally{n?C():(E=!1,x=null)}}else E=!1}if("function"===typeof y)C=function(){y(O)};else if("undefined"!==typeof MessageChannel){var I=new MessageChannel,_=I.port2;I.port1.onmessage=O,C=function(){_.postMessage(null)}}else C=function(){g(O,0)};function D(e){x=e,E||(E=!0,C())}function A(e,n){P=g((function(){e(t.unstable_now())}),n)}t.unstable_IdlePriority=5,t.unstable_ImmediatePriority=1,t.unstable_LowPriority=4,t.unstable_NormalPriority=3,t.unstable_Profiling=null,t.unstable_UserBlockingPriority=2,t.unstable_cancelCallback=function(e){e.callback=null},t.unstable_continueExecution=function(){v||h||(v=!0,D(S))},t.unstable_forceFrameRate=function(e){0>e||125<e?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):T=0<e?Math.floor(1e3/e):5},t.unstable_getCurrentPriorityLevel=function(){return p},t.unstable_getFirstCallbackNode=function(){return r(u)},t.unstable_next=function(e){switch(p){case 1:case 2:case 3:var t=3;break;default:t=p}var n=p;p=t;try{return e()}finally{p=n}},t.unstable_pauseExecution=function(){},t.unstable_requestPaint=function(){},t.unstable_runWithPriority=function(e,t){switch(e){case 1:case 2:case 3:case 4:case 5:break;default:e=3}var n=p;p=e;try{return t()}finally{p=n}},t.unstable_scheduleCallback=function(e,i,a){var o=t.unstable_now();switch("object"===typeof a&&null!==a?a="number"===typeof(a=a.delay)&&0<a?o+a:o:a=o,e){case 1:var s=-1;break;case 2:s=250;break;case 5:s=1073741823;break;case 4:s=1e4;break;default:s=5e3}return e={id:d++,callback:i,priorityLevel:e,startTime:a,expirationTime:s=a+s,sortIndex:-1},a>o?(e.sortIndex=a,n(l,e),null===r(u)&&e===r(l)&&(m?(b(P),P=-1):m=!0,A(w,a-o))):(e.sortIndex=s,n(u,e),v||h||(v=!0,D(S))),e},t.unstable_shouldYield=N,t.unstable_wrapCallback=function(e){var t=p;return function(){var n=p;p=t;try{return e.apply(this,arguments)}finally{p=n}}}},296:function(e,t,n){"use strict";e.exports=n(813)}},t={};function n(r){var i=t[r];if(void 0!==i)return i.exports;var a=t[r]={exports:{}};return e[r].call(a.exports,a,a.exports,n),a.exports}n.m=e,n.d=function(e,t){for(var r in t)n.o(t,r)&&!n.o(e,r)&&Object.defineProperty(e,r,{enumerable:!0,get:t[r]})},n.f={},n.e=function(e){return Promise.all(Object.keys(n.f).reduce((function(t,r){return n.f[r](e,t),t}),[]))},n.u=function(e){return"static/js/"+e+".d2626b39.chunk.js"},n.miniCssF=function(e){},n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},function(){var e={},t="live:";n.l=function(r,i,a,o){if(e[r])e[r].push(i);else{var s,c;if(void 0!==a)for(var u=document.getElementsByTagName("script"),l=0;l<u.length;l++){var d=u[l];if(d.getAttribute("src")==r||d.getAttribute("data-webpack")==t+a){s=d;break}}s||(c=!0,(s=document.createElement("script")).charset="utf-8",s.timeout=120,n.nc&&s.setAttribute("nonce",n.nc),s.setAttribute("data-webpack",t+a),s.src=r),e[r]=[i];var f=function(t,n){s.onerror=s.onload=null,clearTimeout(p);var i=e[r];if(delete e[r],s.parentNode&&s.parentNode.removeChild(s),i&&i.forEach((function(e){return e(n)})),t)return t(n)},p=setTimeout(f.bind(null,void 0,{type:"timeout",target:s}),12e4);s.onerror=f.bind(null,s.onerror),s.onload=f.bind(null,s.onload),c&&document.head.appendChild(s)}}}(),n.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},n.p="/",function(){var e={179:0};n.f.j=function(t,r){var i=n.o(e,t)?e[t]:void 0;if(0!==i)if(i)r.push(i[2]);else{var a=new Promise((function(n,r){i=e[t]=[n,r]}));r.push(i[2]=a);var o=n.p+n.u(t),s=new Error;n.l(o,(function(r){if(n.o(e,t)&&(0!==(i=e[t])&&(e[t]=void 0),i)){var a=r&&("load"===r.type?"missing":r.type),o=r&&r.target&&r.target.src;s.message="Loading chunk "+t+" failed.\n("+a+": "+o+")",s.name="ChunkLoadError",s.type=a,s.request=o,i[1](s)}}),"chunk-"+t,t)}};var t=function(t,r){var i,a,o=r[0],s=r[1],c=r[2],u=0;if(o.some((function(t){return 0!==e[t]}))){for(i in s)n.o(s,i)&&(n.m[i]=s[i]);if(c)c(n)}for(t&&t(r);u<o.length;u++)a=o[u],n.o(e,a)&&e[a]&&e[a][0](),e[a]=0},r=self.webpackChunklive=self.webpackChunklive||[];r.forEach(t.bind(null,0)),r.push=t.bind(null,r.push.bind(r))}(),function(){"use strict";var e=n(791),t=n(250);function r(e){return r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},r(e)}function i(){i=function(){return e};var e={},t=Object.prototype,n=t.hasOwnProperty,a=Object.defineProperty||function(e,t,n){e[t]=n.value},o="function"==typeof Symbol?Symbol:{},s=o.iterator||"@@iterator",c=o.asyncIterator||"@@asyncIterator",u=o.toStringTag||"@@toStringTag";function l(e,t,n){return Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}),e[t]}try{l({},"")}catch(O){l=function(e,t,n){return e[t]=n}}function d(e,t,n,r){var i=t&&t.prototype instanceof h?t:h,o=Object.create(i.prototype),s=new T(r||[]);return a(o,"_invoke",{value:C(e,n,s)}),o}function f(e,t,n){try{return{type:"normal",arg:e.call(t,n)}}catch(O){return{type:"throw",arg:O}}}e.wrap=d;var p={};function h(){}function v(){}function m(){}var g={};l(g,s,(function(){return this}));var b=Object.getPrototypeOf,y=b&&b(b(R([])));y&&y!==t&&n.call(y,s)&&(g=y);var k=m.prototype=h.prototype=Object.create(g);function w(e){["next","throw","return"].forEach((function(t){l(e,t,(function(e){return this._invoke(t,e)}))}))}function S(e,t){function i(a,o,s,c){var u=f(e[a],e,o);if("throw"!==u.type){var l=u.arg,d=l.value;return d&&"object"==r(d)&&n.call(d,"__await")?t.resolve(d.__await).then((function(e){i("next",e,s,c)}),(function(e){i("throw",e,s,c)})):t.resolve(d).then((function(e){l.value=e,s(l)}),(function(e){return i("throw",e,s,c)}))}c(u.arg)}var o;a(this,"_invoke",{value:function(e,n){function r(){return new t((function(t,r){i(e,n,t,r)}))}return o=o?o.then(r,r):r()}})}function C(e,t,n){var r="suspendedStart";return function(i,a){if("executing"===r)throw new Error("Generator is already running");if("completed"===r){if("throw"===i)throw a;return N()}for(n.method=i,n.arg=a;;){var o=n.delegate;if(o){var s=E(o,n);if(s){if(s===p)continue;return s}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if("suspendedStart"===r)throw r="completed",n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);r="executing";var c=f(e,t,n);if("normal"===c.type){if(r=n.done?"completed":"suspendedYield",c.arg===p)continue;return{value:c.arg,done:n.done}}"throw"===c.type&&(r="completed",n.method="throw",n.arg=c.arg)}}}function E(e,t){var n=t.method,r=e.iterator[n];if(void 0===r)return t.delegate=null,"throw"===n&&e.iterator.return&&(t.method="return",t.arg=void 0,E(e,t),"throw"===t.method)||"return"!==n&&(t.method="throw",t.arg=new TypeError("The iterator does not provide a '"+n+"' method")),p;var i=f(r,e.iterator,t.arg);if("throw"===i.type)return t.method="throw",t.arg=i.arg,t.delegate=null,p;var a=i.arg;return a?a.done?(t[e.resultName]=a.value,t.next=e.nextLoc,"return"!==t.method&&(t.method="next",t.arg=void 0),t.delegate=null,p):a:(t.method="throw",t.arg=new TypeError("iterator result is not an object"),t.delegate=null,p)}function x(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function P(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function T(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(x,this),this.reset(!0)}function R(e){if(e){var t=e[s];if(t)return t.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var r=-1,i=function t(){for(;++r<e.length;)if(n.call(e,r))return t.value=e[r],t.done=!1,t;return t.value=void 0,t.done=!0,t};return i.next=i}}return{next:N}}function N(){return{value:void 0,done:!0}}return v.prototype=m,a(k,"constructor",{value:m,configurable:!0}),a(m,"constructor",{value:v,configurable:!0}),v.displayName=l(m,u,"GeneratorFunction"),e.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===v||"GeneratorFunction"===(t.displayName||t.name))},e.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,m):(e.__proto__=m,l(e,u,"GeneratorFunction")),e.prototype=Object.create(k),e},e.awrap=function(e){return{__await:e}},w(S.prototype),l(S.prototype,c,(function(){return this})),e.AsyncIterator=S,e.async=function(t,n,r,i,a){void 0===a&&(a=Promise);var o=new S(d(t,n,r,i),a);return e.isGeneratorFunction(n)?o:o.next().then((function(e){return e.done?e.value:o.next()}))},w(k),l(k,u,"Generator"),l(k,s,(function(){return this})),l(k,"toString",(function(){return"[object Generator]"})),e.keys=function(e){var t=Object(e),n=[];for(var r in t)n.push(r);return n.reverse(),function e(){for(;n.length;){var r=n.pop();if(r in t)return e.value=r,e.done=!1,e}return e.done=!0,e}},e.values=R,T.prototype={constructor:T,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(P),!e)for(var t in this)"t"===t.charAt(0)&&n.call(this,t)&&!isNaN(+t.slice(1))&&(this[t]=void 0)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(e){if(this.done)throw e;var t=this;function r(n,r){return o.type="throw",o.arg=e,t.next=n,r&&(t.method="next",t.arg=void 0),!!r}for(var i=this.tryEntries.length-1;i>=0;--i){var a=this.tryEntries[i],o=a.completion;if("root"===a.tryLoc)return r("end");if(a.tryLoc<=this.prev){var s=n.call(a,"catchLoc"),c=n.call(a,"finallyLoc");if(s&&c){if(this.prev<a.catchLoc)return r(a.catchLoc,!0);if(this.prev<a.finallyLoc)return r(a.finallyLoc)}else if(s){if(this.prev<a.catchLoc)return r(a.catchLoc,!0)}else{if(!c)throw new Error("try statement without catch or finally");if(this.prev<a.finallyLoc)return r(a.finallyLoc)}}}},abrupt:function(e,t){for(var r=this.tryEntries.length-1;r>=0;--r){var i=this.tryEntries[r];if(i.tryLoc<=this.prev&&n.call(i,"finallyLoc")&&this.prev<i.finallyLoc){var a=i;break}}a&&("break"===e||"continue"===e)&&a.tryLoc<=t&&t<=a.finallyLoc&&(a=null);var o=a?a.completion:{};return o.type=e,o.arg=t,a?(this.method="next",this.next=a.finallyLoc,p):this.complete(o)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),p},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.finallyLoc===e)return this.complete(n.completion,n.afterLoc),P(n),p}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.tryLoc===e){var r=n.completion;if("throw"===r.type){var i=r.arg;P(n)}return i}}throw new Error("illegal catch attempt")},delegateYield:function(e,t,n){return this.delegate={iterator:R(e),resultName:t,nextLoc:n},"next"===this.method&&(this.arg=void 0),p}},e}function a(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function o(e,t){if(e){if("string"===typeof e)return a(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?a(e,t):void 0}}function s(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,i,a,o,s=[],c=!0,u=!1;try{if(a=(n=n.call(e)).next,0===t){if(Object(n)!==n)return;c=!1}else for(;!(c=(r=a.call(n)).done)&&(s.push(r.value),s.length!==t);c=!0);}catch(l){u=!0,i=l}finally{try{if(!c&&null!=n.return&&(o=n.return(),Object(o)!==o))return}finally{if(u)throw i}}return s}}(e,t)||o(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function c(e){return function(e){if(Array.isArray(e))return a(e)}(e)||function(e){if("undefined"!==typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||o(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function u(e,t){var n="undefined"!==typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!n){if(Array.isArray(e)||(n=o(e))||t&&e&&"number"===typeof e.length){n&&(e=n);var r=0,i=function(){};return{s:i,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:i}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var a,s=!0,c=!1;return{s:function(){n=n.call(e)},n:function(){var e=n.next();return s=e.done,e},e:function(e){c=!0,a=e},f:function(){try{s||null==n.return||n.return()}finally{if(c)throw a}}}}function l(e){var t,n,r="";if("string"==typeof e||"number"==typeof e)r+=e;else if("object"==typeof e)if(Array.isArray(e))for(t=0;t<e.length;t++)e[t]&&(n=l(e[t]))&&(r&&(r+=" "),r+=n);else for(t in e)e[t]&&(r&&(r+=" "),r+=t);return r}var d=function(){for(var e,t,n=0,r="";n<arguments.length;)(e=arguments[n++])&&(t=l(e))&&(r&&(r+=" "),r+=t);return r};function f(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function p(e){return p=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},p(e)}function h(){return h="undefined"!==typeof Reflect&&Reflect.get?Reflect.get.bind():function(e,t,n){var r=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=p(e)););return e}(e,t);if(r){var i=Object.getOwnPropertyDescriptor(r,t);return i.get?i.get.call(arguments.length<3?e:n):i.value}},h.apply(this,arguments)}function v(e,t){return v=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},v(e,t)}function m(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&v(e,t)}function g(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(Cs){return!1}}function b(e){var t=g();return function(){var n,i=p(e);if(t){var a=p(this).constructor;n=Reflect.construct(i,arguments,a)}else n=i.apply(this,arguments);return function(e,t){if(t&&("object"===r(t)||"function"===typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return f(e)}(this,n)}}function y(e,t,n){return y=g()?Reflect.construct.bind():function(e,t,n){var r=[null];r.push.apply(r,t);var i=new(Function.bind.apply(e,r));return n&&v(i,n.prototype),i},y.apply(null,arguments)}function k(e){var t="function"===typeof Map?new Map:void 0;return k=function(e){if(null===e||(n=e,-1===Function.toString.call(n).indexOf("[native code]")))return e;var n;if("function"!==typeof e)throw new TypeError("Super expression must either be null or a function");if("undefined"!==typeof t){if(t.has(e))return t.get(e);t.set(e,r)}function r(){return y(e,arguments,p(this).constructor)}return r.prototype=Object.create(e.prototype,{constructor:{value:r,enumerable:!1,writable:!0,configurable:!0}}),v(r,e)},k(e)}function w(e){var t=function(e,t){if("object"!==r(e)||null===e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var i=n.call(e,t||"default");if("object"!==r(i))return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"===r(t)?t:String(t)}function S(e,t,n){return(t=w(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function C(e,t,n,r,i,a,o){try{var s=e[a](o),c=s.value}catch(u){return void n(u)}s.done?t(c):Promise.resolve(c).then(r,i)}function E(e){return function(){var t=this,n=arguments;return new Promise((function(r,i){var a=e.apply(t,n);function o(e){C(a,r,i,o,s,"next",e)}function s(e){C(a,r,i,o,s,"throw",e)}o(void 0)}))}}function x(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function P(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,w(r.key),r)}}function T(e,t,n){return t&&P(e.prototype,t),n&&P(e,n),Object.defineProperty(e,"prototype",{writable:!1}),e}function R(e,t){return t.forEach((function(t){t&&"string"!==typeof t&&!Array.isArray(t)&&Object.keys(t).forEach((function(n){if("default"!==n&&!(n in e)){var r=Object.getOwnPropertyDescriptor(t,n);Object.defineProperty(e,n,r.get?r:{enumerable:!0,get:function(){return t[n]}})}}))})),Object.freeze(e)}var N="undefined"!==typeof globalThis?globalThis:"undefined"!==typeof window?window:"undefined"!==typeof global?global:"undefined"!==typeof self?self:{};function O(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}var I,_={exports:{}};I=_,function(e,t){I.exports?I.exports=t():e.log=t()}(N,(function(){var e=function(){},t="undefined",n=typeof window!==t&&typeof window.navigator!==t&&/Trident\/|MSIE /.test(window.navigator.userAgent),r=["trace","debug","info","warn","error"];function i(e,t){var n=e[t];if("function"===typeof n.bind)return n.bind(e);try{return Function.prototype.bind.call(n,e)}catch(Cs){return function(){return Function.prototype.apply.apply(n,[e,arguments])}}}function a(){console.log&&(console.log.apply?console.log.apply(console,arguments):Function.prototype.apply.apply(console.log,[console,arguments])),console.trace&&console.trace()}function o(t,n){for(var i=0;i<r.length;i++){var a=r[i];this[a]=i<t?e:this.methodFactory(a,t,n)}this.log=this.debug}function s(e,n,r){return function(){typeof console!==t&&(o.call(this,n,r),this[e].apply(this,arguments))}}function c(r,o,c){return function(r){return"debug"===r&&(r="log"),typeof console!==t&&("trace"===r&&n?a:void 0!==console[r]?i(console,r):void 0!==console.log?i(console,"log"):e)}(r)||s.apply(this,arguments)}function u(e,n,i){var a,s=this;n=null==n?"WARN":n;var u="loglevel";function l(){var e;if(typeof window!==t&&u){try{e=window.localStorage[u]}catch(i){}if(typeof e===t)try{var n=window.document.cookie,r=n.indexOf(encodeURIComponent(u)+"=");-1!==r&&(e=/^([^;]+)/.exec(n.slice(r))[1])}catch(i){}return void 0===s.levels[e]&&(e=void 0),e}}"string"===typeof e?u+=":"+e:"symbol"===typeof e&&(u=void 0),s.name=e,s.levels={TRACE:0,DEBUG:1,INFO:2,WARN:3,ERROR:4,SILENT:5},s.methodFactory=i||c,s.getLevel=function(){return a},s.setLevel=function(n,i){if("string"===typeof n&&void 0!==s.levels[n.toUpperCase()]&&(n=s.levels[n.toUpperCase()]),!("number"===typeof n&&n>=0&&n<=s.levels.SILENT))throw"log.setLevel() called with invalid level: "+n;if(a=n,!1!==i&&function(e){var n=(r[e]||"silent").toUpperCase();if(typeof window!==t&&u){try{return void(window.localStorage[u]=n)}catch(i){}try{window.document.cookie=encodeURIComponent(u)+"="+n+";"}catch(i){}}}(n),o.call(s,n,e),typeof console===t&&n<s.levels.SILENT)return"No console available for logging"},s.setDefaultLevel=function(e){n=e,l()||s.setLevel(e,!1)},s.resetLevel=function(){s.setLevel(n,!1),function(){if(typeof window!==t&&u){try{return void window.localStorage.removeItem(u)}catch(e){}try{window.document.cookie=encodeURIComponent(u)+"=; expires=Thu, 01 Jan 1970 00:00:00 UTC"}catch(e){}}}()},s.enableAll=function(e){s.setLevel(s.levels.TRACE,e)},s.disableAll=function(e){s.setLevel(s.levels.SILENT,e)};var d=l();null==d&&(d=n),s.setLevel(d,!1)}var l=new u,d={};l.getLogger=function(e){if("symbol"!==typeof e&&"string"!==typeof e||""===e)throw new TypeError("You must supply a name when creating a logger.");var t=d[e];return t||(t=d[e]=new u(e,l.getLevel(),l.methodFactory)),t};var f=typeof window!==t?window.log:void 0;return l.noConflict=function(){return typeof window!==t&&window.log===l&&(window.log=f),l},l.getLoggers=function(){return d},l.default=l,l}));var D,A=_.exports;!function(e){e[e.trace=0]="trace",e[e.debug=1]="debug",e[e.info=2]="info",e[e.warn=3]="warn",e[e.error=4]="error",e[e.silent=5]="silent"}(D||(D={}));var L=A.getLogger("livekit");L.setLevel(D.info);var M=F,U=null;try{U=new WebAssembly.Instance(new WebAssembly.Module(new Uint8Array([0,97,115,109,1,0,0,0,1,13,2,96,0,1,127,96,4,127,127,127,127,1,127,3,7,6,0,1,1,1,1,1,6,6,1,127,1,65,0,11,7,50,6,3,109,117,108,0,1,5,100,105,118,95,115,0,2,5,100,105,118,95,117,0,3,5,114,101,109,95,115,0,4,5,114,101,109,95,117,0,5,8,103,101,116,95,104,105,103,104,0,0,10,191,1,6,4,0,35,0,11,36,1,1,126,32,0,173,32,1,173,66,32,134,132,32,2,173,32,3,173,66,32,134,132,126,34,4,66,32,135,167,36,0,32,4,167,11,36,1,1,126,32,0,173,32,1,173,66,32,134,132,32,2,173,32,3,173,66,32,134,132,127,34,4,66,32,135,167,36,0,32,4,167,11,36,1,1,126,32,0,173,32,1,173,66,32,134,132,32,2,173,32,3,173,66,32,134,132,128,34,4,66,32,135,167,36,0,32,4,167,11,36,1,1,126,32,0,173,32,1,173,66,32,134,132,32,2,173,32,3,173,66,32,134,132,129,34,4,66,32,135,167,36,0,32,4,167,11,36,1,1,126,32,0,173,32,1,173,66,32,134,132,32,2,173,32,3,173,66,32,134,132,130,34,4,66,32,135,167,36,0,32,4,167,11])),{}).exports}catch(Cs){}function F(e,t,n){this.low=0|e,this.high=0|t,this.unsigned=!!n}function j(e){return!0===(e&&e.__isLong__)}F.prototype.__isLong__,Object.defineProperty(F.prototype,"__isLong__",{value:!0}),F.isLong=j;var B={},z={};function $(e,t){var n,r,i;return t?(i=0<=(e>>>=0)&&e<256)&&(r=z[e])?r:(n=J(e,(0|e)<0?-1:0,!0),i&&(z[e]=n),n):(i=-128<=(e|=0)&&e<128)&&(r=B[e])?r:(n=J(e,e<0?-1:0,!1),i&&(B[e]=n),n)}function V(e,t){if(isNaN(e))return t?X:Y;if(t){if(e<0)return X;if(e>=Q)return ie}else{if(e<=-Z)return ae;if(e+1>=Z)return re}return e<0?V(-e,t).neg():J(e%G|0,e/G|0,t)}function J(e,t,n){return new F(e,t,n)}F.fromInt=$,F.fromNumber=V,F.fromBits=J;var W=Math.pow;function q(e,t,n){if(0===e.length)throw Error("empty string");if("NaN"===e||"Infinity"===e||"+Infinity"===e||"-Infinity"===e)return Y;if("number"===typeof t?(n=t,t=!1):t=!!t,(n=n||10)<2||36<n)throw RangeError("radix");var r;if((r=e.indexOf("-"))>0)throw Error("interior hyphen");if(0===r)return q(e.substring(1),t,n).neg();for(var i=V(W(n,8)),a=Y,o=0;o<e.length;o+=8){var s=Math.min(8,e.length-o),c=parseInt(e.substring(o,o+s),n);if(s<8){var u=V(W(n,s));a=a.mul(u).add(V(c))}else a=(a=a.mul(i)).add(V(c))}return a.unsigned=t,a}function H(e,t){return"number"===typeof e?V(e,t):"string"===typeof e?q(e,t):J(e.low,e.high,"boolean"===typeof t?t:e.unsigned)}F.fromString=q,F.fromValue=H;var G=4294967296,Q=G*G,Z=Q/2,K=$(1<<24),Y=$(0);F.ZERO=Y;var X=$(0,!0);F.UZERO=X;var ee=$(1);F.ONE=ee;var te=$(1,!0);F.UONE=te;var ne=$(-1);F.NEG_ONE=ne;var re=J(-1,2147483647,!1);F.MAX_VALUE=re;var ie=J(-1,-1,!0);F.MAX_UNSIGNED_VALUE=ie;var ae=J(0,-2147483648,!1);F.MIN_VALUE=ae;var oe=F.prototype;oe.toInt=function(){return this.unsigned?this.low>>>0:this.low},oe.toNumber=function(){return this.unsigned?(this.high>>>0)*G+(this.low>>>0):this.high*G+(this.low>>>0)},oe.toString=function(e){if((e=e||10)<2||36<e)throw RangeError("radix");if(this.isZero())return"0";if(this.isNegative()){if(this.eq(ae)){var t=V(e),n=this.div(t),r=n.mul(t).sub(this);return n.toString(e)+r.toInt().toString(e)}return"-"+this.neg().toString(e)}for(var i=V(W(e,6),this.unsigned),a=this,o="";;){var s=a.div(i),c=(a.sub(s.mul(i)).toInt()>>>0).toString(e);if((a=s).isZero())return c+o;for(;c.length<6;)c="0"+c;o=""+c+o}},oe.getHighBits=function(){return this.high},oe.getHighBitsUnsigned=function(){return this.high>>>0},oe.getLowBits=function(){return this.low},oe.getLowBitsUnsigned=function(){return this.low>>>0},oe.getNumBitsAbs=function(){if(this.isNegative())return this.eq(ae)?64:this.neg().getNumBitsAbs();for(var e=0!=this.high?this.high:this.low,t=31;t>0&&0==(e&1<<t);t--);return 0!=this.high?t+33:t+1},oe.isZero=function(){return 0===this.high&&0===this.low},oe.eqz=oe.isZero,oe.isNegative=function(){return!this.unsigned&&this.high<0},oe.isPositive=function(){return this.unsigned||this.high>=0},oe.isOdd=function(){return 1===(1&this.low)},oe.isEven=function(){return 0===(1&this.low)},oe.equals=function(e){return j(e)||(e=H(e)),(this.unsigned===e.unsigned||this.high>>>31!==1||e.high>>>31!==1)&&(this.high===e.high&&this.low===e.low)},oe.eq=oe.equals,oe.notEquals=function(e){return!this.eq(e)},oe.neq=oe.notEquals,oe.ne=oe.notEquals,oe.lessThan=function(e){return this.comp(e)<0},oe.lt=oe.lessThan,oe.lessThanOrEqual=function(e){return this.comp(e)<=0},oe.lte=oe.lessThanOrEqual,oe.le=oe.lessThanOrEqual,oe.greaterThan=function(e){return this.comp(e)>0},oe.gt=oe.greaterThan,oe.greaterThanOrEqual=function(e){return this.comp(e)>=0},oe.gte=oe.greaterThanOrEqual,oe.ge=oe.greaterThanOrEqual,oe.compare=function(e){if(j(e)||(e=H(e)),this.eq(e))return 0;var t=this.isNegative(),n=e.isNegative();return t&&!n?-1:!t&&n?1:this.unsigned?e.high>>>0>this.high>>>0||e.high===this.high&&e.low>>>0>this.low>>>0?-1:1:this.sub(e).isNegative()?-1:1},oe.comp=oe.compare,oe.negate=function(){return!this.unsigned&&this.eq(ae)?ae:this.not().add(ee)},oe.neg=oe.negate,oe.add=function(e){j(e)||(e=H(e));var t=this.high>>>16,n=65535&this.high,r=this.low>>>16,i=65535&this.low,a=e.high>>>16,o=65535&e.high,s=e.low>>>16,c=0,u=0,l=0,d=0;return l+=(d+=i+(65535&e.low))>>>16,u+=(l+=r+s)>>>16,c+=(u+=n+o)>>>16,c+=t+a,J((l&=65535)<<16|(d&=65535),(c&=65535)<<16|(u&=65535),this.unsigned)},oe.subtract=function(e){return j(e)||(e=H(e)),this.add(e.neg())},oe.sub=oe.subtract,oe.multiply=function(e){if(this.isZero())return Y;if(j(e)||(e=H(e)),U)return J(U.mul(this.low,this.high,e.low,e.high),U.get_high(),this.unsigned);if(e.isZero())return Y;if(this.eq(ae))return e.isOdd()?ae:Y;if(e.eq(ae))return this.isOdd()?ae:Y;if(this.isNegative())return e.isNegative()?this.neg().mul(e.neg()):this.neg().mul(e).neg();if(e.isNegative())return this.mul(e.neg()).neg();if(this.lt(K)&&e.lt(K))return V(this.toNumber()*e.toNumber(),this.unsigned);var t=this.high>>>16,n=65535&this.high,r=this.low>>>16,i=65535&this.low,a=e.high>>>16,o=65535&e.high,s=e.low>>>16,c=65535&e.low,u=0,l=0,d=0,f=0;return d+=(f+=i*c)>>>16,l+=(d+=r*c)>>>16,d&=65535,l+=(d+=i*s)>>>16,u+=(l+=n*c)>>>16,l&=65535,u+=(l+=r*s)>>>16,l&=65535,u+=(l+=i*o)>>>16,u+=t*c+n*s+r*o+i*a,J((d&=65535)<<16|(f&=65535),(u&=65535)<<16|(l&=65535),this.unsigned)},oe.mul=oe.multiply,oe.divide=function(e){if(j(e)||(e=H(e)),e.isZero())throw Error("division by zero");var t,n,r;if(U)return this.unsigned||-2147483648!==this.high||-1!==e.low||-1!==e.high?J((this.unsigned?U.div_u:U.div_s)(this.low,this.high,e.low,e.high),U.get_high(),this.unsigned):this;if(this.isZero())return this.unsigned?X:Y;if(this.unsigned){if(e.unsigned||(e=e.toUnsigned()),e.gt(this))return X;if(e.gt(this.shru(1)))return te;r=X}else{if(this.eq(ae))return e.eq(ee)||e.eq(ne)?ae:e.eq(ae)?ee:(t=this.shr(1).div(e).shl(1)).eq(Y)?e.isNegative()?ee:ne:(n=this.sub(e.mul(t)),r=t.add(n.div(e)));if(e.eq(ae))return this.unsigned?X:Y;if(this.isNegative())return e.isNegative()?this.neg().div(e.neg()):this.neg().div(e).neg();if(e.isNegative())return this.div(e.neg()).neg();r=Y}for(n=this;n.gte(e);){t=Math.max(1,Math.floor(n.toNumber()/e.toNumber()));for(var i=Math.ceil(Math.log(t)/Math.LN2),a=i<=48?1:W(2,i-48),o=V(t),s=o.mul(e);s.isNegative()||s.gt(n);)s=(o=V(t-=a,this.unsigned)).mul(e);o.isZero()&&(o=ee),r=r.add(o),n=n.sub(s)}return r},oe.div=oe.divide,oe.modulo=function(e){return j(e)||(e=H(e)),U?J((this.unsigned?U.rem_u:U.rem_s)(this.low,this.high,e.low,e.high),U.get_high(),this.unsigned):this.sub(this.div(e).mul(e))},oe.mod=oe.modulo,oe.rem=oe.modulo,oe.not=function(){return J(~this.low,~this.high,this.unsigned)},oe.and=function(e){return j(e)||(e=H(e)),J(this.low&e.low,this.high&e.high,this.unsigned)},oe.or=function(e){return j(e)||(e=H(e)),J(this.low|e.low,this.high|e.high,this.unsigned)},oe.xor=function(e){return j(e)||(e=H(e)),J(this.low^e.low,this.high^e.high,this.unsigned)},oe.shiftLeft=function(e){return j(e)&&(e=e.toInt()),0===(e&=63)?this:e<32?J(this.low<<e,this.high<<e|this.low>>>32-e,this.unsigned):J(0,this.low<<e-32,this.unsigned)},oe.shl=oe.shiftLeft,oe.shiftRight=function(e){return j(e)&&(e=e.toInt()),0===(e&=63)?this:e<32?J(this.low>>>e|this.high<<32-e,this.high>>e,this.unsigned):J(this.high>>e-32,this.high>=0?0:-1,this.unsigned)},oe.shr=oe.shiftRight,oe.shiftRightUnsigned=function(e){if(j(e)&&(e=e.toInt()),0===(e&=63))return this;var t=this.high;return e<32?J(this.low>>>e|t<<32-e,t>>>e,this.unsigned):J(32===e?t:t>>>e-32,0,this.unsigned)},oe.shru=oe.shiftRightUnsigned,oe.shr_u=oe.shiftRightUnsigned,oe.toSigned=function(){return this.unsigned?J(this.low,this.high,!1):this},oe.toUnsigned=function(){return this.unsigned?this:J(this.low,this.high,!0)},oe.toBytes=function(e){return e?this.toBytesLE():this.toBytesBE()},oe.toBytesLE=function(){var e=this.high,t=this.low;return[255&t,t>>>8&255,t>>>16&255,t>>>24,255&e,e>>>8&255,e>>>16&255,e>>>24]},oe.toBytesBE=function(){var e=this.high,t=this.low;return[e>>>24,e>>>16&255,e>>>8&255,255&e,t>>>24,t>>>16&255,t>>>8&255,255&t]},F.fromBytes=function(e,t,n){return n?F.fromBytesLE(e,t):F.fromBytesBE(e,t)},F.fromBytesLE=function(e,t){return new F(e[0]|e[1]<<8|e[2]<<16|e[3]<<24,e[4]|e[5]<<8|e[6]<<16|e[7]<<24,t)},F.fromBytesBE=function(e,t){return new F(e[4]<<24|e[5]<<16|e[6]<<8|e[7],e[0]<<24|e[1]<<16|e[2]<<8|e[3],t)};var se,ce,ue=O(M),le={},de={};var fe,pe,he,ve,me,ge,be,ye={};var ke,we,Se,Ce,Ee,xe,Pe={};function Te(){return xe||(xe=1,function(e){var t=e;function n(e,t,n){for(var r=Object.keys(t),i=0;i<r.length;++i)void 0!==e[r[i]]&&n||(e[r[i]]=t[r[i]]);return e}function r(e){function t(e,r){if(!(this instanceof t))return new t(e,r);Object.defineProperty(this,"message",{get:function(){return e}}),Error.captureStackTrace?Error.captureStackTrace(this,t):Object.defineProperty(this,"stack",{value:(new Error).stack||""}),r&&n(this,r)}return t.prototype=Object.create(Error.prototype,{constructor:{value:t,writable:!0,enumerable:!1,configurable:!0},name:{get:function(){return e},set:void 0,enumerable:!1,configurable:!0},toString:{value:function(){return this.name+": "+this.message},writable:!0,enumerable:!1,configurable:!0}}),t}t.asPromise=(ce||(ce=1,se=function(e,t){for(var n=new Array(arguments.length-1),r=0,i=2,a=!0;i<arguments.length;)n[r++]=arguments[i++];return new Promise((function(i,o){n[r]=function(e){if(a)if(a=!1,e)o(e);else{for(var t=new Array(arguments.length-1),n=0;n<t.length;)t[n++]=arguments[n];i.apply(null,t)}};try{e.apply(t||null,n)}catch(s){a&&(a=!1,o(s))}}))}),se),t.base64=(fe||(fe=1,function(e){var t=e;t.length=function(e){var t=e.length;if(!t)return 0;for(var n=0;--t%4>1&&"="===e.charAt(t);)++n;return Math.ceil(3*e.length)/4-n};for(var n=new Array(64),r=new Array(123),i=0;i<64;)r[n[i]=i<26?i+65:i<52?i+71:i<62?i-4:i-59|43]=i++;t.encode=function(e,t,r){for(var i,a=null,o=[],s=0,c=0;t<r;){var u=e[t++];switch(c){case 0:o[s++]=n[u>>2],i=(3&u)<<4,c=1;break;case 1:o[s++]=n[i|u>>4],i=(15&u)<<2,c=2;break;case 2:o[s++]=n[i|u>>6],o[s++]=n[63&u],c=0}s>8191&&((a||(a=[])).push(String.fromCharCode.apply(String,o)),s=0)}return c&&(o[s++]=n[i],o[s++]=61,1===c&&(o[s++]=61)),a?(s&&a.push(String.fromCharCode.apply(String,o.slice(0,s))),a.join("")):String.fromCharCode.apply(String,o.slice(0,s))};var a="invalid encoding";t.decode=function(e,t,n){for(var i,o=n,s=0,c=0;c<e.length;){var u=e.charCodeAt(c++);if(61===u&&s>1)break;if(void 0===(u=r[u]))throw Error(a);switch(s){case 0:i=u,s=1;break;case 1:t[n++]=i<<2|(48&u)>>4,i=u,s=2;break;case 2:t[n++]=(15&i)<<4|(60&u)>>2,i=u,s=3;break;case 3:t[n++]=(3&i)<<6|u,s=0}}if(1===s)throw Error(a);return n-o},t.test=function(e){return/^(?:[A-Za-z0-9+/]{4})*(?:[A-Za-z0-9+/]{2}==|[A-Za-z0-9+/]{3}=)?$/.test(e)}}(ye)),ye),t.EventEmitter=function(){if(he)return pe;function e(){this._listeners={}}return he=1,pe=e,e.prototype.on=function(e,t,n){return(this._listeners[e]||(this._listeners[e]=[])).push({fn:t,ctx:n||this}),this},e.prototype.off=function(e,t){if(void 0===e)this._listeners={};else if(void 0===t)this._listeners[e]=[];else for(var n=this._listeners[e],r=0;r<n.length;)n[r].fn===t?n.splice(r,1):++r;return this},e.prototype.emit=function(e){var t=this._listeners[e];if(t){for(var n=[],r=1;r<arguments.length;)n.push(arguments[r++]);for(r=0;r<t.length;)t[r].fn.apply(t[r++].ctx,n)}return this},pe}(),t.float=function(){if(me)return ve;function e(e){return"undefined"!==typeof Float32Array?function(){var t=new Float32Array([-0]),n=new Uint8Array(t.buffer),r=128===n[3];function i(e,r,i){t[0]=e,r[i]=n[0],r[i+1]=n[1],r[i+2]=n[2],r[i+3]=n[3]}function a(e,r,i){t[0]=e,r[i]=n[3],r[i+1]=n[2],r[i+2]=n[1],r[i+3]=n[0]}function o(e,r){return n[0]=e[r],n[1]=e[r+1],n[2]=e[r+2],n[3]=e[r+3],t[0]}function s(e,r){return n[3]=e[r],n[2]=e[r+1],n[1]=e[r+2],n[0]=e[r+3],t[0]}e.writeFloatLE=r?i:a,e.writeFloatBE=r?a:i,e.readFloatLE=r?o:s,e.readFloatBE=r?s:o}():function(){function a(e,t,n,r){var i=t<0?1:0;if(i&&(t=-t),0===t)e(1/t>0?0:2147483648,n,r);else if(isNaN(t))e(2143289344,n,r);else if(t>34028234663852886e22)e((i<<31|2139095040)>>>0,n,r);else if(t<11754943508222875e-54)e((i<<31|Math.round(t/1401298464324817e-60))>>>0,n,r);else{var a=Math.floor(Math.log(t)/Math.LN2);e((i<<31|a+127<<23|8388607&Math.round(t*Math.pow(2,-a)*8388608))>>>0,n,r)}}function o(e,t,n){var r=e(t,n),i=2*(r>>31)+1,a=r>>>23&255,o=8388607&r;return 255===a?o?NaN:i*(1/0):0===a?1401298464324817e-60*i*o:i*Math.pow(2,a-150)*(o+8388608)}e.writeFloatLE=a.bind(null,t),e.writeFloatBE=a.bind(null,n),e.readFloatLE=o.bind(null,r),e.readFloatBE=o.bind(null,i)}(),"undefined"!==typeof Float64Array?function(){var t=new Float64Array([-0]),n=new Uint8Array(t.buffer),r=128===n[7];function i(e,r,i){t[0]=e,r[i]=n[0],r[i+1]=n[1],r[i+2]=n[2],r[i+3]=n[3],r[i+4]=n[4],r[i+5]=n[5],r[i+6]=n[6],r[i+7]=n[7]}function a(e,r,i){t[0]=e,r[i]=n[7],r[i+1]=n[6],r[i+2]=n[5],r[i+3]=n[4],r[i+4]=n[3],r[i+5]=n[2],r[i+6]=n[1],r[i+7]=n[0]}function o(e,r){return n[0]=e[r],n[1]=e[r+1],n[2]=e[r+2],n[3]=e[r+3],n[4]=e[r+4],n[5]=e[r+5],n[6]=e[r+6],n[7]=e[r+7],t[0]}function s(e,r){return n[7]=e[r],n[6]=e[r+1],n[5]=e[r+2],n[4]=e[r+3],n[3]=e[r+4],n[2]=e[r+5],n[1]=e[r+6],n[0]=e[r+7],t[0]}e.writeDoubleLE=r?i:a,e.writeDoubleBE=r?a:i,e.readDoubleLE=r?o:s,e.readDoubleBE=r?s:o}():function(){function a(e,t,n,r,i,a){var o=r<0?1:0;if(o&&(r=-r),0===r)e(0,i,a+t),e(1/r>0?0:2147483648,i,a+n);else if(isNaN(r))e(0,i,a+t),e(2146959360,i,a+n);else if(r>17976931348623157e292)e(0,i,a+t),e((o<<31|2146435072)>>>0,i,a+n);else{var s;if(r<22250738585072014e-324)e((s=r/5e-324)>>>0,i,a+t),e((o<<31|s/4294967296)>>>0,i,a+n);else{var c=Math.floor(Math.log(r)/Math.LN2);1024===c&&(c=1023),e(4503599627370496*(s=r*Math.pow(2,-c))>>>0,i,a+t),e((o<<31|c+1023<<20|1048576*s&1048575)>>>0,i,a+n)}}}function o(e,t,n,r,i){var a=e(r,i+t),o=e(r,i+n),s=2*(o>>31)+1,c=o>>>20&2047,u=4294967296*(1048575&o)+a;return 2047===c?u?NaN:s*(1/0):0===c?5e-324*s*u:s*Math.pow(2,c-1075)*(u+4503599627370496)}e.writeDoubleLE=a.bind(null,t,0,4),e.writeDoubleBE=a.bind(null,n,4,0),e.readDoubleLE=o.bind(null,r,0,4),e.readDoubleBE=o.bind(null,i,4,0)}(),e}function t(e,t,n){t[n]=255&e,t[n+1]=e>>>8&255,t[n+2]=e>>>16&255,t[n+3]=e>>>24}function n(e,t,n){t[n]=e>>>24,t[n+1]=e>>>16&255,t[n+2]=e>>>8&255,t[n+3]=255&e}function r(e,t){return(e[t]|e[t+1]<<8|e[t+2]<<16|e[t+3]<<24)>>>0}function i(e,t){return(e[t]<<24|e[t+1]<<16|e[t+2]<<8|e[t+3])>>>0}return me=1,ve=e(e)}(),t.inquire=be?ge:(be=1,ge=function(e){return null}),t.utf8=(ke||(ke=1,function(e){var t=e;t.length=function(e){for(var t=0,n=0,r=0;r<e.length;++r)(n=e.charCodeAt(r))<128?t+=1:n<2048?t+=2:55296===(64512&n)&&56320===(64512&e.charCodeAt(r+1))?(++r,t+=4):t+=3;return t},t.read=function(e,t,n){if(n-t<1)return"";for(var r,i=null,a=[],o=0;t<n;)(r=e[t++])<128?a[o++]=r:r>191&&r<224?a[o++]=(31&r)<<6|63&e[t++]:r>239&&r<365?(r=((7&r)<<18|(63&e[t++])<<12|(63&e[t++])<<6|63&e[t++])-65536,a[o++]=55296+(r>>10),a[o++]=56320+(1023&r)):a[o++]=(15&r)<<12|(63&e[t++])<<6|63&e[t++],o>8191&&((i||(i=[])).push(String.fromCharCode.apply(String,a)),o=0);return i?(o&&i.push(String.fromCharCode.apply(String,a.slice(0,o))),i.join("")):String.fromCharCode.apply(String,a.slice(0,o))},t.write=function(e,t,n){for(var r,i,a=n,o=0;o<e.length;++o)(r=e.charCodeAt(o))<128?t[n++]=r:r<2048?(t[n++]=r>>6|192,t[n++]=63&r|128):55296===(64512&r)&&56320===(64512&(i=e.charCodeAt(o+1)))?(r=65536+((1023&r)<<10)+(1023&i),++o,t[n++]=r>>18|240,t[n++]=r>>12&63|128,t[n++]=r>>6&63|128,t[n++]=63&r|128):(t[n++]=r>>12|224,t[n++]=r>>6&63|128,t[n++]=63&r|128);return n-a}}(Pe)),Pe),t.pool=Se?we:(Se=1,we=function(e,t,n){var r=n||8192,i=r>>>1,a=null,o=r;return function(n){if(n<1||n>i)return e(n);o+n>r&&(a=e(r),o=0);var s=t.call(a,o,o+=n);return 7&o&&(o=1+(7|o)),s}}),t.LongBits=function(){if(Ee)return Ce;Ee=1,Ce=t;var e=Te();function t(e,t){this.lo=e>>>0,this.hi=t>>>0}var n=t.zero=new t(0,0);n.toNumber=function(){return 0},n.zzEncode=n.zzDecode=function(){return this},n.length=function(){return 1};var r=t.zeroHash="\0\0\0\0\0\0\0\0";t.fromNumber=function(e){if(0===e)return n;var r=e<0;r&&(e=-e);var i=e>>>0,a=(e-i)/4294967296>>>0;return r&&(a=~a>>>0,i=~i>>>0,++i>4294967295&&(i=0,++a>4294967295&&(a=0))),new t(i,a)},t.from=function(r){if("number"===typeof r)return t.fromNumber(r);if(e.isString(r)){if(!e.Long)return t.fromNumber(parseInt(r,10));r=e.Long.fromString(r)}return r.low||r.high?new t(r.low>>>0,r.high>>>0):n},t.prototype.toNumber=function(e){if(!e&&this.hi>>>31){var t=1+~this.lo>>>0,n=~this.hi>>>0;return t||(n=n+1>>>0),-(t+4294967296*n)}return this.lo+4294967296*this.hi},t.prototype.toLong=function(t){return e.Long?new e.Long(0|this.lo,0|this.hi,Boolean(t)):{low:0|this.lo,high:0|this.hi,unsigned:Boolean(t)}};var i=String.prototype.charCodeAt;return t.fromHash=function(e){return e===r?n:new t((i.call(e,0)|i.call(e,1)<<8|i.call(e,2)<<16|i.call(e,3)<<24)>>>0,(i.call(e,4)|i.call(e,5)<<8|i.call(e,6)<<16|i.call(e,7)<<24)>>>0)},t.prototype.toHash=function(){return String.fromCharCode(255&this.lo,this.lo>>>8&255,this.lo>>>16&255,this.lo>>>24,255&this.hi,this.hi>>>8&255,this.hi>>>16&255,this.hi>>>24)},t.prototype.zzEncode=function(){var e=this.hi>>31;return this.hi=((this.hi<<1|this.lo>>>31)^e)>>>0,this.lo=(this.lo<<1^e)>>>0,this},t.prototype.zzDecode=function(){var e=-(1&this.lo);return this.lo=((this.lo>>>1|this.hi<<31)^e)>>>0,this.hi=(this.hi>>>1^e)>>>0,this},t.prototype.length=function(){var e=this.lo,t=(this.lo>>>28|this.hi<<4)>>>0,n=this.hi>>>24;return 0===n?0===t?e<16384?e<128?1:2:e<2097152?3:4:t<16384?t<128?5:6:t<2097152?7:8:n<128?9:10},Ce}(),t.isNode=Boolean("undefined"!==typeof N&&N&&N.process&&N.process.versions&&N.process.versions.node),t.global=t.isNode&&N||"undefined"!==typeof window&&window||"undefined"!==typeof self&&self||N,t.emptyArray=Object.freeze?Object.freeze([]):[],t.emptyObject=Object.freeze?Object.freeze({}):{},t.isInteger=Number.isInteger||function(e){return"number"===typeof e&&isFinite(e)&&Math.floor(e)===e},t.isString=function(e){return"string"===typeof e||e instanceof String},t.isObject=function(e){return e&&"object"===typeof e},t.isset=t.isSet=function(e,t){var n=e[t];return!(null==n||!e.hasOwnProperty(t))&&("object"!==typeof n||(Array.isArray(n)?n.length:Object.keys(n).length)>0)},t.Buffer=function(){try{var e=t.inquire("buffer").Buffer;return e.prototype.utf8Write?e:null}catch(Cs){return null}}(),t._Buffer_from=null,t._Buffer_allocUnsafe=null,t.newBuffer=function(e){return"number"===typeof e?t.Buffer?t._Buffer_allocUnsafe(e):new t.Array(e):t.Buffer?t._Buffer_from(e):"undefined"===typeof Uint8Array?e:new Uint8Array(e)},t.Array="undefined"!==typeof Uint8Array?Uint8Array:Array,t.Long=t.global.dcodeIO&&t.global.dcodeIO.Long||t.global.Long||t.inquire("long"),t.key2Re=/^true|false|0|1$/,t.key32Re=/^-?(?:0|[1-9][0-9]*)$/,t.key64Re=/^(?:[\\x00-\\xff]{8}|-?(?:0|[1-9][0-9]*))$/,t.longToHash=function(e){return e?t.LongBits.from(e).toHash():t.LongBits.zeroHash},t.longFromHash=function(e,n){var r=t.LongBits.fromHash(e);return t.Long?t.Long.fromBits(r.lo,r.hi,n):r.toNumber(Boolean(n))},t.merge=n,t.lcFirst=function(e){return e.charAt(0).toLowerCase()+e.substring(1)},t.newError=r,t.ProtocolError=r("ProtocolError"),t.oneOfGetter=function(e){for(var t={},n=0;n<e.length;++n)t[e[n]]=1;return function(){for(var e=Object.keys(this),n=e.length-1;n>-1;--n)if(1===t[e[n]]&&void 0!==this[e[n]]&&null!==this[e[n]])return e[n]}},t.oneOfSetter=function(e){return function(t){for(var n=0;n<e.length;++n)e[n]!==t&&delete this[e[n]]}},t.toJSONOptions={longs:String,enums:String,bytes:String,json:!0},t._configure=function(){var e=t.Buffer;e?(t._Buffer_from=e.from!==Uint8Array.from&&e.from||function(t,n){return new e(t,n)},t._Buffer_allocUnsafe=e.allocUnsafe||function(t){return new e(t)}):t._Buffer_from=t._Buffer_allocUnsafe=null}}(de)),de}var Re,Ne=Ue,Oe=Te(),Ie=Oe.LongBits,_e=Oe.base64,De=Oe.utf8;function Ae(e,t,n){this.fn=e,this.len=t,this.next=void 0,this.val=n}function Le(){}function Me(e){this.head=e.head,this.tail=e.tail,this.len=e.len,this.next=e.states}function Ue(){this.len=0,this.head=new Ae(Le,0,0),this.tail=this.head,this.states=null}var Fe=function(){return Oe.Buffer?function(){return(Ue.create=function(){return new Re})()}:function(){return new Ue}};function je(e,t,n){t[n]=255&e}function Be(e,t){this.len=e,this.next=void 0,this.val=t}function ze(e,t,n){for(;e.hi;)t[n++]=127&e.lo|128,e.lo=(e.lo>>>7|e.hi<<25)>>>0,e.hi>>>=7;for(;e.lo>127;)t[n++]=127&e.lo|128,e.lo=e.lo>>>7;t[n++]=e.lo}function $e(e,t,n){t[n]=255&e,t[n+1]=e>>>8&255,t[n+2]=e>>>16&255,t[n+3]=e>>>24}Ue.create=Fe(),Ue.alloc=function(e){return new Oe.Array(e)},Oe.Array!==Array&&(Ue.alloc=Oe.pool(Ue.alloc,Oe.Array.prototype.subarray)),Ue.prototype._push=function(e,t,n){return this.tail=this.tail.next=new Ae(e,t,n),this.len+=t,this},Be.prototype=Object.create(Ae.prototype),Be.prototype.fn=function(e,t,n){for(;e>127;)t[n++]=127&e|128,e>>>=7;t[n]=e},Ue.prototype.uint32=function(e){return this.len+=(this.tail=this.tail.next=new Be((e>>>=0)<128?1:e<16384?2:e<2097152?3:e<268435456?4:5,e)).len,this},Ue.prototype.int32=function(e){return e<0?this._push(ze,10,Ie.fromNumber(e)):this.uint32(e)},Ue.prototype.sint32=function(e){return this.uint32((e<<1^e>>31)>>>0)},Ue.prototype.uint64=function(e){var t=Ie.from(e);return this._push(ze,t.length(),t)},Ue.prototype.int64=Ue.prototype.uint64,Ue.prototype.sint64=function(e){var t=Ie.from(e).zzEncode();return this._push(ze,t.length(),t)},Ue.prototype.bool=function(e){return this._push(je,1,e?1:0)},Ue.prototype.fixed32=function(e){return this._push($e,4,e>>>0)},Ue.prototype.sfixed32=Ue.prototype.fixed32,Ue.prototype.fixed64=function(e){var t=Ie.from(e);return this._push($e,4,t.lo)._push($e,4,t.hi)},Ue.prototype.sfixed64=Ue.prototype.fixed64,Ue.prototype.float=function(e){return this._push(Oe.float.writeFloatLE,4,e)},Ue.prototype.double=function(e){return this._push(Oe.float.writeDoubleLE,8,e)};var Ve=Oe.Array.prototype.set?function(e,t,n){t.set(e,n)}:function(e,t,n){for(var r=0;r<e.length;++r)t[n+r]=e[r]};Ue.prototype.bytes=function(e){var t=e.length>>>0;if(!t)return this._push(je,1,0);if(Oe.isString(e)){var n=Ue.alloc(t=_e.length(e));_e.decode(e,n,0),e=n}return this.uint32(t)._push(Ve,t,e)},Ue.prototype.string=function(e){var t=De.length(e);return t?this.uint32(t)._push(De.write,t,e):this._push(je,1,0)},Ue.prototype.fork=function(){return this.states=new Me(this),this.head=this.tail=new Ae(Le,0,0),this.len=0,this},Ue.prototype.reset=function(){return this.states?(this.head=this.states.head,this.tail=this.states.tail,this.len=this.states.len,this.states=this.states.next):(this.head=this.tail=new Ae(Le,0,0),this.len=0),this},Ue.prototype.ldelim=function(){var e=this.head,t=this.tail,n=this.len;return this.reset().uint32(n),n&&(this.tail.next=e.next,this.tail=t,this.len+=n),this},Ue.prototype.finish=function(){for(var e=this.head.next,t=this.constructor.alloc(this.len),n=0;e;)e.fn(e.val,t,n),n+=e.len,e=e.next;return t},Ue._configure=function(e){Re=e,Ue.create=Fe(),Re._configure()};var Je=He,We=Ne;(He.prototype=Object.create(We.prototype)).constructor=He;var qe=Te();function He(){We.call(this)}function Ge(e,t,n){e.length<40?qe.utf8.write(e,t,n):t.utf8Write?t.utf8Write(e,n):t.write(e,n)}He._configure=function(){He.alloc=qe._Buffer_allocUnsafe,He.writeBytesBuffer=qe.Buffer&&qe.Buffer.prototype instanceof Uint8Array&&"set"===qe.Buffer.prototype.set.name?function(e,t,n){t.set(e,n)}:function(e,t,n){if(e.copy)e.copy(t,n,0,e.length);else for(var r=0;r<e.length;)t[n++]=e[r++]}},He.prototype.bytes=function(e){qe.isString(e)&&(e=qe._Buffer_from(e,"base64"));var t=e.length>>>0;return this.uint32(t),t&&this._push(He.writeBytesBuffer,t,e),this},He.prototype.string=function(e){var t=qe.Buffer.byteLength(e);return this.uint32(t),t&&this._push(Ge,t,e),this},He._configure();var Qe,Ze=tt,Ke=Te(),Ye=Ke.LongBits,Xe=Ke.utf8;function et(e,t){return RangeError("index out of range: "+e.pos+" + "+(t||1)+" > "+e.len)}function tt(e){this.buf=e,this.pos=0,this.len=e.length}var nt="undefined"!==typeof Uint8Array?function(e){if(e instanceof Uint8Array||Array.isArray(e))return new tt(e);throw Error("illegal buffer")}:function(e){if(Array.isArray(e))return new tt(e);throw Error("illegal buffer")},rt=function(){return Ke.Buffer?function(e){return(tt.create=function(e){return Ke.Buffer.isBuffer(e)?new Qe(e):nt(e)})(e)}:nt};function it(){var e=new Ye(0,0),t=0;if(!(this.len-this.pos>4)){for(;t<3;++t){if(this.pos>=this.len)throw et(this);if(e.lo=(e.lo|(127&this.buf[this.pos])<<7*t)>>>0,this.buf[this.pos++]<128)return e}return e.lo=(e.lo|(127&this.buf[this.pos++])<<7*t)>>>0,e}for(;t<4;++t)if(e.lo=(e.lo|(127&this.buf[this.pos])<<7*t)>>>0,this.buf[this.pos++]<128)return e;if(e.lo=(e.lo|(127&this.buf[this.pos])<<28)>>>0,e.hi=(e.hi|(127&this.buf[this.pos])>>4)>>>0,this.buf[this.pos++]<128)return e;if(t=0,this.len-this.pos>4){for(;t<5;++t)if(e.hi=(e.hi|(127&this.buf[this.pos])<<7*t+3)>>>0,this.buf[this.pos++]<128)return e}else for(;t<5;++t){if(this.pos>=this.len)throw et(this);if(e.hi=(e.hi|(127&this.buf[this.pos])<<7*t+3)>>>0,this.buf[this.pos++]<128)return e}throw Error("invalid varint encoding")}function at(e,t){return(e[t-4]|e[t-3]<<8|e[t-2]<<16|e[t-1]<<24)>>>0}function ot(){if(this.pos+8>this.len)throw et(this,8);return new Ye(at(this.buf,this.pos+=4),at(this.buf,this.pos+=4))}tt.create=rt(),tt.prototype._slice=Ke.Array.prototype.subarray||Ke.Array.prototype.slice,tt.prototype.uint32=function(){var e=4294967295;return function(){if(e=(127&this.buf[this.pos])>>>0,this.buf[this.pos++]<128)return e;if(e=(e|(127&this.buf[this.pos])<<7)>>>0,this.buf[this.pos++]<128)return e;if(e=(e|(127&this.buf[this.pos])<<14)>>>0,this.buf[this.pos++]<128)return e;if(e=(e|(127&this.buf[this.pos])<<21)>>>0,this.buf[this.pos++]<128)return e;if(e=(e|(15&this.buf[this.pos])<<28)>>>0,this.buf[this.pos++]<128)return e;if((this.pos+=5)>this.len)throw this.pos=this.len,et(this,10);return e}}(),tt.prototype.int32=function(){return 0|this.uint32()},tt.prototype.sint32=function(){var e=this.uint32();return e>>>1^-(1&e)|0},tt.prototype.bool=function(){return 0!==this.uint32()},tt.prototype.fixed32=function(){if(this.pos+4>this.len)throw et(this,4);return at(this.buf,this.pos+=4)},tt.prototype.sfixed32=function(){if(this.pos+4>this.len)throw et(this,4);return 0|at(this.buf,this.pos+=4)},tt.prototype.float=function(){if(this.pos+4>this.len)throw et(this,4);var e=Ke.float.readFloatLE(this.buf,this.pos);return this.pos+=4,e},tt.prototype.double=function(){if(this.pos+8>this.len)throw et(this,4);var e=Ke.float.readDoubleLE(this.buf,this.pos);return this.pos+=8,e},tt.prototype.bytes=function(){var e=this.uint32(),t=this.pos,n=this.pos+e;if(n>this.len)throw et(this,e);return this.pos+=e,Array.isArray(this.buf)?this.buf.slice(t,n):t===n?new this.buf.constructor(0):this._slice.call(this.buf,t,n)},tt.prototype.string=function(){var e=this.bytes();return Xe.read(e,0,e.length)},tt.prototype.skip=function(e){if("number"===typeof e){if(this.pos+e>this.len)throw et(this,e);this.pos+=e}else do{if(this.pos>=this.len)throw et(this)}while(128&this.buf[this.pos++]);return this},tt.prototype.skipType=function(e){switch(e){case 0:this.skip();break;case 1:this.skip(8);break;case 2:this.skip(this.uint32());break;case 3:for(;4!==(e=7&this.uint32());)this.skipType(e);break;case 5:this.skip(4);break;default:throw Error("invalid wire type "+e+" at offset "+this.pos)}return this},tt._configure=function(e){Qe=e,tt.create=rt(),Qe._configure();var t=Ke.Long?"toLong":"toNumber";Ke.merge(tt.prototype,{int64:function(){return it.call(this)[t](!1)},uint64:function(){return it.call(this)[t](!0)},sint64:function(){return it.call(this).zzDecode()[t](!1)},fixed64:function(){return ot.call(this)[t](!0)},sfixed64:function(){return ot.call(this)[t](!1)}})};var st=lt,ct=Ze;(lt.prototype=Object.create(ct.prototype)).constructor=lt;var ut=Te();function lt(e){ct.call(this,e)}lt._configure=function(){ut.Buffer&&(lt.prototype._slice=ut.Buffer.prototype.slice)},lt.prototype.string=function(){var e=this.uint32();return this.buf.utf8Slice?this.buf.utf8Slice(this.pos,this.pos=Math.min(this.pos+e,this.len)):this.buf.toString("utf-8",this.pos,this.pos=Math.min(this.pos+e,this.len))},lt._configure();var dt={},ft=ht,pt=Te();function ht(e,t,n){if("function"!==typeof e)throw TypeError("rpcImpl must be a function");pt.EventEmitter.call(this),this.rpcImpl=e,this.requestDelimited=Boolean(t),this.responseDelimited=Boolean(n)}(ht.prototype=Object.create(pt.EventEmitter.prototype)).constructor=ht,ht.prototype.rpcCall=function e(t,n,r,i,a){if(!i)throw TypeError("request must be specified");var o=this;if(!a)return pt.asPromise(e,o,t,n,r,i);if(o.rpcImpl)try{return o.rpcImpl(t,n[o.requestDelimited?"encodeDelimited":"encode"](i).finish(),(function(e,n){if(e)return o.emit("error",e,t),a(e);if(null!==n){if(!(n instanceof r))try{n=r[o.responseDelimited?"decodeDelimited":"decode"](n)}catch(e){return o.emit("error",e,t),a(e)}return o.emit("data",n,t),a(null,n)}o.end(!0)}))}catch(s){return o.emit("error",s,t),void setTimeout((function(){a(s)}),0)}else setTimeout((function(){a(Error("already ended"))}),0)},ht.prototype.end=function(e){return this.rpcImpl&&(e||this.rpcImpl(null,null,null),this.rpcImpl=null,this.emit("end").off()),this},dt.Service=ft;var vt={};!function(e){var t=e;function n(){t.util._configure(),t.Writer._configure(t.BufferWriter),t.Reader._configure(t.BufferReader)}t.build="minimal",t.Writer=Ne,t.BufferWriter=Je,t.Reader=Ze,t.BufferReader=st,t.util=Te(),t.rpc=dt,t.roots=vt,t.configure=n,n()}(le);var mt,gt,bt,yt,kt,wt,St,Ct,Et,xt,Pt,Tt,Rt,Nt,Ot=O(le);function It(e){switch(e){case 0:case"AUDIO":return bt.AUDIO;case 1:case"VIDEO":return bt.VIDEO;case 2:case"DATA":return bt.DATA;default:return bt.UNRECOGNIZED}}function _t(e){switch(e){case bt.AUDIO:return"AUDIO";case bt.VIDEO:return"VIDEO";case bt.DATA:return"DATA";case bt.UNRECOGNIZED:default:return"UNRECOGNIZED"}}function Dt(e){switch(e){case 0:case"UNKNOWN":return yt.UNKNOWN;case 1:case"CAMERA":return yt.CAMERA;case 2:case"MICROPHONE":return yt.MICROPHONE;case 3:case"SCREEN_SHARE":return yt.SCREEN_SHARE;case 4:case"SCREEN_SHARE_AUDIO":return yt.SCREEN_SHARE_AUDIO;default:return yt.UNRECOGNIZED}}function At(e){switch(e){case yt.UNKNOWN:return"UNKNOWN";case yt.CAMERA:return"CAMERA";case yt.MICROPHONE:return"MICROPHONE";case yt.SCREEN_SHARE:return"SCREEN_SHARE";case yt.SCREEN_SHARE_AUDIO:return"SCREEN_SHARE_AUDIO";case yt.UNRECOGNIZED:default:return"UNRECOGNIZED"}}function Lt(e){switch(e){case 0:case"LOW":return kt.LOW;case 1:case"MEDIUM":return kt.MEDIUM;case 2:case"HIGH":return kt.HIGH;case 3:case"OFF":return kt.OFF;default:return kt.UNRECOGNIZED}}function Mt(e){switch(e){case kt.LOW:return"LOW";case kt.MEDIUM:return"MEDIUM";case kt.HIGH:return"HIGH";case kt.OFF:return"OFF";case kt.UNRECOGNIZED:default:return"UNRECOGNIZED"}}function Ut(e){switch(e){case 0:case"POOR":return wt.POOR;case 1:case"GOOD":return wt.GOOD;case 2:case"EXCELLENT":return wt.EXCELLENT;default:return wt.UNRECOGNIZED}}function Ft(e){switch(e){case 0:case"UNSET":return St.UNSET;case 1:case"DISABLED":return St.DISABLED;case 2:case"ENABLED":return St.ENABLED;default:return St.UNRECOGNIZED}}function jt(e){switch(e){case St.UNSET:return"UNSET";case St.DISABLED:return"DISABLED";case St.ENABLED:return"ENABLED";case St.UNRECOGNIZED:default:return"UNRECOGNIZED"}}function Bt(e){switch(e){case 0:case"UNKNOWN_REASON":return Ct.UNKNOWN_REASON;case 1:case"CLIENT_INITIATED":return Ct.CLIENT_INITIATED;case 2:case"DUPLICATE_IDENTITY":return Ct.DUPLICATE_IDENTITY;case 3:case"SERVER_SHUTDOWN":return Ct.SERVER_SHUTDOWN;case 4:case"PARTICIPANT_REMOVED":return Ct.PARTICIPANT_REMOVED;case 5:case"ROOM_DELETED":return Ct.ROOM_DELETED;case 6:case"STATE_MISMATCH":return Ct.STATE_MISMATCH;case 7:case"JOIN_FAILURE":return Ct.JOIN_FAILURE;default:return Ct.UNRECOGNIZED}}function zt(e){switch(e){case 0:case"JOINING":return xt.JOINING;case 1:case"JOINED":return xt.JOINED;case 2:case"ACTIVE":return xt.ACTIVE;case 3:case"DISCONNECTED":return xt.DISCONNECTED;default:return xt.UNRECOGNIZED}}function $t(e){switch(e){case 0:case"NONE":return Pt.NONE;case 1:case"GCM":return Pt.GCM;case 2:case"CUSTOM":return Pt.CUSTOM;default:return Pt.UNRECOGNIZED}}function Vt(e){switch(e){case Pt.NONE:return"NONE";case Pt.GCM:return"GCM";case Pt.CUSTOM:return"CUSTOM";case Pt.UNRECOGNIZED:default:return"UNRECOGNIZED"}}function Jt(e){switch(e){case 0:case"RELIABLE":return Tt.RELIABLE;case 1:case"LOSSY":return Tt.LOSSY;default:return Tt.UNRECOGNIZED}}function Wt(e){switch(e){case 0:case"Standard":return Rt.Standard;case 1:case"Cloud":return Rt.Cloud;default:return Rt.UNRECOGNIZED}}function qt(e){switch(e){case 0:case"UNKNOWN":return Nt.UNKNOWN;case 1:case"JS":return Nt.JS;case 2:case"SWIFT":return Nt.SWIFT;case 3:case"ANDROID":return Nt.ANDROID;case 4:case"FLUTTER":return Nt.FLUTTER;case 5:case"GO":return Nt.GO;case 6:case"UNITY":return Nt.UNITY;case 7:case"REACT_NATIVE":return Nt.REACT_NATIVE;case 8:case"RUST":return Nt.RUST;default:return Nt.UNRECOGNIZED}}!function(){if("undefined"!==typeof globalThis)return globalThis;if("undefined"!==typeof self)return self;if("undefined"!==typeof window)return window;if("undefined"!==typeof global)return global;throw"Unable to locate global object"}(),Ot.util.Long!==ue&&(Ot.util.Long=ue,Ot.configure()),function(e){e[e.DEFAULT_AC=0]="DEFAULT_AC",e[e.OPUS=1]="OPUS",e[e.AAC=2]="AAC",e[e.UNRECOGNIZED=-1]="UNRECOGNIZED"}(mt||(mt={})),function(e){e[e.DEFAULT_VC=0]="DEFAULT_VC",e[e.H264_BASELINE=1]="H264_BASELINE",e[e.H264_MAIN=2]="H264_MAIN",e[e.H264_HIGH=3]="H264_HIGH",e[e.VP8=4]="VP8",e[e.UNRECOGNIZED=-1]="UNRECOGNIZED"}(gt||(gt={})),function(e){e[e.AUDIO=0]="AUDIO",e[e.VIDEO=1]="VIDEO",e[e.DATA=2]="DATA",e[e.UNRECOGNIZED=-1]="UNRECOGNIZED"}(bt||(bt={})),function(e){e[e.UNKNOWN=0]="UNKNOWN",e[e.CAMERA=1]="CAMERA",e[e.MICROPHONE=2]="MICROPHONE",e[e.SCREEN_SHARE=3]="SCREEN_SHARE",e[e.SCREEN_SHARE_AUDIO=4]="SCREEN_SHARE_AUDIO",e[e.UNRECOGNIZED=-1]="UNRECOGNIZED"}(yt||(yt={})),function(e){e[e.LOW=0]="LOW",e[e.MEDIUM=1]="MEDIUM",e[e.HIGH=2]="HIGH",e[e.OFF=3]="OFF",e[e.UNRECOGNIZED=-1]="UNRECOGNIZED"}(kt||(kt={})),function(e){e[e.POOR=0]="POOR",e[e.GOOD=1]="GOOD",e[e.EXCELLENT=2]="EXCELLENT",e[e.UNRECOGNIZED=-1]="UNRECOGNIZED"}(wt||(wt={})),function(e){e[e.UNSET=0]="UNSET",e[e.DISABLED=1]="DISABLED",e[e.ENABLED=2]="ENABLED",e[e.UNRECOGNIZED=-1]="UNRECOGNIZED"}(St||(St={})),function(e){e[e.UNKNOWN_REASON=0]="UNKNOWN_REASON",e[e.CLIENT_INITIATED=1]="CLIENT_INITIATED",e[e.DUPLICATE_IDENTITY=2]="DUPLICATE_IDENTITY",e[e.SERVER_SHUTDOWN=3]="SERVER_SHUTDOWN",e[e.PARTICIPANT_REMOVED=4]="PARTICIPANT_REMOVED",e[e.ROOM_DELETED=5]="ROOM_DELETED",e[e.STATE_MISMATCH=6]="STATE_MISMATCH",e[e.JOIN_FAILURE=7]="JOIN_FAILURE",e[e.UNRECOGNIZED=-1]="UNRECOGNIZED"}(Ct||(Ct={})),function(e){e[e.RR_UNKOWN=0]="RR_UNKOWN",e[e.RR_SIGNAL_DISCONNECTED=1]="RR_SIGNAL_DISCONNECTED",e[e.RR_PUBLISHER_FAILED=2]="RR_PUBLISHER_FAILED",e[e.RR_SUBSCRIBER_FAILED=3]="RR_SUBSCRIBER_FAILED",e[e.RR_SWITCH_CANDIDATE=4]="RR_SWITCH_CANDIDATE",e[e.UNRECOGNIZED=-1]="UNRECOGNIZED"}(Et||(Et={})),function(e){e[e.JOINING=0]="JOINING",e[e.JOINED=1]="JOINED",e[e.ACTIVE=2]="ACTIVE",e[e.DISCONNECTED=3]="DISCONNECTED",e[e.UNRECOGNIZED=-1]="UNRECOGNIZED"}(xt||(xt={})),function(e){e[e.NONE=0]="NONE",e[e.GCM=1]="GCM",e[e.CUSTOM=2]="CUSTOM",e[e.UNRECOGNIZED=-1]="UNRECOGNIZED"}(Pt||(Pt={})),function(e){e[e.RELIABLE=0]="RELIABLE",e[e.LOSSY=1]="LOSSY",e[e.UNRECOGNIZED=-1]="UNRECOGNIZED"}(Tt||(Tt={})),function(e){e[e.Standard=0]="Standard",e[e.Cloud=1]="Cloud",e[e.UNRECOGNIZED=-1]="UNRECOGNIZED"}(Rt||(Rt={})),function(e){e[e.UNKNOWN=0]="UNKNOWN",e[e.JS=1]="JS",e[e.SWIFT=2]="SWIFT",e[e.ANDROID=3]="ANDROID",e[e.FLUTTER=4]="FLUTTER",e[e.GO=5]="GO",e[e.UNITY=6]="UNITY",e[e.REACT_NATIVE=7]="REACT_NATIVE",e[e.RUST=8]="RUST",e[e.UNRECOGNIZED=-1]="UNRECOGNIZED"}(Nt||(Nt={}));var Ht={encode:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:Ot.Writer.create();""!==e.sid&&t.uint32(10).string(e.sid),""!==e.name&&t.uint32(18).string(e.name),0!==e.emptyTimeout&&t.uint32(24).uint32(e.emptyTimeout),0!==e.maxParticipants&&t.uint32(32).uint32(e.maxParticipants),0!==e.creationTime&&t.uint32(40).int64(e.creationTime),""!==e.turnPassword&&t.uint32(50).string(e.turnPassword);var n,r=u(e.enabledCodecs);try{for(r.s();!(n=r.n()).done;){var i=n.value;Gt.encode(i,t.uint32(58).fork()).ldelim()}}catch(a){r.e(a)}finally{r.f()}return""!==e.metadata&&t.uint32(66).string(e.metadata),0!==e.numParticipants&&t.uint32(72).uint32(e.numParticipants),0!==e.numPublishers&&t.uint32(88).uint32(e.numPublishers),!0===e.activeRecording&&t.uint32(80).bool(e.activeRecording),t},decode:function(e,t){for(var n=e instanceof Ot.Reader?e:Ot.Reader.create(e),r=void 0===t?n.len:n.pos+t,i={sid:"",name:"",emptyTimeout:0,maxParticipants:0,creationTime:0,turnPassword:"",enabledCodecs:[],metadata:"",numParticipants:0,numPublishers:0,activeRecording:!1};n.pos<r;){var a=n.uint32();switch(a>>>3){case 1:if(10!=a)break;i.sid=n.string();continue;case 2:if(18!=a)break;i.name=n.string();continue;case 3:if(24!=a)break;i.emptyTimeout=n.uint32();continue;case 4:if(32!=a)break;i.maxParticipants=n.uint32();continue;case 5:if(40!=a)break;i.creationTime=hn(n.int64());continue;case 6:if(50!=a)break;i.turnPassword=n.string();continue;case 7:if(58!=a)break;i.enabledCodecs.push(Gt.decode(n,n.uint32()));continue;case 8:if(66!=a)break;i.metadata=n.string();continue;case 9:if(72!=a)break;i.numParticipants=n.uint32();continue;case 11:if(88!=a)break;i.numPublishers=n.uint32();continue;case 10:if(80!=a)break;i.activeRecording=n.bool();continue}if(4==(7&a)||0==a)break;n.skipType(7&a)}return i},fromJSON:function(e){return{sid:vn(e.sid)?String(e.sid):"",name:vn(e.name)?String(e.name):"",emptyTimeout:vn(e.emptyTimeout)?Number(e.emptyTimeout):0,maxParticipants:vn(e.maxParticipants)?Number(e.maxParticipants):0,creationTime:vn(e.creationTime)?Number(e.creationTime):0,turnPassword:vn(e.turnPassword)?String(e.turnPassword):"",enabledCodecs:Array.isArray(null===e||void 0===e?void 0:e.enabledCodecs)?e.enabledCodecs.map((function(e){return Gt.fromJSON(e)})):[],metadata:vn(e.metadata)?String(e.metadata):"",numParticipants:vn(e.numParticipants)?Number(e.numParticipants):0,numPublishers:vn(e.numPublishers)?Number(e.numPublishers):0,activeRecording:!!vn(e.activeRecording)&&Boolean(e.activeRecording)}},toJSON:function(e){var t={};return void 0!==e.sid&&(t.sid=e.sid),void 0!==e.name&&(t.name=e.name),void 0!==e.emptyTimeout&&(t.emptyTimeout=Math.round(e.emptyTimeout)),void 0!==e.maxParticipants&&(t.maxParticipants=Math.round(e.maxParticipants)),void 0!==e.creationTime&&(t.creationTime=Math.round(e.creationTime)),void 0!==e.turnPassword&&(t.turnPassword=e.turnPassword),e.enabledCodecs?t.enabledCodecs=e.enabledCodecs.map((function(e){return e?Gt.toJSON(e):void 0})):t.enabledCodecs=[],void 0!==e.metadata&&(t.metadata=e.metadata),void 0!==e.numParticipants&&(t.numParticipants=Math.round(e.numParticipants)),void 0!==e.numPublishers&&(t.numPublishers=Math.round(e.numPublishers)),void 0!==e.activeRecording&&(t.activeRecording=e.activeRecording),t},create:function(e){return Ht.fromPartial(null!==e&&void 0!==e?e:{})},fromPartial:function(e){var t,n,r,i,a,o,s,c,u,l,d,f={sid:"",name:"",emptyTimeout:0,maxParticipants:0,creationTime:0,turnPassword:"",enabledCodecs:[],metadata:"",numParticipants:0,numPublishers:0,activeRecording:!1};return f.sid=null!==(t=e.sid)&&void 0!==t?t:"",f.name=null!==(n=e.name)&&void 0!==n?n:"",f.emptyTimeout=null!==(r=e.emptyTimeout)&&void 0!==r?r:0,f.maxParticipants=null!==(i=e.maxParticipants)&&void 0!==i?i:0,f.creationTime=null!==(a=e.creationTime)&&void 0!==a?a:0,f.turnPassword=null!==(o=e.turnPassword)&&void 0!==o?o:"",f.enabledCodecs=(null===(s=e.enabledCodecs)||void 0===s?void 0:s.map((function(e){return Gt.fromPartial(e)})))||[],f.metadata=null!==(c=e.metadata)&&void 0!==c?c:"",f.numParticipants=null!==(u=e.numParticipants)&&void 0!==u?u:0,f.numPublishers=null!==(l=e.numPublishers)&&void 0!==l?l:0,f.activeRecording=null!==(d=e.activeRecording)&&void 0!==d&&d,f}};var Gt={encode:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:Ot.Writer.create();return""!==e.mime&&t.uint32(10).string(e.mime),""!==e.fmtpLine&&t.uint32(18).string(e.fmtpLine),t},decode:function(e,t){for(var n=e instanceof Ot.Reader?e:Ot.Reader.create(e),r=void 0===t?n.len:n.pos+t,i={mime:"",fmtpLine:""};n.pos<r;){var a=n.uint32();switch(a>>>3){case 1:if(10!=a)break;i.mime=n.string();continue;case 2:if(18!=a)break;i.fmtpLine=n.string();continue}if(4==(7&a)||0==a)break;n.skipType(7&a)}return i},fromJSON:function(e){return{mime:vn(e.mime)?String(e.mime):"",fmtpLine:vn(e.fmtpLine)?String(e.fmtpLine):""}},toJSON:function(e){var t={};return void 0!==e.mime&&(t.mime=e.mime),void 0!==e.fmtpLine&&(t.fmtpLine=e.fmtpLine),t},create:function(e){return Gt.fromPartial(null!==e&&void 0!==e?e:{})},fromPartial:function(e){var t,n,r={mime:"",fmtpLine:""};return r.mime=null!==(t=e.mime)&&void 0!==t?t:"",r.fmtpLine=null!==(n=e.fmtpLine)&&void 0!==n?n:"",r}};var Qt={encode:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:Ot.Writer.create();!0===e.canSubscribe&&t.uint32(8).bool(e.canSubscribe),!0===e.canPublish&&t.uint32(16).bool(e.canPublish),!0===e.canPublishData&&t.uint32(24).bool(e.canPublishData),t.uint32(74).fork();var n,r=u(e.canPublishSources);try{for(r.s();!(n=r.n()).done;){var i=n.value;t.int32(i)}}catch(a){r.e(a)}finally{r.f()}return t.ldelim(),!0===e.hidden&&t.uint32(56).bool(e.hidden),!0===e.recorder&&t.uint32(64).bool(e.recorder),!0===e.canUpdateMetadata&&t.uint32(80).bool(e.canUpdateMetadata),t},decode:function(e,t){for(var n=e instanceof Ot.Reader?e:Ot.Reader.create(e),r=void 0===t?n.len:n.pos+t,i={canSubscribe:!1,canPublish:!1,canPublishData:!1,canPublishSources:[],hidden:!1,recorder:!1,canUpdateMetadata:!1};n.pos<r;){var a=n.uint32();switch(a>>>3){case 1:if(8!=a)break;i.canSubscribe=n.bool();continue;case 2:if(16!=a)break;i.canPublish=n.bool();continue;case 3:if(24!=a)break;i.canPublishData=n.bool();continue;case 9:if(72==a){i.canPublishSources.push(n.int32());continue}if(74==a){for(var o=n.uint32()+n.pos;n.pos<o;)i.canPublishSources.push(n.int32());continue}break;case 7:if(56!=a)break;i.hidden=n.bool();continue;case 8:if(64!=a)break;i.recorder=n.bool();continue;case 10:if(80!=a)break;i.canUpdateMetadata=n.bool();continue}if(4==(7&a)||0==a)break;n.skipType(7&a)}return i},fromJSON:function(e){return{canSubscribe:!!vn(e.canSubscribe)&&Boolean(e.canSubscribe),canPublish:!!vn(e.canPublish)&&Boolean(e.canPublish),canPublishData:!!vn(e.canPublishData)&&Boolean(e.canPublishData),canPublishSources:Array.isArray(null===e||void 0===e?void 0:e.canPublishSources)?e.canPublishSources.map((function(e){return Dt(e)})):[],hidden:!!vn(e.hidden)&&Boolean(e.hidden),recorder:!!vn(e.recorder)&&Boolean(e.recorder),canUpdateMetadata:!!vn(e.canUpdateMetadata)&&Boolean(e.canUpdateMetadata)}},toJSON:function(e){var t={};return void 0!==e.canSubscribe&&(t.canSubscribe=e.canSubscribe),void 0!==e.canPublish&&(t.canPublish=e.canPublish),void 0!==e.canPublishData&&(t.canPublishData=e.canPublishData),e.canPublishSources?t.canPublishSources=e.canPublishSources.map((function(e){return At(e)})):t.canPublishSources=[],void 0!==e.hidden&&(t.hidden=e.hidden),void 0!==e.recorder&&(t.recorder=e.recorder),void 0!==e.canUpdateMetadata&&(t.canUpdateMetadata=e.canUpdateMetadata),t},create:function(e){return Qt.fromPartial(null!==e&&void 0!==e?e:{})},fromPartial:function(e){var t,n,r,i,a,o,s,c={canSubscribe:!1,canPublish:!1,canPublishData:!1,canPublishSources:[],hidden:!1,recorder:!1,canUpdateMetadata:!1};return c.canSubscribe=null!==(t=e.canSubscribe)&&void 0!==t&&t,c.canPublish=null!==(n=e.canPublish)&&void 0!==n&&n,c.canPublishData=null!==(r=e.canPublishData)&&void 0!==r&&r,c.canPublishSources=(null===(i=e.canPublishSources)||void 0===i?void 0:i.map((function(e){return e})))||[],c.hidden=null!==(a=e.hidden)&&void 0!==a&&a,c.recorder=null!==(o=e.recorder)&&void 0!==o&&o,c.canUpdateMetadata=null!==(s=e.canUpdateMetadata)&&void 0!==s&&s,c}};var Zt={encode:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:Ot.Writer.create();""!==e.sid&&t.uint32(10).string(e.sid),""!==e.identity&&t.uint32(18).string(e.identity),0!==e.state&&t.uint32(24).int32(e.state);var n,r=u(e.tracks);try{for(r.s();!(n=r.n()).done;){var i=n.value;Yt.encode(i,t.uint32(34).fork()).ldelim()}}catch(a){r.e(a)}finally{r.f()}return""!==e.metadata&&t.uint32(42).string(e.metadata),0!==e.joinedAt&&t.uint32(48).int64(e.joinedAt),""!==e.name&&t.uint32(74).string(e.name),0!==e.version&&t.uint32(80).uint32(e.version),void 0!==e.permission&&Qt.encode(e.permission,t.uint32(90).fork()).ldelim(),""!==e.region&&t.uint32(98).string(e.region),!0===e.isPublisher&&t.uint32(104).bool(e.isPublisher),t},decode:function(e,t){for(var n=e instanceof Ot.Reader?e:Ot.Reader.create(e),r=void 0===t?n.len:n.pos+t,i={sid:"",identity:"",state:0,tracks:[],metadata:"",joinedAt:0,name:"",version:0,permission:void 0,region:"",isPublisher:!1};n.pos<r;){var a=n.uint32();switch(a>>>3){case 1:if(10!=a)break;i.sid=n.string();continue;case 2:if(18!=a)break;i.identity=n.string();continue;case 3:if(24!=a)break;i.state=n.int32();continue;case 4:if(34!=a)break;i.tracks.push(Yt.decode(n,n.uint32()));continue;case 5:if(42!=a)break;i.metadata=n.string();continue;case 6:if(48!=a)break;i.joinedAt=hn(n.int64());continue;case 9:if(74!=a)break;i.name=n.string();continue;case 10:if(80!=a)break;i.version=n.uint32();continue;case 11:if(90!=a)break;i.permission=Qt.decode(n,n.uint32());continue;case 12:if(98!=a)break;i.region=n.string();continue;case 13:if(104!=a)break;i.isPublisher=n.bool();continue}if(4==(7&a)||0==a)break;n.skipType(7&a)}return i},fromJSON:function(e){return{sid:vn(e.sid)?String(e.sid):"",identity:vn(e.identity)?String(e.identity):"",state:vn(e.state)?zt(e.state):0,tracks:Array.isArray(null===e||void 0===e?void 0:e.tracks)?e.tracks.map((function(e){return Yt.fromJSON(e)})):[],metadata:vn(e.metadata)?String(e.metadata):"",joinedAt:vn(e.joinedAt)?Number(e.joinedAt):0,name:vn(e.name)?String(e.name):"",version:vn(e.version)?Number(e.version):0,permission:vn(e.permission)?Qt.fromJSON(e.permission):void 0,region:vn(e.region)?String(e.region):"",isPublisher:!!vn(e.isPublisher)&&Boolean(e.isPublisher)}},toJSON:function(e){var t={};return void 0!==e.sid&&(t.sid=e.sid),void 0!==e.identity&&(t.identity=e.identity),void 0!==e.state&&(t.state=function(e){switch(e){case xt.JOINING:return"JOINING";case xt.JOINED:return"JOINED";case xt.ACTIVE:return"ACTIVE";case xt.DISCONNECTED:return"DISCONNECTED";case xt.UNRECOGNIZED:default:return"UNRECOGNIZED"}}(e.state)),e.tracks?t.tracks=e.tracks.map((function(e){return e?Yt.toJSON(e):void 0})):t.tracks=[],void 0!==e.metadata&&(t.metadata=e.metadata),void 0!==e.joinedAt&&(t.joinedAt=Math.round(e.joinedAt)),void 0!==e.name&&(t.name=e.name),void 0!==e.version&&(t.version=Math.round(e.version)),void 0!==e.permission&&(t.permission=e.permission?Qt.toJSON(e.permission):void 0),void 0!==e.region&&(t.region=e.region),void 0!==e.isPublisher&&(t.isPublisher=e.isPublisher),t},create:function(e){return Zt.fromPartial(null!==e&&void 0!==e?e:{})},fromPartial:function(e){var t,n,r,i,a,o,s,c,u,l,d={sid:"",identity:"",state:0,tracks:[],metadata:"",joinedAt:0,name:"",version:0,permission:void 0,region:"",isPublisher:!1};return d.sid=null!==(t=e.sid)&&void 0!==t?t:"",d.identity=null!==(n=e.identity)&&void 0!==n?n:"",d.state=null!==(r=e.state)&&void 0!==r?r:0,d.tracks=(null===(i=e.tracks)||void 0===i?void 0:i.map((function(e){return Yt.fromPartial(e)})))||[],d.metadata=null!==(a=e.metadata)&&void 0!==a?a:"",d.joinedAt=null!==(o=e.joinedAt)&&void 0!==o?o:0,d.name=null!==(s=e.name)&&void 0!==s?s:"",d.version=null!==(c=e.version)&&void 0!==c?c:0,d.permission=void 0!==e.permission&&null!==e.permission?Qt.fromPartial(e.permission):void 0,d.region=null!==(u=e.region)&&void 0!==u?u:"",d.isPublisher=null!==(l=e.isPublisher)&&void 0!==l&&l,d}};var Kt={encode:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:Ot.Writer.create();""!==e.mimeType&&t.uint32(10).string(e.mimeType),""!==e.mid&&t.uint32(18).string(e.mid),""!==e.cid&&t.uint32(26).string(e.cid);var n,r=u(e.layers);try{for(r.s();!(n=r.n()).done;){var i=n.value;Xt.encode(i,t.uint32(34).fork()).ldelim()}}catch(a){r.e(a)}finally{r.f()}return t},decode:function(e,t){for(var n=e instanceof Ot.Reader?e:Ot.Reader.create(e),r=void 0===t?n.len:n.pos+t,i={mimeType:"",mid:"",cid:"",layers:[]};n.pos<r;){var a=n.uint32();switch(a>>>3){case 1:if(10!=a)break;i.mimeType=n.string();continue;case 2:if(18!=a)break;i.mid=n.string();continue;case 3:if(26!=a)break;i.cid=n.string();continue;case 4:if(34!=a)break;i.layers.push(Xt.decode(n,n.uint32()));continue}if(4==(7&a)||0==a)break;n.skipType(7&a)}return i},fromJSON:function(e){return{mimeType:vn(e.mimeType)?String(e.mimeType):"",mid:vn(e.mid)?String(e.mid):"",cid:vn(e.cid)?String(e.cid):"",layers:Array.isArray(null===e||void 0===e?void 0:e.layers)?e.layers.map((function(e){return Xt.fromJSON(e)})):[]}},toJSON:function(e){var t={};return void 0!==e.mimeType&&(t.mimeType=e.mimeType),void 0!==e.mid&&(t.mid=e.mid),void 0!==e.cid&&(t.cid=e.cid),e.layers?t.layers=e.layers.map((function(e){return e?Xt.toJSON(e):void 0})):t.layers=[],t},create:function(e){return Kt.fromPartial(null!==e&&void 0!==e?e:{})},fromPartial:function(e){var t,n,r,i,a={mimeType:"",mid:"",cid:"",layers:[]};return a.mimeType=null!==(t=e.mimeType)&&void 0!==t?t:"",a.mid=null!==(n=e.mid)&&void 0!==n?n:"",a.cid=null!==(r=e.cid)&&void 0!==r?r:"",a.layers=(null===(i=e.layers)||void 0===i?void 0:i.map((function(e){return Xt.fromPartial(e)})))||[],a}};var Yt={encode:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:Ot.Writer.create();""!==e.sid&&t.uint32(10).string(e.sid),0!==e.type&&t.uint32(16).int32(e.type),""!==e.name&&t.uint32(26).string(e.name),!0===e.muted&&t.uint32(32).bool(e.muted),0!==e.width&&t.uint32(40).uint32(e.width),0!==e.height&&t.uint32(48).uint32(e.height),!0===e.simulcast&&t.uint32(56).bool(e.simulcast),!0===e.disableDtx&&t.uint32(64).bool(e.disableDtx),0!==e.source&&t.uint32(72).int32(e.source);var n,r=u(e.layers);try{for(r.s();!(n=r.n()).done;){var i=n.value;Xt.encode(i,t.uint32(82).fork()).ldelim()}}catch(c){r.e(c)}finally{r.f()}""!==e.mimeType&&t.uint32(90).string(e.mimeType),""!==e.mid&&t.uint32(98).string(e.mid);var a,o=u(e.codecs);try{for(o.s();!(a=o.n()).done;){var s=a.value;Kt.encode(s,t.uint32(106).fork()).ldelim()}}catch(c){o.e(c)}finally{o.f()}return!0===e.stereo&&t.uint32(112).bool(e.stereo),!0===e.disableRed&&t.uint32(120).bool(e.disableRed),0!==e.encryption&&t.uint32(128).int32(e.encryption),t},decode:function(e,t){for(var n=e instanceof Ot.Reader?e:Ot.Reader.create(e),r=void 0===t?n.len:n.pos+t,i={sid:"",type:0,name:"",muted:!1,width:0,height:0,simulcast:!1,disableDtx:!1,source:0,layers:[],mimeType:"",mid:"",codecs:[],stereo:!1,disableRed:!1,encryption:0};n.pos<r;){var a=n.uint32();switch(a>>>3){case 1:if(10!=a)break;i.sid=n.string();continue;case 2:if(16!=a)break;i.type=n.int32();continue;case 3:if(26!=a)break;i.name=n.string();continue;case 4:if(32!=a)break;i.muted=n.bool();continue;case 5:if(40!=a)break;i.width=n.uint32();continue;case 6:if(48!=a)break;i.height=n.uint32();continue;case 7:if(56!=a)break;i.simulcast=n.bool();continue;case 8:if(64!=a)break;i.disableDtx=n.bool();continue;case 9:if(72!=a)break;i.source=n.int32();continue;case 10:if(82!=a)break;i.layers.push(Xt.decode(n,n.uint32()));continue;case 11:if(90!=a)break;i.mimeType=n.string();continue;case 12:if(98!=a)break;i.mid=n.string();continue;case 13:if(106!=a)break;i.codecs.push(Kt.decode(n,n.uint32()));continue;case 14:if(112!=a)break;i.stereo=n.bool();continue;case 15:if(120!=a)break;i.disableRed=n.bool();continue;case 16:if(128!=a)break;i.encryption=n.int32();continue}if(4==(7&a)||0==a)break;n.skipType(7&a)}return i},fromJSON:function(e){return{sid:vn(e.sid)?String(e.sid):"",type:vn(e.type)?It(e.type):0,name:vn(e.name)?String(e.name):"",muted:!!vn(e.muted)&&Boolean(e.muted),width:vn(e.width)?Number(e.width):0,height:vn(e.height)?Number(e.height):0,simulcast:!!vn(e.simulcast)&&Boolean(e.simulcast),disableDtx:!!vn(e.disableDtx)&&Boolean(e.disableDtx),source:vn(e.source)?Dt(e.source):0,layers:Array.isArray(null===e||void 0===e?void 0:e.layers)?e.layers.map((function(e){return Xt.fromJSON(e)})):[],mimeType:vn(e.mimeType)?String(e.mimeType):"",mid:vn(e.mid)?String(e.mid):"",codecs:Array.isArray(null===e||void 0===e?void 0:e.codecs)?e.codecs.map((function(e){return Kt.fromJSON(e)})):[],stereo:!!vn(e.stereo)&&Boolean(e.stereo),disableRed:!!vn(e.disableRed)&&Boolean(e.disableRed),encryption:vn(e.encryption)?$t(e.encryption):0}},toJSON:function(e){var t={};return void 0!==e.sid&&(t.sid=e.sid),void 0!==e.type&&(t.type=_t(e.type)),void 0!==e.name&&(t.name=e.name),void 0!==e.muted&&(t.muted=e.muted),void 0!==e.width&&(t.width=Math.round(e.width)),void 0!==e.height&&(t.height=Math.round(e.height)),void 0!==e.simulcast&&(t.simulcast=e.simulcast),void 0!==e.disableDtx&&(t.disableDtx=e.disableDtx),void 0!==e.source&&(t.source=At(e.source)),e.layers?t.layers=e.layers.map((function(e){return e?Xt.toJSON(e):void 0})):t.layers=[],void 0!==e.mimeType&&(t.mimeType=e.mimeType),void 0!==e.mid&&(t.mid=e.mid),e.codecs?t.codecs=e.codecs.map((function(e){return e?Kt.toJSON(e):void 0})):t.codecs=[],void 0!==e.stereo&&(t.stereo=e.stereo),void 0!==e.disableRed&&(t.disableRed=e.disableRed),void 0!==e.encryption&&(t.encryption=Vt(e.encryption)),t},create:function(e){return Yt.fromPartial(null!==e&&void 0!==e?e:{})},fromPartial:function(e){var t,n,r,i,a,o,s,c,u,l,d,f,p,h,v,m,g={sid:"",type:0,name:"",muted:!1,width:0,height:0,simulcast:!1,disableDtx:!1,source:0,layers:[],mimeType:"",mid:"",codecs:[],stereo:!1,disableRed:!1,encryption:0};return g.sid=null!==(t=e.sid)&&void 0!==t?t:"",g.type=null!==(n=e.type)&&void 0!==n?n:0,g.name=null!==(r=e.name)&&void 0!==r?r:"",g.muted=null!==(i=e.muted)&&void 0!==i&&i,g.width=null!==(a=e.width)&&void 0!==a?a:0,g.height=null!==(o=e.height)&&void 0!==o?o:0,g.simulcast=null!==(s=e.simulcast)&&void 0!==s&&s,g.disableDtx=null!==(c=e.disableDtx)&&void 0!==c&&c,g.source=null!==(u=e.source)&&void 0!==u?u:0,g.layers=(null===(l=e.layers)||void 0===l?void 0:l.map((function(e){return Xt.fromPartial(e)})))||[],g.mimeType=null!==(d=e.mimeType)&&void 0!==d?d:"",g.mid=null!==(f=e.mid)&&void 0!==f?f:"",g.codecs=(null===(p=e.codecs)||void 0===p?void 0:p.map((function(e){return Kt.fromPartial(e)})))||[],g.stereo=null!==(h=e.stereo)&&void 0!==h&&h,g.disableRed=null!==(v=e.disableRed)&&void 0!==v&&v,g.encryption=null!==(m=e.encryption)&&void 0!==m?m:0,g}};var Xt={encode:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:Ot.Writer.create();return 0!==e.quality&&t.uint32(8).int32(e.quality),0!==e.width&&t.uint32(16).uint32(e.width),0!==e.height&&t.uint32(24).uint32(e.height),0!==e.bitrate&&t.uint32(32).uint32(e.bitrate),0!==e.ssrc&&t.uint32(40).uint32(e.ssrc),t},decode:function(e,t){for(var n=e instanceof Ot.Reader?e:Ot.Reader.create(e),r=void 0===t?n.len:n.pos+t,i={quality:0,width:0,height:0,bitrate:0,ssrc:0};n.pos<r;){var a=n.uint32();switch(a>>>3){case 1:if(8!=a)break;i.quality=n.int32();continue;case 2:if(16!=a)break;i.width=n.uint32();continue;case 3:if(24!=a)break;i.height=n.uint32();continue;case 4:if(32!=a)break;i.bitrate=n.uint32();continue;case 5:if(40!=a)break;i.ssrc=n.uint32();continue}if(4==(7&a)||0==a)break;n.skipType(7&a)}return i},fromJSON:function(e){return{quality:vn(e.quality)?Lt(e.quality):0,width:vn(e.width)?Number(e.width):0,height:vn(e.height)?Number(e.height):0,bitrate:vn(e.bitrate)?Number(e.bitrate):0,ssrc:vn(e.ssrc)?Number(e.ssrc):0}},toJSON:function(e){var t={};return void 0!==e.quality&&(t.quality=Mt(e.quality)),void 0!==e.width&&(t.width=Math.round(e.width)),void 0!==e.height&&(t.height=Math.round(e.height)),void 0!==e.bitrate&&(t.bitrate=Math.round(e.bitrate)),void 0!==e.ssrc&&(t.ssrc=Math.round(e.ssrc)),t},create:function(e){return Xt.fromPartial(null!==e&&void 0!==e?e:{})},fromPartial:function(e){var t,n,r,i,a,o={quality:0,width:0,height:0,bitrate:0,ssrc:0};return o.quality=null!==(t=e.quality)&&void 0!==t?t:0,o.width=null!==(n=e.width)&&void 0!==n?n:0,o.height=null!==(r=e.height)&&void 0!==r?r:0,o.bitrate=null!==(i=e.bitrate)&&void 0!==i?i:0,o.ssrc=null!==(a=e.ssrc)&&void 0!==a?a:0,o}};var en={encode:function(e){var t,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:Ot.Writer.create();switch(0!==e.kind&&n.uint32(8).int32(e.kind),null===(t=e.value)||void 0===t?void 0:t.$case){case"user":an.encode(e.value.user,n.uint32(18).fork()).ldelim();break;case"speaker":tn.encode(e.value.speaker,n.uint32(26).fork()).ldelim()}return n},decode:function(e,t){for(var n=e instanceof Ot.Reader?e:Ot.Reader.create(e),r=void 0===t?n.len:n.pos+t,i={kind:0,value:void 0};n.pos<r;){var a=n.uint32();switch(a>>>3){case 1:if(8!=a)break;i.kind=n.int32();continue;case 2:if(18!=a)break;i.value={$case:"user",user:an.decode(n,n.uint32())};continue;case 3:if(26!=a)break;i.value={$case:"speaker",speaker:tn.decode(n,n.uint32())};continue}if(4==(7&a)||0==a)break;n.skipType(7&a)}return i},fromJSON:function(e){return{kind:vn(e.kind)?Jt(e.kind):0,value:vn(e.user)?{$case:"user",user:an.fromJSON(e.user)}:vn(e.speaker)?{$case:"speaker",speaker:tn.fromJSON(e.speaker)}:void 0}},toJSON:function(e){var t,n,r,i,a,o,s={};return void 0!==e.kind&&(s.kind=function(e){switch(e){case Tt.RELIABLE:return"RELIABLE";case Tt.LOSSY:return"LOSSY";case Tt.UNRECOGNIZED:default:return"UNRECOGNIZED"}}(e.kind)),"user"===(null===(t=e.value)||void 0===t?void 0:t.$case)&&(s.user=(null===(n=e.value)||void 0===n?void 0:n.user)?an.toJSON(null===(r=e.value)||void 0===r?void 0:r.user):void 0),"speaker"===(null===(i=e.value)||void 0===i?void 0:i.$case)&&(s.speaker=(null===(a=e.value)||void 0===a?void 0:a.speaker)?tn.toJSON(null===(o=e.value)||void 0===o?void 0:o.speaker):void 0),s},create:function(e){return en.fromPartial(null!==e&&void 0!==e?e:{})},fromPartial:function(e){var t,n,r,i,a,o,s,c={kind:0,value:void 0};return c.kind=null!==(t=e.kind)&&void 0!==t?t:0,"user"===(null===(n=e.value)||void 0===n?void 0:n.$case)&&void 0!==(null===(r=e.value)||void 0===r?void 0:r.user)&&null!==(null===(i=e.value)||void 0===i?void 0:i.user)&&(c.value={$case:"user",user:an.fromPartial(e.value.user)}),"speaker"===(null===(a=e.value)||void 0===a?void 0:a.$case)&&void 0!==(null===(o=e.value)||void 0===o?void 0:o.speaker)&&null!==(null===(s=e.value)||void 0===s?void 0:s.speaker)&&(c.value={$case:"speaker",speaker:tn.fromPartial(e.value.speaker)}),c}};var tn={encode:function(e){var t,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:Ot.Writer.create(),r=u(e.speakers);try{for(r.s();!(t=r.n()).done;){var i=t.value;nn.encode(i,n.uint32(10).fork()).ldelim()}}catch(a){r.e(a)}finally{r.f()}return n},decode:function(e,t){for(var n=e instanceof Ot.Reader?e:Ot.Reader.create(e),r=void 0===t?n.len:n.pos+t,i={speakers:[]};n.pos<r;){var a=n.uint32();switch(a>>>3){case 1:if(10!=a)break;i.speakers.push(nn.decode(n,n.uint32()));continue}if(4==(7&a)||0==a)break;n.skipType(7&a)}return i},fromJSON:function(e){return{speakers:Array.isArray(null===e||void 0===e?void 0:e.speakers)?e.speakers.map((function(e){return nn.fromJSON(e)})):[]}},toJSON:function(e){var t={};return e.speakers?t.speakers=e.speakers.map((function(e){return e?nn.toJSON(e):void 0})):t.speakers=[],t},create:function(e){return tn.fromPartial(null!==e&&void 0!==e?e:{})},fromPartial:function(e){var t,n={speakers:[]};return n.speakers=(null===(t=e.speakers)||void 0===t?void 0:t.map((function(e){return nn.fromPartial(e)})))||[],n}};var nn={encode:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:Ot.Writer.create();return""!==e.sid&&t.uint32(10).string(e.sid),0!==e.level&&t.uint32(21).float(e.level),!0===e.active&&t.uint32(24).bool(e.active),t},decode:function(e,t){for(var n=e instanceof Ot.Reader?e:Ot.Reader.create(e),r=void 0===t?n.len:n.pos+t,i={sid:"",level:0,active:!1};n.pos<r;){var a=n.uint32();switch(a>>>3){case 1:if(10!=a)break;i.sid=n.string();continue;case 2:if(21!=a)break;i.level=n.float();continue;case 3:if(24!=a)break;i.active=n.bool();continue}if(4==(7&a)||0==a)break;n.skipType(7&a)}return i},fromJSON:function(e){return{sid:vn(e.sid)?String(e.sid):"",level:vn(e.level)?Number(e.level):0,active:!!vn(e.active)&&Boolean(e.active)}},toJSON:function(e){var t={};return void 0!==e.sid&&(t.sid=e.sid),void 0!==e.level&&(t.level=e.level),void 0!==e.active&&(t.active=e.active),t},create:function(e){return nn.fromPartial(null!==e&&void 0!==e?e:{})},fromPartial:function(e){var t,n,r,i={sid:"",level:0,active:!1};return i.sid=null!==(t=e.sid)&&void 0!==t?t:"",i.level=null!==(n=e.level)&&void 0!==n?n:0,i.active=null!==(r=e.active)&&void 0!==r&&r,i}};function rn(){return{participantSid:"",payload:new Uint8Array,destinationSids:[],topic:void 0}}var an={encode:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:Ot.Writer.create();""!==e.participantSid&&t.uint32(10).string(e.participantSid),0!==e.payload.length&&t.uint32(18).bytes(e.payload);var n,r=u(e.destinationSids);try{for(r.s();!(n=r.n()).done;){var i=n.value;t.uint32(26).string(i)}}catch(a){r.e(a)}finally{r.f()}return void 0!==e.topic&&t.uint32(34).string(e.topic),t},decode:function(e,t){for(var n=e instanceof Ot.Reader?e:Ot.Reader.create(e),r=void 0===t?n.len:n.pos+t,i=rn();n.pos<r;){var a=n.uint32();switch(a>>>3){case 1:if(10!=a)break;i.participantSid=n.string();continue;case 2:if(18!=a)break;i.payload=n.bytes();continue;case 3:if(26!=a)break;i.destinationSids.push(n.string());continue;case 4:if(34!=a)break;i.topic=n.string();continue}if(4==(7&a)||0==a)break;n.skipType(7&a)}return i},fromJSON:function(e){return{participantSid:vn(e.participantSid)?String(e.participantSid):"",payload:vn(e.payload)?pn(e.payload):new Uint8Array,destinationSids:Array.isArray(null===e||void 0===e?void 0:e.destinationSids)?e.destinationSids.map((function(e){return String(e)})):[],topic:vn(e.topic)?String(e.topic):void 0}},toJSON:function(e){var t={};return void 0!==e.participantSid&&(t.participantSid=e.participantSid),void 0!==e.payload&&(t.payload=function(e){if(fn.Buffer)return fn.Buffer.from(e).toString("base64");var t=[];return e.forEach((function(e){t.push(String.fromCharCode(e))})),fn.btoa(t.join(""))}(void 0!==e.payload?e.payload:new Uint8Array)),e.destinationSids?t.destinationSids=e.destinationSids.map((function(e){return e})):t.destinationSids=[],void 0!==e.topic&&(t.topic=e.topic),t},create:function(e){return an.fromPartial(null!==e&&void 0!==e?e:{})},fromPartial:function(e){var t,n,r,i,a=rn();return a.participantSid=null!==(t=e.participantSid)&&void 0!==t?t:"",a.payload=null!==(n=e.payload)&&void 0!==n?n:new Uint8Array,a.destinationSids=(null===(r=e.destinationSids)||void 0===r?void 0:r.map((function(e){return e})))||[],a.topic=null!==(i=e.topic)&&void 0!==i?i:void 0,a}};var on={encode:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:Ot.Writer.create();""!==e.participantSid&&t.uint32(10).string(e.participantSid);var n,r=u(e.trackSids);try{for(r.s();!(n=r.n()).done;){var i=n.value;t.uint32(18).string(i)}}catch(a){r.e(a)}finally{r.f()}return t},decode:function(e,t){for(var n=e instanceof Ot.Reader?e:Ot.Reader.create(e),r=void 0===t?n.len:n.pos+t,i={participantSid:"",trackSids:[]};n.pos<r;){var a=n.uint32();switch(a>>>3){case 1:if(10!=a)break;i.participantSid=n.string();continue;case 2:if(18!=a)break;i.trackSids.push(n.string());continue}if(4==(7&a)||0==a)break;n.skipType(7&a)}return i},fromJSON:function(e){return{participantSid:vn(e.participantSid)?String(e.participantSid):"",trackSids:Array.isArray(null===e||void 0===e?void 0:e.trackSids)?e.trackSids.map((function(e){return String(e)})):[]}},toJSON:function(e){var t={};return void 0!==e.participantSid&&(t.participantSid=e.participantSid),e.trackSids?t.trackSids=e.trackSids.map((function(e){return e})):t.trackSids=[],t},create:function(e){return on.fromPartial(null!==e&&void 0!==e?e:{})},fromPartial:function(e){var t,n,r={participantSid:"",trackSids:[]};return r.participantSid=null!==(t=e.participantSid)&&void 0!==t?t:"",r.trackSids=(null===(n=e.trackSids)||void 0===n?void 0:n.map((function(e){return e})))||[],r}};var sn={encode:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:Ot.Writer.create();return 0!==e.edition&&t.uint32(8).int32(e.edition),""!==e.version&&t.uint32(18).string(e.version),0!==e.protocol&&t.uint32(24).int32(e.protocol),""!==e.region&&t.uint32(34).string(e.region),""!==e.nodeId&&t.uint32(42).string(e.nodeId),""!==e.debugInfo&&t.uint32(50).string(e.debugInfo),t},decode:function(e,t){for(var n=e instanceof Ot.Reader?e:Ot.Reader.create(e),r=void 0===t?n.len:n.pos+t,i={edition:0,version:"",protocol:0,region:"",nodeId:"",debugInfo:""};n.pos<r;){var a=n.uint32();switch(a>>>3){case 1:if(8!=a)break;i.edition=n.int32();continue;case 2:if(18!=a)break;i.version=n.string();continue;case 3:if(24!=a)break;i.protocol=n.int32();continue;case 4:if(34!=a)break;i.region=n.string();continue;case 5:if(42!=a)break;i.nodeId=n.string();continue;case 6:if(50!=a)break;i.debugInfo=n.string();continue}if(4==(7&a)||0==a)break;n.skipType(7&a)}return i},fromJSON:function(e){return{edition:vn(e.edition)?Wt(e.edition):0,version:vn(e.version)?String(e.version):"",protocol:vn(e.protocol)?Number(e.protocol):0,region:vn(e.region)?String(e.region):"",nodeId:vn(e.nodeId)?String(e.nodeId):"",debugInfo:vn(e.debugInfo)?String(e.debugInfo):""}},toJSON:function(e){var t={};return void 0!==e.edition&&(t.edition=function(e){switch(e){case Rt.Standard:return"Standard";case Rt.Cloud:return"Cloud";case Rt.UNRECOGNIZED:default:return"UNRECOGNIZED"}}(e.edition)),void 0!==e.version&&(t.version=e.version),void 0!==e.protocol&&(t.protocol=Math.round(e.protocol)),void 0!==e.region&&(t.region=e.region),void 0!==e.nodeId&&(t.nodeId=e.nodeId),void 0!==e.debugInfo&&(t.debugInfo=e.debugInfo),t},create:function(e){return sn.fromPartial(null!==e&&void 0!==e?e:{})},fromPartial:function(e){var t,n,r,i,a,o,s={edition:0,version:"",protocol:0,region:"",nodeId:"",debugInfo:""};return s.edition=null!==(t=e.edition)&&void 0!==t?t:0,s.version=null!==(n=e.version)&&void 0!==n?n:"",s.protocol=null!==(r=e.protocol)&&void 0!==r?r:0,s.region=null!==(i=e.region)&&void 0!==i?i:"",s.nodeId=null!==(a=e.nodeId)&&void 0!==a?a:"",s.debugInfo=null!==(o=e.debugInfo)&&void 0!==o?o:"",s}};var cn={encode:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:Ot.Writer.create();return 0!==e.sdk&&t.uint32(8).int32(e.sdk),""!==e.version&&t.uint32(18).string(e.version),0!==e.protocol&&t.uint32(24).int32(e.protocol),""!==e.os&&t.uint32(34).string(e.os),""!==e.osVersion&&t.uint32(42).string(e.osVersion),""!==e.deviceModel&&t.uint32(50).string(e.deviceModel),""!==e.browser&&t.uint32(58).string(e.browser),""!==e.browserVersion&&t.uint32(66).string(e.browserVersion),""!==e.address&&t.uint32(74).string(e.address),""!==e.network&&t.uint32(82).string(e.network),t},decode:function(e,t){for(var n=e instanceof Ot.Reader?e:Ot.Reader.create(e),r=void 0===t?n.len:n.pos+t,i={sdk:0,version:"",protocol:0,os:"",osVersion:"",deviceModel:"",browser:"",browserVersion:"",address:"",network:""};n.pos<r;){var a=n.uint32();switch(a>>>3){case 1:if(8!=a)break;i.sdk=n.int32();continue;case 2:if(18!=a)break;i.version=n.string();continue;case 3:if(24!=a)break;i.protocol=n.int32();continue;case 4:if(34!=a)break;i.os=n.string();continue;case 5:if(42!=a)break;i.osVersion=n.string();continue;case 6:if(50!=a)break;i.deviceModel=n.string();continue;case 7:if(58!=a)break;i.browser=n.string();continue;case 8:if(66!=a)break;i.browserVersion=n.string();continue;case 9:if(74!=a)break;i.address=n.string();continue;case 10:if(82!=a)break;i.network=n.string();continue}if(4==(7&a)||0==a)break;n.skipType(7&a)}return i},fromJSON:function(e){return{sdk:vn(e.sdk)?qt(e.sdk):0,version:vn(e.version)?String(e.version):"",protocol:vn(e.protocol)?Number(e.protocol):0,os:vn(e.os)?String(e.os):"",osVersion:vn(e.osVersion)?String(e.osVersion):"",deviceModel:vn(e.deviceModel)?String(e.deviceModel):"",browser:vn(e.browser)?String(e.browser):"",browserVersion:vn(e.browserVersion)?String(e.browserVersion):"",address:vn(e.address)?String(e.address):"",network:vn(e.network)?String(e.network):""}},toJSON:function(e){var t={};return void 0!==e.sdk&&(t.sdk=function(e){switch(e){case Nt.UNKNOWN:return"UNKNOWN";case Nt.JS:return"JS";case Nt.SWIFT:return"SWIFT";case Nt.ANDROID:return"ANDROID";case Nt.FLUTTER:return"FLUTTER";case Nt.GO:return"GO";case Nt.UNITY:return"UNITY";case Nt.REACT_NATIVE:return"REACT_NATIVE";case Nt.RUST:return"RUST";case Nt.UNRECOGNIZED:default:return"UNRECOGNIZED"}}(e.sdk)),void 0!==e.version&&(t.version=e.version),void 0!==e.protocol&&(t.protocol=Math.round(e.protocol)),void 0!==e.os&&(t.os=e.os),void 0!==e.osVersion&&(t.osVersion=e.osVersion),void 0!==e.deviceModel&&(t.deviceModel=e.deviceModel),void 0!==e.browser&&(t.browser=e.browser),void 0!==e.browserVersion&&(t.browserVersion=e.browserVersion),void 0!==e.address&&(t.address=e.address),void 0!==e.network&&(t.network=e.network),t},create:function(e){return cn.fromPartial(null!==e&&void 0!==e?e:{})},fromPartial:function(e){var t,n,r,i,a,o,s,c,u,l,d={sdk:0,version:"",protocol:0,os:"",osVersion:"",deviceModel:"",browser:"",browserVersion:"",address:"",network:""};return d.sdk=null!==(t=e.sdk)&&void 0!==t?t:0,d.version=null!==(n=e.version)&&void 0!==n?n:"",d.protocol=null!==(r=e.protocol)&&void 0!==r?r:0,d.os=null!==(i=e.os)&&void 0!==i?i:"",d.osVersion=null!==(a=e.osVersion)&&void 0!==a?a:"",d.deviceModel=null!==(o=e.deviceModel)&&void 0!==o?o:"",d.browser=null!==(s=e.browser)&&void 0!==s?s:"",d.browserVersion=null!==(c=e.browserVersion)&&void 0!==c?c:"",d.address=null!==(u=e.address)&&void 0!==u?u:"",d.network=null!==(l=e.network)&&void 0!==l?l:"",d}};var un={encode:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:Ot.Writer.create();return void 0!==e.video&&ln.encode(e.video,t.uint32(10).fork()).ldelim(),void 0!==e.screen&&ln.encode(e.screen,t.uint32(18).fork()).ldelim(),0!==e.resumeConnection&&t.uint32(24).int32(e.resumeConnection),void 0!==e.disabledCodecs&&dn.encode(e.disabledCodecs,t.uint32(34).fork()).ldelim(),0!==e.forceRelay&&t.uint32(40).int32(e.forceRelay),t},decode:function(e,t){for(var n=e instanceof Ot.Reader?e:Ot.Reader.create(e),r=void 0===t?n.len:n.pos+t,i={video:void 0,screen:void 0,resumeConnection:0,disabledCodecs:void 0,forceRelay:0};n.pos<r;){var a=n.uint32();switch(a>>>3){case 1:if(10!=a)break;i.video=ln.decode(n,n.uint32());continue;case 2:if(18!=a)break;i.screen=ln.decode(n,n.uint32());continue;case 3:if(24!=a)break;i.resumeConnection=n.int32();continue;case 4:if(34!=a)break;i.disabledCodecs=dn.decode(n,n.uint32());continue;case 5:if(40!=a)break;i.forceRelay=n.int32();continue}if(4==(7&a)||0==a)break;n.skipType(7&a)}return i},fromJSON:function(e){return{video:vn(e.video)?ln.fromJSON(e.video):void 0,screen:vn(e.screen)?ln.fromJSON(e.screen):void 0,resumeConnection:vn(e.resumeConnection)?Ft(e.resumeConnection):0,disabledCodecs:vn(e.disabledCodecs)?dn.fromJSON(e.disabledCodecs):void 0,forceRelay:vn(e.forceRelay)?Ft(e.forceRelay):0}},toJSON:function(e){var t={};return void 0!==e.video&&(t.video=e.video?ln.toJSON(e.video):void 0),void 0!==e.screen&&(t.screen=e.screen?ln.toJSON(e.screen):void 0),void 0!==e.resumeConnection&&(t.resumeConnection=jt(e.resumeConnection)),void 0!==e.disabledCodecs&&(t.disabledCodecs=e.disabledCodecs?dn.toJSON(e.disabledCodecs):void 0),void 0!==e.forceRelay&&(t.forceRelay=jt(e.forceRelay)),t},create:function(e){return un.fromPartial(null!==e&&void 0!==e?e:{})},fromPartial:function(e){var t,n,r={video:void 0,screen:void 0,resumeConnection:0,disabledCodecs:void 0,forceRelay:0};return r.video=void 0!==e.video&&null!==e.video?ln.fromPartial(e.video):void 0,r.screen=void 0!==e.screen&&null!==e.screen?ln.fromPartial(e.screen):void 0,r.resumeConnection=null!==(t=e.resumeConnection)&&void 0!==t?t:0,r.disabledCodecs=void 0!==e.disabledCodecs&&null!==e.disabledCodecs?dn.fromPartial(e.disabledCodecs):void 0,r.forceRelay=null!==(n=e.forceRelay)&&void 0!==n?n:0,r}};var ln={encode:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:Ot.Writer.create();return 0!==e.hardwareEncoder&&t.uint32(8).int32(e.hardwareEncoder),t},decode:function(e,t){for(var n=e instanceof Ot.Reader?e:Ot.Reader.create(e),r=void 0===t?n.len:n.pos+t,i={hardwareEncoder:0};n.pos<r;){var a=n.uint32();switch(a>>>3){case 1:if(8!=a)break;i.hardwareEncoder=n.int32();continue}if(4==(7&a)||0==a)break;n.skipType(7&a)}return i},fromJSON:function(e){return{hardwareEncoder:vn(e.hardwareEncoder)?Ft(e.hardwareEncoder):0}},toJSON:function(e){var t={};return void 0!==e.hardwareEncoder&&(t.hardwareEncoder=jt(e.hardwareEncoder)),t},create:function(e){return ln.fromPartial(null!==e&&void 0!==e?e:{})},fromPartial:function(e){var t,n={hardwareEncoder:0};return n.hardwareEncoder=null!==(t=e.hardwareEncoder)&&void 0!==t?t:0,n}};var dn={encode:function(e){var t,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:Ot.Writer.create(),r=u(e.codecs);try{for(r.s();!(t=r.n()).done;){var i=t.value;Gt.encode(i,n.uint32(10).fork()).ldelim()}}catch(a){r.e(a)}finally{r.f()}return n},decode:function(e,t){for(var n=e instanceof Ot.Reader?e:Ot.Reader.create(e),r=void 0===t?n.len:n.pos+t,i={codecs:[]};n.pos<r;){var a=n.uint32();switch(a>>>3){case 1:if(10!=a)break;i.codecs.push(Gt.decode(n,n.uint32()));continue}if(4==(7&a)||0==a)break;n.skipType(7&a)}return i},fromJSON:function(e){return{codecs:Array.isArray(null===e||void 0===e?void 0:e.codecs)?e.codecs.map((function(e){return Gt.fromJSON(e)})):[]}},toJSON:function(e){var t={};return e.codecs?t.codecs=e.codecs.map((function(e){return e?Gt.toJSON(e):void 0})):t.codecs=[],t},create:function(e){return dn.fromPartial(null!==e&&void 0!==e?e:{})},fromPartial:function(e){var t,n={codecs:[]};return n.codecs=(null===(t=e.codecs)||void 0===t?void 0:t.map((function(e){return Gt.fromPartial(e)})))||[],n}},fn=function(){if("undefined"!==typeof globalThis)return globalThis;if("undefined"!==typeof self)return self;if("undefined"!==typeof window)return window;if("undefined"!==typeof global)return global;throw"Unable to locate global object"}();function pn(e){if(fn.Buffer)return Uint8Array.from(fn.Buffer.from(e,"base64"));for(var t=fn.atob(e),n=new Uint8Array(t.length),r=0;r<t.length;++r)n[r]=t.charCodeAt(r);return n}function hn(e){if(e.gt(Number.MAX_SAFE_INTEGER))throw new fn.Error("Value is larger than Number.MAX_SAFE_INTEGER");return e.toNumber()}function vn(e){return null!==e&&void 0!==e}Ot.util.Long!==ue&&(Ot.util.Long=ue,Ot.configure());var mn=7e3,gn=[0,300,1200,2700,4800,mn,mn,mn,mn,mn],bn=function(){function e(t){x(this,e),this._retryDelays=void 0!==t?c(t):gn}return T(e,[{key:"nextRetryDelayInMs",value:function(e){if(e.retryCount>=this._retryDelays.length)return null;var t=this._retryDelays[e.retryCount];return e.retryCount<=1?t:t+1e3*Math.random()}}]),e}();function yn(e){var t,n,r,i=2;for("undefined"!=typeof Symbol&&(n=Symbol.asyncIterator,r=Symbol.iterator);i--;){if(n&&null!=(t=e[n]))return t.call(e);if(r&&null!=(t=e[r]))return new kn(t.call(e));n="@@asyncIterator",r="@@iterator"}throw new TypeError("Object is not async iterable")}function kn(e){function t(e){if(Object(e)!==e)return Promise.reject(new TypeError(e+" is not an object."));var t=e.done;return Promise.resolve(e.value).then((function(e){return{value:e,done:t}}))}return kn=function(e){this.s=e,this.n=e.next},kn.prototype={s:null,n:null,next:function(){return t(this.n.apply(this.s,arguments))},return:function(e){var n=this.s.return;return void 0===n?Promise.resolve({value:e,done:!0}):t(n.apply(this.s,arguments))},throw:function(e){var n=this.s.return;return void 0===n?Promise.reject(e):t(n.apply(this.s,arguments))}},new kn(e)}function wn(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function Sn(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?wn(Object(n),!0).forEach((function(t){Cn(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):wn(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function Cn(e,t,n){return(t=function(e){var t=function(e,t){if("object"!==typeof e||null===e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!==typeof r)return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"===typeof t?t:String(t)}(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var En,xn={exports:{}},Pn="object"===typeof Reflect?Reflect:null,Tn=Pn&&"function"===typeof Pn.apply?Pn.apply:function(e,t,n){return Function.prototype.apply.call(e,t,n)};En=Pn&&"function"===typeof Pn.ownKeys?Pn.ownKeys:Object.getOwnPropertySymbols?function(e){return Object.getOwnPropertyNames(e).concat(Object.getOwnPropertySymbols(e))}:function(e){return Object.getOwnPropertyNames(e)};var Rn=Number.isNaN||function(e){return e!==e};function Nn(){Nn.init.call(this)}xn.exports=Nn,xn.exports.once=function(e,t){return new Promise((function(n,r){function i(n){e.removeListener(t,a),r(n)}function a(){"function"===typeof e.removeListener&&e.removeListener("error",i),n([].slice.call(arguments))}jn(e,t,a,{once:!0}),"error"!==t&&function(e,t,n){"function"===typeof e.on&&jn(e,"error",t,n)}(e,i,{once:!0})}))},Nn.EventEmitter=Nn,Nn.prototype._events=void 0,Nn.prototype._eventsCount=0,Nn.prototype._maxListeners=void 0;var On=10;function In(e){if("function"!==typeof e)throw new TypeError('The "listener" argument must be of type Function. Received type '+typeof e)}function _n(e){return void 0===e._maxListeners?Nn.defaultMaxListeners:e._maxListeners}function Dn(e,t,n,r){var i,a,o,s;if(In(n),void 0===(a=e._events)?(a=e._events=Object.create(null),e._eventsCount=0):(void 0!==a.newListener&&(e.emit("newListener",t,n.listener?n.listener:n),a=e._events),o=a[t]),void 0===o)o=a[t]=n,++e._eventsCount;else if("function"===typeof o?o=a[t]=r?[n,o]:[o,n]:r?o.unshift(n):o.push(n),(i=_n(e))>0&&o.length>i&&!o.warned){o.warned=!0;var c=new Error("Possible EventEmitter memory leak detected. "+o.length+" "+String(t)+" listeners added. Use emitter.setMaxListeners() to increase limit");c.name="MaxListenersExceededWarning",c.emitter=e,c.type=t,c.count=o.length,s=c,console&&console.warn&&console.warn(s)}return e}function An(){if(!this.fired)return this.target.removeListener(this.type,this.wrapFn),this.fired=!0,0===arguments.length?this.listener.call(this.target):this.listener.apply(this.target,arguments)}function Ln(e,t,n){var r={fired:!1,wrapFn:void 0,target:e,type:t,listener:n},i=An.bind(r);return i.listener=n,r.wrapFn=i,i}function Mn(e,t,n){var r=e._events;if(void 0===r)return[];var i=r[t];return void 0===i?[]:"function"===typeof i?n?[i.listener||i]:[i]:n?function(e){for(var t=new Array(e.length),n=0;n<t.length;++n)t[n]=e[n].listener||e[n];return t}(i):Fn(i,i.length)}function Un(e){var t=this._events;if(void 0!==t){var n=t[e];if("function"===typeof n)return 1;if(void 0!==n)return n.length}return 0}function Fn(e,t){for(var n=new Array(t),r=0;r<t;++r)n[r]=e[r];return n}function jn(e,t,n,r){if("function"===typeof e.on)r.once?e.once(t,n):e.on(t,n);else{if("function"!==typeof e.addEventListener)throw new TypeError('The "emitter" argument must be of type EventEmitter. Received type '+typeof e);e.addEventListener(t,(function i(a){r.once&&e.removeEventListener(t,i),n(a)}))}}Object.defineProperty(Nn,"defaultMaxListeners",{enumerable:!0,get:function(){return On},set:function(e){if("number"!==typeof e||e<0||Rn(e))throw new RangeError('The value of "defaultMaxListeners" is out of range. It must be a non-negative number. Received '+e+".");On=e}}),Nn.init=function(){void 0!==this._events&&this._events!==Object.getPrototypeOf(this)._events||(this._events=Object.create(null),this._eventsCount=0),this._maxListeners=this._maxListeners||void 0},Nn.prototype.setMaxListeners=function(e){if("number"!==typeof e||e<0||Rn(e))throw new RangeError('The value of "n" is out of range. It must be a non-negative number. Received '+e+".");return this._maxListeners=e,this},Nn.prototype.getMaxListeners=function(){return _n(this)},Nn.prototype.emit=function(e){for(var t=[],n=1;n<arguments.length;n++)t.push(arguments[n]);var r="error"===e,i=this._events;if(void 0!==i)r=r&&void 0===i.error;else if(!r)return!1;if(r){var a;if(t.length>0&&(a=t[0]),a instanceof Error)throw a;var o=new Error("Unhandled error."+(a?" ("+a.message+")":""));throw o.context=a,o}var s=i[e];if(void 0===s)return!1;if("function"===typeof s)Tn(s,this,t);else{var c=s.length,u=Fn(s,c);for(n=0;n<c;++n)Tn(u[n],this,t)}return!0},Nn.prototype.addListener=function(e,t){return Dn(this,e,t,!1)},Nn.prototype.on=Nn.prototype.addListener,Nn.prototype.prependListener=function(e,t){return Dn(this,e,t,!0)},Nn.prototype.once=function(e,t){return In(t),this.on(e,Ln(this,e,t)),this},Nn.prototype.prependOnceListener=function(e,t){return In(t),this.prependListener(e,Ln(this,e,t)),this},Nn.prototype.removeListener=function(e,t){var n,r,i,a,o;if(In(t),void 0===(r=this._events))return this;if(void 0===(n=r[e]))return this;if(n===t||n.listener===t)0===--this._eventsCount?this._events=Object.create(null):(delete r[e],r.removeListener&&this.emit("removeListener",e,n.listener||t));else if("function"!==typeof n){for(i=-1,a=n.length-1;a>=0;a--)if(n[a]===t||n[a].listener===t){o=n[a].listener,i=a;break}if(i<0)return this;0===i?n.shift():function(e,t){for(;t+1<e.length;t++)e[t]=e[t+1];e.pop()}(n,i),1===n.length&&(r[e]=n[0]),void 0!==r.removeListener&&this.emit("removeListener",e,o||t)}return this},Nn.prototype.off=Nn.prototype.removeListener,Nn.prototype.removeAllListeners=function(e){var t,n,r;if(void 0===(n=this._events))return this;if(void 0===n.removeListener)return 0===arguments.length?(this._events=Object.create(null),this._eventsCount=0):void 0!==n[e]&&(0===--this._eventsCount?this._events=Object.create(null):delete n[e]),this;if(0===arguments.length){var i,a=Object.keys(n);for(r=0;r<a.length;++r)"removeListener"!==(i=a[r])&&this.removeAllListeners(i);return this.removeAllListeners("removeListener"),this._events=Object.create(null),this._eventsCount=0,this}if("function"===typeof(t=n[e]))this.removeListener(e,t);else if(void 0!==t)for(r=t.length-1;r>=0;r--)this.removeListener(e,t[r]);return this},Nn.prototype.listeners=function(e){return Mn(this,e,!0)},Nn.prototype.rawListeners=function(e){return Mn(this,e,!1)},Nn.listenerCount=function(e,t){return"function"===typeof e.listenerCount?e.listenerCount(t):Un.call(e,t)},Nn.prototype.listenerCount=Un,Nn.prototype.eventNames=function(){return this._eventsCount>0?En(this._events):[]};var Bn=xn.exports,zn=O(Bn),$n=function(){function e(t,n){x(this,e),this.maxConcurrent=t||1,this.minCycle=n||0,this.queueRunning=[],this.queueWaiting={},this.lastRun=0}return T(e,[{key:"dequeue",value:function(e){var t=this.queueRunning,n=t.findIndex((function(t){return t.hash===e}));if(-1==n)throw"queue desync";var r=t[n];return t.splice(n,1),r}},{key:"getFirstWaiting",value:function(){var e,t=u(Object.keys(this.queueWaiting).sort((function(e,t){return e-t})));try{for(t.s();!(e=t.n()).done;){var n=e.value;if(void 0!==this.queueWaiting[n]&&this.queueWaiting[n].length>0)return this.queueWaiting[n]}}catch(r){t.e(r)}finally{t.f()}}},{key:"end",value:function(e){this.dequeue(e).resolve();var t=this.getFirstWaiting();void 0!==t&&t.shift().resolve()}},{key:"wait",value:function(){var e=E(i().mark((function e(t,n){var r,a,o=this;return i().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(a={hash:t,priority:r=void 0===n?0:n},void 0==this.queueWaiting[r]&&(this.queueWaiting[r]=[]),!(this.queueRunning.length>=this.maxConcurrent)){e.next=8;break}return a.promise=new Promise((function(e){a.resolve=e})),this.queueWaiting[r].push(a),e.next=8,a.promise;case 8:this.queueRunning.push(a),a.promise=new Promise((function(e){a.resolve=e}));case 10:if(!(Date.now()-this.lastRun<this.minCycle)){e.next=15;break}return e.next=13,new Promise((function(e){return setTimeout(e,o.minCycle-Date.now()+o.lastRun)}));case 13:e.next=10;break;case 15:this.lastRun=Date.now();case 16:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"run",value:function(e,t){var n=this,r=void 0===t?0:t,i=Symbol();return this.wait(i,r).then((function(){return e()})).finally((function(){n.end(i)}))}},{key:"stat",value:function(){var e=this;return{running:this.queueRunning.length,waiting:Object.keys(this.queueWaiting).reduce((function(t,n){return t+e.queueWaiting[n].length}),0),last:this.lastRun}}},{key:"flush",value:function(){var e=E(i().mark((function e(){var t,n,r,a;return i().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!(this.stat().waiting>0)){e.next=22;break}t=u(Object.keys(this.queueWaiting).sort((function(e,t){return t-e}))),e.prev=2,t.s();case 4:if((n=t.n()).done){e.next=12;break}if(r=n.value,!(void 0!==(a=this.queueWaiting[r])&&a.length>0)){e.next=10;break}return e.next=10,a[a.length-1].promise;case 10:e.next=4;break;case 12:e.next=17;break;case 14:e.prev=14,e.t0=e.catch(2),t.e(e.t0);case 17:return e.prev=17,t.f(),e.finish(17);case 20:e.next=0;break;case 22:if(!(this.queueRunning.length>0)){e.next=27;break}return e.next=25,Promise.allSettled(this.queueRunning.map((function(e){return e.promise})));case 25:e.next=22;break;case 27:case"end":return e.stop()}}),e,this,[[2,14,17,20]])})));return function(){return e.apply(this,arguments)}}()}]),e}(),Vn=!0,Jn=!0;function Wn(e,t,n){var r=e.match(t);return r&&r.length>=n&&parseInt(r[n],10)}function qn(e,t,n){if(e.RTCPeerConnection){var r=e.RTCPeerConnection.prototype,i=r.addEventListener;r.addEventListener=function(e,r){if(e!==t)return i.apply(this,arguments);var a=function(e){var t=n(e);t&&(r.handleEvent?r.handleEvent(t):r(t))};return this._eventMap=this._eventMap||{},this._eventMap[t]||(this._eventMap[t]=new Map),this._eventMap[t].set(r,a),i.apply(this,[e,a])};var a=r.removeEventListener;r.removeEventListener=function(e,n){if(e!==t||!this._eventMap||!this._eventMap[t])return a.apply(this,arguments);if(!this._eventMap[t].has(n))return a.apply(this,arguments);var r=this._eventMap[t].get(n);return this._eventMap[t].delete(n),0===this._eventMap[t].size&&delete this._eventMap[t],0===Object.keys(this._eventMap).length&&delete this._eventMap,a.apply(this,[e,r])},Object.defineProperty(r,"on"+t,{get:function(){return this["_on"+t]},set:function(e){this["_on"+t]&&(this.removeEventListener(t,this["_on"+t]),delete this["_on"+t]),e&&this.addEventListener(t,this["_on"+t]=e)},enumerable:!0,configurable:!0})}}function Hn(e){return"boolean"!==typeof e?new Error("Argument type: "+typeof e+". Please use a boolean."):(Vn=e,e?"adapter.js logging disabled":"adapter.js logging enabled")}function Gn(e){return"boolean"!==typeof e?new Error("Argument type: "+typeof e+". Please use a boolean."):(Jn=!e,"adapter.js deprecation warnings "+(e?"disabled":"enabled"))}function Qn(){if("object"===typeof window){if(Vn)return;"undefined"!==typeof console&&"function"===typeof console.log&&console.log.apply(console,arguments)}}function Zn(e,t){Jn&&console.warn(e+" is deprecated, please use "+t+" instead.")}function Kn(e){return"[object Object]"===Object.prototype.toString.call(e)}function Yn(e){return Kn(e)?Object.keys(e).reduce((function(t,n){var r=Kn(e[n]),i=r?Yn(e[n]):e[n],a=r&&!Object.keys(i).length;return void 0===i||a?t:Object.assign(t,S({},n,i))}),{}):e}function Xn(e,t,n){t&&!n.has(t.id)&&(n.set(t.id,t),Object.keys(t).forEach((function(r){r.endsWith("Id")?Xn(e,e.get(t[r]),n):r.endsWith("Ids")&&t[r].forEach((function(t){Xn(e,e.get(t),n)}))})))}function er(e,t,n){var r=n?"outbound-rtp":"inbound-rtp",i=new Map;if(null===t)return i;var a=[];return e.forEach((function(e){"track"===e.type&&e.trackIdentifier===t.id&&a.push(e)})),a.forEach((function(t){e.forEach((function(n){n.type===r&&n.trackId===t.id&&Xn(e,n,i)}))})),i}var tr=Qn;function nr(e,t){var n=e&&e.navigator;if(n.mediaDevices){var r=function(e){if("object"!==typeof e||e.mandatory||e.optional)return e;var t={};return Object.keys(e).forEach((function(n){if("require"!==n&&"advanced"!==n&&"mediaSource"!==n){var r="object"===typeof e[n]?e[n]:{ideal:e[n]};void 0!==r.exact&&"number"===typeof r.exact&&(r.min=r.max=r.exact);var i=function(e,t){return e?e+t.charAt(0).toUpperCase()+t.slice(1):"deviceId"===t?"sourceId":t};if(void 0!==r.ideal){t.optional=t.optional||[];var a={};"number"===typeof r.ideal?(a[i("min",n)]=r.ideal,t.optional.push(a),(a={})[i("max",n)]=r.ideal,t.optional.push(a)):(a[i("",n)]=r.ideal,t.optional.push(a))}void 0!==r.exact&&"number"!==typeof r.exact?(t.mandatory=t.mandatory||{},t.mandatory[i("",n)]=r.exact):["min","max"].forEach((function(e){void 0!==r[e]&&(t.mandatory=t.mandatory||{},t.mandatory[i(e,n)]=r[e])}))}})),e.advanced&&(t.optional=(t.optional||[]).concat(e.advanced)),t},i=function(e,i){if(t.version>=61)return i(e);if((e=JSON.parse(JSON.stringify(e)))&&"object"===typeof e.audio){var a=function(e,t,n){t in e&&!(n in e)&&(e[n]=e[t],delete e[t])};a((e=JSON.parse(JSON.stringify(e))).audio,"autoGainControl","googAutoGainControl"),a(e.audio,"noiseSuppression","googNoiseSuppression"),e.audio=r(e.audio)}if(e&&"object"===typeof e.video){var o=e.video.facingMode;o=o&&("object"===typeof o?o:{ideal:o});var s,c=t.version<66;if(o&&("user"===o.exact||"environment"===o.exact||"user"===o.ideal||"environment"===o.ideal)&&(!n.mediaDevices.getSupportedConstraints||!n.mediaDevices.getSupportedConstraints().facingMode||c))if(delete e.video.facingMode,"environment"===o.exact||"environment"===o.ideal?s=["back","rear"]:"user"!==o.exact&&"user"!==o.ideal||(s=["front"]),s)return n.mediaDevices.enumerateDevices().then((function(t){t=t.filter((function(e){return"videoinput"===e.kind}));var n=t.find((function(e){return s.some((function(t){return e.label.toLowerCase().includes(t)}))}));return!n&&t.length&&s.includes("back")&&(n=t[t.length-1]),n&&(e.video.deviceId=o.exact?{exact:n.deviceId}:{ideal:n.deviceId}),e.video=r(e.video),tr("chrome: "+JSON.stringify(e)),i(e)}));e.video=r(e.video)}return tr("chrome: "+JSON.stringify(e)),i(e)},a=function(e){return t.version>=64?e:{name:{PermissionDeniedError:"NotAllowedError",PermissionDismissedError:"NotAllowedError",InvalidStateError:"NotAllowedError",DevicesNotFoundError:"NotFoundError",ConstraintNotSatisfiedError:"OverconstrainedError",TrackStartError:"NotReadableError",MediaDeviceFailedDueToShutdown:"NotAllowedError",MediaDeviceKillSwitchOn:"NotAllowedError",TabCaptureError:"AbortError",ScreenCaptureError:"AbortError",DeviceCaptureError:"AbortError"}[e.name]||e.name,message:e.message,constraint:e.constraint||e.constraintName,toString:function(){return this.name+(this.message&&": ")+this.message}}};if(n.getUserMedia=function(e,t,r){i(e,(function(e){n.webkitGetUserMedia(e,t,(function(e){r&&r(a(e))}))}))}.bind(n),n.mediaDevices.getUserMedia){var o=n.mediaDevices.getUserMedia.bind(n.mediaDevices);n.mediaDevices.getUserMedia=function(e){return i(e,(function(e){return o(e).then((function(t){if(e.audio&&!t.getAudioTracks().length||e.video&&!t.getVideoTracks().length)throw t.getTracks().forEach((function(e){e.stop()})),new DOMException("","NotFoundError");return t}),(function(e){return Promise.reject(a(e))}))}))}}}}function rr(e){e.MediaStream=e.MediaStream||e.webkitMediaStream}function ir(e){if("object"===typeof e&&e.RTCPeerConnection&&!("ontrack"in e.RTCPeerConnection.prototype)){Object.defineProperty(e.RTCPeerConnection.prototype,"ontrack",{get:function(){return this._ontrack},set:function(e){this._ontrack&&this.removeEventListener("track",this._ontrack),this.addEventListener("track",this._ontrack=e)},enumerable:!0,configurable:!0});var t=e.RTCPeerConnection.prototype.setRemoteDescription;e.RTCPeerConnection.prototype.setRemoteDescription=function(){var n=this;return this._ontrackpoly||(this._ontrackpoly=function(t){t.stream.addEventListener("addtrack",(function(r){var i;i=e.RTCPeerConnection.prototype.getReceivers?n.getReceivers().find((function(e){return e.track&&e.track.id===r.track.id})):{track:r.track};var a=new Event("track");a.track=r.track,a.receiver=i,a.transceiver={receiver:i},a.streams=[t.stream],n.dispatchEvent(a)})),t.stream.getTracks().forEach((function(r){var i;i=e.RTCPeerConnection.prototype.getReceivers?n.getReceivers().find((function(e){return e.track&&e.track.id===r.id})):{track:r};var a=new Event("track");a.track=r,a.receiver=i,a.transceiver={receiver:i},a.streams=[t.stream],n.dispatchEvent(a)}))},this.addEventListener("addstream",this._ontrackpoly)),t.apply(this,arguments)}}else qn(e,"track",(function(e){return e.transceiver||Object.defineProperty(e,"transceiver",{value:{receiver:e.receiver}}),e}))}function ar(e){if("object"===typeof e&&e.RTCPeerConnection&&!("getSenders"in e.RTCPeerConnection.prototype)&&"createDTMFSender"in e.RTCPeerConnection.prototype){var t=function(e,t){return{track:t,get dtmf(){return void 0===this._dtmf&&("audio"===t.kind?this._dtmf=e.createDTMFSender(t):this._dtmf=null),this._dtmf},_pc:e}};if(!e.RTCPeerConnection.prototype.getSenders){e.RTCPeerConnection.prototype.getSenders=function(){return this._senders=this._senders||[],this._senders.slice()};var n=e.RTCPeerConnection.prototype.addTrack;e.RTCPeerConnection.prototype.addTrack=function(e,r){var i=n.apply(this,arguments);return i||(i=t(this,e),this._senders.push(i)),i};var r=e.RTCPeerConnection.prototype.removeTrack;e.RTCPeerConnection.prototype.removeTrack=function(e){r.apply(this,arguments);var t=this._senders.indexOf(e);-1!==t&&this._senders.splice(t,1)}}var i=e.RTCPeerConnection.prototype.addStream;e.RTCPeerConnection.prototype.addStream=function(e){var n=this;this._senders=this._senders||[],i.apply(this,[e]),e.getTracks().forEach((function(e){n._senders.push(t(n,e))}))};var a=e.RTCPeerConnection.prototype.removeStream;e.RTCPeerConnection.prototype.removeStream=function(e){var t=this;this._senders=this._senders||[],a.apply(this,[e]),e.getTracks().forEach((function(e){var n=t._senders.find((function(t){return t.track===e}));n&&t._senders.splice(t._senders.indexOf(n),1)}))}}else if("object"===typeof e&&e.RTCPeerConnection&&"getSenders"in e.RTCPeerConnection.prototype&&"createDTMFSender"in e.RTCPeerConnection.prototype&&e.RTCRtpSender&&!("dtmf"in e.RTCRtpSender.prototype)){var o=e.RTCPeerConnection.prototype.getSenders;e.RTCPeerConnection.prototype.getSenders=function(){var e=this,t=o.apply(this,[]);return t.forEach((function(t){return t._pc=e})),t},Object.defineProperty(e.RTCRtpSender.prototype,"dtmf",{get:function(){return void 0===this._dtmf&&("audio"===this.track.kind?this._dtmf=this._pc.createDTMFSender(this.track):this._dtmf=null),this._dtmf}})}}function or(e){if(e.RTCPeerConnection){var t=e.RTCPeerConnection.prototype.getStats;e.RTCPeerConnection.prototype.getStats=function(){var e=this,n=Array.prototype.slice.call(arguments),r=n[0],i=n[1],a=n[2];if(arguments.length>0&&"function"===typeof r)return t.apply(this,arguments);if(0===t.length&&(0===arguments.length||"function"!==typeof r))return t.apply(this,[]);var o=function(e){var t={};return e.result().forEach((function(e){var n={id:e.id,timestamp:e.timestamp,type:{localcandidate:"local-candidate",remotecandidate:"remote-candidate"}[e.type]||e.type};e.names().forEach((function(t){n[t]=e.stat(t)})),t[n.id]=n})),t},s=function(e){return new Map(Object.keys(e).map((function(t){return[t,e[t]]})))};if(arguments.length>=2){return t.apply(this,[function(e){i(s(o(e)))},r])}return new Promise((function(n,r){t.apply(e,[function(e){n(s(o(e)))},r])})).then(i,a)}}}function sr(e){if("object"===typeof e&&e.RTCPeerConnection&&e.RTCRtpSender&&e.RTCRtpReceiver){if(!("getStats"in e.RTCRtpSender.prototype)){var t=e.RTCPeerConnection.prototype.getSenders;t&&(e.RTCPeerConnection.prototype.getSenders=function(){var e=this,n=t.apply(this,[]);return n.forEach((function(t){return t._pc=e})),n});var n=e.RTCPeerConnection.prototype.addTrack;n&&(e.RTCPeerConnection.prototype.addTrack=function(){var e=n.apply(this,arguments);return e._pc=this,e}),e.RTCRtpSender.prototype.getStats=function(){var e=this;return this._pc.getStats().then((function(t){return er(t,e.track,!0)}))}}if(!("getStats"in e.RTCRtpReceiver.prototype)){var r=e.RTCPeerConnection.prototype.getReceivers;r&&(e.RTCPeerConnection.prototype.getReceivers=function(){var e=this,t=r.apply(this,[]);return t.forEach((function(t){return t._pc=e})),t}),qn(e,"track",(function(e){return e.receiver._pc=e.srcElement,e})),e.RTCRtpReceiver.prototype.getStats=function(){var e=this;return this._pc.getStats().then((function(t){return er(t,e.track,!1)}))}}if("getStats"in e.RTCRtpSender.prototype&&"getStats"in e.RTCRtpReceiver.prototype){var i=e.RTCPeerConnection.prototype.getStats;e.RTCPeerConnection.prototype.getStats=function(){if(arguments.length>0&&arguments[0]instanceof e.MediaStreamTrack){var t,n,r,a=arguments[0];return this.getSenders().forEach((function(e){e.track===a&&(t?r=!0:t=e)})),this.getReceivers().forEach((function(e){return e.track===a&&(n?r=!0:n=e),e.track===a})),r||t&&n?Promise.reject(new DOMException("There are more than one sender or receiver for the track.","InvalidAccessError")):t?t.getStats():n?n.getStats():Promise.reject(new DOMException("There is no sender or receiver for the track.","InvalidAccessError"))}return i.apply(this,arguments)}}}}function cr(e){e.RTCPeerConnection.prototype.getLocalStreams=function(){var e=this;return this._shimmedLocalStreams=this._shimmedLocalStreams||{},Object.keys(this._shimmedLocalStreams).map((function(t){return e._shimmedLocalStreams[t][0]}))};var t=e.RTCPeerConnection.prototype.addTrack;e.RTCPeerConnection.prototype.addTrack=function(e,n){if(!n)return t.apply(this,arguments);this._shimmedLocalStreams=this._shimmedLocalStreams||{};var r=t.apply(this,arguments);return this._shimmedLocalStreams[n.id]?-1===this._shimmedLocalStreams[n.id].indexOf(r)&&this._shimmedLocalStreams[n.id].push(r):this._shimmedLocalStreams[n.id]=[n,r],r};var n=e.RTCPeerConnection.prototype.addStream;e.RTCPeerConnection.prototype.addStream=function(e){var t=this;this._shimmedLocalStreams=this._shimmedLocalStreams||{},e.getTracks().forEach((function(e){var n=t.getSenders().find((function(t){return t.track===e}));if(n)throw new DOMException("Track already exists.","InvalidAccessError")}));var r=this.getSenders();n.apply(this,arguments);var i=this.getSenders().filter((function(e){return-1===r.indexOf(e)}));this._shimmedLocalStreams[e.id]=[e].concat(i)};var r=e.RTCPeerConnection.prototype.removeStream;e.RTCPeerConnection.prototype.removeStream=function(e){return this._shimmedLocalStreams=this._shimmedLocalStreams||{},delete this._shimmedLocalStreams[e.id],r.apply(this,arguments)};var i=e.RTCPeerConnection.prototype.removeTrack;e.RTCPeerConnection.prototype.removeTrack=function(e){var t=this;return this._shimmedLocalStreams=this._shimmedLocalStreams||{},e&&Object.keys(this._shimmedLocalStreams).forEach((function(n){var r=t._shimmedLocalStreams[n].indexOf(e);-1!==r&&t._shimmedLocalStreams[n].splice(r,1),1===t._shimmedLocalStreams[n].length&&delete t._shimmedLocalStreams[n]})),i.apply(this,arguments)}}function ur(e,t){if(e.RTCPeerConnection){if(e.RTCPeerConnection.prototype.addTrack&&t.version>=65)return cr(e);var n=e.RTCPeerConnection.prototype.getLocalStreams;e.RTCPeerConnection.prototype.getLocalStreams=function(){var e=this,t=n.apply(this);return this._reverseStreams=this._reverseStreams||{},t.map((function(t){return e._reverseStreams[t.id]}))};var r=e.RTCPeerConnection.prototype.addStream;e.RTCPeerConnection.prototype.addStream=function(t){var n=this;if(this._streams=this._streams||{},this._reverseStreams=this._reverseStreams||{},t.getTracks().forEach((function(e){var t=n.getSenders().find((function(t){return t.track===e}));if(t)throw new DOMException("Track already exists.","InvalidAccessError")})),!this._reverseStreams[t.id]){var i=new e.MediaStream(t.getTracks());this._streams[t.id]=i,this._reverseStreams[i.id]=t,t=i}r.apply(this,[t])};var i=e.RTCPeerConnection.prototype.removeStream;e.RTCPeerConnection.prototype.removeStream=function(e){this._streams=this._streams||{},this._reverseStreams=this._reverseStreams||{},i.apply(this,[this._streams[e.id]||e]),delete this._reverseStreams[this._streams[e.id]?this._streams[e.id].id:e.id],delete this._streams[e.id]},e.RTCPeerConnection.prototype.addTrack=function(t,n){var r=this;if("closed"===this.signalingState)throw new DOMException("The RTCPeerConnection's signalingState is 'closed'.","InvalidStateError");var i=[].slice.call(arguments,1);if(1!==i.length||!i[0].getTracks().find((function(e){return e===t})))throw new DOMException("The adapter.js addTrack polyfill only supports a single  stream which is associated with the specified track.","NotSupportedError");var a=this.getSenders().find((function(e){return e.track===t}));if(a)throw new DOMException("Track already exists.","InvalidAccessError");this._streams=this._streams||{},this._reverseStreams=this._reverseStreams||{};var o=this._streams[n.id];if(o)o.addTrack(t),Promise.resolve().then((function(){r.dispatchEvent(new Event("negotiationneeded"))}));else{var s=new e.MediaStream([t]);this._streams[n.id]=s,this._reverseStreams[s.id]=n,this.addStream(s)}return this.getSenders().find((function(e){return e.track===t}))},["createOffer","createAnswer"].forEach((function(t){var n=e.RTCPeerConnection.prototype[t],r=S({},t,(function(){var e=this,t=arguments;return arguments.length&&"function"===typeof arguments[0]?n.apply(this,[function(n){var r=s(e,n);t[0].apply(null,[r])},function(e){t[1]&&t[1].apply(null,e)},arguments[2]]):n.apply(this,arguments).then((function(t){return s(e,t)}))}));e.RTCPeerConnection.prototype[t]=r[t]}));var a=e.RTCPeerConnection.prototype.setLocalDescription;e.RTCPeerConnection.prototype.setLocalDescription=function(){return arguments.length&&arguments[0].type?(arguments[0]=function(e,t){var n=t.sdp;return Object.keys(e._reverseStreams||[]).forEach((function(t){var r=e._reverseStreams[t],i=e._streams[r.id];n=n.replace(new RegExp(r.id,"g"),i.id)})),new RTCSessionDescription({type:t.type,sdp:n})}(this,arguments[0]),a.apply(this,arguments)):a.apply(this,arguments)};var o=Object.getOwnPropertyDescriptor(e.RTCPeerConnection.prototype,"localDescription");Object.defineProperty(e.RTCPeerConnection.prototype,"localDescription",{get:function(){var e=o.get.apply(this);return""===e.type?e:s(this,e)}}),e.RTCPeerConnection.prototype.removeTrack=function(e){var t,n=this;if("closed"===this.signalingState)throw new DOMException("The RTCPeerConnection's signalingState is 'closed'.","InvalidStateError");if(!e._pc)throw new DOMException("Argument 1 of RTCPeerConnection.removeTrack does not implement interface RTCRtpSender.","TypeError");if(!(e._pc===this))throw new DOMException("Sender was not created by this connection.","InvalidAccessError");this._streams=this._streams||{},Object.keys(this._streams).forEach((function(r){n._streams[r].getTracks().find((function(t){return e.track===t}))&&(t=n._streams[r])})),t&&(1===t.getTracks().length?this.removeStream(this._reverseStreams[t.id]):t.removeTrack(e.track),this.dispatchEvent(new Event("negotiationneeded")))}}function s(e,t){var n=t.sdp;return Object.keys(e._reverseStreams||[]).forEach((function(t){var r=e._reverseStreams[t],i=e._streams[r.id];n=n.replace(new RegExp(i.id,"g"),r.id)})),new RTCSessionDescription({type:t.type,sdp:n})}}function lr(e,t){!e.RTCPeerConnection&&e.webkitRTCPeerConnection&&(e.RTCPeerConnection=e.webkitRTCPeerConnection),e.RTCPeerConnection&&t.version<53&&["setLocalDescription","setRemoteDescription","addIceCandidate"].forEach((function(t){var n=e.RTCPeerConnection.prototype[t],r=S({},t,(function(){return arguments[0]=new("addIceCandidate"===t?e.RTCIceCandidate:e.RTCSessionDescription)(arguments[0]),n.apply(this,arguments)}));e.RTCPeerConnection.prototype[t]=r[t]}))}function dr(e,t){qn(e,"negotiationneeded",(function(e){var n=e.target;if(!(t.version<72||n.getConfiguration&&"plan-b"===n.getConfiguration().sdpSemantics)||"stable"===n.signalingState)return e}))}var fr=Object.freeze({__proto__:null,fixNegotiationNeeded:dr,shimAddTrackRemoveTrack:ur,shimAddTrackRemoveTrackWithNative:cr,shimGetDisplayMedia:function(e,t){e.navigator.mediaDevices&&"getDisplayMedia"in e.navigator.mediaDevices||e.navigator.mediaDevices&&("function"===typeof t?e.navigator.mediaDevices.getDisplayMedia=function(n){return t(n).then((function(t){var r=n.video&&n.video.width,i=n.video&&n.video.height,a=n.video&&n.video.frameRate;return n.video={mandatory:{chromeMediaSource:"desktop",chromeMediaSourceId:t,maxFrameRate:a||3}},r&&(n.video.mandatory.maxWidth=r),i&&(n.video.mandatory.maxHeight=i),e.navigator.mediaDevices.getUserMedia(n)}))}:console.error("shimGetDisplayMedia: getSourceId argument is not a function"))},shimGetSendersWithDtmf:ar,shimGetStats:or,shimGetUserMedia:nr,shimMediaStream:rr,shimOnTrack:ir,shimPeerConnection:lr,shimSenderReceiverGetStats:sr});function pr(e,t){var n=e&&e.navigator,r=e&&e.MediaStreamTrack;if(n.getUserMedia=function(e,t,r){Zn("navigator.getUserMedia","navigator.mediaDevices.getUserMedia"),n.mediaDevices.getUserMedia(e).then(t,r)},!(t.version>55&&"autoGainControl"in n.mediaDevices.getSupportedConstraints())){var i=function(e,t,n){t in e&&!(n in e)&&(e[n]=e[t],delete e[t])},a=n.mediaDevices.getUserMedia.bind(n.mediaDevices);if(n.mediaDevices.getUserMedia=function(e){return"object"===typeof e&&"object"===typeof e.audio&&(e=JSON.parse(JSON.stringify(e)),i(e.audio,"autoGainControl","mozAutoGainControl"),i(e.audio,"noiseSuppression","mozNoiseSuppression")),a(e)},r&&r.prototype.getSettings){var o=r.prototype.getSettings;r.prototype.getSettings=function(){var e=o.apply(this,arguments);return i(e,"mozAutoGainControl","autoGainControl"),i(e,"mozNoiseSuppression","noiseSuppression"),e}}if(r&&r.prototype.applyConstraints){var s=r.prototype.applyConstraints;r.prototype.applyConstraints=function(e){return"audio"===this.kind&&"object"===typeof e&&(e=JSON.parse(JSON.stringify(e)),i(e,"autoGainControl","mozAutoGainControl"),i(e,"noiseSuppression","mozNoiseSuppression")),s.apply(this,[e])}}}}function hr(e){"object"===typeof e&&e.RTCTrackEvent&&"receiver"in e.RTCTrackEvent.prototype&&!("transceiver"in e.RTCTrackEvent.prototype)&&Object.defineProperty(e.RTCTrackEvent.prototype,"transceiver",{get:function(){return{receiver:this.receiver}}})}function vr(e,t){if("object"===typeof e&&(e.RTCPeerConnection||e.mozRTCPeerConnection)){!e.RTCPeerConnection&&e.mozRTCPeerConnection&&(e.RTCPeerConnection=e.mozRTCPeerConnection),t.version<53&&["setLocalDescription","setRemoteDescription","addIceCandidate"].forEach((function(t){var n=e.RTCPeerConnection.prototype[t],r=S({},t,(function(){return arguments[0]=new("addIceCandidate"===t?e.RTCIceCandidate:e.RTCSessionDescription)(arguments[0]),n.apply(this,arguments)}));e.RTCPeerConnection.prototype[t]=r[t]}));var n={inboundrtp:"inbound-rtp",outboundrtp:"outbound-rtp",candidatepair:"candidate-pair",localcandidate:"local-candidate",remotecandidate:"remote-candidate"},r=e.RTCPeerConnection.prototype.getStats;e.RTCPeerConnection.prototype.getStats=function(){var e=Array.prototype.slice.call(arguments),i=e[0],a=e[1],o=e[2];return r.apply(this,[i||null]).then((function(e){if(t.version<53&&!a)try{e.forEach((function(e){e.type=n[e.type]||e.type}))}catch(Cs){if("TypeError"!==Cs.name)throw Cs;e.forEach((function(t,r){e.set(r,Object.assign({},t,{type:n[t.type]||t.type}))}))}return e})).then(a,o)}}}function mr(e){if("object"===typeof e&&e.RTCPeerConnection&&e.RTCRtpSender&&(!e.RTCRtpSender||!("getStats"in e.RTCRtpSender.prototype))){var t=e.RTCPeerConnection.prototype.getSenders;t&&(e.RTCPeerConnection.prototype.getSenders=function(){var e=this,n=t.apply(this,[]);return n.forEach((function(t){return t._pc=e})),n});var n=e.RTCPeerConnection.prototype.addTrack;n&&(e.RTCPeerConnection.prototype.addTrack=function(){var e=n.apply(this,arguments);return e._pc=this,e}),e.RTCRtpSender.prototype.getStats=function(){return this.track?this._pc.getStats(this.track):Promise.resolve(new Map)}}}function gr(e){if("object"===typeof e&&e.RTCPeerConnection&&e.RTCRtpSender&&(!e.RTCRtpSender||!("getStats"in e.RTCRtpReceiver.prototype))){var t=e.RTCPeerConnection.prototype.getReceivers;t&&(e.RTCPeerConnection.prototype.getReceivers=function(){var e=this,n=t.apply(this,[]);return n.forEach((function(t){return t._pc=e})),n}),qn(e,"track",(function(e){return e.receiver._pc=e.srcElement,e})),e.RTCRtpReceiver.prototype.getStats=function(){return this._pc.getStats(this.track)}}}function br(e){e.RTCPeerConnection&&!("removeStream"in e.RTCPeerConnection.prototype)&&(e.RTCPeerConnection.prototype.removeStream=function(e){var t=this;Zn("removeStream","removeTrack"),this.getSenders().forEach((function(n){n.track&&e.getTracks().includes(n.track)&&t.removeTrack(n)}))})}function yr(e){e.DataChannel&&!e.RTCDataChannel&&(e.RTCDataChannel=e.DataChannel)}function kr(e){if("object"===typeof e&&e.RTCPeerConnection){var t=e.RTCPeerConnection.prototype.addTransceiver;t&&(e.RTCPeerConnection.prototype.addTransceiver=function(){this.setParametersPromises=[];var e=arguments[1]&&arguments[1].sendEncodings;void 0===e&&(e=[]);var n=(e=c(e)).length>0;n&&e.forEach((function(e){if("rid"in e){if(!/^[a-z0-9]{0,16}$/i.test(e.rid))throw new TypeError("Invalid RID value provided.")}if("scaleResolutionDownBy"in e&&!(parseFloat(e.scaleResolutionDownBy)>=1))throw new RangeError("scale_resolution_down_by must be >= 1.0");if("maxFramerate"in e&&!(parseFloat(e.maxFramerate)>=0))throw new RangeError("max_framerate must be >= 0.0")}));var r=t.apply(this,arguments);if(n){var i=r.sender,a=i.getParameters();(!("encodings"in a)||1===a.encodings.length&&0===Object.keys(a.encodings[0]).length)&&(a.encodings=e,i.sendEncodings=e,this.setParametersPromises.push(i.setParameters(a).then((function(){delete i.sendEncodings})).catch((function(){delete i.sendEncodings}))))}return r})}}function wr(e){if("object"===typeof e&&e.RTCRtpSender){var t=e.RTCRtpSender.prototype.getParameters;t&&(e.RTCRtpSender.prototype.getParameters=function(){var e=t.apply(this,arguments);return"encodings"in e||(e.encodings=[].concat(this.sendEncodings||[{}])),e})}}function Sr(e){if("object"===typeof e&&e.RTCPeerConnection){var t=e.RTCPeerConnection.prototype.createOffer;e.RTCPeerConnection.prototype.createOffer=function(){var e=arguments,n=this;return this.setParametersPromises&&this.setParametersPromises.length?Promise.all(this.setParametersPromises).then((function(){return t.apply(n,e)})).finally((function(){n.setParametersPromises=[]})):t.apply(this,arguments)}}}function Cr(e){if("object"===typeof e&&e.RTCPeerConnection){var t=e.RTCPeerConnection.prototype.createAnswer;e.RTCPeerConnection.prototype.createAnswer=function(){var e=arguments,n=this;return this.setParametersPromises&&this.setParametersPromises.length?Promise.all(this.setParametersPromises).then((function(){return t.apply(n,e)})).finally((function(){n.setParametersPromises=[]})):t.apply(this,arguments)}}}var Er=Object.freeze({__proto__:null,shimAddTransceiver:kr,shimCreateAnswer:Cr,shimCreateOffer:Sr,shimGetDisplayMedia:function(e,t){e.navigator.mediaDevices&&"getDisplayMedia"in e.navigator.mediaDevices||e.navigator.mediaDevices&&(e.navigator.mediaDevices.getDisplayMedia=function(n){if(!n||!n.video){var r=new DOMException("getDisplayMedia without video constraints is undefined");return r.name="NotFoundError",r.code=8,Promise.reject(r)}return!0===n.video?n.video={mediaSource:t}:n.video.mediaSource=t,e.navigator.mediaDevices.getUserMedia(n)})},shimGetParameters:wr,shimGetUserMedia:pr,shimOnTrack:hr,shimPeerConnection:vr,shimRTCDataChannel:yr,shimReceiverGetStats:gr,shimRemoveStream:br,shimSenderGetStats:mr});function xr(e){if("object"===typeof e&&e.RTCPeerConnection){if("getLocalStreams"in e.RTCPeerConnection.prototype||(e.RTCPeerConnection.prototype.getLocalStreams=function(){return this._localStreams||(this._localStreams=[]),this._localStreams}),!("addStream"in e.RTCPeerConnection.prototype)){var t=e.RTCPeerConnection.prototype.addTrack;e.RTCPeerConnection.prototype.addStream=function(e){var n=this;this._localStreams||(this._localStreams=[]),this._localStreams.includes(e)||this._localStreams.push(e),e.getAudioTracks().forEach((function(r){return t.call(n,r,e)})),e.getVideoTracks().forEach((function(r){return t.call(n,r,e)}))},e.RTCPeerConnection.prototype.addTrack=function(e){for(var n=this,r=arguments.length,i=new Array(r>1?r-1:0),a=1;a<r;a++)i[a-1]=arguments[a];return i&&i.forEach((function(e){n._localStreams?n._localStreams.includes(e)||n._localStreams.push(e):n._localStreams=[e]})),t.apply(this,arguments)}}"removeStream"in e.RTCPeerConnection.prototype||(e.RTCPeerConnection.prototype.removeStream=function(e){var t=this;this._localStreams||(this._localStreams=[]);var n=this._localStreams.indexOf(e);if(-1!==n){this._localStreams.splice(n,1);var r=e.getTracks();this.getSenders().forEach((function(e){r.includes(e.track)&&t.removeTrack(e)}))}})}}function Pr(e){if("object"===typeof e&&e.RTCPeerConnection&&("getRemoteStreams"in e.RTCPeerConnection.prototype||(e.RTCPeerConnection.prototype.getRemoteStreams=function(){return this._remoteStreams?this._remoteStreams:[]}),!("onaddstream"in e.RTCPeerConnection.prototype))){Object.defineProperty(e.RTCPeerConnection.prototype,"onaddstream",{get:function(){return this._onaddstream},set:function(e){var t=this;this._onaddstream&&(this.removeEventListener("addstream",this._onaddstream),this.removeEventListener("track",this._onaddstreampoly)),this.addEventListener("addstream",this._onaddstream=e),this.addEventListener("track",this._onaddstreampoly=function(e){e.streams.forEach((function(e){if(t._remoteStreams||(t._remoteStreams=[]),!t._remoteStreams.includes(e)){t._remoteStreams.push(e);var n=new Event("addstream");n.stream=e,t.dispatchEvent(n)}}))})}});var t=e.RTCPeerConnection.prototype.setRemoteDescription;e.RTCPeerConnection.prototype.setRemoteDescription=function(){var e=this;return this._onaddstreampoly||this.addEventListener("track",this._onaddstreampoly=function(t){t.streams.forEach((function(t){if(e._remoteStreams||(e._remoteStreams=[]),!(e._remoteStreams.indexOf(t)>=0)){e._remoteStreams.push(t);var n=new Event("addstream");n.stream=t,e.dispatchEvent(n)}}))}),t.apply(e,arguments)}}}function Tr(e){if("object"===typeof e&&e.RTCPeerConnection){var t=e.RTCPeerConnection.prototype,n=t.createOffer,r=t.createAnswer,i=t.setLocalDescription,a=t.setRemoteDescription,o=t.addIceCandidate;t.createOffer=function(e,t){var r=arguments.length>=2?arguments[2]:arguments[0],i=n.apply(this,[r]);return t?(i.then(e,t),Promise.resolve()):i},t.createAnswer=function(e,t){var n=arguments.length>=2?arguments[2]:arguments[0],i=r.apply(this,[n]);return t?(i.then(e,t),Promise.resolve()):i};var s=function(e,t,n){var r=i.apply(this,[e]);return n?(r.then(t,n),Promise.resolve()):r};t.setLocalDescription=s,s=function(e,t,n){var r=a.apply(this,[e]);return n?(r.then(t,n),Promise.resolve()):r},t.setRemoteDescription=s,s=function(e,t,n){var r=o.apply(this,[e]);return n?(r.then(t,n),Promise.resolve()):r},t.addIceCandidate=s}}function Rr(e){var t=e&&e.navigator;if(t.mediaDevices&&t.mediaDevices.getUserMedia){var n=t.mediaDevices,r=n.getUserMedia.bind(n);t.mediaDevices.getUserMedia=function(e){return r(Nr(e))}}!t.getUserMedia&&t.mediaDevices&&t.mediaDevices.getUserMedia&&(t.getUserMedia=function(e,n,r){t.mediaDevices.getUserMedia(e).then(n,r)}.bind(t))}function Nr(e){return e&&void 0!==e.video?Object.assign({},e,{video:Yn(e.video)}):e}function Or(e){if(e.RTCPeerConnection){var t=e.RTCPeerConnection;e.RTCPeerConnection=function(e,n){if(e&&e.iceServers){for(var r=[],i=0;i<e.iceServers.length;i++){var a=e.iceServers[i];void 0===a.urls&&a.url?(Zn("RTCIceServer.url","RTCIceServer.urls"),(a=JSON.parse(JSON.stringify(a))).urls=a.url,delete a.url,r.push(a)):r.push(e.iceServers[i])}e.iceServers=r}return new t(e,n)},e.RTCPeerConnection.prototype=t.prototype,"generateCertificate"in t&&Object.defineProperty(e.RTCPeerConnection,"generateCertificate",{get:function(){return t.generateCertificate}})}}function Ir(e){"object"===typeof e&&e.RTCTrackEvent&&"receiver"in e.RTCTrackEvent.prototype&&!("transceiver"in e.RTCTrackEvent.prototype)&&Object.defineProperty(e.RTCTrackEvent.prototype,"transceiver",{get:function(){return{receiver:this.receiver}}})}function _r(e){var t=e.RTCPeerConnection.prototype.createOffer;e.RTCPeerConnection.prototype.createOffer=function(e){if(e){"undefined"!==typeof e.offerToReceiveAudio&&(e.offerToReceiveAudio=!!e.offerToReceiveAudio);var n=this.getTransceivers().find((function(e){return"audio"===e.receiver.track.kind}));!1===e.offerToReceiveAudio&&n?"sendrecv"===n.direction?n.setDirection?n.setDirection("sendonly"):n.direction="sendonly":"recvonly"===n.direction&&(n.setDirection?n.setDirection("inactive"):n.direction="inactive"):!0!==e.offerToReceiveAudio||n||this.addTransceiver("audio",{direction:"recvonly"}),"undefined"!==typeof e.offerToReceiveVideo&&(e.offerToReceiveVideo=!!e.offerToReceiveVideo);var r=this.getTransceivers().find((function(e){return"video"===e.receiver.track.kind}));!1===e.offerToReceiveVideo&&r?"sendrecv"===r.direction?r.setDirection?r.setDirection("sendonly"):r.direction="sendonly":"recvonly"===r.direction&&(r.setDirection?r.setDirection("inactive"):r.direction="inactive"):!0!==e.offerToReceiveVideo||r||this.addTransceiver("video",{direction:"recvonly"})}return t.apply(this,arguments)}}function Dr(e){"object"!==typeof e||e.AudioContext||(e.AudioContext=e.webkitAudioContext)}var Ar=Object.freeze({__proto__:null,shimAudioContext:Dr,shimCallbacksAPI:Tr,shimConstraints:Nr,shimCreateOfferLegacy:_r,shimGetUserMedia:Rr,shimLocalStreamsAPI:xr,shimRTCIceServerUrls:Or,shimRemoteStreamsAPI:Pr,shimTrackEventTransceiver:Ir}),Lr={exports:{}};!function(e){var t={generateIdentifier:function(){return Math.random().toString(36).substring(2,12)}};t.localCName=t.generateIdentifier(),t.splitLines=function(e){return e.trim().split("\n").map((function(e){return e.trim()}))},t.splitSections=function(e){return e.split("\nm=").map((function(e,t){return(t>0?"m="+e:e).trim()+"\r\n"}))},t.getDescription=function(e){var n=t.splitSections(e);return n&&n[0]},t.getMediaSections=function(e){var n=t.splitSections(e);return n.shift(),n},t.matchPrefix=function(e,n){return t.splitLines(e).filter((function(e){return 0===e.indexOf(n)}))},t.parseCandidate=function(e){for(var t,n={foundation:(t=0===e.indexOf("a=candidate:")?e.substring(12).split(" "):e.substring(10).split(" "))[0],component:{1:"rtp",2:"rtcp"}[t[1]]||t[1],protocol:t[2].toLowerCase(),priority:parseInt(t[3],10),ip:t[4],address:t[4],port:parseInt(t[5],10),type:t[7]},r=8;r<t.length;r+=2)switch(t[r]){case"raddr":n.relatedAddress=t[r+1];break;case"rport":n.relatedPort=parseInt(t[r+1],10);break;case"tcptype":n.tcpType=t[r+1];break;case"ufrag":n.ufrag=t[r+1],n.usernameFragment=t[r+1];break;default:void 0===n[t[r]]&&(n[t[r]]=t[r+1])}return n},t.writeCandidate=function(e){var t=[];t.push(e.foundation);var n=e.component;"rtp"===n?t.push(1):"rtcp"===n?t.push(2):t.push(n),t.push(e.protocol.toUpperCase()),t.push(e.priority),t.push(e.address||e.ip),t.push(e.port);var r=e.type;return t.push("typ"),t.push(r),"host"!==r&&e.relatedAddress&&e.relatedPort&&(t.push("raddr"),t.push(e.relatedAddress),t.push("rport"),t.push(e.relatedPort)),e.tcpType&&"tcp"===e.protocol.toLowerCase()&&(t.push("tcptype"),t.push(e.tcpType)),(e.usernameFragment||e.ufrag)&&(t.push("ufrag"),t.push(e.usernameFragment||e.ufrag)),"candidate:"+t.join(" ")},t.parseIceOptions=function(e){return e.substring(14).split(" ")},t.parseRtpMap=function(e){var t=e.substring(9).split(" "),n={payloadType:parseInt(t.shift(),10)};return t=t[0].split("/"),n.name=t[0],n.clockRate=parseInt(t[1],10),n.channels=3===t.length?parseInt(t[2],10):1,n.numChannels=n.channels,n},t.writeRtpMap=function(e){var t=e.payloadType;void 0!==e.preferredPayloadType&&(t=e.preferredPayloadType);var n=e.channels||e.numChannels||1;return"a=rtpmap:"+t+" "+e.name+"/"+e.clockRate+(1!==n?"/"+n:"")+"\r\n"},t.parseExtmap=function(e){var t=e.substring(9).split(" ");return{id:parseInt(t[0],10),direction:t[0].indexOf("/")>0?t[0].split("/")[1]:"sendrecv",uri:t[1],attributes:t.slice(2).join(" ")}},t.writeExtmap=function(e){return"a=extmap:"+(e.id||e.preferredId)+(e.direction&&"sendrecv"!==e.direction?"/"+e.direction:"")+" "+e.uri+(e.attributes?" "+e.attributes:"")+"\r\n"},t.parseFmtp=function(e){for(var t,n={},r=e.substring(e.indexOf(" ")+1).split(";"),i=0;i<r.length;i++)n[(t=r[i].trim().split("="))[0].trim()]=t[1];return n},t.writeFmtp=function(e){var t="",n=e.payloadType;if(void 0!==e.preferredPayloadType&&(n=e.preferredPayloadType),e.parameters&&Object.keys(e.parameters).length){var r=[];Object.keys(e.parameters).forEach((function(t){void 0!==e.parameters[t]?r.push(t+"="+e.parameters[t]):r.push(t)})),t+="a=fmtp:"+n+" "+r.join(";")+"\r\n"}return t},t.parseRtcpFb=function(e){var t=e.substring(e.indexOf(" ")+1).split(" ");return{type:t.shift(),parameter:t.join(" ")}},t.writeRtcpFb=function(e){var t="",n=e.payloadType;return void 0!==e.preferredPayloadType&&(n=e.preferredPayloadType),e.rtcpFeedback&&e.rtcpFeedback.length&&e.rtcpFeedback.forEach((function(e){t+="a=rtcp-fb:"+n+" "+e.type+(e.parameter&&e.parameter.length?" "+e.parameter:"")+"\r\n"})),t},t.parseSsrcMedia=function(e){var t=e.indexOf(" "),n={ssrc:parseInt(e.substring(7,t),10)},r=e.indexOf(":",t);return r>-1?(n.attribute=e.substring(t+1,r),n.value=e.substring(r+1)):n.attribute=e.substring(t+1),n},t.parseSsrcGroup=function(e){var t=e.substring(13).split(" ");return{semantics:t.shift(),ssrcs:t.map((function(e){return parseInt(e,10)}))}},t.getMid=function(e){var n=t.matchPrefix(e,"a=mid:")[0];if(n)return n.substring(6)},t.parseFingerprint=function(e){var t=e.substring(14).split(" ");return{algorithm:t[0].toLowerCase(),value:t[1].toUpperCase()}},t.getDtlsParameters=function(e,n){return{role:"auto",fingerprints:t.matchPrefix(e+n,"a=fingerprint:").map(t.parseFingerprint)}},t.writeDtlsParameters=function(e,t){var n="a=setup:"+t+"\r\n";return e.fingerprints.forEach((function(e){n+="a=fingerprint:"+e.algorithm+" "+e.value+"\r\n"})),n},t.parseCryptoLine=function(e){var t=e.substring(9).split(" ");return{tag:parseInt(t[0],10),cryptoSuite:t[1],keyParams:t[2],sessionParams:t.slice(3)}},t.writeCryptoLine=function(e){return"a=crypto:"+e.tag+" "+e.cryptoSuite+" "+("object"===typeof e.keyParams?t.writeCryptoKeyParams(e.keyParams):e.keyParams)+(e.sessionParams?" "+e.sessionParams.join(" "):"")+"\r\n"},t.parseCryptoKeyParams=function(e){if(0!==e.indexOf("inline:"))return null;var t=e.substring(7).split("|");return{keyMethod:"inline",keySalt:t[0],lifeTime:t[1],mkiValue:t[2]?t[2].split(":")[0]:void 0,mkiLength:t[2]?t[2].split(":")[1]:void 0}},t.writeCryptoKeyParams=function(e){return e.keyMethod+":"+e.keySalt+(e.lifeTime?"|"+e.lifeTime:"")+(e.mkiValue&&e.mkiLength?"|"+e.mkiValue+":"+e.mkiLength:"")},t.getCryptoParameters=function(e,n){return t.matchPrefix(e+n,"a=crypto:").map(t.parseCryptoLine)},t.getIceParameters=function(e,n){var r=t.matchPrefix(e+n,"a=ice-ufrag:")[0],i=t.matchPrefix(e+n,"a=ice-pwd:")[0];return r&&i?{usernameFragment:r.substring(12),password:i.substring(10)}:null},t.writeIceParameters=function(e){var t="a=ice-ufrag:"+e.usernameFragment+"\r\na=ice-pwd:"+e.password+"\r\n";return e.iceLite&&(t+="a=ice-lite\r\n"),t},t.parseRtpParameters=function(e){var n={codecs:[],headerExtensions:[],fecMechanisms:[],rtcp:[]},r=t.splitLines(e)[0].split(" ");n.profile=r[2];for(var i=3;i<r.length;i++){var a=r[i],o=t.matchPrefix(e,"a=rtpmap:"+a+" ")[0];if(o){var s=t.parseRtpMap(o),c=t.matchPrefix(e,"a=fmtp:"+a+" ");switch(s.parameters=c.length?t.parseFmtp(c[0]):{},s.rtcpFeedback=t.matchPrefix(e,"a=rtcp-fb:"+a+" ").map(t.parseRtcpFb),n.codecs.push(s),s.name.toUpperCase()){case"RED":case"ULPFEC":n.fecMechanisms.push(s.name.toUpperCase())}}}t.matchPrefix(e,"a=extmap:").forEach((function(e){n.headerExtensions.push(t.parseExtmap(e))}));var u=t.matchPrefix(e,"a=rtcp-fb:* ").map(t.parseRtcpFb);return n.codecs.forEach((function(e){u.forEach((function(t){e.rtcpFeedback.find((function(e){return e.type===t.type&&e.parameter===t.parameter}))||e.rtcpFeedback.push(t)}))})),n},t.writeRtpDescription=function(e,n){var r="";r+="m="+e+" ",r+=n.codecs.length>0?"9":"0",r+=" "+(n.profile||"UDP/TLS/RTP/SAVPF")+" ",r+=n.codecs.map((function(e){return void 0!==e.preferredPayloadType?e.preferredPayloadType:e.payloadType})).join(" ")+"\r\n",r+="c=IN IP4 0.0.0.0\r\n",r+="a=rtcp:9 IN IP4 0.0.0.0\r\n",n.codecs.forEach((function(e){r+=t.writeRtpMap(e),r+=t.writeFmtp(e),r+=t.writeRtcpFb(e)}));var i=0;return n.codecs.forEach((function(e){e.maxptime>i&&(i=e.maxptime)})),i>0&&(r+="a=maxptime:"+i+"\r\n"),n.headerExtensions&&n.headerExtensions.forEach((function(e){r+=t.writeExtmap(e)})),r},t.parseRtpEncodingParameters=function(e){var n,r=[],i=t.parseRtpParameters(e),a=-1!==i.fecMechanisms.indexOf("RED"),o=-1!==i.fecMechanisms.indexOf("ULPFEC"),s=t.matchPrefix(e,"a=ssrc:").map((function(e){return t.parseSsrcMedia(e)})).filter((function(e){return"cname"===e.attribute})),c=s.length>0&&s[0].ssrc,u=t.matchPrefix(e,"a=ssrc-group:FID").map((function(e){return e.substring(17).split(" ").map((function(e){return parseInt(e,10)}))}));u.length>0&&u[0].length>1&&u[0][0]===c&&(n=u[0][1]),i.codecs.forEach((function(e){if("RTX"===e.name.toUpperCase()&&e.parameters.apt){var t={ssrc:c,codecPayloadType:parseInt(e.parameters.apt,10)};c&&n&&(t.rtx={ssrc:n}),r.push(t),a&&((t=JSON.parse(JSON.stringify(t))).fec={ssrc:c,mechanism:o?"red+ulpfec":"red"},r.push(t))}})),0===r.length&&c&&r.push({ssrc:c});var l=t.matchPrefix(e,"b=");return l.length&&(l=0===l[0].indexOf("b=TIAS:")?parseInt(l[0].substring(7),10):0===l[0].indexOf("b=AS:")?1e3*parseInt(l[0].substring(5),10)*.95-16e3:void 0,r.forEach((function(e){e.maxBitrate=l}))),r},t.parseRtcpParameters=function(e){var n={},r=t.matchPrefix(e,"a=ssrc:").map((function(e){return t.parseSsrcMedia(e)})).filter((function(e){return"cname"===e.attribute}))[0];r&&(n.cname=r.value,n.ssrc=r.ssrc);var i=t.matchPrefix(e,"a=rtcp-rsize");n.reducedSize=i.length>0,n.compound=0===i.length;var a=t.matchPrefix(e,"a=rtcp-mux");return n.mux=a.length>0,n},t.writeRtcpParameters=function(e){var t="";return e.reducedSize&&(t+="a=rtcp-rsize\r\n"),e.mux&&(t+="a=rtcp-mux\r\n"),void 0!==e.ssrc&&e.cname&&(t+="a=ssrc:"+e.ssrc+" cname:"+e.cname+"\r\n"),t},t.parseMsid=function(e){var n,r=t.matchPrefix(e,"a=msid:");if(1===r.length)return{stream:(n=r[0].substring(7).split(" "))[0],track:n[1]};var i=t.matchPrefix(e,"a=ssrc:").map((function(e){return t.parseSsrcMedia(e)})).filter((function(e){return"msid"===e.attribute}));return i.length>0?{stream:(n=i[0].value.split(" "))[0],track:n[1]}:void 0},t.parseSctpDescription=function(e){var n,r=t.parseMLine(e),i=t.matchPrefix(e,"a=max-message-size:");i.length>0&&(n=parseInt(i[0].substring(19),10)),isNaN(n)&&(n=65536);var a=t.matchPrefix(e,"a=sctp-port:");if(a.length>0)return{port:parseInt(a[0].substring(12),10),protocol:r.fmt,maxMessageSize:n};var o=t.matchPrefix(e,"a=sctpmap:");if(o.length>0){var s=o[0].substring(10).split(" ");return{port:parseInt(s[0],10),protocol:s[1],maxMessageSize:n}}},t.writeSctpDescription=function(e,t){var n=[];return n="DTLS/SCTP"!==e.protocol?["m="+e.kind+" 9 "+e.protocol+" "+t.protocol+"\r\n","c=IN IP4 0.0.0.0\r\n","a=sctp-port:"+t.port+"\r\n"]:["m="+e.kind+" 9 "+e.protocol+" "+t.port+"\r\n","c=IN IP4 0.0.0.0\r\n","a=sctpmap:"+t.port+" "+t.protocol+" 65535\r\n"],void 0!==t.maxMessageSize&&n.push("a=max-message-size:"+t.maxMessageSize+"\r\n"),n.join("")},t.generateSessionId=function(){return Math.random().toString().substr(2,22)},t.writeSessionBoilerplate=function(e,n,r){var i=void 0!==n?n:2;return"v=0\r\no="+(r||"thisisadapterortc")+" "+(e||t.generateSessionId())+" "+i+" IN IP4 127.0.0.1\r\ns=-\r\nt=0 0\r\n"},t.getDirection=function(e,n){for(var r=t.splitLines(e),i=0;i<r.length;i++)switch(r[i]){case"a=sendrecv":case"a=sendonly":case"a=recvonly":case"a=inactive":return r[i].substring(2)}return n?t.getDirection(n):"sendrecv"},t.getKind=function(e){return t.splitLines(e)[0].split(" ")[0].substring(2)},t.isRejected=function(e){return"0"===e.split(" ",2)[1]},t.parseMLine=function(e){var n=t.splitLines(e)[0].substring(2).split(" ");return{kind:n[0],port:parseInt(n[1],10),protocol:n[2],fmt:n.slice(3).join(" ")}},t.parseOLine=function(e){var n=t.matchPrefix(e,"o=")[0].substring(2).split(" ");return{username:n[0],sessionId:n[1],sessionVersion:parseInt(n[2],10),netType:n[3],addressType:n[4],address:n[5]}},t.isValidSDP=function(e){if("string"!==typeof e||0===e.length)return!1;for(var n=t.splitLines(e),r=0;r<n.length;r++)if(n[r].length<2||"="!==n[r].charAt(1))return!1;return!0},e.exports=t}(Lr);var Mr=Lr.exports,Ur=O(Mr),Fr=R({__proto__:null,default:Ur},[Mr]);function jr(e){if(!(!e.RTCIceCandidate||e.RTCIceCandidate&&"foundation"in e.RTCIceCandidate.prototype)){var t=e.RTCIceCandidate;e.RTCIceCandidate=function(e){if("object"===typeof e&&e.candidate&&0===e.candidate.indexOf("a=")&&((e=JSON.parse(JSON.stringify(e))).candidate=e.candidate.substring(2)),e.candidate&&e.candidate.length){var n=new t(e),r=Ur.parseCandidate(e.candidate);for(var i in r)i in n||Object.defineProperty(n,i,{value:r[i]});return n.toJSON=function(){return{candidate:n.candidate,sdpMid:n.sdpMid,sdpMLineIndex:n.sdpMLineIndex,usernameFragment:n.usernameFragment}},n}return new t(e)},e.RTCIceCandidate.prototype=t.prototype,qn(e,"icecandidate",(function(t){return t.candidate&&Object.defineProperty(t,"candidate",{value:new e.RTCIceCandidate(t.candidate),writable:"false"}),t}))}}function Br(e){!e.RTCIceCandidate||e.RTCIceCandidate&&"relayProtocol"in e.RTCIceCandidate.prototype||qn(e,"icecandidate",(function(e){if(e.candidate){var t=Ur.parseCandidate(e.candidate.candidate);"relay"===t.type&&(e.candidate.relayProtocol={0:"tls",1:"tcp",2:"udp"}[t.priority>>24])}return e}))}function zr(e,t){if(e.RTCPeerConnection){"sctp"in e.RTCPeerConnection.prototype||Object.defineProperty(e.RTCPeerConnection.prototype,"sctp",{get:function(){return"undefined"===typeof this._sctp?null:this._sctp}});var n=e.RTCPeerConnection.prototype.setRemoteDescription;e.RTCPeerConnection.prototype.setRemoteDescription=function(){(this._sctp=null,"chrome"===t.browser&&t.version>=76)&&("plan-b"===this.getConfiguration().sdpSemantics&&Object.defineProperty(this,"sctp",{get:function(){return"undefined"===typeof this._sctp?null:this._sctp},enumerable:!0,configurable:!0}));if(function(e){if(!e||!e.sdp)return!1;var t=Ur.splitSections(e.sdp);return t.shift(),t.some((function(e){var t=Ur.parseMLine(e);return t&&"application"===t.kind&&-1!==t.protocol.indexOf("SCTP")}))}(arguments[0])){var e,r=function(e){var t=e.sdp.match(/mozilla...THIS_IS_SDPARTA-(\d+)/);if(null===t||t.length<2)return-1;var n=parseInt(t[1],10);return n!==n?-1:n}(arguments[0]),i=function(e){var n=65536;return"firefox"===t.browser&&(n=t.version<57?-1===e?16384:2147483637:t.version<60?57===t.version?65535:65536:2147483637),n}(r),a=function(e,n){var r=65536;"firefox"===t.browser&&57===t.version&&(r=65535);var i=Ur.matchPrefix(e.sdp,"a=max-message-size:");return i.length>0?r=parseInt(i[0].substring(19),10):"firefox"===t.browser&&-1!==n&&(r=2147483637),r}(arguments[0],r);e=0===i&&0===a?Number.POSITIVE_INFINITY:0===i||0===a?Math.max(i,a):Math.min(i,a);var o={};Object.defineProperty(o,"maxMessageSize",{get:function(){return e}}),this._sctp=o}return n.apply(this,arguments)}}}function $r(e){if(e.RTCPeerConnection&&"createDataChannel"in e.RTCPeerConnection.prototype){var t=e.RTCPeerConnection.prototype.createDataChannel;e.RTCPeerConnection.prototype.createDataChannel=function(){var e=t.apply(this,arguments);return n(e,this),e},qn(e,"datachannel",(function(e){return n(e.channel,e.target),e}))}function n(e,t){var n=e.send;e.send=function(){var r=arguments[0],i=r.length||r.size||r.byteLength;if("open"===e.readyState&&t.sctp&&i>t.sctp.maxMessageSize)throw new TypeError("Message too large (can send a maximum of "+t.sctp.maxMessageSize+" bytes)");return n.apply(e,arguments)}}}function Vr(e){if(e.RTCPeerConnection&&!("connectionState"in e.RTCPeerConnection.prototype)){var t=e.RTCPeerConnection.prototype;Object.defineProperty(t,"connectionState",{get:function(){return{completed:"connected",checking:"connecting"}[this.iceConnectionState]||this.iceConnectionState},enumerable:!0,configurable:!0}),Object.defineProperty(t,"onconnectionstatechange",{get:function(){return this._onconnectionstatechange||null},set:function(e){this._onconnectionstatechange&&(this.removeEventListener("connectionstatechange",this._onconnectionstatechange),delete this._onconnectionstatechange),e&&this.addEventListener("connectionstatechange",this._onconnectionstatechange=e)},enumerable:!0,configurable:!0}),["setLocalDescription","setRemoteDescription"].forEach((function(e){var n=t[e];t[e]=function(){return this._connectionstatechangepoly||(this._connectionstatechangepoly=function(e){var t=e.target;if(t._lastConnectionState!==t.connectionState){t._lastConnectionState=t.connectionState;var n=new Event("connectionstatechange",e);t.dispatchEvent(n)}return e},this.addEventListener("iceconnectionstatechange",this._connectionstatechangepoly)),n.apply(this,arguments)}}))}}function Jr(e,t){if(e.RTCPeerConnection&&!("chrome"===t.browser&&t.version>=71)&&!("safari"===t.browser&&t.version>=605)){var n=e.RTCPeerConnection.prototype.setRemoteDescription;e.RTCPeerConnection.prototype.setRemoteDescription=function(t){if(t&&t.sdp&&-1!==t.sdp.indexOf("\na=extmap-allow-mixed")){var r=t.sdp.split("\n").filter((function(e){return"a=extmap-allow-mixed"!==e.trim()})).join("\n");e.RTCSessionDescription&&t instanceof e.RTCSessionDescription?arguments[0]=new e.RTCSessionDescription({type:t.type,sdp:r}):t.sdp=r}return n.apply(this,arguments)}}}function Wr(e,t){if(e.RTCPeerConnection&&e.RTCPeerConnection.prototype){var n=e.RTCPeerConnection.prototype.addIceCandidate;n&&0!==n.length&&(e.RTCPeerConnection.prototype.addIceCandidate=function(){return arguments[0]?("chrome"===t.browser&&t.version<78||"firefox"===t.browser&&t.version<68||"safari"===t.browser)&&arguments[0]&&""===arguments[0].candidate?Promise.resolve():n.apply(this,arguments):(arguments[1]&&arguments[1].apply(null),Promise.resolve())})}}function qr(e,t){if(e.RTCPeerConnection&&e.RTCPeerConnection.prototype){var n=e.RTCPeerConnection.prototype.setLocalDescription;n&&0!==n.length&&(e.RTCPeerConnection.prototype.setLocalDescription=function(){var e=this,t=arguments[0]||{};if("object"!==typeof t||t.type&&t.sdp)return n.apply(this,arguments);if(!(t={type:t.type,sdp:t.sdp}).type)switch(this.signalingState){case"stable":case"have-local-offer":case"have-remote-pranswer":t.type="offer";break;default:t.type="answer"}return t.sdp||"offer"!==t.type&&"answer"!==t.type?n.apply(this,[t]):("offer"===t.type?this.createOffer:this.createAnswer).apply(this).then((function(t){return n.apply(e,[t])}))})}}var Hr,Gr,Qr,Zr=Object.freeze({__proto__:null,removeExtmapAllowMixed:Jr,shimAddIceCandidateNullOrEmpty:Wr,shimConnectionState:Vr,shimMaxMessageSize:zr,shimParameterlessSetLocalDescription:qr,shimRTCIceCandidate:jr,shimRTCIceCandidateRelayProtocol:Br,shimSendThrowTypeError:$r});function Kr(e){switch(e){case 0:case"PUBLISHER":return Hr.PUBLISHER;case 1:case"SUBSCRIBER":return Hr.SUBSCRIBER;default:return Hr.UNRECOGNIZED}}function Yr(e){switch(e){case Hr.PUBLISHER:return"PUBLISHER";case Hr.SUBSCRIBER:return"SUBSCRIBER";case Hr.UNRECOGNIZED:default:return"UNRECOGNIZED"}}function Xr(e){switch(e){case 0:case"ACTIVE":return Gr.ACTIVE;case 1:case"PAUSED":return Gr.PAUSED;default:return Gr.UNRECOGNIZED}}function ei(e){switch(e){case 0:case"UDP":return Qr.UDP;case 1:case"TCP":return Qr.TCP;case 2:case"TLS":return Qr.TLS;default:return Qr.UNRECOGNIZED}}!function(){var e=(arguments.length>0&&void 0!==arguments[0]?arguments[0]:{}).window,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{shimChrome:!0,shimFirefox:!0,shimSafari:!0},n=Qn,r=function(e){var t={browser:null,version:null};if("undefined"===typeof e||!e.navigator)return t.browser="Not a browser.",t;var n=e.navigator;if(n.mozGetUserMedia)t.browser="firefox",t.version=Wn(n.userAgent,/Firefox\/(\d+)\./,1);else if(n.webkitGetUserMedia||!1===e.isSecureContext&&e.webkitRTCPeerConnection)t.browser="chrome",t.version=Wn(n.userAgent,/Chrom(e|ium)\/(\d+)\./,2);else{if(!e.RTCPeerConnection||!n.userAgent.match(/AppleWebKit\/(\d+)\./))return t.browser="Not a supported browser.",t;t.browser="safari",t.version=Wn(n.userAgent,/AppleWebKit\/(\d+)\./,1),t.supportsUnifiedPlan=e.RTCRtpTransceiver&&"currentDirection"in e.RTCRtpTransceiver.prototype}return t}(e),i={browserDetails:r,commonShim:Zr,extractVersion:Wn,disableLog:Hn,disableWarnings:Gn,sdp:Fr};switch(r.browser){case"chrome":if(!fr||!lr||!t.shimChrome)return n("Chrome shim is not included in this adapter release."),i;if(null===r.version)return n("Chrome shim can not determine version, not shimming."),i;n("adapter.js shimming chrome."),i.browserShim=fr,Wr(e,r),qr(e),nr(e,r),rr(e),lr(e,r),ir(e),ur(e,r),ar(e),or(e),sr(e),dr(e,r),jr(e),Br(e),Vr(e),zr(e,r),$r(e),Jr(e,r);break;case"firefox":if(!Er||!vr||!t.shimFirefox)return n("Firefox shim is not included in this adapter release."),i;n("adapter.js shimming firefox."),i.browserShim=Er,Wr(e,r),qr(e),pr(e,r),vr(e,r),hr(e),br(e),mr(e),gr(e),yr(e),kr(e),wr(e),Sr(e),Cr(e),jr(e),Vr(e),zr(e,r),$r(e);break;case"safari":if(!Ar||!t.shimSafari)return n("Safari shim is not included in this adapter release."),i;n("adapter.js shimming safari."),i.browserShim=Ar,Wr(e,r),qr(e),Or(e),_r(e),Tr(e),xr(e),Pr(e),Ir(e),Rr(e),Dr(e),jr(e),Br(e),zr(e,r),$r(e),Jr(e,r);break;default:n("Unsupported browser!")}}({window:"undefined"===typeof window?void 0:window}),function(e){e[e.PUBLISHER=0]="PUBLISHER",e[e.SUBSCRIBER=1]="SUBSCRIBER",e[e.UNRECOGNIZED=-1]="UNRECOGNIZED"}(Hr||(Hr={})),function(e){e[e.ACTIVE=0]="ACTIVE",e[e.PAUSED=1]="PAUSED",e[e.UNRECOGNIZED=-1]="UNRECOGNIZED"}(Gr||(Gr={})),function(e){e[e.UDP=0]="UDP",e[e.TCP=1]="TCP",e[e.TLS=2]="TLS",e[e.UNRECOGNIZED=-1]="UNRECOGNIZED"}(Qr||(Qr={}));var ti={encode:function(e){var t,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:Ot.Writer.create();switch(null===(t=e.message)||void 0===t?void 0:t.$case){case"offer":di.encode(e.message.offer,n.uint32(10).fork()).ldelim();break;case"answer":di.encode(e.message.answer,n.uint32(18).fork()).ldelim();break;case"trickle":ai.encode(e.message.trickle,n.uint32(26).fork()).ldelim();break;case"addTrack":ii.encode(e.message.addTrack,n.uint32(34).fork()).ldelim();break;case"mute":oi.encode(e.message.mute,n.uint32(42).fork()).ldelim();break;case"subscription":pi.encode(e.message.subscription,n.uint32(50).fork()).ldelim();break;case"trackSetting":hi.encode(e.message.trackSetting,n.uint32(58).fork()).ldelim();break;case"leave":vi.encode(e.message.leave,n.uint32(66).fork()).ldelim();break;case"updateLayers":mi.encode(e.message.updateLayers,n.uint32(82).fork()).ldelim();break;case"subscriptionPermission":Ni.encode(e.message.subscriptionPermission,n.uint32(90).fork()).ldelim();break;case"syncState":Ii.encode(e.message.syncState,n.uint32(98).fork()).ldelim();break;case"simulate":Di.encode(e.message.simulate,n.uint32(106).fork()).ldelim();break;case"ping":n.uint32(112).int64(e.message.ping);break;case"updateMetadata":gi.encode(e.message.updateMetadata,n.uint32(122).fork()).ldelim();break;case"pingReq":Ai.encode(e.message.pingReq,n.uint32(130).fork()).ldelim()}return n},decode:function(e,t){for(var n=e instanceof Ot.Reader?e:Ot.Reader.create(e),r=void 0===t?n.len:n.pos+t,i={message:void 0};n.pos<r;){var a=n.uint32();switch(a>>>3){case 1:if(10!=a)break;i.message={$case:"offer",offer:di.decode(n,n.uint32())};continue;case 2:if(18!=a)break;i.message={$case:"answer",answer:di.decode(n,n.uint32())};continue;case 3:if(26!=a)break;i.message={$case:"trickle",trickle:ai.decode(n,n.uint32())};continue;case 4:if(34!=a)break;i.message={$case:"addTrack",addTrack:ii.decode(n,n.uint32())};continue;case 5:if(42!=a)break;i.message={$case:"mute",mute:oi.decode(n,n.uint32())};continue;case 6:if(50!=a)break;i.message={$case:"subscription",subscription:pi.decode(n,n.uint32())};continue;case 7:if(58!=a)break;i.message={$case:"trackSetting",trackSetting:hi.decode(n,n.uint32())};continue;case 8:if(66!=a)break;i.message={$case:"leave",leave:vi.decode(n,n.uint32())};continue;case 10:if(82!=a)break;i.message={$case:"updateLayers",updateLayers:mi.decode(n,n.uint32())};continue;case 11:if(90!=a)break;i.message={$case:"subscriptionPermission",subscriptionPermission:Ni.decode(n,n.uint32())};continue;case 12:if(98!=a)break;i.message={$case:"syncState",syncState:Ii.decode(n,n.uint32())};continue;case 13:if(106!=a)break;i.message={$case:"simulate",simulate:Di.decode(n,n.uint32())};continue;case 14:if(112!=a)break;i.message={$case:"ping",ping:Ui(n.int64())};continue;case 15:if(122!=a)break;i.message={$case:"updateMetadata",updateMetadata:gi.decode(n,n.uint32())};continue;case 16:if(130!=a)break;i.message={$case:"pingReq",pingReq:Ai.decode(n,n.uint32())};continue}if(4==(7&a)||0==a)break;n.skipType(7&a)}return i},fromJSON:function(e){return{message:Fi(e.offer)?{$case:"offer",offer:di.fromJSON(e.offer)}:Fi(e.answer)?{$case:"answer",answer:di.fromJSON(e.answer)}:Fi(e.trickle)?{$case:"trickle",trickle:ai.fromJSON(e.trickle)}:Fi(e.addTrack)?{$case:"addTrack",addTrack:ii.fromJSON(e.addTrack)}:Fi(e.mute)?{$case:"mute",mute:oi.fromJSON(e.mute)}:Fi(e.subscription)?{$case:"subscription",subscription:pi.fromJSON(e.subscription)}:Fi(e.trackSetting)?{$case:"trackSetting",trackSetting:hi.fromJSON(e.trackSetting)}:Fi(e.leave)?{$case:"leave",leave:vi.fromJSON(e.leave)}:Fi(e.updateLayers)?{$case:"updateLayers",updateLayers:mi.fromJSON(e.updateLayers)}:Fi(e.subscriptionPermission)?{$case:"subscriptionPermission",subscriptionPermission:Ni.fromJSON(e.subscriptionPermission)}:Fi(e.syncState)?{$case:"syncState",syncState:Ii.fromJSON(e.syncState)}:Fi(e.simulate)?{$case:"simulate",simulate:Di.fromJSON(e.simulate)}:Fi(e.ping)?{$case:"ping",ping:Number(e.ping)}:Fi(e.updateMetadata)?{$case:"updateMetadata",updateMetadata:gi.fromJSON(e.updateMetadata)}:Fi(e.pingReq)?{$case:"pingReq",pingReq:Ai.fromJSON(e.pingReq)}:void 0}},toJSON:function(e){var t,n,r,i,a,o,s,c,u,l,d,f,p,h,v,m,g,b,y,k,w,S,C,E,x,P,T,R,N,O,I,_,D,A,L,M,U,F,j,B,z,$,V,J,W={};return"offer"===(null===(t=e.message)||void 0===t?void 0:t.$case)&&(W.offer=(null===(n=e.message)||void 0===n?void 0:n.offer)?di.toJSON(null===(r=e.message)||void 0===r?void 0:r.offer):void 0),"answer"===(null===(i=e.message)||void 0===i?void 0:i.$case)&&(W.answer=(null===(a=e.message)||void 0===a?void 0:a.answer)?di.toJSON(null===(o=e.message)||void 0===o?void 0:o.answer):void 0),"trickle"===(null===(s=e.message)||void 0===s?void 0:s.$case)&&(W.trickle=(null===(c=e.message)||void 0===c?void 0:c.trickle)?ai.toJSON(null===(u=e.message)||void 0===u?void 0:u.trickle):void 0),"addTrack"===(null===(l=e.message)||void 0===l?void 0:l.$case)&&(W.addTrack=(null===(d=e.message)||void 0===d?void 0:d.addTrack)?ii.toJSON(null===(f=e.message)||void 0===f?void 0:f.addTrack):void 0),"mute"===(null===(p=e.message)||void 0===p?void 0:p.$case)&&(W.mute=(null===(h=e.message)||void 0===h?void 0:h.mute)?oi.toJSON(null===(v=e.message)||void 0===v?void 0:v.mute):void 0),"subscription"===(null===(m=e.message)||void 0===m?void 0:m.$case)&&(W.subscription=(null===(g=e.message)||void 0===g?void 0:g.subscription)?pi.toJSON(null===(b=e.message)||void 0===b?void 0:b.subscription):void 0),"trackSetting"===(null===(y=e.message)||void 0===y?void 0:y.$case)&&(W.trackSetting=(null===(k=e.message)||void 0===k?void 0:k.trackSetting)?hi.toJSON(null===(w=e.message)||void 0===w?void 0:w.trackSetting):void 0),"leave"===(null===(S=e.message)||void 0===S?void 0:S.$case)&&(W.leave=(null===(C=e.message)||void 0===C?void 0:C.leave)?vi.toJSON(null===(E=e.message)||void 0===E?void 0:E.leave):void 0),"updateLayers"===(null===(x=e.message)||void 0===x?void 0:x.$case)&&(W.updateLayers=(null===(P=e.message)||void 0===P?void 0:P.updateLayers)?mi.toJSON(null===(T=e.message)||void 0===T?void 0:T.updateLayers):void 0),"subscriptionPermission"===(null===(R=e.message)||void 0===R?void 0:R.$case)&&(W.subscriptionPermission=(null===(N=e.message)||void 0===N?void 0:N.subscriptionPermission)?Ni.toJSON(null===(O=e.message)||void 0===O?void 0:O.subscriptionPermission):void 0),"syncState"===(null===(I=e.message)||void 0===I?void 0:I.$case)&&(W.syncState=(null===(_=e.message)||void 0===_?void 0:_.syncState)?Ii.toJSON(null===(D=e.message)||void 0===D?void 0:D.syncState):void 0),"simulate"===(null===(A=e.message)||void 0===A?void 0:A.$case)&&(W.simulate=(null===(L=e.message)||void 0===L?void 0:L.simulate)?Di.toJSON(null===(M=e.message)||void 0===M?void 0:M.simulate):void 0),"ping"===(null===(U=e.message)||void 0===U?void 0:U.$case)&&(W.ping=Math.round(null===(F=e.message)||void 0===F?void 0:F.ping)),"updateMetadata"===(null===(j=e.message)||void 0===j?void 0:j.$case)&&(W.updateMetadata=(null===(B=e.message)||void 0===B?void 0:B.updateMetadata)?gi.toJSON(null===(z=e.message)||void 0===z?void 0:z.updateMetadata):void 0),"pingReq"===(null===($=e.message)||void 0===$?void 0:$.$case)&&(W.pingReq=(null===(V=e.message)||void 0===V?void 0:V.pingReq)?Ai.toJSON(null===(J=e.message)||void 0===J?void 0:J.pingReq):void 0),W},create:function(e){return ti.fromPartial(null!==e&&void 0!==e?e:{})},fromPartial:function(e){var t,n,r,i,a,o,s,c,u,l,d,f,p,h,v,m,g,b,y,k,w,S,C,E,x,P,T,R,N,O,I,_,D,A,L,M,U,F,j,B,z,$,V,J,W,q={message:void 0};return"offer"===(null===(t=e.message)||void 0===t?void 0:t.$case)&&void 0!==(null===(n=e.message)||void 0===n?void 0:n.offer)&&null!==(null===(r=e.message)||void 0===r?void 0:r.offer)&&(q.message={$case:"offer",offer:di.fromPartial(e.message.offer)}),"answer"===(null===(i=e.message)||void 0===i?void 0:i.$case)&&void 0!==(null===(a=e.message)||void 0===a?void 0:a.answer)&&null!==(null===(o=e.message)||void 0===o?void 0:o.answer)&&(q.message={$case:"answer",answer:di.fromPartial(e.message.answer)}),"trickle"===(null===(s=e.message)||void 0===s?void 0:s.$case)&&void 0!==(null===(c=e.message)||void 0===c?void 0:c.trickle)&&null!==(null===(u=e.message)||void 0===u?void 0:u.trickle)&&(q.message={$case:"trickle",trickle:ai.fromPartial(e.message.trickle)}),"addTrack"===(null===(l=e.message)||void 0===l?void 0:l.$case)&&void 0!==(null===(d=e.message)||void 0===d?void 0:d.addTrack)&&null!==(null===(f=e.message)||void 0===f?void 0:f.addTrack)&&(q.message={$case:"addTrack",addTrack:ii.fromPartial(e.message.addTrack)}),"mute"===(null===(p=e.message)||void 0===p?void 0:p.$case)&&void 0!==(null===(h=e.message)||void 0===h?void 0:h.mute)&&null!==(null===(v=e.message)||void 0===v?void 0:v.mute)&&(q.message={$case:"mute",mute:oi.fromPartial(e.message.mute)}),"subscription"===(null===(m=e.message)||void 0===m?void 0:m.$case)&&void 0!==(null===(g=e.message)||void 0===g?void 0:g.subscription)&&null!==(null===(b=e.message)||void 0===b?void 0:b.subscription)&&(q.message={$case:"subscription",subscription:pi.fromPartial(e.message.subscription)}),"trackSetting"===(null===(y=e.message)||void 0===y?void 0:y.$case)&&void 0!==(null===(k=e.message)||void 0===k?void 0:k.trackSetting)&&null!==(null===(w=e.message)||void 0===w?void 0:w.trackSetting)&&(q.message={$case:"trackSetting",trackSetting:hi.fromPartial(e.message.trackSetting)}),"leave"===(null===(S=e.message)||void 0===S?void 0:S.$case)&&void 0!==(null===(C=e.message)||void 0===C?void 0:C.leave)&&null!==(null===(E=e.message)||void 0===E?void 0:E.leave)&&(q.message={$case:"leave",leave:vi.fromPartial(e.message.leave)}),"updateLayers"===(null===(x=e.message)||void 0===x?void 0:x.$case)&&void 0!==(null===(P=e.message)||void 0===P?void 0:P.updateLayers)&&null!==(null===(T=e.message)||void 0===T?void 0:T.updateLayers)&&(q.message={$case:"updateLayers",updateLayers:mi.fromPartial(e.message.updateLayers)}),"subscriptionPermission"===(null===(R=e.message)||void 0===R?void 0:R.$case)&&void 0!==(null===(N=e.message)||void 0===N?void 0:N.subscriptionPermission)&&null!==(null===(O=e.message)||void 0===O?void 0:O.subscriptionPermission)&&(q.message={$case:"subscriptionPermission",subscriptionPermission:Ni.fromPartial(e.message.subscriptionPermission)}),"syncState"===(null===(I=e.message)||void 0===I?void 0:I.$case)&&void 0!==(null===(_=e.message)||void 0===_?void 0:_.syncState)&&null!==(null===(D=e.message)||void 0===D?void 0:D.syncState)&&(q.message={$case:"syncState",syncState:Ii.fromPartial(e.message.syncState)}),"simulate"===(null===(A=e.message)||void 0===A?void 0:A.$case)&&void 0!==(null===(L=e.message)||void 0===L?void 0:L.simulate)&&null!==(null===(M=e.message)||void 0===M?void 0:M.simulate)&&(q.message={$case:"simulate",simulate:Di.fromPartial(e.message.simulate)}),"ping"===(null===(U=e.message)||void 0===U?void 0:U.$case)&&void 0!==(null===(F=e.message)||void 0===F?void 0:F.ping)&&null!==(null===(j=e.message)||void 0===j?void 0:j.ping)&&(q.message={$case:"ping",ping:e.message.ping}),"updateMetadata"===(null===(B=e.message)||void 0===B?void 0:B.$case)&&void 0!==(null===(z=e.message)||void 0===z?void 0:z.updateMetadata)&&null!==(null===($=e.message)||void 0===$?void 0:$.updateMetadata)&&(q.message={$case:"updateMetadata",updateMetadata:gi.fromPartial(e.message.updateMetadata)}),"pingReq"===(null===(V=e.message)||void 0===V?void 0:V.$case)&&void 0!==(null===(J=e.message)||void 0===J?void 0:J.pingReq)&&null!==(null===(W=e.message)||void 0===W?void 0:W.pingReq)&&(q.message={$case:"pingReq",pingReq:Ai.fromPartial(e.message.pingReq)}),q}};var ni={encode:function(e){var t,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:Ot.Writer.create();switch(null===(t=e.message)||void 0===t?void 0:t.$case){case"join":si.encode(e.message.join,n.uint32(10).fork()).ldelim();break;case"answer":di.encode(e.message.answer,n.uint32(18).fork()).ldelim();break;case"offer":di.encode(e.message.offer,n.uint32(26).fork()).ldelim();break;case"trickle":ai.encode(e.message.trickle,n.uint32(34).fork()).ldelim();break;case"update":fi.encode(e.message.update,n.uint32(42).fork()).ldelim();break;case"trackPublished":ui.encode(e.message.trackPublished,n.uint32(50).fork()).ldelim();break;case"leave":vi.encode(e.message.leave,n.uint32(66).fork()).ldelim();break;case"mute":oi.encode(e.message.mute,n.uint32(74).fork()).ldelim();break;case"speakersChanged":yi.encode(e.message.speakersChanged,n.uint32(82).fork()).ldelim();break;case"roomUpdate":ki.encode(e.message.roomUpdate,n.uint32(90).fork()).ldelim();break;case"connectionQuality":Si.encode(e.message.connectionQuality,n.uint32(98).fork()).ldelim();break;case"streamStateUpdate":Ei.encode(e.message.streamStateUpdate,n.uint32(106).fork()).ldelim();break;case"subscribedQualityUpdate":Ti.encode(e.message.subscribedQualityUpdate,n.uint32(114).fork()).ldelim();break;case"subscriptionPermissionUpdate":Oi.encode(e.message.subscriptionPermissionUpdate,n.uint32(122).fork()).ldelim();break;case"refreshToken":n.uint32(130).string(e.message.refreshToken);break;case"trackUnpublished":li.encode(e.message.trackUnpublished,n.uint32(138).fork()).ldelim();break;case"pong":n.uint32(144).int64(e.message.pong);break;case"reconnect":ci.encode(e.message.reconnect,n.uint32(154).fork()).ldelim();break;case"pongResp":Li.encode(e.message.pongResp,n.uint32(162).fork()).ldelim()}return n},decode:function(e,t){for(var n=e instanceof Ot.Reader?e:Ot.Reader.create(e),r=void 0===t?n.len:n.pos+t,i={message:void 0};n.pos<r;){var a=n.uint32();switch(a>>>3){case 1:if(10!=a)break;i.message={$case:"join",join:si.decode(n,n.uint32())};continue;case 2:if(18!=a)break;i.message={$case:"answer",answer:di.decode(n,n.uint32())};continue;case 3:if(26!=a)break;i.message={$case:"offer",offer:di.decode(n,n.uint32())};continue;case 4:if(34!=a)break;i.message={$case:"trickle",trickle:ai.decode(n,n.uint32())};continue;case 5:if(42!=a)break;i.message={$case:"update",update:fi.decode(n,n.uint32())};continue;case 6:if(50!=a)break;i.message={$case:"trackPublished",trackPublished:ui.decode(n,n.uint32())};continue;case 8:if(66!=a)break;i.message={$case:"leave",leave:vi.decode(n,n.uint32())};continue;case 9:if(74!=a)break;i.message={$case:"mute",mute:oi.decode(n,n.uint32())};continue;case 10:if(82!=a)break;i.message={$case:"speakersChanged",speakersChanged:yi.decode(n,n.uint32())};continue;case 11:if(90!=a)break;i.message={$case:"roomUpdate",roomUpdate:ki.decode(n,n.uint32())};continue;case 12:if(98!=a)break;i.message={$case:"connectionQuality",connectionQuality:Si.decode(n,n.uint32())};continue;case 13:if(106!=a)break;i.message={$case:"streamStateUpdate",streamStateUpdate:Ei.decode(n,n.uint32())};continue;case 14:if(114!=a)break;i.message={$case:"subscribedQualityUpdate",subscribedQualityUpdate:Ti.decode(n,n.uint32())};continue;case 15:if(122!=a)break;i.message={$case:"subscriptionPermissionUpdate",subscriptionPermissionUpdate:Oi.decode(n,n.uint32())};continue;case 16:if(130!=a)break;i.message={$case:"refreshToken",refreshToken:n.string()};continue;case 17:if(138!=a)break;i.message={$case:"trackUnpublished",trackUnpublished:li.decode(n,n.uint32())};continue;case 18:if(144!=a)break;i.message={$case:"pong",pong:Ui(n.int64())};continue;case 19:if(154!=a)break;i.message={$case:"reconnect",reconnect:ci.decode(n,n.uint32())};continue;case 20:if(162!=a)break;i.message={$case:"pongResp",pongResp:Li.decode(n,n.uint32())};continue}if(4==(7&a)||0==a)break;n.skipType(7&a)}return i},fromJSON:function(e){return{message:Fi(e.join)?{$case:"join",join:si.fromJSON(e.join)}:Fi(e.answer)?{$case:"answer",answer:di.fromJSON(e.answer)}:Fi(e.offer)?{$case:"offer",offer:di.fromJSON(e.offer)}:Fi(e.trickle)?{$case:"trickle",trickle:ai.fromJSON(e.trickle)}:Fi(e.update)?{$case:"update",update:fi.fromJSON(e.update)}:Fi(e.trackPublished)?{$case:"trackPublished",trackPublished:ui.fromJSON(e.trackPublished)}:Fi(e.leave)?{$case:"leave",leave:vi.fromJSON(e.leave)}:Fi(e.mute)?{$case:"mute",mute:oi.fromJSON(e.mute)}:Fi(e.speakersChanged)?{$case:"speakersChanged",speakersChanged:yi.fromJSON(e.speakersChanged)}:Fi(e.roomUpdate)?{$case:"roomUpdate",roomUpdate:ki.fromJSON(e.roomUpdate)}:Fi(e.connectionQuality)?{$case:"connectionQuality",connectionQuality:Si.fromJSON(e.connectionQuality)}:Fi(e.streamStateUpdate)?{$case:"streamStateUpdate",streamStateUpdate:Ei.fromJSON(e.streamStateUpdate)}:Fi(e.subscribedQualityUpdate)?{$case:"subscribedQualityUpdate",subscribedQualityUpdate:Ti.fromJSON(e.subscribedQualityUpdate)}:Fi(e.subscriptionPermissionUpdate)?{$case:"subscriptionPermissionUpdate",subscriptionPermissionUpdate:Oi.fromJSON(e.subscriptionPermissionUpdate)}:Fi(e.refreshToken)?{$case:"refreshToken",refreshToken:String(e.refreshToken)}:Fi(e.trackUnpublished)?{$case:"trackUnpublished",trackUnpublished:li.fromJSON(e.trackUnpublished)}:Fi(e.pong)?{$case:"pong",pong:Number(e.pong)}:Fi(e.reconnect)?{$case:"reconnect",reconnect:ci.fromJSON(e.reconnect)}:Fi(e.pongResp)?{$case:"pongResp",pongResp:Li.fromJSON(e.pongResp)}:void 0}},toJSON:function(e){var t,n,r,i,a,o,s,c,u,l,d,f,p,h,v,m,g,b,y,k,w,S,C,E,x,P,T,R,N,O,I,_,D,A,L,M,U,F,j,B,z,$,V,J,W,q,H,G,Q,Z,K,Y,X,ee,te,ne={};return"join"===(null===(t=e.message)||void 0===t?void 0:t.$case)&&(ne.join=(null===(n=e.message)||void 0===n?void 0:n.join)?si.toJSON(null===(r=e.message)||void 0===r?void 0:r.join):void 0),"answer"===(null===(i=e.message)||void 0===i?void 0:i.$case)&&(ne.answer=(null===(a=e.message)||void 0===a?void 0:a.answer)?di.toJSON(null===(o=e.message)||void 0===o?void 0:o.answer):void 0),"offer"===(null===(s=e.message)||void 0===s?void 0:s.$case)&&(ne.offer=(null===(c=e.message)||void 0===c?void 0:c.offer)?di.toJSON(null===(u=e.message)||void 0===u?void 0:u.offer):void 0),"trickle"===(null===(l=e.message)||void 0===l?void 0:l.$case)&&(ne.trickle=(null===(d=e.message)||void 0===d?void 0:d.trickle)?ai.toJSON(null===(f=e.message)||void 0===f?void 0:f.trickle):void 0),"update"===(null===(p=e.message)||void 0===p?void 0:p.$case)&&(ne.update=(null===(h=e.message)||void 0===h?void 0:h.update)?fi.toJSON(null===(v=e.message)||void 0===v?void 0:v.update):void 0),"trackPublished"===(null===(m=e.message)||void 0===m?void 0:m.$case)&&(ne.trackPublished=(null===(g=e.message)||void 0===g?void 0:g.trackPublished)?ui.toJSON(null===(b=e.message)||void 0===b?void 0:b.trackPublished):void 0),"leave"===(null===(y=e.message)||void 0===y?void 0:y.$case)&&(ne.leave=(null===(k=e.message)||void 0===k?void 0:k.leave)?vi.toJSON(null===(w=e.message)||void 0===w?void 0:w.leave):void 0),"mute"===(null===(S=e.message)||void 0===S?void 0:S.$case)&&(ne.mute=(null===(C=e.message)||void 0===C?void 0:C.mute)?oi.toJSON(null===(E=e.message)||void 0===E?void 0:E.mute):void 0),"speakersChanged"===(null===(x=e.message)||void 0===x?void 0:x.$case)&&(ne.speakersChanged=(null===(P=e.message)||void 0===P?void 0:P.speakersChanged)?yi.toJSON(null===(T=e.message)||void 0===T?void 0:T.speakersChanged):void 0),"roomUpdate"===(null===(R=e.message)||void 0===R?void 0:R.$case)&&(ne.roomUpdate=(null===(N=e.message)||void 0===N?void 0:N.roomUpdate)?ki.toJSON(null===(O=e.message)||void 0===O?void 0:O.roomUpdate):void 0),"connectionQuality"===(null===(I=e.message)||void 0===I?void 0:I.$case)&&(ne.connectionQuality=(null===(_=e.message)||void 0===_?void 0:_.connectionQuality)?Si.toJSON(null===(D=e.message)||void 0===D?void 0:D.connectionQuality):void 0),"streamStateUpdate"===(null===(A=e.message)||void 0===A?void 0:A.$case)&&(ne.streamStateUpdate=(null===(L=e.message)||void 0===L?void 0:L.streamStateUpdate)?Ei.toJSON(null===(M=e.message)||void 0===M?void 0:M.streamStateUpdate):void 0),"subscribedQualityUpdate"===(null===(U=e.message)||void 0===U?void 0:U.$case)&&(ne.subscribedQualityUpdate=(null===(F=e.message)||void 0===F?void 0:F.subscribedQualityUpdate)?Ti.toJSON(null===(j=e.message)||void 0===j?void 0:j.subscribedQualityUpdate):void 0),"subscriptionPermissionUpdate"===(null===(B=e.message)||void 0===B?void 0:B.$case)&&(ne.subscriptionPermissionUpdate=(null===(z=e.message)||void 0===z?void 0:z.subscriptionPermissionUpdate)?Oi.toJSON(null===($=e.message)||void 0===$?void 0:$.subscriptionPermissionUpdate):void 0),"refreshToken"===(null===(V=e.message)||void 0===V?void 0:V.$case)&&(ne.refreshToken=null===(J=e.message)||void 0===J?void 0:J.refreshToken),"trackUnpublished"===(null===(W=e.message)||void 0===W?void 0:W.$case)&&(ne.trackUnpublished=(null===(q=e.message)||void 0===q?void 0:q.trackUnpublished)?li.toJSON(null===(H=e.message)||void 0===H?void 0:H.trackUnpublished):void 0),"pong"===(null===(G=e.message)||void 0===G?void 0:G.$case)&&(ne.pong=Math.round(null===(Q=e.message)||void 0===Q?void 0:Q.pong)),"reconnect"===(null===(Z=e.message)||void 0===Z?void 0:Z.$case)&&(ne.reconnect=(null===(K=e.message)||void 0===K?void 0:K.reconnect)?ci.toJSON(null===(Y=e.message)||void 0===Y?void 0:Y.reconnect):void 0),"pongResp"===(null===(X=e.message)||void 0===X?void 0:X.$case)&&(ne.pongResp=(null===(ee=e.message)||void 0===ee?void 0:ee.pongResp)?Li.toJSON(null===(te=e.message)||void 0===te?void 0:te.pongResp):void 0),ne},create:function(e){return ni.fromPartial(null!==e&&void 0!==e?e:{})},fromPartial:function(e){var t,n,r,i,a,o,s,c,u,l,d,f,p,h,v,m,g,b,y,k,w,S,C,E,x,P,T,R,N,O,I,_,D,A,L,M,U,F,j,B,z,$,V,J,W,q,H,G,Q,Z,K,Y,X,ee,te,ne,re,ie={message:void 0};return"join"===(null===(t=e.message)||void 0===t?void 0:t.$case)&&void 0!==(null===(n=e.message)||void 0===n?void 0:n.join)&&null!==(null===(r=e.message)||void 0===r?void 0:r.join)&&(ie.message={$case:"join",join:si.fromPartial(e.message.join)}),"answer"===(null===(i=e.message)||void 0===i?void 0:i.$case)&&void 0!==(null===(a=e.message)||void 0===a?void 0:a.answer)&&null!==(null===(o=e.message)||void 0===o?void 0:o.answer)&&(ie.message={$case:"answer",answer:di.fromPartial(e.message.answer)}),"offer"===(null===(s=e.message)||void 0===s?void 0:s.$case)&&void 0!==(null===(c=e.message)||void 0===c?void 0:c.offer)&&null!==(null===(u=e.message)||void 0===u?void 0:u.offer)&&(ie.message={$case:"offer",offer:di.fromPartial(e.message.offer)}),"trickle"===(null===(l=e.message)||void 0===l?void 0:l.$case)&&void 0!==(null===(d=e.message)||void 0===d?void 0:d.trickle)&&null!==(null===(f=e.message)||void 0===f?void 0:f.trickle)&&(ie.message={$case:"trickle",trickle:ai.fromPartial(e.message.trickle)}),"update"===(null===(p=e.message)||void 0===p?void 0:p.$case)&&void 0!==(null===(h=e.message)||void 0===h?void 0:h.update)&&null!==(null===(v=e.message)||void 0===v?void 0:v.update)&&(ie.message={$case:"update",update:fi.fromPartial(e.message.update)}),"trackPublished"===(null===(m=e.message)||void 0===m?void 0:m.$case)&&void 0!==(null===(g=e.message)||void 0===g?void 0:g.trackPublished)&&null!==(null===(b=e.message)||void 0===b?void 0:b.trackPublished)&&(ie.message={$case:"trackPublished",trackPublished:ui.fromPartial(e.message.trackPublished)}),"leave"===(null===(y=e.message)||void 0===y?void 0:y.$case)&&void 0!==(null===(k=e.message)||void 0===k?void 0:k.leave)&&null!==(null===(w=e.message)||void 0===w?void 0:w.leave)&&(ie.message={$case:"leave",leave:vi.fromPartial(e.message.leave)}),"mute"===(null===(S=e.message)||void 0===S?void 0:S.$case)&&void 0!==(null===(C=e.message)||void 0===C?void 0:C.mute)&&null!==(null===(E=e.message)||void 0===E?void 0:E.mute)&&(ie.message={$case:"mute",mute:oi.fromPartial(e.message.mute)}),"speakersChanged"===(null===(x=e.message)||void 0===x?void 0:x.$case)&&void 0!==(null===(P=e.message)||void 0===P?void 0:P.speakersChanged)&&null!==(null===(T=e.message)||void 0===T?void 0:T.speakersChanged)&&(ie.message={$case:"speakersChanged",speakersChanged:yi.fromPartial(e.message.speakersChanged)}),"roomUpdate"===(null===(R=e.message)||void 0===R?void 0:R.$case)&&void 0!==(null===(N=e.message)||void 0===N?void 0:N.roomUpdate)&&null!==(null===(O=e.message)||void 0===O?void 0:O.roomUpdate)&&(ie.message={$case:"roomUpdate",roomUpdate:ki.fromPartial(e.message.roomUpdate)}),"connectionQuality"===(null===(I=e.message)||void 0===I?void 0:I.$case)&&void 0!==(null===(_=e.message)||void 0===_?void 0:_.connectionQuality)&&null!==(null===(D=e.message)||void 0===D?void 0:D.connectionQuality)&&(ie.message={$case:"connectionQuality",connectionQuality:Si.fromPartial(e.message.connectionQuality)}),"streamStateUpdate"===(null===(A=e.message)||void 0===A?void 0:A.$case)&&void 0!==(null===(L=e.message)||void 0===L?void 0:L.streamStateUpdate)&&null!==(null===(M=e.message)||void 0===M?void 0:M.streamStateUpdate)&&(ie.message={$case:"streamStateUpdate",streamStateUpdate:Ei.fromPartial(e.message.streamStateUpdate)}),"subscribedQualityUpdate"===(null===(U=e.message)||void 0===U?void 0:U.$case)&&void 0!==(null===(F=e.message)||void 0===F?void 0:F.subscribedQualityUpdate)&&null!==(null===(j=e.message)||void 0===j?void 0:j.subscribedQualityUpdate)&&(ie.message={$case:"subscribedQualityUpdate",subscribedQualityUpdate:Ti.fromPartial(e.message.subscribedQualityUpdate)}),"subscriptionPermissionUpdate"===(null===(B=e.message)||void 0===B?void 0:B.$case)&&void 0!==(null===(z=e.message)||void 0===z?void 0:z.subscriptionPermissionUpdate)&&null!==(null===($=e.message)||void 0===$?void 0:$.subscriptionPermissionUpdate)&&(ie.message={$case:"subscriptionPermissionUpdate",subscriptionPermissionUpdate:Oi.fromPartial(e.message.subscriptionPermissionUpdate)}),"refreshToken"===(null===(V=e.message)||void 0===V?void 0:V.$case)&&void 0!==(null===(J=e.message)||void 0===J?void 0:J.refreshToken)&&null!==(null===(W=e.message)||void 0===W?void 0:W.refreshToken)&&(ie.message={$case:"refreshToken",refreshToken:e.message.refreshToken}),"trackUnpublished"===(null===(q=e.message)||void 0===q?void 0:q.$case)&&void 0!==(null===(H=e.message)||void 0===H?void 0:H.trackUnpublished)&&null!==(null===(G=e.message)||void 0===G?void 0:G.trackUnpublished)&&(ie.message={$case:"trackUnpublished",trackUnpublished:li.fromPartial(e.message.trackUnpublished)}),"pong"===(null===(Q=e.message)||void 0===Q?void 0:Q.$case)&&void 0!==(null===(Z=e.message)||void 0===Z?void 0:Z.pong)&&null!==(null===(K=e.message)||void 0===K?void 0:K.pong)&&(ie.message={$case:"pong",pong:e.message.pong}),"reconnect"===(null===(Y=e.message)||void 0===Y?void 0:Y.$case)&&void 0!==(null===(X=e.message)||void 0===X?void 0:X.reconnect)&&null!==(null===(ee=e.message)||void 0===ee?void 0:ee.reconnect)&&(ie.message={$case:"reconnect",reconnect:ci.fromPartial(e.message.reconnect)}),"pongResp"===(null===(te=e.message)||void 0===te?void 0:te.$case)&&void 0!==(null===(ne=e.message)||void 0===ne?void 0:ne.pongResp)&&null!==(null===(re=e.message)||void 0===re?void 0:re.pongResp)&&(ie.message={$case:"pongResp",pongResp:Li.fromPartial(e.message.pongResp)}),ie}};var ri={encode:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:Ot.Writer.create();return""!==e.codec&&t.uint32(10).string(e.codec),""!==e.cid&&t.uint32(18).string(e.cid),!0===e.enableSimulcastLayers&&t.uint32(24).bool(e.enableSimulcastLayers),t},decode:function(e,t){for(var n=e instanceof Ot.Reader?e:Ot.Reader.create(e),r=void 0===t?n.len:n.pos+t,i={codec:"",cid:"",enableSimulcastLayers:!1};n.pos<r;){var a=n.uint32();switch(a>>>3){case 1:if(10!=a)break;i.codec=n.string();continue;case 2:if(18!=a)break;i.cid=n.string();continue;case 3:if(24!=a)break;i.enableSimulcastLayers=n.bool();continue}if(4==(7&a)||0==a)break;n.skipType(7&a)}return i},fromJSON:function(e){return{codec:Fi(e.codec)?String(e.codec):"",cid:Fi(e.cid)?String(e.cid):"",enableSimulcastLayers:!!Fi(e.enableSimulcastLayers)&&Boolean(e.enableSimulcastLayers)}},toJSON:function(e){var t={};return void 0!==e.codec&&(t.codec=e.codec),void 0!==e.cid&&(t.cid=e.cid),void 0!==e.enableSimulcastLayers&&(t.enableSimulcastLayers=e.enableSimulcastLayers),t},create:function(e){return ri.fromPartial(null!==e&&void 0!==e?e:{})},fromPartial:function(e){var t,n,r,i={codec:"",cid:"",enableSimulcastLayers:!1};return i.codec=null!==(t=e.codec)&&void 0!==t?t:"",i.cid=null!==(n=e.cid)&&void 0!==n?n:"",i.enableSimulcastLayers=null!==(r=e.enableSimulcastLayers)&&void 0!==r&&r,i}};var ii={encode:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:Ot.Writer.create();""!==e.cid&&t.uint32(10).string(e.cid),""!==e.name&&t.uint32(18).string(e.name),0!==e.type&&t.uint32(24).int32(e.type),0!==e.width&&t.uint32(32).uint32(e.width),0!==e.height&&t.uint32(40).uint32(e.height),!0===e.muted&&t.uint32(48).bool(e.muted),!0===e.disableDtx&&t.uint32(56).bool(e.disableDtx),0!==e.source&&t.uint32(64).int32(e.source);var n,r=u(e.layers);try{for(r.s();!(n=r.n()).done;){var i=n.value;Xt.encode(i,t.uint32(74).fork()).ldelim()}}catch(c){r.e(c)}finally{r.f()}var a,o=u(e.simulcastCodecs);try{for(o.s();!(a=o.n()).done;){var s=a.value;ri.encode(s,t.uint32(82).fork()).ldelim()}}catch(c){o.e(c)}finally{o.f()}return""!==e.sid&&t.uint32(90).string(e.sid),!0===e.stereo&&t.uint32(96).bool(e.stereo),!0===e.disableRed&&t.uint32(104).bool(e.disableRed),0!==e.encryption&&t.uint32(112).int32(e.encryption),t},decode:function(e,t){for(var n=e instanceof Ot.Reader?e:Ot.Reader.create(e),r=void 0===t?n.len:n.pos+t,i={cid:"",name:"",type:0,width:0,height:0,muted:!1,disableDtx:!1,source:0,layers:[],simulcastCodecs:[],sid:"",stereo:!1,disableRed:!1,encryption:0};n.pos<r;){var a=n.uint32();switch(a>>>3){case 1:if(10!=a)break;i.cid=n.string();continue;case 2:if(18!=a)break;i.name=n.string();continue;case 3:if(24!=a)break;i.type=n.int32();continue;case 4:if(32!=a)break;i.width=n.uint32();continue;case 5:if(40!=a)break;i.height=n.uint32();continue;case 6:if(48!=a)break;i.muted=n.bool();continue;case 7:if(56!=a)break;i.disableDtx=n.bool();continue;case 8:if(64!=a)break;i.source=n.int32();continue;case 9:if(74!=a)break;i.layers.push(Xt.decode(n,n.uint32()));continue;case 10:if(82!=a)break;i.simulcastCodecs.push(ri.decode(n,n.uint32()));continue;case 11:if(90!=a)break;i.sid=n.string();continue;case 12:if(96!=a)break;i.stereo=n.bool();continue;case 13:if(104!=a)break;i.disableRed=n.bool();continue;case 14:if(112!=a)break;i.encryption=n.int32();continue}if(4==(7&a)||0==a)break;n.skipType(7&a)}return i},fromJSON:function(e){return{cid:Fi(e.cid)?String(e.cid):"",name:Fi(e.name)?String(e.name):"",type:Fi(e.type)?It(e.type):0,width:Fi(e.width)?Number(e.width):0,height:Fi(e.height)?Number(e.height):0,muted:!!Fi(e.muted)&&Boolean(e.muted),disableDtx:!!Fi(e.disableDtx)&&Boolean(e.disableDtx),source:Fi(e.source)?Dt(e.source):0,layers:Array.isArray(null===e||void 0===e?void 0:e.layers)?e.layers.map((function(e){return Xt.fromJSON(e)})):[],simulcastCodecs:Array.isArray(null===e||void 0===e?void 0:e.simulcastCodecs)?e.simulcastCodecs.map((function(e){return ri.fromJSON(e)})):[],sid:Fi(e.sid)?String(e.sid):"",stereo:!!Fi(e.stereo)&&Boolean(e.stereo),disableRed:!!Fi(e.disableRed)&&Boolean(e.disableRed),encryption:Fi(e.encryption)?$t(e.encryption):0}},toJSON:function(e){var t={};return void 0!==e.cid&&(t.cid=e.cid),void 0!==e.name&&(t.name=e.name),void 0!==e.type&&(t.type=_t(e.type)),void 0!==e.width&&(t.width=Math.round(e.width)),void 0!==e.height&&(t.height=Math.round(e.height)),void 0!==e.muted&&(t.muted=e.muted),void 0!==e.disableDtx&&(t.disableDtx=e.disableDtx),void 0!==e.source&&(t.source=At(e.source)),e.layers?t.layers=e.layers.map((function(e){return e?Xt.toJSON(e):void 0})):t.layers=[],e.simulcastCodecs?t.simulcastCodecs=e.simulcastCodecs.map((function(e){return e?ri.toJSON(e):void 0})):t.simulcastCodecs=[],void 0!==e.sid&&(t.sid=e.sid),void 0!==e.stereo&&(t.stereo=e.stereo),void 0!==e.disableRed&&(t.disableRed=e.disableRed),void 0!==e.encryption&&(t.encryption=Vt(e.encryption)),t},create:function(e){return ii.fromPartial(null!==e&&void 0!==e?e:{})},fromPartial:function(e){var t,n,r,i,a,o,s,c,u,l,d,f,p,h,v={cid:"",name:"",type:0,width:0,height:0,muted:!1,disableDtx:!1,source:0,layers:[],simulcastCodecs:[],sid:"",stereo:!1,disableRed:!1,encryption:0};return v.cid=null!==(t=e.cid)&&void 0!==t?t:"",v.name=null!==(n=e.name)&&void 0!==n?n:"",v.type=null!==(r=e.type)&&void 0!==r?r:0,v.width=null!==(i=e.width)&&void 0!==i?i:0,v.height=null!==(a=e.height)&&void 0!==a?a:0,v.muted=null!==(o=e.muted)&&void 0!==o&&o,v.disableDtx=null!==(s=e.disableDtx)&&void 0!==s&&s,v.source=null!==(c=e.source)&&void 0!==c?c:0,v.layers=(null===(u=e.layers)||void 0===u?void 0:u.map((function(e){return Xt.fromPartial(e)})))||[],v.simulcastCodecs=(null===(l=e.simulcastCodecs)||void 0===l?void 0:l.map((function(e){return ri.fromPartial(e)})))||[],v.sid=null!==(d=e.sid)&&void 0!==d?d:"",v.stereo=null!==(f=e.stereo)&&void 0!==f&&f,v.disableRed=null!==(p=e.disableRed)&&void 0!==p&&p,v.encryption=null!==(h=e.encryption)&&void 0!==h?h:0,v}};var ai={encode:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:Ot.Writer.create();return""!==e.candidateInit&&t.uint32(10).string(e.candidateInit),0!==e.target&&t.uint32(16).int32(e.target),t},decode:function(e,t){for(var n=e instanceof Ot.Reader?e:Ot.Reader.create(e),r=void 0===t?n.len:n.pos+t,i={candidateInit:"",target:0};n.pos<r;){var a=n.uint32();switch(a>>>3){case 1:if(10!=a)break;i.candidateInit=n.string();continue;case 2:if(16!=a)break;i.target=n.int32();continue}if(4==(7&a)||0==a)break;n.skipType(7&a)}return i},fromJSON:function(e){return{candidateInit:Fi(e.candidateInit)?String(e.candidateInit):"",target:Fi(e.target)?Kr(e.target):0}},toJSON:function(e){var t={};return void 0!==e.candidateInit&&(t.candidateInit=e.candidateInit),void 0!==e.target&&(t.target=Yr(e.target)),t},create:function(e){return ai.fromPartial(null!==e&&void 0!==e?e:{})},fromPartial:function(e){var t,n,r={candidateInit:"",target:0};return r.candidateInit=null!==(t=e.candidateInit)&&void 0!==t?t:"",r.target=null!==(n=e.target)&&void 0!==n?n:0,r}};var oi={encode:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:Ot.Writer.create();return""!==e.sid&&t.uint32(10).string(e.sid),!0===e.muted&&t.uint32(16).bool(e.muted),t},decode:function(e,t){for(var n=e instanceof Ot.Reader?e:Ot.Reader.create(e),r=void 0===t?n.len:n.pos+t,i={sid:"",muted:!1};n.pos<r;){var a=n.uint32();switch(a>>>3){case 1:if(10!=a)break;i.sid=n.string();continue;case 2:if(16!=a)break;i.muted=n.bool();continue}if(4==(7&a)||0==a)break;n.skipType(7&a)}return i},fromJSON:function(e){return{sid:Fi(e.sid)?String(e.sid):"",muted:!!Fi(e.muted)&&Boolean(e.muted)}},toJSON:function(e){var t={};return void 0!==e.sid&&(t.sid=e.sid),void 0!==e.muted&&(t.muted=e.muted),t},create:function(e){return oi.fromPartial(null!==e&&void 0!==e?e:{})},fromPartial:function(e){var t,n,r={sid:"",muted:!1};return r.sid=null!==(t=e.sid)&&void 0!==t?t:"",r.muted=null!==(n=e.muted)&&void 0!==n&&n,r}};var si={encode:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:Ot.Writer.create();void 0!==e.room&&Ht.encode(e.room,t.uint32(10).fork()).ldelim(),void 0!==e.participant&&Zt.encode(e.participant,t.uint32(18).fork()).ldelim();var n,r=u(e.otherParticipants);try{for(r.s();!(n=r.n()).done;){var i=n.value;Zt.encode(i,t.uint32(26).fork()).ldelim()}}catch(c){r.e(c)}finally{r.f()}""!==e.serverVersion&&t.uint32(34).string(e.serverVersion);var a,o=u(e.iceServers);try{for(o.s();!(a=o.n()).done;){var s=a.value;bi.encode(s,t.uint32(42).fork()).ldelim()}}catch(c){o.e(c)}finally{o.f()}return!0===e.subscriberPrimary&&t.uint32(48).bool(e.subscriberPrimary),""!==e.alternativeUrl&&t.uint32(58).string(e.alternativeUrl),void 0!==e.clientConfiguration&&un.encode(e.clientConfiguration,t.uint32(66).fork()).ldelim(),""!==e.serverRegion&&t.uint32(74).string(e.serverRegion),0!==e.pingTimeout&&t.uint32(80).int32(e.pingTimeout),0!==e.pingInterval&&t.uint32(88).int32(e.pingInterval),void 0!==e.serverInfo&&sn.encode(e.serverInfo,t.uint32(98).fork()).ldelim(),t},decode:function(e,t){for(var n=e instanceof Ot.Reader?e:Ot.Reader.create(e),r=void 0===t?n.len:n.pos+t,i={room:void 0,participant:void 0,otherParticipants:[],serverVersion:"",iceServers:[],subscriberPrimary:!1,alternativeUrl:"",clientConfiguration:void 0,serverRegion:"",pingTimeout:0,pingInterval:0,serverInfo:void 0};n.pos<r;){var a=n.uint32();switch(a>>>3){case 1:if(10!=a)break;i.room=Ht.decode(n,n.uint32());continue;case 2:if(18!=a)break;i.participant=Zt.decode(n,n.uint32());continue;case 3:if(26!=a)break;i.otherParticipants.push(Zt.decode(n,n.uint32()));continue;case 4:if(34!=a)break;i.serverVersion=n.string();continue;case 5:if(42!=a)break;i.iceServers.push(bi.decode(n,n.uint32()));continue;case 6:if(48!=a)break;i.subscriberPrimary=n.bool();continue;case 7:if(58!=a)break;i.alternativeUrl=n.string();continue;case 8:if(66!=a)break;i.clientConfiguration=un.decode(n,n.uint32());continue;case 9:if(74!=a)break;i.serverRegion=n.string();continue;case 10:if(80!=a)break;i.pingTimeout=n.int32();continue;case 11:if(88!=a)break;i.pingInterval=n.int32();continue;case 12:if(98!=a)break;i.serverInfo=sn.decode(n,n.uint32());continue}if(4==(7&a)||0==a)break;n.skipType(7&a)}return i},fromJSON:function(e){return{room:Fi(e.room)?Ht.fromJSON(e.room):void 0,participant:Fi(e.participant)?Zt.fromJSON(e.participant):void 0,otherParticipants:Array.isArray(null===e||void 0===e?void 0:e.otherParticipants)?e.otherParticipants.map((function(e){return Zt.fromJSON(e)})):[],serverVersion:Fi(e.serverVersion)?String(e.serverVersion):"",iceServers:Array.isArray(null===e||void 0===e?void 0:e.iceServers)?e.iceServers.map((function(e){return bi.fromJSON(e)})):[],subscriberPrimary:!!Fi(e.subscriberPrimary)&&Boolean(e.subscriberPrimary),alternativeUrl:Fi(e.alternativeUrl)?String(e.alternativeUrl):"",clientConfiguration:Fi(e.clientConfiguration)?un.fromJSON(e.clientConfiguration):void 0,serverRegion:Fi(e.serverRegion)?String(e.serverRegion):"",pingTimeout:Fi(e.pingTimeout)?Number(e.pingTimeout):0,pingInterval:Fi(e.pingInterval)?Number(e.pingInterval):0,serverInfo:Fi(e.serverInfo)?sn.fromJSON(e.serverInfo):void 0}},toJSON:function(e){var t={};return void 0!==e.room&&(t.room=e.room?Ht.toJSON(e.room):void 0),void 0!==e.participant&&(t.participant=e.participant?Zt.toJSON(e.participant):void 0),e.otherParticipants?t.otherParticipants=e.otherParticipants.map((function(e){return e?Zt.toJSON(e):void 0})):t.otherParticipants=[],void 0!==e.serverVersion&&(t.serverVersion=e.serverVersion),e.iceServers?t.iceServers=e.iceServers.map((function(e){return e?bi.toJSON(e):void 0})):t.iceServers=[],void 0!==e.subscriberPrimary&&(t.subscriberPrimary=e.subscriberPrimary),void 0!==e.alternativeUrl&&(t.alternativeUrl=e.alternativeUrl),void 0!==e.clientConfiguration&&(t.clientConfiguration=e.clientConfiguration?un.toJSON(e.clientConfiguration):void 0),void 0!==e.serverRegion&&(t.serverRegion=e.serverRegion),void 0!==e.pingTimeout&&(t.pingTimeout=Math.round(e.pingTimeout)),void 0!==e.pingInterval&&(t.pingInterval=Math.round(e.pingInterval)),void 0!==e.serverInfo&&(t.serverInfo=e.serverInfo?sn.toJSON(e.serverInfo):void 0),t},create:function(e){return si.fromPartial(null!==e&&void 0!==e?e:{})},fromPartial:function(e){var t,n,r,i,a,o,s,c,u={room:void 0,participant:void 0,otherParticipants:[],serverVersion:"",iceServers:[],subscriberPrimary:!1,alternativeUrl:"",clientConfiguration:void 0,serverRegion:"",pingTimeout:0,pingInterval:0,serverInfo:void 0};return u.room=void 0!==e.room&&null!==e.room?Ht.fromPartial(e.room):void 0,u.participant=void 0!==e.participant&&null!==e.participant?Zt.fromPartial(e.participant):void 0,u.otherParticipants=(null===(t=e.otherParticipants)||void 0===t?void 0:t.map((function(e){return Zt.fromPartial(e)})))||[],u.serverVersion=null!==(n=e.serverVersion)&&void 0!==n?n:"",u.iceServers=(null===(r=e.iceServers)||void 0===r?void 0:r.map((function(e){return bi.fromPartial(e)})))||[],u.subscriberPrimary=null!==(i=e.subscriberPrimary)&&void 0!==i&&i,u.alternativeUrl=null!==(a=e.alternativeUrl)&&void 0!==a?a:"",u.clientConfiguration=void 0!==e.clientConfiguration&&null!==e.clientConfiguration?un.fromPartial(e.clientConfiguration):void 0,u.serverRegion=null!==(o=e.serverRegion)&&void 0!==o?o:"",u.pingTimeout=null!==(s=e.pingTimeout)&&void 0!==s?s:0,u.pingInterval=null!==(c=e.pingInterval)&&void 0!==c?c:0,u.serverInfo=void 0!==e.serverInfo&&null!==e.serverInfo?sn.fromPartial(e.serverInfo):void 0,u}};var ci={encode:function(e){var t,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:Ot.Writer.create(),r=u(e.iceServers);try{for(r.s();!(t=r.n()).done;){var i=t.value;bi.encode(i,n.uint32(10).fork()).ldelim()}}catch(a){r.e(a)}finally{r.f()}return void 0!==e.clientConfiguration&&un.encode(e.clientConfiguration,n.uint32(18).fork()).ldelim(),n},decode:function(e,t){for(var n=e instanceof Ot.Reader?e:Ot.Reader.create(e),r=void 0===t?n.len:n.pos+t,i={iceServers:[],clientConfiguration:void 0};n.pos<r;){var a=n.uint32();switch(a>>>3){case 1:if(10!=a)break;i.iceServers.push(bi.decode(n,n.uint32()));continue;case 2:if(18!=a)break;i.clientConfiguration=un.decode(n,n.uint32());continue}if(4==(7&a)||0==a)break;n.skipType(7&a)}return i},fromJSON:function(e){return{iceServers:Array.isArray(null===e||void 0===e?void 0:e.iceServers)?e.iceServers.map((function(e){return bi.fromJSON(e)})):[],clientConfiguration:Fi(e.clientConfiguration)?un.fromJSON(e.clientConfiguration):void 0}},toJSON:function(e){var t={};return e.iceServers?t.iceServers=e.iceServers.map((function(e){return e?bi.toJSON(e):void 0})):t.iceServers=[],void 0!==e.clientConfiguration&&(t.clientConfiguration=e.clientConfiguration?un.toJSON(e.clientConfiguration):void 0),t},create:function(e){return ci.fromPartial(null!==e&&void 0!==e?e:{})},fromPartial:function(e){var t,n={iceServers:[],clientConfiguration:void 0};return n.iceServers=(null===(t=e.iceServers)||void 0===t?void 0:t.map((function(e){return bi.fromPartial(e)})))||[],n.clientConfiguration=void 0!==e.clientConfiguration&&null!==e.clientConfiguration?un.fromPartial(e.clientConfiguration):void 0,n}};var ui={encode:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:Ot.Writer.create();return""!==e.cid&&t.uint32(10).string(e.cid),void 0!==e.track&&Yt.encode(e.track,t.uint32(18).fork()).ldelim(),t},decode:function(e,t){for(var n=e instanceof Ot.Reader?e:Ot.Reader.create(e),r=void 0===t?n.len:n.pos+t,i={cid:"",track:void 0};n.pos<r;){var a=n.uint32();switch(a>>>3){case 1:if(10!=a)break;i.cid=n.string();continue;case 2:if(18!=a)break;i.track=Yt.decode(n,n.uint32());continue}if(4==(7&a)||0==a)break;n.skipType(7&a)}return i},fromJSON:function(e){return{cid:Fi(e.cid)?String(e.cid):"",track:Fi(e.track)?Yt.fromJSON(e.track):void 0}},toJSON:function(e){var t={};return void 0!==e.cid&&(t.cid=e.cid),void 0!==e.track&&(t.track=e.track?Yt.toJSON(e.track):void 0),t},create:function(e){return ui.fromPartial(null!==e&&void 0!==e?e:{})},fromPartial:function(e){var t,n={cid:"",track:void 0};return n.cid=null!==(t=e.cid)&&void 0!==t?t:"",n.track=void 0!==e.track&&null!==e.track?Yt.fromPartial(e.track):void 0,n}};var li={encode:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:Ot.Writer.create();return""!==e.trackSid&&t.uint32(10).string(e.trackSid),t},decode:function(e,t){for(var n=e instanceof Ot.Reader?e:Ot.Reader.create(e),r=void 0===t?n.len:n.pos+t,i={trackSid:""};n.pos<r;){var a=n.uint32();switch(a>>>3){case 1:if(10!=a)break;i.trackSid=n.string();continue}if(4==(7&a)||0==a)break;n.skipType(7&a)}return i},fromJSON:function(e){return{trackSid:Fi(e.trackSid)?String(e.trackSid):""}},toJSON:function(e){var t={};return void 0!==e.trackSid&&(t.trackSid=e.trackSid),t},create:function(e){return li.fromPartial(null!==e&&void 0!==e?e:{})},fromPartial:function(e){var t,n={trackSid:""};return n.trackSid=null!==(t=e.trackSid)&&void 0!==t?t:"",n}};var di={encode:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:Ot.Writer.create();return""!==e.type&&t.uint32(10).string(e.type),""!==e.sdp&&t.uint32(18).string(e.sdp),t},decode:function(e,t){for(var n=e instanceof Ot.Reader?e:Ot.Reader.create(e),r=void 0===t?n.len:n.pos+t,i={type:"",sdp:""};n.pos<r;){var a=n.uint32();switch(a>>>3){case 1:if(10!=a)break;i.type=n.string();continue;case 2:if(18!=a)break;i.sdp=n.string();continue}if(4==(7&a)||0==a)break;n.skipType(7&a)}return i},fromJSON:function(e){return{type:Fi(e.type)?String(e.type):"",sdp:Fi(e.sdp)?String(e.sdp):""}},toJSON:function(e){var t={};return void 0!==e.type&&(t.type=e.type),void 0!==e.sdp&&(t.sdp=e.sdp),t},create:function(e){return di.fromPartial(null!==e&&void 0!==e?e:{})},fromPartial:function(e){var t,n,r={type:"",sdp:""};return r.type=null!==(t=e.type)&&void 0!==t?t:"",r.sdp=null!==(n=e.sdp)&&void 0!==n?n:"",r}};var fi={encode:function(e){var t,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:Ot.Writer.create(),r=u(e.participants);try{for(r.s();!(t=r.n()).done;){var i=t.value;Zt.encode(i,n.uint32(10).fork()).ldelim()}}catch(a){r.e(a)}finally{r.f()}return n},decode:function(e,t){for(var n=e instanceof Ot.Reader?e:Ot.Reader.create(e),r=void 0===t?n.len:n.pos+t,i={participants:[]};n.pos<r;){var a=n.uint32();switch(a>>>3){case 1:if(10!=a)break;i.participants.push(Zt.decode(n,n.uint32()));continue}if(4==(7&a)||0==a)break;n.skipType(7&a)}return i},fromJSON:function(e){return{participants:Array.isArray(null===e||void 0===e?void 0:e.participants)?e.participants.map((function(e){return Zt.fromJSON(e)})):[]}},toJSON:function(e){var t={};return e.participants?t.participants=e.participants.map((function(e){return e?Zt.toJSON(e):void 0})):t.participants=[],t},create:function(e){return fi.fromPartial(null!==e&&void 0!==e?e:{})},fromPartial:function(e){var t,n={participants:[]};return n.participants=(null===(t=e.participants)||void 0===t?void 0:t.map((function(e){return Zt.fromPartial(e)})))||[],n}};var pi={encode:function(e){var t,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:Ot.Writer.create(),r=u(e.trackSids);try{for(r.s();!(t=r.n()).done;){var i=t.value;n.uint32(10).string(i)}}catch(c){r.e(c)}finally{r.f()}!0===e.subscribe&&n.uint32(16).bool(e.subscribe);var a,o=u(e.participantTracks);try{for(o.s();!(a=o.n()).done;){var s=a.value;on.encode(s,n.uint32(26).fork()).ldelim()}}catch(c){o.e(c)}finally{o.f()}return n},decode:function(e,t){for(var n=e instanceof Ot.Reader?e:Ot.Reader.create(e),r=void 0===t?n.len:n.pos+t,i={trackSids:[],subscribe:!1,participantTracks:[]};n.pos<r;){var a=n.uint32();switch(a>>>3){case 1:if(10!=a)break;i.trackSids.push(n.string());continue;case 2:if(16!=a)break;i.subscribe=n.bool();continue;case 3:if(26!=a)break;i.participantTracks.push(on.decode(n,n.uint32()));continue}if(4==(7&a)||0==a)break;n.skipType(7&a)}return i},fromJSON:function(e){return{trackSids:Array.isArray(null===e||void 0===e?void 0:e.trackSids)?e.trackSids.map((function(e){return String(e)})):[],subscribe:!!Fi(e.subscribe)&&Boolean(e.subscribe),participantTracks:Array.isArray(null===e||void 0===e?void 0:e.participantTracks)?e.participantTracks.map((function(e){return on.fromJSON(e)})):[]}},toJSON:function(e){var t={};return e.trackSids?t.trackSids=e.trackSids.map((function(e){return e})):t.trackSids=[],void 0!==e.subscribe&&(t.subscribe=e.subscribe),e.participantTracks?t.participantTracks=e.participantTracks.map((function(e){return e?on.toJSON(e):void 0})):t.participantTracks=[],t},create:function(e){return pi.fromPartial(null!==e&&void 0!==e?e:{})},fromPartial:function(e){var t,n,r,i={trackSids:[],subscribe:!1,participantTracks:[]};return i.trackSids=(null===(t=e.trackSids)||void 0===t?void 0:t.map((function(e){return e})))||[],i.subscribe=null!==(n=e.subscribe)&&void 0!==n&&n,i.participantTracks=(null===(r=e.participantTracks)||void 0===r?void 0:r.map((function(e){return on.fromPartial(e)})))||[],i}};var hi={encode:function(e){var t,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:Ot.Writer.create(),r=u(e.trackSids);try{for(r.s();!(t=r.n()).done;){var i=t.value;n.uint32(10).string(i)}}catch(a){r.e(a)}finally{r.f()}return!0===e.disabled&&n.uint32(24).bool(e.disabled),0!==e.quality&&n.uint32(32).int32(e.quality),0!==e.width&&n.uint32(40).uint32(e.width),0!==e.height&&n.uint32(48).uint32(e.height),0!==e.fps&&n.uint32(56).uint32(e.fps),0!==e.priority&&n.uint32(64).uint32(e.priority),n},decode:function(e,t){for(var n=e instanceof Ot.Reader?e:Ot.Reader.create(e),r=void 0===t?n.len:n.pos+t,i={trackSids:[],disabled:!1,quality:0,width:0,height:0,fps:0,priority:0};n.pos<r;){var a=n.uint32();switch(a>>>3){case 1:if(10!=a)break;i.trackSids.push(n.string());continue;case 3:if(24!=a)break;i.disabled=n.bool();continue;case 4:if(32!=a)break;i.quality=n.int32();continue;case 5:if(40!=a)break;i.width=n.uint32();continue;case 6:if(48!=a)break;i.height=n.uint32();continue;case 7:if(56!=a)break;i.fps=n.uint32();continue;case 8:if(64!=a)break;i.priority=n.uint32();continue}if(4==(7&a)||0==a)break;n.skipType(7&a)}return i},fromJSON:function(e){return{trackSids:Array.isArray(null===e||void 0===e?void 0:e.trackSids)?e.trackSids.map((function(e){return String(e)})):[],disabled:!!Fi(e.disabled)&&Boolean(e.disabled),quality:Fi(e.quality)?Lt(e.quality):0,width:Fi(e.width)?Number(e.width):0,height:Fi(e.height)?Number(e.height):0,fps:Fi(e.fps)?Number(e.fps):0,priority:Fi(e.priority)?Number(e.priority):0}},toJSON:function(e){var t={};return e.trackSids?t.trackSids=e.trackSids.map((function(e){return e})):t.trackSids=[],void 0!==e.disabled&&(t.disabled=e.disabled),void 0!==e.quality&&(t.quality=Mt(e.quality)),void 0!==e.width&&(t.width=Math.round(e.width)),void 0!==e.height&&(t.height=Math.round(e.height)),void 0!==e.fps&&(t.fps=Math.round(e.fps)),void 0!==e.priority&&(t.priority=Math.round(e.priority)),t},create:function(e){return hi.fromPartial(null!==e&&void 0!==e?e:{})},fromPartial:function(e){var t,n,r,i,a,o,s,c={trackSids:[],disabled:!1,quality:0,width:0,height:0,fps:0,priority:0};return c.trackSids=(null===(t=e.trackSids)||void 0===t?void 0:t.map((function(e){return e})))||[],c.disabled=null!==(n=e.disabled)&&void 0!==n&&n,c.quality=null!==(r=e.quality)&&void 0!==r?r:0,c.width=null!==(i=e.width)&&void 0!==i?i:0,c.height=null!==(a=e.height)&&void 0!==a?a:0,c.fps=null!==(o=e.fps)&&void 0!==o?o:0,c.priority=null!==(s=e.priority)&&void 0!==s?s:0,c}};var vi={encode:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:Ot.Writer.create();return!0===e.canReconnect&&t.uint32(8).bool(e.canReconnect),0!==e.reason&&t.uint32(16).int32(e.reason),t},decode:function(e,t){for(var n=e instanceof Ot.Reader?e:Ot.Reader.create(e),r=void 0===t?n.len:n.pos+t,i={canReconnect:!1,reason:0};n.pos<r;){var a=n.uint32();switch(a>>>3){case 1:if(8!=a)break;i.canReconnect=n.bool();continue;case 2:if(16!=a)break;i.reason=n.int32();continue}if(4==(7&a)||0==a)break;n.skipType(7&a)}return i},fromJSON:function(e){return{canReconnect:!!Fi(e.canReconnect)&&Boolean(e.canReconnect),reason:Fi(e.reason)?Bt(e.reason):0}},toJSON:function(e){var t={};return void 0!==e.canReconnect&&(t.canReconnect=e.canReconnect),void 0!==e.reason&&(t.reason=function(e){switch(e){case Ct.UNKNOWN_REASON:return"UNKNOWN_REASON";case Ct.CLIENT_INITIATED:return"CLIENT_INITIATED";case Ct.DUPLICATE_IDENTITY:return"DUPLICATE_IDENTITY";case Ct.SERVER_SHUTDOWN:return"SERVER_SHUTDOWN";case Ct.PARTICIPANT_REMOVED:return"PARTICIPANT_REMOVED";case Ct.ROOM_DELETED:return"ROOM_DELETED";case Ct.STATE_MISMATCH:return"STATE_MISMATCH";case Ct.JOIN_FAILURE:return"JOIN_FAILURE";case Ct.UNRECOGNIZED:default:return"UNRECOGNIZED"}}(e.reason)),t},create:function(e){return vi.fromPartial(null!==e&&void 0!==e?e:{})},fromPartial:function(e){var t,n,r={canReconnect:!1,reason:0};return r.canReconnect=null!==(t=e.canReconnect)&&void 0!==t&&t,r.reason=null!==(n=e.reason)&&void 0!==n?n:0,r}};var mi={encode:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:Ot.Writer.create();""!==e.trackSid&&t.uint32(10).string(e.trackSid);var n,r=u(e.layers);try{for(r.s();!(n=r.n()).done;){var i=n.value;Xt.encode(i,t.uint32(18).fork()).ldelim()}}catch(a){r.e(a)}finally{r.f()}return t},decode:function(e,t){for(var n=e instanceof Ot.Reader?e:Ot.Reader.create(e),r=void 0===t?n.len:n.pos+t,i={trackSid:"",layers:[]};n.pos<r;){var a=n.uint32();switch(a>>>3){case 1:if(10!=a)break;i.trackSid=n.string();continue;case 2:if(18!=a)break;i.layers.push(Xt.decode(n,n.uint32()));continue}if(4==(7&a)||0==a)break;n.skipType(7&a)}return i},fromJSON:function(e){return{trackSid:Fi(e.trackSid)?String(e.trackSid):"",layers:Array.isArray(null===e||void 0===e?void 0:e.layers)?e.layers.map((function(e){return Xt.fromJSON(e)})):[]}},toJSON:function(e){var t={};return void 0!==e.trackSid&&(t.trackSid=e.trackSid),e.layers?t.layers=e.layers.map((function(e){return e?Xt.toJSON(e):void 0})):t.layers=[],t},create:function(e){return mi.fromPartial(null!==e&&void 0!==e?e:{})},fromPartial:function(e){var t,n,r={trackSid:"",layers:[]};return r.trackSid=null!==(t=e.trackSid)&&void 0!==t?t:"",r.layers=(null===(n=e.layers)||void 0===n?void 0:n.map((function(e){return Xt.fromPartial(e)})))||[],r}};var gi={encode:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:Ot.Writer.create();return""!==e.metadata&&t.uint32(10).string(e.metadata),""!==e.name&&t.uint32(18).string(e.name),t},decode:function(e,t){for(var n=e instanceof Ot.Reader?e:Ot.Reader.create(e),r=void 0===t?n.len:n.pos+t,i={metadata:"",name:""};n.pos<r;){var a=n.uint32();switch(a>>>3){case 1:if(10!=a)break;i.metadata=n.string();continue;case 2:if(18!=a)break;i.name=n.string();continue}if(4==(7&a)||0==a)break;n.skipType(7&a)}return i},fromJSON:function(e){return{metadata:Fi(e.metadata)?String(e.metadata):"",name:Fi(e.name)?String(e.name):""}},toJSON:function(e){var t={};return void 0!==e.metadata&&(t.metadata=e.metadata),void 0!==e.name&&(t.name=e.name),t},create:function(e){return gi.fromPartial(null!==e&&void 0!==e?e:{})},fromPartial:function(e){var t,n,r={metadata:"",name:""};return r.metadata=null!==(t=e.metadata)&&void 0!==t?t:"",r.name=null!==(n=e.name)&&void 0!==n?n:"",r}};var bi={encode:function(e){var t,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:Ot.Writer.create(),r=u(e.urls);try{for(r.s();!(t=r.n()).done;){var i=t.value;n.uint32(10).string(i)}}catch(a){r.e(a)}finally{r.f()}return""!==e.username&&n.uint32(18).string(e.username),""!==e.credential&&n.uint32(26).string(e.credential),n},decode:function(e,t){for(var n=e instanceof Ot.Reader?e:Ot.Reader.create(e),r=void 0===t?n.len:n.pos+t,i={urls:[],username:"",credential:""};n.pos<r;){var a=n.uint32();switch(a>>>3){case 1:if(10!=a)break;i.urls.push(n.string());continue;case 2:if(18!=a)break;i.username=n.string();continue;case 3:if(26!=a)break;i.credential=n.string();continue}if(4==(7&a)||0==a)break;n.skipType(7&a)}return i},fromJSON:function(e){return{urls:Array.isArray(null===e||void 0===e?void 0:e.urls)?e.urls.map((function(e){return String(e)})):[],username:Fi(e.username)?String(e.username):"",credential:Fi(e.credential)?String(e.credential):""}},toJSON:function(e){var t={};return e.urls?t.urls=e.urls.map((function(e){return e})):t.urls=[],void 0!==e.username&&(t.username=e.username),void 0!==e.credential&&(t.credential=e.credential),t},create:function(e){return bi.fromPartial(null!==e&&void 0!==e?e:{})},fromPartial:function(e){var t,n,r,i={urls:[],username:"",credential:""};return i.urls=(null===(t=e.urls)||void 0===t?void 0:t.map((function(e){return e})))||[],i.username=null!==(n=e.username)&&void 0!==n?n:"",i.credential=null!==(r=e.credential)&&void 0!==r?r:"",i}};var yi={encode:function(e){var t,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:Ot.Writer.create(),r=u(e.speakers);try{for(r.s();!(t=r.n()).done;){var i=t.value;nn.encode(i,n.uint32(10).fork()).ldelim()}}catch(a){r.e(a)}finally{r.f()}return n},decode:function(e,t){for(var n=e instanceof Ot.Reader?e:Ot.Reader.create(e),r=void 0===t?n.len:n.pos+t,i={speakers:[]};n.pos<r;){var a=n.uint32();switch(a>>>3){case 1:if(10!=a)break;i.speakers.push(nn.decode(n,n.uint32()));continue}if(4==(7&a)||0==a)break;n.skipType(7&a)}return i},fromJSON:function(e){return{speakers:Array.isArray(null===e||void 0===e?void 0:e.speakers)?e.speakers.map((function(e){return nn.fromJSON(e)})):[]}},toJSON:function(e){var t={};return e.speakers?t.speakers=e.speakers.map((function(e){return e?nn.toJSON(e):void 0})):t.speakers=[],t},create:function(e){return yi.fromPartial(null!==e&&void 0!==e?e:{})},fromPartial:function(e){var t,n={speakers:[]};return n.speakers=(null===(t=e.speakers)||void 0===t?void 0:t.map((function(e){return nn.fromPartial(e)})))||[],n}};var ki={encode:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:Ot.Writer.create();return void 0!==e.room&&Ht.encode(e.room,t.uint32(10).fork()).ldelim(),t},decode:function(e,t){for(var n=e instanceof Ot.Reader?e:Ot.Reader.create(e),r=void 0===t?n.len:n.pos+t,i={room:void 0};n.pos<r;){var a=n.uint32();switch(a>>>3){case 1:if(10!=a)break;i.room=Ht.decode(n,n.uint32());continue}if(4==(7&a)||0==a)break;n.skipType(7&a)}return i},fromJSON:function(e){return{room:Fi(e.room)?Ht.fromJSON(e.room):void 0}},toJSON:function(e){var t={};return void 0!==e.room&&(t.room=e.room?Ht.toJSON(e.room):void 0),t},create:function(e){return ki.fromPartial(null!==e&&void 0!==e?e:{})},fromPartial:function(e){var t={room:void 0};return t.room=void 0!==e.room&&null!==e.room?Ht.fromPartial(e.room):void 0,t}};var wi={encode:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:Ot.Writer.create();return""!==e.participantSid&&t.uint32(10).string(e.participantSid),0!==e.quality&&t.uint32(16).int32(e.quality),0!==e.score&&t.uint32(29).float(e.score),t},decode:function(e,t){for(var n=e instanceof Ot.Reader?e:Ot.Reader.create(e),r=void 0===t?n.len:n.pos+t,i={participantSid:"",quality:0,score:0};n.pos<r;){var a=n.uint32();switch(a>>>3){case 1:if(10!=a)break;i.participantSid=n.string();continue;case 2:if(16!=a)break;i.quality=n.int32();continue;case 3:if(29!=a)break;i.score=n.float();continue}if(4==(7&a)||0==a)break;n.skipType(7&a)}return i},fromJSON:function(e){return{participantSid:Fi(e.participantSid)?String(e.participantSid):"",quality:Fi(e.quality)?Ut(e.quality):0,score:Fi(e.score)?Number(e.score):0}},toJSON:function(e){var t={};return void 0!==e.participantSid&&(t.participantSid=e.participantSid),void 0!==e.quality&&(t.quality=function(e){switch(e){case wt.POOR:return"POOR";case wt.GOOD:return"GOOD";case wt.EXCELLENT:return"EXCELLENT";case wt.UNRECOGNIZED:default:return"UNRECOGNIZED"}}(e.quality)),void 0!==e.score&&(t.score=e.score),t},create:function(e){return wi.fromPartial(null!==e&&void 0!==e?e:{})},fromPartial:function(e){var t,n,r,i={participantSid:"",quality:0,score:0};return i.participantSid=null!==(t=e.participantSid)&&void 0!==t?t:"",i.quality=null!==(n=e.quality)&&void 0!==n?n:0,i.score=null!==(r=e.score)&&void 0!==r?r:0,i}};var Si={encode:function(e){var t,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:Ot.Writer.create(),r=u(e.updates);try{for(r.s();!(t=r.n()).done;){var i=t.value;wi.encode(i,n.uint32(10).fork()).ldelim()}}catch(a){r.e(a)}finally{r.f()}return n},decode:function(e,t){for(var n=e instanceof Ot.Reader?e:Ot.Reader.create(e),r=void 0===t?n.len:n.pos+t,i={updates:[]};n.pos<r;){var a=n.uint32();switch(a>>>3){case 1:if(10!=a)break;i.updates.push(wi.decode(n,n.uint32()));continue}if(4==(7&a)||0==a)break;n.skipType(7&a)}return i},fromJSON:function(e){return{updates:Array.isArray(null===e||void 0===e?void 0:e.updates)?e.updates.map((function(e){return wi.fromJSON(e)})):[]}},toJSON:function(e){var t={};return e.updates?t.updates=e.updates.map((function(e){return e?wi.toJSON(e):void 0})):t.updates=[],t},create:function(e){return Si.fromPartial(null!==e&&void 0!==e?e:{})},fromPartial:function(e){var t,n={updates:[]};return n.updates=(null===(t=e.updates)||void 0===t?void 0:t.map((function(e){return wi.fromPartial(e)})))||[],n}};var Ci={encode:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:Ot.Writer.create();return""!==e.participantSid&&t.uint32(10).string(e.participantSid),""!==e.trackSid&&t.uint32(18).string(e.trackSid),0!==e.state&&t.uint32(24).int32(e.state),t},decode:function(e,t){for(var n=e instanceof Ot.Reader?e:Ot.Reader.create(e),r=void 0===t?n.len:n.pos+t,i={participantSid:"",trackSid:"",state:0};n.pos<r;){var a=n.uint32();switch(a>>>3){case 1:if(10!=a)break;i.participantSid=n.string();continue;case 2:if(18!=a)break;i.trackSid=n.string();continue;case 3:if(24!=a)break;i.state=n.int32();continue}if(4==(7&a)||0==a)break;n.skipType(7&a)}return i},fromJSON:function(e){return{participantSid:Fi(e.participantSid)?String(e.participantSid):"",trackSid:Fi(e.trackSid)?String(e.trackSid):"",state:Fi(e.state)?Xr(e.state):0}},toJSON:function(e){var t={};return void 0!==e.participantSid&&(t.participantSid=e.participantSid),void 0!==e.trackSid&&(t.trackSid=e.trackSid),void 0!==e.state&&(t.state=function(e){switch(e){case Gr.ACTIVE:return"ACTIVE";case Gr.PAUSED:return"PAUSED";case Gr.UNRECOGNIZED:default:return"UNRECOGNIZED"}}(e.state)),t},create:function(e){return Ci.fromPartial(null!==e&&void 0!==e?e:{})},fromPartial:function(e){var t,n,r,i={participantSid:"",trackSid:"",state:0};return i.participantSid=null!==(t=e.participantSid)&&void 0!==t?t:"",i.trackSid=null!==(n=e.trackSid)&&void 0!==n?n:"",i.state=null!==(r=e.state)&&void 0!==r?r:0,i}};var Ei={encode:function(e){var t,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:Ot.Writer.create(),r=u(e.streamStates);try{for(r.s();!(t=r.n()).done;){var i=t.value;Ci.encode(i,n.uint32(10).fork()).ldelim()}}catch(a){r.e(a)}finally{r.f()}return n},decode:function(e,t){for(var n=e instanceof Ot.Reader?e:Ot.Reader.create(e),r=void 0===t?n.len:n.pos+t,i={streamStates:[]};n.pos<r;){var a=n.uint32();switch(a>>>3){case 1:if(10!=a)break;i.streamStates.push(Ci.decode(n,n.uint32()));continue}if(4==(7&a)||0==a)break;n.skipType(7&a)}return i},fromJSON:function(e){return{streamStates:Array.isArray(null===e||void 0===e?void 0:e.streamStates)?e.streamStates.map((function(e){return Ci.fromJSON(e)})):[]}},toJSON:function(e){var t={};return e.streamStates?t.streamStates=e.streamStates.map((function(e){return e?Ci.toJSON(e):void 0})):t.streamStates=[],t},create:function(e){return Ei.fromPartial(null!==e&&void 0!==e?e:{})},fromPartial:function(e){var t,n={streamStates:[]};return n.streamStates=(null===(t=e.streamStates)||void 0===t?void 0:t.map((function(e){return Ci.fromPartial(e)})))||[],n}};var xi={encode:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:Ot.Writer.create();return 0!==e.quality&&t.uint32(8).int32(e.quality),!0===e.enabled&&t.uint32(16).bool(e.enabled),t},decode:function(e,t){for(var n=e instanceof Ot.Reader?e:Ot.Reader.create(e),r=void 0===t?n.len:n.pos+t,i={quality:0,enabled:!1};n.pos<r;){var a=n.uint32();switch(a>>>3){case 1:if(8!=a)break;i.quality=n.int32();continue;case 2:if(16!=a)break;i.enabled=n.bool();continue}if(4==(7&a)||0==a)break;n.skipType(7&a)}return i},fromJSON:function(e){return{quality:Fi(e.quality)?Lt(e.quality):0,enabled:!!Fi(e.enabled)&&Boolean(e.enabled)}},toJSON:function(e){var t={};return void 0!==e.quality&&(t.quality=Mt(e.quality)),void 0!==e.enabled&&(t.enabled=e.enabled),t},create:function(e){return xi.fromPartial(null!==e&&void 0!==e?e:{})},fromPartial:function(e){var t,n,r={quality:0,enabled:!1};return r.quality=null!==(t=e.quality)&&void 0!==t?t:0,r.enabled=null!==(n=e.enabled)&&void 0!==n&&n,r}};var Pi={encode:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:Ot.Writer.create();""!==e.codec&&t.uint32(10).string(e.codec);var n,r=u(e.qualities);try{for(r.s();!(n=r.n()).done;){var i=n.value;xi.encode(i,t.uint32(18).fork()).ldelim()}}catch(a){r.e(a)}finally{r.f()}return t},decode:function(e,t){for(var n=e instanceof Ot.Reader?e:Ot.Reader.create(e),r=void 0===t?n.len:n.pos+t,i={codec:"",qualities:[]};n.pos<r;){var a=n.uint32();switch(a>>>3){case 1:if(10!=a)break;i.codec=n.string();continue;case 2:if(18!=a)break;i.qualities.push(xi.decode(n,n.uint32()));continue}if(4==(7&a)||0==a)break;n.skipType(7&a)}return i},fromJSON:function(e){return{codec:Fi(e.codec)?String(e.codec):"",qualities:Array.isArray(null===e||void 0===e?void 0:e.qualities)?e.qualities.map((function(e){return xi.fromJSON(e)})):[]}},toJSON:function(e){var t={};return void 0!==e.codec&&(t.codec=e.codec),e.qualities?t.qualities=e.qualities.map((function(e){return e?xi.toJSON(e):void 0})):t.qualities=[],t},create:function(e){return Pi.fromPartial(null!==e&&void 0!==e?e:{})},fromPartial:function(e){var t,n,r={codec:"",qualities:[]};return r.codec=null!==(t=e.codec)&&void 0!==t?t:"",r.qualities=(null===(n=e.qualities)||void 0===n?void 0:n.map((function(e){return xi.fromPartial(e)})))||[],r}};var Ti={encode:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:Ot.Writer.create();""!==e.trackSid&&t.uint32(10).string(e.trackSid);var n,r=u(e.subscribedQualities);try{for(r.s();!(n=r.n()).done;){var i=n.value;xi.encode(i,t.uint32(18).fork()).ldelim()}}catch(c){r.e(c)}finally{r.f()}var a,o=u(e.subscribedCodecs);try{for(o.s();!(a=o.n()).done;){var s=a.value;Pi.encode(s,t.uint32(26).fork()).ldelim()}}catch(c){o.e(c)}finally{o.f()}return t},decode:function(e,t){for(var n=e instanceof Ot.Reader?e:Ot.Reader.create(e),r=void 0===t?n.len:n.pos+t,i={trackSid:"",subscribedQualities:[],subscribedCodecs:[]};n.pos<r;){var a=n.uint32();switch(a>>>3){case 1:if(10!=a)break;i.trackSid=n.string();continue;case 2:if(18!=a)break;i.subscribedQualities.push(xi.decode(n,n.uint32()));continue;case 3:if(26!=a)break;i.subscribedCodecs.push(Pi.decode(n,n.uint32()));continue}if(4==(7&a)||0==a)break;n.skipType(7&a)}return i},fromJSON:function(e){return{trackSid:Fi(e.trackSid)?String(e.trackSid):"",subscribedQualities:Array.isArray(null===e||void 0===e?void 0:e.subscribedQualities)?e.subscribedQualities.map((function(e){return xi.fromJSON(e)})):[],subscribedCodecs:Array.isArray(null===e||void 0===e?void 0:e.subscribedCodecs)?e.subscribedCodecs.map((function(e){return Pi.fromJSON(e)})):[]}},toJSON:function(e){var t={};return void 0!==e.trackSid&&(t.trackSid=e.trackSid),e.subscribedQualities?t.subscribedQualities=e.subscribedQualities.map((function(e){return e?xi.toJSON(e):void 0})):t.subscribedQualities=[],e.subscribedCodecs?t.subscribedCodecs=e.subscribedCodecs.map((function(e){return e?Pi.toJSON(e):void 0})):t.subscribedCodecs=[],t},create:function(e){return Ti.fromPartial(null!==e&&void 0!==e?e:{})},fromPartial:function(e){var t,n,r,i={trackSid:"",subscribedQualities:[],subscribedCodecs:[]};return i.trackSid=null!==(t=e.trackSid)&&void 0!==t?t:"",i.subscribedQualities=(null===(n=e.subscribedQualities)||void 0===n?void 0:n.map((function(e){return xi.fromPartial(e)})))||[],i.subscribedCodecs=(null===(r=e.subscribedCodecs)||void 0===r?void 0:r.map((function(e){return Pi.fromPartial(e)})))||[],i}};var Ri={encode:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:Ot.Writer.create();""!==e.participantSid&&t.uint32(10).string(e.participantSid),!0===e.allTracks&&t.uint32(16).bool(e.allTracks);var n,r=u(e.trackSids);try{for(r.s();!(n=r.n()).done;){var i=n.value;t.uint32(26).string(i)}}catch(a){r.e(a)}finally{r.f()}return""!==e.participantIdentity&&t.uint32(34).string(e.participantIdentity),t},decode:function(e,t){for(var n=e instanceof Ot.Reader?e:Ot.Reader.create(e),r=void 0===t?n.len:n.pos+t,i={participantSid:"",allTracks:!1,trackSids:[],participantIdentity:""};n.pos<r;){var a=n.uint32();switch(a>>>3){case 1:if(10!=a)break;i.participantSid=n.string();continue;case 2:if(16!=a)break;i.allTracks=n.bool();continue;case 3:if(26!=a)break;i.trackSids.push(n.string());continue;case 4:if(34!=a)break;i.participantIdentity=n.string();continue}if(4==(7&a)||0==a)break;n.skipType(7&a)}return i},fromJSON:function(e){return{participantSid:Fi(e.participantSid)?String(e.participantSid):"",allTracks:!!Fi(e.allTracks)&&Boolean(e.allTracks),trackSids:Array.isArray(null===e||void 0===e?void 0:e.trackSids)?e.trackSids.map((function(e){return String(e)})):[],participantIdentity:Fi(e.participantIdentity)?String(e.participantIdentity):""}},toJSON:function(e){var t={};return void 0!==e.participantSid&&(t.participantSid=e.participantSid),void 0!==e.allTracks&&(t.allTracks=e.allTracks),e.trackSids?t.trackSids=e.trackSids.map((function(e){return e})):t.trackSids=[],void 0!==e.participantIdentity&&(t.participantIdentity=e.participantIdentity),t},create:function(e){return Ri.fromPartial(null!==e&&void 0!==e?e:{})},fromPartial:function(e){var t,n,r,i,a={participantSid:"",allTracks:!1,trackSids:[],participantIdentity:""};return a.participantSid=null!==(t=e.participantSid)&&void 0!==t?t:"",a.allTracks=null!==(n=e.allTracks)&&void 0!==n&&n,a.trackSids=(null===(r=e.trackSids)||void 0===r?void 0:r.map((function(e){return e})))||[],a.participantIdentity=null!==(i=e.participantIdentity)&&void 0!==i?i:"",a}};var Ni={encode:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:Ot.Writer.create();!0===e.allParticipants&&t.uint32(8).bool(e.allParticipants);var n,r=u(e.trackPermissions);try{for(r.s();!(n=r.n()).done;){var i=n.value;Ri.encode(i,t.uint32(18).fork()).ldelim()}}catch(a){r.e(a)}finally{r.f()}return t},decode:function(e,t){for(var n=e instanceof Ot.Reader?e:Ot.Reader.create(e),r=void 0===t?n.len:n.pos+t,i={allParticipants:!1,trackPermissions:[]};n.pos<r;){var a=n.uint32();switch(a>>>3){case 1:if(8!=a)break;i.allParticipants=n.bool();continue;case 2:if(18!=a)break;i.trackPermissions.push(Ri.decode(n,n.uint32()));continue}if(4==(7&a)||0==a)break;n.skipType(7&a)}return i},fromJSON:function(e){return{allParticipants:!!Fi(e.allParticipants)&&Boolean(e.allParticipants),trackPermissions:Array.isArray(null===e||void 0===e?void 0:e.trackPermissions)?e.trackPermissions.map((function(e){return Ri.fromJSON(e)})):[]}},toJSON:function(e){var t={};return void 0!==e.allParticipants&&(t.allParticipants=e.allParticipants),e.trackPermissions?t.trackPermissions=e.trackPermissions.map((function(e){return e?Ri.toJSON(e):void 0})):t.trackPermissions=[],t},create:function(e){return Ni.fromPartial(null!==e&&void 0!==e?e:{})},fromPartial:function(e){var t,n,r={allParticipants:!1,trackPermissions:[]};return r.allParticipants=null!==(t=e.allParticipants)&&void 0!==t&&t,r.trackPermissions=(null===(n=e.trackPermissions)||void 0===n?void 0:n.map((function(e){return Ri.fromPartial(e)})))||[],r}};var Oi={encode:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:Ot.Writer.create();return""!==e.participantSid&&t.uint32(10).string(e.participantSid),""!==e.trackSid&&t.uint32(18).string(e.trackSid),!0===e.allowed&&t.uint32(24).bool(e.allowed),t},decode:function(e,t){for(var n=e instanceof Ot.Reader?e:Ot.Reader.create(e),r=void 0===t?n.len:n.pos+t,i={participantSid:"",trackSid:"",allowed:!1};n.pos<r;){var a=n.uint32();switch(a>>>3){case 1:if(10!=a)break;i.participantSid=n.string();continue;case 2:if(18!=a)break;i.trackSid=n.string();continue;case 3:if(24!=a)break;i.allowed=n.bool();continue}if(4==(7&a)||0==a)break;n.skipType(7&a)}return i},fromJSON:function(e){return{participantSid:Fi(e.participantSid)?String(e.participantSid):"",trackSid:Fi(e.trackSid)?String(e.trackSid):"",allowed:!!Fi(e.allowed)&&Boolean(e.allowed)}},toJSON:function(e){var t={};return void 0!==e.participantSid&&(t.participantSid=e.participantSid),void 0!==e.trackSid&&(t.trackSid=e.trackSid),void 0!==e.allowed&&(t.allowed=e.allowed),t},create:function(e){return Oi.fromPartial(null!==e&&void 0!==e?e:{})},fromPartial:function(e){var t,n,r,i={participantSid:"",trackSid:"",allowed:!1};return i.participantSid=null!==(t=e.participantSid)&&void 0!==t?t:"",i.trackSid=null!==(n=e.trackSid)&&void 0!==n?n:"",i.allowed=null!==(r=e.allowed)&&void 0!==r&&r,i}};var Ii={encode:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:Ot.Writer.create();void 0!==e.answer&&di.encode(e.answer,t.uint32(10).fork()).ldelim(),void 0!==e.subscription&&pi.encode(e.subscription,t.uint32(18).fork()).ldelim();var n,r=u(e.publishTracks);try{for(r.s();!(n=r.n()).done;){var i=n.value;ui.encode(i,t.uint32(26).fork()).ldelim()}}catch(c){r.e(c)}finally{r.f()}var a,o=u(e.dataChannels);try{for(o.s();!(a=o.n()).done;){var s=a.value;_i.encode(s,t.uint32(34).fork()).ldelim()}}catch(c){o.e(c)}finally{o.f()}return void 0!==e.offer&&di.encode(e.offer,t.uint32(42).fork()).ldelim(),t},decode:function(e,t){for(var n=e instanceof Ot.Reader?e:Ot.Reader.create(e),r=void 0===t?n.len:n.pos+t,i={answer:void 0,subscription:void 0,publishTracks:[],dataChannels:[],offer:void 0};n.pos<r;){var a=n.uint32();switch(a>>>3){case 1:if(10!=a)break;i.answer=di.decode(n,n.uint32());continue;case 2:if(18!=a)break;i.subscription=pi.decode(n,n.uint32());continue;case 3:if(26!=a)break;i.publishTracks.push(ui.decode(n,n.uint32()));continue;case 4:if(34!=a)break;i.dataChannels.push(_i.decode(n,n.uint32()));continue;case 5:if(42!=a)break;i.offer=di.decode(n,n.uint32());continue}if(4==(7&a)||0==a)break;n.skipType(7&a)}return i},fromJSON:function(e){return{answer:Fi(e.answer)?di.fromJSON(e.answer):void 0,subscription:Fi(e.subscription)?pi.fromJSON(e.subscription):void 0,publishTracks:Array.isArray(null===e||void 0===e?void 0:e.publishTracks)?e.publishTracks.map((function(e){return ui.fromJSON(e)})):[],dataChannels:Array.isArray(null===e||void 0===e?void 0:e.dataChannels)?e.dataChannels.map((function(e){return _i.fromJSON(e)})):[],offer:Fi(e.offer)?di.fromJSON(e.offer):void 0}},toJSON:function(e){var t={};return void 0!==e.answer&&(t.answer=e.answer?di.toJSON(e.answer):void 0),void 0!==e.subscription&&(t.subscription=e.subscription?pi.toJSON(e.subscription):void 0),e.publishTracks?t.publishTracks=e.publishTracks.map((function(e){return e?ui.toJSON(e):void 0})):t.publishTracks=[],e.dataChannels?t.dataChannels=e.dataChannels.map((function(e){return e?_i.toJSON(e):void 0})):t.dataChannels=[],void 0!==e.offer&&(t.offer=e.offer?di.toJSON(e.offer):void 0),t},create:function(e){return Ii.fromPartial(null!==e&&void 0!==e?e:{})},fromPartial:function(e){var t,n,r={answer:void 0,subscription:void 0,publishTracks:[],dataChannels:[],offer:void 0};return r.answer=void 0!==e.answer&&null!==e.answer?di.fromPartial(e.answer):void 0,r.subscription=void 0!==e.subscription&&null!==e.subscription?pi.fromPartial(e.subscription):void 0,r.publishTracks=(null===(t=e.publishTracks)||void 0===t?void 0:t.map((function(e){return ui.fromPartial(e)})))||[],r.dataChannels=(null===(n=e.dataChannels)||void 0===n?void 0:n.map((function(e){return _i.fromPartial(e)})))||[],r.offer=void 0!==e.offer&&null!==e.offer?di.fromPartial(e.offer):void 0,r}};var _i={encode:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:Ot.Writer.create();return""!==e.label&&t.uint32(10).string(e.label),0!==e.id&&t.uint32(16).uint32(e.id),0!==e.target&&t.uint32(24).int32(e.target),t},decode:function(e,t){for(var n=e instanceof Ot.Reader?e:Ot.Reader.create(e),r=void 0===t?n.len:n.pos+t,i={label:"",id:0,target:0};n.pos<r;){var a=n.uint32();switch(a>>>3){case 1:if(10!=a)break;i.label=n.string();continue;case 2:if(16!=a)break;i.id=n.uint32();continue;case 3:if(24!=a)break;i.target=n.int32();continue}if(4==(7&a)||0==a)break;n.skipType(7&a)}return i},fromJSON:function(e){return{label:Fi(e.label)?String(e.label):"",id:Fi(e.id)?Number(e.id):0,target:Fi(e.target)?Kr(e.target):0}},toJSON:function(e){var t={};return void 0!==e.label&&(t.label=e.label),void 0!==e.id&&(t.id=Math.round(e.id)),void 0!==e.target&&(t.target=Yr(e.target)),t},create:function(e){return _i.fromPartial(null!==e&&void 0!==e?e:{})},fromPartial:function(e){var t,n,r,i={label:"",id:0,target:0};return i.label=null!==(t=e.label)&&void 0!==t?t:"",i.id=null!==(n=e.id)&&void 0!==n?n:0,i.target=null!==(r=e.target)&&void 0!==r?r:0,i}};var Di={encode:function(e){var t,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:Ot.Writer.create();switch(null===(t=e.scenario)||void 0===t?void 0:t.$case){case"speakerUpdate":n.uint32(8).int32(e.scenario.speakerUpdate);break;case"nodeFailure":n.uint32(16).bool(e.scenario.nodeFailure);break;case"migration":n.uint32(24).bool(e.scenario.migration);break;case"serverLeave":n.uint32(32).bool(e.scenario.serverLeave);break;case"switchCandidateProtocol":n.uint32(40).int32(e.scenario.switchCandidateProtocol);break;case"subscriberBandwidth":n.uint32(48).int64(e.scenario.subscriberBandwidth)}return n},decode:function(e,t){for(var n=e instanceof Ot.Reader?e:Ot.Reader.create(e),r=void 0===t?n.len:n.pos+t,i={scenario:void 0};n.pos<r;){var a=n.uint32();switch(a>>>3){case 1:if(8!=a)break;i.scenario={$case:"speakerUpdate",speakerUpdate:n.int32()};continue;case 2:if(16!=a)break;i.scenario={$case:"nodeFailure",nodeFailure:n.bool()};continue;case 3:if(24!=a)break;i.scenario={$case:"migration",migration:n.bool()};continue;case 4:if(32!=a)break;i.scenario={$case:"serverLeave",serverLeave:n.bool()};continue;case 5:if(40!=a)break;i.scenario={$case:"switchCandidateProtocol",switchCandidateProtocol:n.int32()};continue;case 6:if(48!=a)break;i.scenario={$case:"subscriberBandwidth",subscriberBandwidth:Ui(n.int64())};continue}if(4==(7&a)||0==a)break;n.skipType(7&a)}return i},fromJSON:function(e){return{scenario:Fi(e.speakerUpdate)?{$case:"speakerUpdate",speakerUpdate:Number(e.speakerUpdate)}:Fi(e.nodeFailure)?{$case:"nodeFailure",nodeFailure:Boolean(e.nodeFailure)}:Fi(e.migration)?{$case:"migration",migration:Boolean(e.migration)}:Fi(e.serverLeave)?{$case:"serverLeave",serverLeave:Boolean(e.serverLeave)}:Fi(e.switchCandidateProtocol)?{$case:"switchCandidateProtocol",switchCandidateProtocol:ei(e.switchCandidateProtocol)}:Fi(e.subscriberBandwidth)?{$case:"subscriberBandwidth",subscriberBandwidth:Number(e.subscriberBandwidth)}:void 0}},toJSON:function(e){var t,n,r,i,a,o,s,c,u,l,d,f,p,h={};return"speakerUpdate"===(null===(t=e.scenario)||void 0===t?void 0:t.$case)&&(h.speakerUpdate=Math.round(null===(n=e.scenario)||void 0===n?void 0:n.speakerUpdate)),"nodeFailure"===(null===(r=e.scenario)||void 0===r?void 0:r.$case)&&(h.nodeFailure=null===(i=e.scenario)||void 0===i?void 0:i.nodeFailure),"migration"===(null===(a=e.scenario)||void 0===a?void 0:a.$case)&&(h.migration=null===(o=e.scenario)||void 0===o?void 0:o.migration),"serverLeave"===(null===(s=e.scenario)||void 0===s?void 0:s.$case)&&(h.serverLeave=null===(c=e.scenario)||void 0===c?void 0:c.serverLeave),"switchCandidateProtocol"===(null===(u=e.scenario)||void 0===u?void 0:u.$case)&&(h.switchCandidateProtocol=void 0!==(null===(l=e.scenario)||void 0===l?void 0:l.switchCandidateProtocol)?function(e){switch(e){case Qr.UDP:return"UDP";case Qr.TCP:return"TCP";case Qr.TLS:return"TLS";case Qr.UNRECOGNIZED:default:return"UNRECOGNIZED"}}(null===(d=e.scenario)||void 0===d?void 0:d.switchCandidateProtocol):void 0),"subscriberBandwidth"===(null===(f=e.scenario)||void 0===f?void 0:f.$case)&&(h.subscriberBandwidth=Math.round(null===(p=e.scenario)||void 0===p?void 0:p.subscriberBandwidth)),h},create:function(e){return Di.fromPartial(null!==e&&void 0!==e?e:{})},fromPartial:function(e){var t,n,r,i,a,o,s,c,u,l,d,f,p,h,v,m,g,b,y={scenario:void 0};return"speakerUpdate"===(null===(t=e.scenario)||void 0===t?void 0:t.$case)&&void 0!==(null===(n=e.scenario)||void 0===n?void 0:n.speakerUpdate)&&null!==(null===(r=e.scenario)||void 0===r?void 0:r.speakerUpdate)&&(y.scenario={$case:"speakerUpdate",speakerUpdate:e.scenario.speakerUpdate}),"nodeFailure"===(null===(i=e.scenario)||void 0===i?void 0:i.$case)&&void 0!==(null===(a=e.scenario)||void 0===a?void 0:a.nodeFailure)&&null!==(null===(o=e.scenario)||void 0===o?void 0:o.nodeFailure)&&(y.scenario={$case:"nodeFailure",nodeFailure:e.scenario.nodeFailure}),"migration"===(null===(s=e.scenario)||void 0===s?void 0:s.$case)&&void 0!==(null===(c=e.scenario)||void 0===c?void 0:c.migration)&&null!==(null===(u=e.scenario)||void 0===u?void 0:u.migration)&&(y.scenario={$case:"migration",migration:e.scenario.migration}),"serverLeave"===(null===(l=e.scenario)||void 0===l?void 0:l.$case)&&void 0!==(null===(d=e.scenario)||void 0===d?void 0:d.serverLeave)&&null!==(null===(f=e.scenario)||void 0===f?void 0:f.serverLeave)&&(y.scenario={$case:"serverLeave",serverLeave:e.scenario.serverLeave}),"switchCandidateProtocol"===(null===(p=e.scenario)||void 0===p?void 0:p.$case)&&void 0!==(null===(h=e.scenario)||void 0===h?void 0:h.switchCandidateProtocol)&&null!==(null===(v=e.scenario)||void 0===v?void 0:v.switchCandidateProtocol)&&(y.scenario={$case:"switchCandidateProtocol",switchCandidateProtocol:e.scenario.switchCandidateProtocol}),"subscriberBandwidth"===(null===(m=e.scenario)||void 0===m?void 0:m.$case)&&void 0!==(null===(g=e.scenario)||void 0===g?void 0:g.subscriberBandwidth)&&null!==(null===(b=e.scenario)||void 0===b?void 0:b.subscriberBandwidth)&&(y.scenario={$case:"subscriberBandwidth",subscriberBandwidth:e.scenario.subscriberBandwidth}),y}};var Ai={encode:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:Ot.Writer.create();return 0!==e.timestamp&&t.uint32(8).int64(e.timestamp),0!==e.rtt&&t.uint32(16).int64(e.rtt),t},decode:function(e,t){for(var n=e instanceof Ot.Reader?e:Ot.Reader.create(e),r=void 0===t?n.len:n.pos+t,i={timestamp:0,rtt:0};n.pos<r;){var a=n.uint32();switch(a>>>3){case 1:if(8!=a)break;i.timestamp=Ui(n.int64());continue;case 2:if(16!=a)break;i.rtt=Ui(n.int64());continue}if(4==(7&a)||0==a)break;n.skipType(7&a)}return i},fromJSON:function(e){return{timestamp:Fi(e.timestamp)?Number(e.timestamp):0,rtt:Fi(e.rtt)?Number(e.rtt):0}},toJSON:function(e){var t={};return void 0!==e.timestamp&&(t.timestamp=Math.round(e.timestamp)),void 0!==e.rtt&&(t.rtt=Math.round(e.rtt)),t},create:function(e){return Ai.fromPartial(null!==e&&void 0!==e?e:{})},fromPartial:function(e){var t,n,r={timestamp:0,rtt:0};return r.timestamp=null!==(t=e.timestamp)&&void 0!==t?t:0,r.rtt=null!==(n=e.rtt)&&void 0!==n?n:0,r}};var Li={encode:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:Ot.Writer.create();return 0!==e.lastPingTimestamp&&t.uint32(8).int64(e.lastPingTimestamp),0!==e.timestamp&&t.uint32(16).int64(e.timestamp),t},decode:function(e,t){for(var n=e instanceof Ot.Reader?e:Ot.Reader.create(e),r=void 0===t?n.len:n.pos+t,i={lastPingTimestamp:0,timestamp:0};n.pos<r;){var a=n.uint32();switch(a>>>3){case 1:if(8!=a)break;i.lastPingTimestamp=Ui(n.int64());continue;case 2:if(16!=a)break;i.timestamp=Ui(n.int64());continue}if(4==(7&a)||0==a)break;n.skipType(7&a)}return i},fromJSON:function(e){return{lastPingTimestamp:Fi(e.lastPingTimestamp)?Number(e.lastPingTimestamp):0,timestamp:Fi(e.timestamp)?Number(e.timestamp):0}},toJSON:function(e){var t={};return void 0!==e.lastPingTimestamp&&(t.lastPingTimestamp=Math.round(e.lastPingTimestamp)),void 0!==e.timestamp&&(t.timestamp=Math.round(e.timestamp)),t},create:function(e){return Li.fromPartial(null!==e&&void 0!==e?e:{})},fromPartial:function(e){var t,n,r={lastPingTimestamp:0,timestamp:0};return r.lastPingTimestamp=null!==(t=e.lastPingTimestamp)&&void 0!==t?t:0,r.timestamp=null!==(n=e.timestamp)&&void 0!==n?n:0,r}},Mi=function(){if("undefined"!==typeof globalThis)return globalThis;if("undefined"!==typeof self)return self;if("undefined"!==typeof window)return window;if("undefined"!==typeof global)return global;throw"Unable to locate global object"}();function Ui(e){if(e.gt(Number.MAX_SAFE_INTEGER))throw new Mi.Error("Value is larger than Number.MAX_SAFE_INTEGER");return e.toNumber()}function Fi(e){return null!==e&&void 0!==e}Ot.util.Long!==ue&&(Ot.util.Long=ue,Ot.configure());var ji,Bi=function(e){m(n,e);var t=b(n);function n(e,r){var i;return x(this,n),(i=t.call(this,r||"an error has occured")).code=e,i}return T(n)}(k(Error)),zi=function(e){m(n,e);var t=b(n);function n(e,r,i){var a;return x(this,n),(a=t.call(this,1,e)).status=i,a.reason=r,a}return T(n)}(Bi),$i=function(e){m(n,e);var t=b(n);function n(e){return x(this,n),t.call(this,21,null!==e&&void 0!==e?e:"device is unsupported")}return T(n)}(Bi),Vi=function(e){m(n,e);var t=b(n);function n(e){return x(this,n),t.call(this,20,null!==e&&void 0!==e?e:"track is invalid")}return T(n)}(Bi),Ji=function(e){m(n,e);var t=b(n);function n(e){return x(this,n),t.call(this,10,null!==e&&void 0!==e?e:"unsupported server")}return T(n)}(Bi),Wi=function(e){m(n,e);var t=b(n);function n(e){return x(this,n),t.call(this,12,null!==e&&void 0!==e?e:"unexpected connection state")}return T(n)}(Bi),qi=function(e){m(n,e);var t=b(n);function n(e){return x(this,n),t.call(this,13,null!==e&&void 0!==e?e:"unable to negotiate")}return T(n)}(Bi);!function(e){e.PermissionDenied="PermissionDenied",e.NotFound="NotFound",e.DeviceInUse="DeviceInUse",e.Other="Other"}(ji||(ji={})),function(e){e.getFailure=function(t){if(t&&"name"in t)return"NotFoundError"===t.name||"DevicesNotFoundError"===t.name?e.NotFound:"NotAllowedError"===t.name||"PermissionDeniedError"===t.name?e.PermissionDenied:"NotReadableError"===t.name||"TrackStartError"===t.name?e.DeviceInUse:e.Other}}(ji||(ji={}));var Hi=T((function e(){x(this,e)}));Hi.setTimeout=function(){return setTimeout.apply(void 0,arguments)},Hi.setInterval=function(){return setInterval.apply(void 0,arguments)},Hi.clearTimeout=function(){return clearTimeout.apply(void 0,arguments)},Hi.clearInterval=function(){return clearInterval.apply(void 0,arguments)};var Gi={exports:{}};!function(e,t){!function(n,r){var i="function",a="undefined",o="object",s="string",c="major",u="model",l="name",d="type",f="vendor",p="version",h="architecture",v="console",m="mobile",g="tablet",b="smarttv",y="wearable",k="embedded",w="Amazon",S="Apple",C="ASUS",E="BlackBerry",x="Browser",P="Chrome",T="Firefox",R="Google",N="Huawei",O="LG",I="Microsoft",_="Motorola",D="Opera",A="Samsung",L="Sharp",M="Sony",U="Xiaomi",F="Zebra",j="Facebook",B="Chromium OS",z="Mac OS",$=function(e){for(var t={},n=0;n<e.length;n++)t[e[n].toUpperCase()]=e[n];return t},V=function(e,t){return typeof e===s&&-1!==J(t).indexOf(J(e))},J=function(e){return e.toLowerCase()},W=function(e,t){if(typeof e===s)return e=e.replace(/^\s\s*/,""),typeof t===a?e:e.substring(0,350)},q=function(e,t){for(var n,a,s,c,u,l,d=0;d<t.length&&!u;){var f=t[d],p=t[d+1];for(n=a=0;n<f.length&&!u&&f[n];)if(u=f[n++].exec(e))for(s=0;s<p.length;s++)l=u[++a],typeof(c=p[s])===o&&c.length>0?2===c.length?typeof c[1]==i?this[c[0]]=c[1].call(this,l):this[c[0]]=c[1]:3===c.length?typeof c[1]!==i||c[1].exec&&c[1].test?this[c[0]]=l?l.replace(c[1],c[2]):r:this[c[0]]=l?c[1].call(this,l,c[2]):r:4===c.length&&(this[c[0]]=l?c[3].call(this,l.replace(c[1],c[2])):r):this[c]=l||r;d+=2}},H=function(e,t){for(var n in t)if(typeof t[n]===o&&t[n].length>0){for(var i=0;i<t[n].length;i++)if(V(t[n][i],e))return"?"===n?r:n}else if(V(t[n],e))return"?"===n?r:n;return e},G={ME:"4.90","NT 3.11":"NT3.51","NT 4.0":"NT4.0",2e3:"NT 5.0",XP:["NT 5.1","NT 5.2"],Vista:"NT 6.0",7:"NT 6.1",8:"NT 6.2",8.1:"NT 6.3",10:["NT 6.4","NT 10.0"],RT:"ARM"},Q={browser:[[/\b(?:crmo|crios)\/([\w\.]+)/i],[p,[l,"Chrome"]],[/edg(?:e|ios|a)?\/([\w\.]+)/i],[p,[l,"Edge"]],[/(opera mini)\/([-\w\.]+)/i,/(opera [mobiletab]{3,6})\b.+version\/([-\w\.]+)/i,/(opera)(?:.+version\/|[\/ ]+)([\w\.]+)/i],[l,p],[/opios[\/ ]+([\w\.]+)/i],[p,[l,D+" Mini"]],[/\bopr\/([\w\.]+)/i],[p,[l,D]],[/(kindle)\/([\w\.]+)/i,/(lunascape|maxthon|netfront|jasmine|blazer)[\/ ]?([\w\.]*)/i,/(avant |iemobile|slim)(?:browser)?[\/ ]?([\w\.]*)/i,/(ba?idubrowser)[\/ ]?([\w\.]+)/i,/(?:ms|\()(ie) ([\w\.]+)/i,/(flock|rockmelt|midori|epiphany|silk|skyfire|bolt|iron|vivaldi|iridium|phantomjs|bowser|quark|qupzilla|falkon|rekonq|puffin|brave|whale(?!.+naver)|qqbrowserlite|qq|duckduckgo)\/([-\w\.]+)/i,/(heytap|ovi)browser\/([\d\.]+)/i,/(weibo)__([\d\.]+)/i],[l,p],[/(?:\buc? ?browser|(?:juc.+)ucweb)[\/ ]?([\w\.]+)/i],[p,[l,"UC"+x]],[/microm.+\bqbcore\/([\w\.]+)/i,/\bqbcore\/([\w\.]+).+microm/i],[p,[l,"WeChat(Win) Desktop"]],[/micromessenger\/([\w\.]+)/i],[p,[l,"WeChat"]],[/konqueror\/([\w\.]+)/i],[p,[l,"Konqueror"]],[/trident.+rv[: ]([\w\.]{1,9})\b.+like gecko/i],[p,[l,"IE"]],[/ya(?:search)?browser\/([\w\.]+)/i],[p,[l,"Yandex"]],[/(avast|avg)\/([\w\.]+)/i],[[l,/(.+)/,"$1 Secure "+x],p],[/\bfocus\/([\w\.]+)/i],[p,[l,T+" Focus"]],[/\bopt\/([\w\.]+)/i],[p,[l,D+" Touch"]],[/coc_coc\w+\/([\w\.]+)/i],[p,[l,"Coc Coc"]],[/dolfin\/([\w\.]+)/i],[p,[l,"Dolphin"]],[/coast\/([\w\.]+)/i],[p,[l,D+" Coast"]],[/miuibrowser\/([\w\.]+)/i],[p,[l,"MIUI "+x]],[/fxios\/([-\w\.]+)/i],[p,[l,T]],[/\bqihu|(qi?ho?o?|360)browser/i],[[l,"360 "+x]],[/(oculus|samsung|sailfish|huawei)browser\/([\w\.]+)/i],[[l,/(.+)/,"$1 "+x],p],[/(comodo_dragon)\/([\w\.]+)/i],[[l,/_/g," "],p],[/(electron)\/([\w\.]+) safari/i,/(tesla)(?: qtcarbrowser|\/(20\d\d\.[-\w\.]+))/i,/m?(qqbrowser|baiduboxapp|2345Explorer)[\/ ]?([\w\.]+)/i],[l,p],[/(metasr)[\/ ]?([\w\.]+)/i,/(lbbrowser)/i,/\[(linkedin)app\]/i],[l],[/((?:fban\/fbios|fb_iab\/fb4a)(?!.+fbav)|;fbav\/([\w\.]+);)/i],[[l,j],p],[/(kakao(?:talk|story))[\/ ]([\w\.]+)/i,/(naver)\(.*?(\d+\.[\w\.]+).*\)/i,/safari (line)\/([\w\.]+)/i,/\b(line)\/([\w\.]+)\/iab/i,/(chromium|instagram)[\/ ]([-\w\.]+)/i],[l,p],[/\bgsa\/([\w\.]+) .*safari\//i],[p,[l,"GSA"]],[/musical_ly(?:.+app_?version\/|_)([\w\.]+)/i],[p,[l,"TikTok"]],[/headlesschrome(?:\/([\w\.]+)| )/i],[p,[l,P+" Headless"]],[/ wv\).+(chrome)\/([\w\.]+)/i],[[l,P+" WebView"],p],[/droid.+ version\/([\w\.]+)\b.+(?:mobile safari|safari)/i],[p,[l,"Android "+x]],[/(chrome|omniweb|arora|[tizenoka]{5} ?browser)\/v?([\w\.]+)/i],[l,p],[/version\/([\w\.\,]+) .*mobile\/\w+ (safari)/i],[p,[l,"Mobile Safari"]],[/version\/([\w(\.|\,)]+) .*(mobile ?safari|safari)/i],[p,l],[/webkit.+?(mobile ?safari|safari)(\/[\w\.]+)/i],[l,[p,H,{"1.0":"/8",1.2:"/1",1.3:"/3","2.0":"/412","2.0.2":"/416","2.0.3":"/417","2.0.4":"/419","?":"/"}]],[/(webkit|khtml)\/([\w\.]+)/i],[l,p],[/(navigator|netscape\d?)\/([-\w\.]+)/i],[[l,"Netscape"],p],[/mobile vr; rv:([\w\.]+)\).+firefox/i],[p,[l,T+" Reality"]],[/ekiohf.+(flow)\/([\w\.]+)/i,/(swiftfox)/i,/(icedragon|iceweasel|camino|chimera|fennec|maemo browser|minimo|conkeror|klar)[\/ ]?([\w\.\+]+)/i,/(seamonkey|k-meleon|icecat|iceape|firebird|phoenix|palemoon|basilisk|waterfox)\/([-\w\.]+)$/i,/(firefox)\/([\w\.]+)/i,/(mozilla)\/([\w\.]+) .+rv\:.+gecko\/\d+/i,/(polaris|lynx|dillo|icab|doris|amaya|w3m|netsurf|sleipnir|obigo|mosaic|(?:go|ice|up)[\. ]?browser)[-\/ ]?v?([\w\.]+)/i,/(links) \(([\w\.]+)/i,/panasonic;(viera)/i],[l,p],[/(cobalt)\/([\w\.]+)/i],[l,[p,/master.|lts./,""]]],cpu:[[/(?:(amd|x(?:(?:86|64)[-_])?|wow|win)64)[;\)]/i],[[h,"amd64"]],[/(ia32(?=;))/i],[[h,J]],[/((?:i[346]|x)86)[;\)]/i],[[h,"ia32"]],[/\b(aarch64|arm(v?8e?l?|_?64))\b/i],[[h,"arm64"]],[/\b(arm(?:v[67])?ht?n?[fl]p?)\b/i],[[h,"armhf"]],[/windows (ce|mobile); ppc;/i],[[h,"arm"]],[/((?:ppc|powerpc)(?:64)?)(?: mac|;|\))/i],[[h,/ower/,"",J]],[/(sun4\w)[;\)]/i],[[h,"sparc"]],[/((?:avr32|ia64(?=;))|68k(?=\))|\barm(?=v(?:[1-7]|[5-7]1)l?|;|eabi)|(?=atmel )avr|(?:irix|mips|sparc)(?:64)?\b|pa-risc)/i],[[h,J]]],device:[[/\b(sch-i[89]0\d|shw-m380s|sm-[ptx]\w{2,4}|gt-[pn]\d{2,4}|sgh-t8[56]9|nexus 10)/i],[u,[f,A],[d,g]],[/\b((?:s[cgp]h|gt|sm)-\w+|sc[g-]?[\d]+a?|galaxy nexus)/i,/samsung[- ]([-\w]+)/i,/sec-(sgh\w+)/i],[u,[f,A],[d,m]],[/(?:\/|\()(ip(?:hone|od)[\w, ]*)(?:\/|;)/i],[u,[f,S],[d,m]],[/\((ipad);[-\w\),; ]+apple/i,/applecoremedia\/[\w\.]+ \((ipad)/i,/\b(ipad)\d\d?,\d\d?[;\]].+ios/i],[u,[f,S],[d,g]],[/(macintosh);/i],[u,[f,S]],[/\b(sh-?[altvz]?\d\d[a-ekm]?)/i],[u,[f,L],[d,m]],[/\b((?:ag[rs][23]?|bah2?|sht?|btv)-a?[lw]\d{2})\b(?!.+d\/s)/i],[u,[f,N],[d,g]],[/(?:huawei|honor)([-\w ]+)[;\)]/i,/\b(nexus 6p|\w{2,4}e?-[atu]?[ln][\dx][012359c][adn]?)\b(?!.+d\/s)/i],[u,[f,N],[d,m]],[/\b(poco[\w ]+)(?: bui|\))/i,/\b; (\w+) build\/hm\1/i,/\b(hm[-_ ]?note?[_ ]?(?:\d\w)?) bui/i,/\b(redmi[\-_ ]?(?:note|k)?[\w_ ]+)(?: bui|\))/i,/\b(mi[-_ ]?(?:a\d|one|one[_ ]plus|note lte|max|cc)?[_ ]?(?:\d?\w?)[_ ]?(?:plus|se|lite)?)(?: bui|\))/i],[[u,/_/g," "],[f,U],[d,m]],[/\b(mi[-_ ]?(?:pad)(?:[\w_ ]+))(?: bui|\))/i],[[u,/_/g," "],[f,U],[d,g]],[/; (\w+) bui.+ oppo/i,/\b(cph[12]\d{3}|p(?:af|c[al]|d\w|e[ar])[mt]\d0|x9007|a101op)\b/i],[u,[f,"OPPO"],[d,m]],[/vivo (\w+)(?: bui|\))/i,/\b(v[12]\d{3}\w?[at])(?: bui|;)/i],[u,[f,"Vivo"],[d,m]],[/\b(rmx[12]\d{3})(?: bui|;|\))/i],[u,[f,"Realme"],[d,m]],[/\b(milestone|droid(?:[2-4x]| (?:bionic|x2|pro|razr))?:?( 4g)?)\b[\w ]+build\//i,/\bmot(?:orola)?[- ](\w*)/i,/((?:moto[\w\(\) ]+|xt\d{3,4}|nexus 6)(?= bui|\)))/i],[u,[f,_],[d,m]],[/\b(mz60\d|xoom[2 ]{0,2}) build\//i],[u,[f,_],[d,g]],[/((?=lg)?[vl]k\-?\d{3}) bui| 3\.[-\w; ]{10}lg?-([06cv9]{3,4})/i],[u,[f,O],[d,g]],[/(lm(?:-?f100[nv]?|-[\w\.]+)(?= bui|\))|nexus [45])/i,/\blg[-e;\/ ]+((?!browser|netcast|android tv)\w+)/i,/\blg-?([\d\w]+) bui/i],[u,[f,O],[d,m]],[/(ideatab[-\w ]+)/i,/lenovo ?(s[56]000[-\w]+|tab(?:[\w ]+)|yt[-\d\w]{6}|tb[-\d\w]{6})/i],[u,[f,"Lenovo"],[d,g]],[/(?:maemo|nokia).*(n900|lumia \d+)/i,/nokia[-_ ]?([-\w\.]*)/i],[[u,/_/g," "],[f,"Nokia"],[d,m]],[/(pixel c)\b/i],[u,[f,R],[d,g]],[/droid.+; (pixel[\daxl ]{0,6})(?: bui|\))/i],[u,[f,R],[d,m]],[/droid.+ (a?\d[0-2]{2}so|[c-g]\d{4}|so[-gl]\w+|xq-a\w[4-7][12])(?= bui|\).+chrome\/(?![1-6]{0,1}\d\.))/i],[u,[f,M],[d,m]],[/sony tablet [ps]/i,/\b(?:sony)?sgp\w+(?: bui|\))/i],[[u,"Xperia Tablet"],[f,M],[d,g]],[/ (kb2005|in20[12]5|be20[12][59])\b/i,/(?:one)?(?:plus)? (a\d0\d\d)(?: b|\))/i],[u,[f,"OnePlus"],[d,m]],[/(alexa)webm/i,/(kf[a-z]{2}wi|aeo[c-r]{2})( bui|\))/i,/(kf[a-z]+)( bui|\)).+silk\//i],[u,[f,w],[d,g]],[/((?:sd|kf)[0349hijorstuw]+)( bui|\)).+silk\//i],[[u,/(.+)/g,"Fire Phone $1"],[f,w],[d,m]],[/(playbook);[-\w\),; ]+(rim)/i],[u,f,[d,g]],[/\b((?:bb[a-f]|st[hv])100-\d)/i,/\(bb10; (\w+)/i],[u,[f,E],[d,m]],[/(?:\b|asus_)(transfo[prime ]{4,10} \w+|eeepc|slider \w+|nexus 7|padfone|p00[cj])/i],[u,[f,C],[d,g]],[/ (z[bes]6[027][012][km][ls]|zenfone \d\w?)\b/i],[u,[f,C],[d,m]],[/(nexus 9)/i],[u,[f,"HTC"],[d,g]],[/(htc)[-;_ ]{1,2}([\w ]+(?=\)| bui)|\w+)/i,/(zte)[- ]([\w ]+?)(?: bui|\/|\))/i,/(alcatel|geeksphone|nexian|panasonic(?!(?:;|\.))|sony(?!-bra))[-_ ]?([-\w]*)/i],[f,[u,/_/g," "],[d,m]],[/droid.+; ([ab][1-7]-?[0178a]\d\d?)/i],[u,[f,"Acer"],[d,g]],[/droid.+; (m[1-5] note) bui/i,/\bmz-([-\w]{2,})/i],[u,[f,"Meizu"],[d,m]],[/(blackberry|benq|palm(?=\-)|sonyericsson|acer|asus|dell|meizu|motorola|polytron)[-_ ]?([-\w]*)/i,/(hp) ([\w ]+\w)/i,/(asus)-?(\w+)/i,/(microsoft); (lumia[\w ]+)/i,/(lenovo)[-_ ]?([-\w]+)/i,/(jolla)/i,/(oppo) ?([\w ]+) bui/i],[f,u,[d,m]],[/(kobo)\s(ereader|touch)/i,/(archos) (gamepad2?)/i,/(hp).+(touchpad(?!.+tablet)|tablet)/i,/(kindle)\/([\w\.]+)/i,/(nook)[\w ]+build\/(\w+)/i,/(dell) (strea[kpr\d ]*[\dko])/i,/(le[- ]+pan)[- ]+(\w{1,9}) bui/i,/(trinity)[- ]*(t\d{3}) bui/i,/(gigaset)[- ]+(q\w{1,9}) bui/i,/(vodafone) ([\w ]+)(?:\)| bui)/i],[f,u,[d,g]],[/(surface duo)/i],[u,[f,I],[d,g]],[/droid [\d\.]+; (fp\du?)(?: b|\))/i],[u,[f,"Fairphone"],[d,m]],[/(u304aa)/i],[u,[f,"AT&T"],[d,m]],[/\bsie-(\w*)/i],[u,[f,"Siemens"],[d,m]],[/\b(rct\w+) b/i],[u,[f,"RCA"],[d,g]],[/\b(venue[\d ]{2,7}) b/i],[u,[f,"Dell"],[d,g]],[/\b(q(?:mv|ta)\w+) b/i],[u,[f,"Verizon"],[d,g]],[/\b(?:barnes[& ]+noble |bn[rt])([\w\+ ]*) b/i],[u,[f,"Barnes & Noble"],[d,g]],[/\b(tm\d{3}\w+) b/i],[u,[f,"NuVision"],[d,g]],[/\b(k88) b/i],[u,[f,"ZTE"],[d,g]],[/\b(nx\d{3}j) b/i],[u,[f,"ZTE"],[d,m]],[/\b(gen\d{3}) b.+49h/i],[u,[f,"Swiss"],[d,m]],[/\b(zur\d{3}) b/i],[u,[f,"Swiss"],[d,g]],[/\b((zeki)?tb.*\b) b/i],[u,[f,"Zeki"],[d,g]],[/\b([yr]\d{2}) b/i,/\b(dragon[- ]+touch |dt)(\w{5}) b/i],[[f,"Dragon Touch"],u,[d,g]],[/\b(ns-?\w{0,9}) b/i],[u,[f,"Insignia"],[d,g]],[/\b((nxa|next)-?\w{0,9}) b/i],[u,[f,"NextBook"],[d,g]],[/\b(xtreme\_)?(v(1[045]|2[015]|[3469]0|7[05])) b/i],[[f,"Voice"],u,[d,m]],[/\b(lvtel\-)?(v1[12]) b/i],[[f,"LvTel"],u,[d,m]],[/\b(ph-1) /i],[u,[f,"Essential"],[d,m]],[/\b(v(100md|700na|7011|917g).*\b) b/i],[u,[f,"Envizen"],[d,g]],[/\b(trio[-\w\. ]+) b/i],[u,[f,"MachSpeed"],[d,g]],[/\btu_(1491) b/i],[u,[f,"Rotor"],[d,g]],[/(shield[\w ]+) b/i],[u,[f,"Nvidia"],[d,g]],[/(sprint) (\w+)/i],[f,u,[d,m]],[/(kin\.[onetw]{3})/i],[[u,/\./g," "],[f,I],[d,m]],[/droid.+; (cc6666?|et5[16]|mc[239][23]x?|vc8[03]x?)\)/i],[u,[f,F],[d,g]],[/droid.+; (ec30|ps20|tc[2-8]\d[kx])\)/i],[u,[f,F],[d,m]],[/smart-tv.+(samsung)/i],[f,[d,b]],[/hbbtv.+maple;(\d+)/i],[[u,/^/,"SmartTV"],[f,A],[d,b]],[/(nux; netcast.+smarttv|lg (netcast\.tv-201\d|android tv))/i],[[f,O],[d,b]],[/(apple) ?tv/i],[f,[u,S+" TV"],[d,b]],[/crkey/i],[[u,P+"cast"],[f,R],[d,b]],[/droid.+aft(\w)( bui|\))/i],[u,[f,w],[d,b]],[/\(dtv[\);].+(aquos)/i,/(aquos-tv[\w ]+)\)/i],[u,[f,L],[d,b]],[/(bravia[\w ]+)( bui|\))/i],[u,[f,M],[d,b]],[/(mitv-\w{5}) bui/i],[u,[f,U],[d,b]],[/Hbbtv.*(technisat) (.*);/i],[f,u,[d,b]],[/\b(roku)[\dx]*[\)\/]((?:dvp-)?[\d\.]*)/i,/hbbtv\/\d+\.\d+\.\d+ +\([\w\+ ]*; *([\w\d][^;]*);([^;]*)/i],[[f,W],[u,W],[d,b]],[/\b(android tv|smart[- ]?tv|opera tv|tv; rv:)\b/i],[[d,b]],[/(ouya)/i,/(nintendo) ([wids3utch]+)/i],[f,u,[d,v]],[/droid.+; (shield) bui/i],[u,[f,"Nvidia"],[d,v]],[/(playstation [345portablevi]+)/i],[u,[f,M],[d,v]],[/\b(xbox(?: one)?(?!; xbox))[\); ]/i],[u,[f,I],[d,v]],[/((pebble))app/i],[f,u,[d,y]],[/(watch)(?: ?os[,\/]|\d,\d\/)[\d\.]+/i],[u,[f,S],[d,y]],[/droid.+; (glass) \d/i],[u,[f,R],[d,y]],[/droid.+; (wt63?0{2,3})\)/i],[u,[f,F],[d,y]],[/(quest( 2| pro)?)/i],[u,[f,j],[d,y]],[/(tesla)(?: qtcarbrowser|\/[-\w\.]+)/i],[f,[d,k]],[/(aeobc)\b/i],[u,[f,w],[d,k]],[/droid .+?; ([^;]+?)(?: bui|\) applew).+? mobile safari/i],[u,[d,m]],[/droid .+?; ([^;]+?)(?: bui|\) applew).+?(?! mobile) safari/i],[u,[d,g]],[/\b((tablet|tab)[;\/]|focus\/\d(?!.+mobile))/i],[[d,g]],[/(phone|mobile(?:[;\/]| [ \w\/\.]*safari)|pda(?=.+windows ce))/i],[[d,m]],[/(android[-\w\. ]{0,9});.+buil/i],[u,[f,"Generic"]]],engine:[[/windows.+ edge\/([\w\.]+)/i],[p,[l,"EdgeHTML"]],[/webkit\/537\.36.+chrome\/(?!27)([\w\.]+)/i],[p,[l,"Blink"]],[/(presto)\/([\w\.]+)/i,/(webkit|trident|netfront|netsurf|amaya|lynx|w3m|goanna)\/([\w\.]+)/i,/ekioh(flow)\/([\w\.]+)/i,/(khtml|tasman|links)[\/ ]\(?([\w\.]+)/i,/(icab)[\/ ]([23]\.[\d\.]+)/i,/\b(libweb)/i],[l,p],[/rv\:([\w\.]{1,9})\b.+(gecko)/i],[p,l]],os:[[/microsoft (windows) (vista|xp)/i],[l,p],[/(windows) nt 6\.2; (arm)/i,/(windows (?:phone(?: os)?|mobile))[\/ ]?([\d\.\w ]*)/i,/(windows)[\/ ]?([ntce\d\. ]+\w)(?!.+xbox)/i],[l,[p,H,G]],[/(win(?=3|9|n)|win 9x )([nt\d\.]+)/i],[[l,"Windows"],[p,H,G]],[/ip[honead]{2,4}\b(?:.*os ([\w]+) like mac|; opera)/i,/ios;fbsv\/([\d\.]+)/i,/cfnetwork\/.+darwin/i],[[p,/_/g,"."],[l,"iOS"]],[/(mac os x) ?([\w\. ]*)/i,/(macintosh|mac_powerpc\b)(?!.+haiku)/i],[[l,z],[p,/_/g,"."]],[/droid ([\w\.]+)\b.+(android[- ]x86|harmonyos)/i],[p,l],[/(android|webos|qnx|bada|rim tablet os|maemo|meego|sailfish)[-\/ ]?([\w\.]*)/i,/(blackberry)\w*\/([\w\.]*)/i,/(tizen|kaios)[\/ ]([\w\.]+)/i,/\((series40);/i],[l,p],[/\(bb(10);/i],[p,[l,E]],[/(?:symbian ?os|symbos|s60(?=;)|series60)[-\/ ]?([\w\.]*)/i],[p,[l,"Symbian"]],[/mozilla\/[\d\.]+ \((?:mobile|tablet|tv|mobile; [\w ]+); rv:.+ gecko\/([\w\.]+)/i],[p,[l,T+" OS"]],[/web0s;.+rt(tv)/i,/\b(?:hp)?wos(?:browser)?\/([\w\.]+)/i],[p,[l,"webOS"]],[/watch(?: ?os[,\/]|\d,\d\/)([\d\.]+)/i],[p,[l,"watchOS"]],[/crkey\/([\d\.]+)/i],[p,[l,P+"cast"]],[/(cros) [\w]+(?:\)| ([\w\.]+)\b)/i],[[l,B],p],[/panasonic;(viera)/i,/(netrange)mmh/i,/(nettv)\/(\d+\.[\w\.]+)/i,/(nintendo|playstation) ([wids345portablevuch]+)/i,/(xbox); +xbox ([^\);]+)/i,/\b(joli|palm)\b ?(?:os)?\/?([\w\.]*)/i,/(mint)[\/\(\) ]?(\w*)/i,/(mageia|vectorlinux)[; ]/i,/([kxln]?ubuntu|debian|suse|opensuse|gentoo|arch(?= linux)|slackware|fedora|mandriva|centos|pclinuxos|red ?hat|zenwalk|linpus|raspbian|plan 9|minix|risc os|contiki|deepin|manjaro|elementary os|sabayon|linspire)(?: gnu\/linux)?(?: enterprise)?(?:[- ]linux)?(?:-gnu)?[-\/ ]?(?!chrom|package)([-\w\.]*)/i,/(hurd|linux) ?([\w\.]*)/i,/(gnu) ?([\w\.]*)/i,/\b([-frentopcghs]{0,5}bsd|dragonfly)[\/ ]?(?!amd|[ix346]{1,2}86)([\w\.]*)/i,/(haiku) (\w+)/i],[l,p],[/(sunos) ?([\w\.\d]*)/i],[[l,"Solaris"],p],[/((?:open)?solaris)[-\/ ]?([\w\.]*)/i,/(aix) ((\d)(?=\.|\)| )[\w\.])*/i,/\b(beos|os\/2|amigaos|morphos|openvms|fuchsia|hp-ux|serenityos)/i,/(unix) ?([\w\.]*)/i],[l,p]]},Z=function e(t,v){if(typeof t===o&&(v=t,t=r),!(this instanceof e))return new e(t,v).getResult();var b=typeof n!==a&&n.navigator?n.navigator:r,y=t||(b&&b.userAgent?b.userAgent:""),k=b&&b.userAgentData?b.userAgentData:r,w=v?function(e,t){var n={};for(var r in e)t[r]&&t[r].length%2===0?n[r]=t[r].concat(e[r]):n[r]=e[r];return n}(Q,v):Q,S=b&&b.userAgent==y;return this.getBrowser=function(){var e={};return e[l]=r,e[p]=r,q.call(e,y,w.browser),e[c]=function(e){return typeof e===s?e.replace(/[^\d\.]/g,"").split(".")[0]:r}(e[p]),S&&b&&b.brave&&typeof b.brave.isBrave==i&&(e[l]="Brave"),e},this.getCPU=function(){var e={};return e[h]=r,q.call(e,y,w.cpu),e},this.getDevice=function(){var e={};return e[f]=r,e[u]=r,e[d]=r,q.call(e,y,w.device),S&&!e[d]&&k&&k.mobile&&(e[d]=m),S&&"Macintosh"==e[u]&&b&&typeof b.standalone!==a&&b.maxTouchPoints&&b.maxTouchPoints>2&&(e[u]="iPad",e[d]=g),e},this.getEngine=function(){var e={};return e[l]=r,e[p]=r,q.call(e,y,w.engine),e},this.getOS=function(){var e={};return e[l]=r,e[p]=r,q.call(e,y,w.os),S&&!e[l]&&k&&"Unknown"!=k.platform&&(e[l]=k.platform.replace(/chrome os/i,B).replace(/macos/i,z)),e},this.getResult=function(){return{ua:this.getUA(),browser:this.getBrowser(),engine:this.getEngine(),os:this.getOS(),device:this.getDevice(),cpu:this.getCPU()}},this.getUA=function(){return y},this.setUA=function(e){return y=typeof e===s&&e.length>350?W(e,350):e,this},this.setUA(y),this};Z.VERSION="1.0.35",Z.BROWSER=$([l,p,c]),Z.CPU=$([h]),Z.DEVICE=$([u,f,d,v,m,b,g,y,k]),Z.ENGINE=Z.OS=$([l,p]),e.exports&&(t=e.exports=Z),t.UAParser=Z;var K=typeof n!==a&&(n.jQuery||n.Zepto);if(K&&!K.ua){var Y=new Z;K.ua=Y.getResult(),K.ua.get=function(){return Y.getUA()},K.ua.set=function(e){Y.setUA(e);var t=Y.getResult();for(var n in t)K.ua[n]=t[n]}}}("object"===typeof window?window:N)}(Gi,Gi.exports);var Qi=O(Gi.exports);function Zi(e,t,n){var r=Sn({},e);return!0===r.audio&&(r.audio={}),!0===r.video&&(r.video={}),r.audio&&Ki(r.audio,t),r.video&&Ki(r.video,n),r}function Ki(e,t){return Object.keys(t).forEach((function(n){void 0===e[n]&&(e[n]=t[n])})),e}function Yi(e){var t={};if(e.video)if("object"===typeof e.video){var n={},r=n,i=e.video;Object.keys(i).forEach((function(e){if("resolution"===e)Ki(r,i.resolution);else r[e]=i[e]})),t.video=n}else t.video=e.video;else t.video=!1;return e.audio?"object"===typeof e.audio?t.audio=e.audio:t.audio=!0:t.audio=!1,t}function Xi(e){return ea.apply(this,arguments)}function ea(){return ea=E(i().mark((function e(t){var n,r,a,o,s,c,u=arguments;return i().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=u.length>1&&void 0!==u[1]?u[1]:200,!(r=ta())){e.next=15;break}return(a=r.createAnalyser()).fftSize=2048,o=a.frequencyBinCount,s=new Uint8Array(o),r.createMediaStreamSource(new MediaStream([t.mediaStreamTrack])).connect(a),e.next=11,na(n);case 11:return a.getByteTimeDomainData(s),c=s.some((function(e){return 128!==e&&0!==e})),r.close(),e.abrupt("return",!c);case 15:return e.abrupt("return",!1);case 16:case"end":return e.stop()}}),e)}))),ea.apply(this,arguments)}function ta(){var e="undefined"!==typeof window&&(window.AudioContext||window.webkitAudioContext);if(e)return new e({latencyHint:"interactive"})}function na(e){return ra.apply(this,arguments)}function ra(){return(ra=E(i().mark((function e(t){return i().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",new Promise((function(e){return setTimeout(e,t)})));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function ia(){return"addTransceiver"in RTCPeerConnection.prototype}function aa(){return"addTrack"in RTCPeerConnection.prototype}function oa(){var e=RTCRtpReceiver.getCapabilities("video"),t=!1,n=!1;if(e){var r,i=u(e.codecs);try{for(i.s();!(r=i.n()).done;){if("video/AV1"===r.value.mimeType){t=!0;break}}}catch(s){i.e(s)}finally{i.f()}var a,o=u(e.headerExtensions);try{for(o.s();!(a=o.n()).done;){if("https://aomediacodec.github.io/av1-rtp-spec/#dependency-descriptor-rtp-header-extension"===a.value.uri){n=!0;break}}}catch(s){o.e(s)}finally{o.f()}}return t&&n}function sa(e){return!!document&&(e||(e=document.createElement("audio")),"setSinkId"in e)}var ca={Chrome:"100",Chromium:"100",Safari:"15",Firefox:"100",Edge:"100",Brave:"1.40"};function ua(e){if(!pa())return!1;if(!("setCodecPreferences"in e))return!1;var t=Qi();if(!t.browser.name||!t.browser.version)return!1;var n=ca[t.browser.name];return!!n&&function(e,t){for(var n=e.split("."),r=t.split("."),i=Math.min(e.length,t.length),a=0;a<i;++a){var o=parseInt(n[a],10),s=parseInt(r[a],10);if(o>s)return 1;if(o<s)return-1}return n.length==r.length?0:n.length<r.length?-1:1}(t.browser.version,n)>=0}function la(){return!!pa()&&-1!==navigator.userAgent.indexOf("Firefox")}function da(){return!!pa()&&/^((?!chrome|android).)*safari/i.test(navigator.userAgent)}function fa(){return!!pa()&&/Tablet|iPad|Mobile|Android|BlackBerry/.test(navigator.userAgent)}function pa(){return"undefined"!==typeof document}function ha(){return"ReactNative"==navigator.product}function va(e){return e.hostname.endsWith(".livekit.cloud")}function ma(){if(global&&global.LiveKitReactNativeGlobal)return global.LiveKitReactNativeGlobal}function ga(){if(pa())return window.devicePixelRatio;if(ha()){var e=ma();if(e)return e.devicePixelRatio}return 1}function ba(e){var t,n=u(e);try{for(n.s();!(t=n.n()).done;){var r=t.value;r.target.handleResize(r)}}catch(i){n.e(i)}finally{n.f()}}function ya(e){var t,n=u(e);try{for(n.s();!(t=n.n()).done;){var r=t.value;r.target.handleVisibilityChanged(r)}}catch(i){n.e(i)}finally{n.f()}}var ka,wa,Sa=null,Ca=function(){return Sa||(Sa=new ResizeObserver(ba)),Sa},Ea=null,xa=function(){return Ea||(Ea=new IntersectionObserver(ya,{root:document,rootMargin:"0px"})),Ea};function Pa(){var e,t=cn.fromPartial({sdk:Nt.JS,protocol:9,version:"1.9.0"});return ha()&&(t.os=null!==(e=function(){if(ha()){var e=ma();return e?e.platform:void 0}}())&&void 0!==e?e:""),t}function Ta(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:16,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:16,n=arguments.length>2&&void 0!==arguments[2]&&arguments[2],r=arguments.length>3&&void 0!==arguments[3]&&arguments[3],i=document.createElement("canvas");i.width=e,i.height=t;var a=i.getContext("2d");null===a||void 0===a||a.fillRect(0,0,i.width,i.height),r&&a&&(a.beginPath(),a.arc(e/2,t/2,50,0,2*Math.PI,!0),a.closePath(),a.fillStyle="grey",a.fill());var o=s(i.captureStream().getTracks(),1)[0];if(!o)throw Error("Could not get empty media stream video track");return o.enabled=n,o}function Ra(){if(!wa){var e=new AudioContext,t=e.createOscillator(),n=e.createMediaStreamDestination();t.connect(n),t.start();var r=s(n.stream.getAudioTracks(),1);if(!(wa=r[0]))throw Error("Could not get empty media stream audio track");wa.enabled=!1}return wa}var Na=T((function e(t,n){var r=this;x(this,e),this.onFinally=n,this.promise=new Promise(function(){var e=E(i().mark((function e(n,a){return i().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r.resolve=n,r.reject=a,!t){e.next=5;break}return e.next=5,t(n,a);case 5:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}()).finally((function(){var e;return null===(e=r.onFinally)||void 0===e?void 0:e.call(r)}))}));var Oa=function(){function e(){x(this,e),this._locking=Promise.resolve(),this._locks=0}return T(e,[{key:"isLocked",value:function(){return this._locks>0}},{key:"lock",value:function(){var e,t=this;this._locks+=1;var n=new Promise((function(n){return e=function(){t._locks-=1,n()}})),r=this._locking.then((function(){return e}));return this._locking=this._locking.then((function(){return n})),r}}]),e}(),Ia=["syncState","trickle","offer","answer","simulate","leave"];function _a(e){var t=Ia.includes(e.$case);return L.trace("request allowed to bypass queue:",{canPass:t,req:e}),t}var Da=function(){function e(){x(this,e);var t=arguments.length>0&&void 0!==arguments[0]&&arguments[0];this.rtt=0,this.isConnected=!1,this.isReconnecting=!1,this.useJSON=t,this.requestQueue=new $n,this.queuedRequests=[],this.closingLock=new Oa}return T(e,[{key:"join",value:function(){var e=E(i().mark((function e(t,n,r,a){var o;return i().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.isConnected=!1,this.options=r,e.next=4,this.connect(t,n,r,a);case 4:return o=e.sent,e.abrupt("return",o);case 6:case"end":return e.stop()}}),e,this)})));return function(t,n,r,i){return e.apply(this,arguments)}}()},{key:"reconnect",value:function(){var e=E(i().mark((function e(t,n,r,a){var o;return i().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this.options){e.next=3;break}return L.warn("attempted to reconnect without signal options being set, ignoring"),e.abrupt("return");case 3:return this.isReconnecting=!0,this.clearPingInterval(),e.next=7,this.connect(t,n,Sn(Sn({},this.options),{},{reconnect:!0,sid:r,reconnectReason:a}));case 7:return o=e.sent,e.abrupt("return",o);case 9:case"end":return e.stop()}}),e,this)})));return function(t,n,r,i){return e.apply(this,arguments)}}()},{key:"connect",value:function(e,t,n,r){var a=this;this.connectOptions=n,e.startsWith("http")&&(e=e.replace("http","ws")),e=e.replace(/\/$/,""),e+="/rtc";var o=function(e,t,n){var r,i=new URLSearchParams;i.set("access_token",e),n.reconnect&&(i.set("reconnect","1"),n.sid&&i.set("sid",n.sid));i.set("auto_subscribe",n.autoSubscribe?"1":"0"),i.set("sdk",ha()?"reactnative":"js"),i.set("version",t.version),i.set("protocol",t.protocol.toString()),t.deviceModel&&i.set("device_model",t.deviceModel);t.os&&i.set("os",t.os);t.osVersion&&i.set("os_version",t.osVersion);t.browser&&i.set("browser",t.browser);t.browserVersion&&i.set("browser_version",t.browserVersion);void 0!==n.publishOnly&&i.set("publish",n.publishOnly);n.adaptiveStream&&i.set("adaptive_stream","1");n.reconnectReason&&i.set("reconnect_reason",n.reconnectReason.toString());(null===(r=navigator.connection)||void 0===r?void 0:r.type)&&i.set("network",navigator.connection.type);return"?".concat(i.toString())}(t,Pa(),n);return new Promise(function(){var t=E(i().mark((function t(s,c){var u;return i().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(u=function(){var e=E(i().mark((function e(){return i().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,a.close();case 2:c(new zi("room connection has been cancelled (signal)"));case 3:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),(null===r||void 0===r?void 0:r.aborted)&&u(),null===r||void 0===r||r.addEventListener("abort",u),L.debug("connecting to ".concat(e+o)),!a.ws){t.next=7;break}return t.next=7,a.close();case 7:a.ws=new WebSocket(e+o),a.ws.binaryType="arraybuffer",a.ws.onerror=function(){var t=E(i().mark((function t(n){var r,s;return i().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(a.isConnected){t.next=19;break}return t.prev=1,t.next=4,fetch("http".concat(e.substring(2),"/validate").concat(o));case 4:if(!(r=t.sent).status.toFixed(0).startsWith("4")){t.next=12;break}return t.next=8,r.text();case 8:s=t.sent,c(new zi(s,0,r.status)),t.next=13;break;case 12:c(new zi("Internal error",2,r.status));case 13:t.next=18;break;case 15:t.prev=15,t.t0=t.catch(1),c(new zi("server was not reachable",1));case 18:return t.abrupt("return");case 19:a.handleWSError(n);case 20:case"end":return t.stop()}}),t,null,[[1,15]])})));return function(e){return t.apply(this,arguments)}}(),a.ws.onmessage=function(){var e=E(i().mark((function e(t){var o,l,d,f,p,h,v;return i().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if("string"!==typeof t.data){e.next=5;break}h=JSON.parse(t.data),p=ni.fromJSON(h),e.next=11;break;case 5:if(!(t.data instanceof ArrayBuffer)){e.next=9;break}p=ni.decode(new Uint8Array(t.data)),e.next=11;break;case 9:return L.error("could not decode websocket message: ".concat(typeof t.data)),e.abrupt("return");case 11:if(a.isConnected){e.next=16;break}if(v=!1,"join"===(null===(o=p.message)||void 0===o?void 0:o.$case)?(a.isConnected=!0,null===r||void 0===r||r.removeEventListener("abort",u),a.pingTimeoutDuration=p.message.join.pingTimeout,a.pingIntervalDuration=p.message.join.pingInterval,a.pingTimeoutDuration&&a.pingTimeoutDuration>0&&(L.debug("ping config",{timeout:a.pingTimeoutDuration,interval:a.pingIntervalDuration}),a.startPingInterval()),s(p.message.join)):n.reconnect?(a.isConnected=!0,null===r||void 0===r||r.removeEventListener("abort",u),a.startPingInterval(),"reconnect"===(null===(l=p.message)||void 0===l?void 0:l.$case)?s(null===(d=p.message)||void 0===d?void 0:d.reconnect):(s(),v=!0)):n.reconnect||c(new zi("did not receive join response, got ".concat(null===(f=p.message)||void 0===f?void 0:f.$case," instead"))),v){e.next=16;break}return e.abrupt("return");case 16:if(!a.signalLatency){e.next=19;break}return e.next=19,na(a.signalLatency);case 19:a.handleSignalResponse(p);case 20:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),a.ws.onclose=function(e){a.isConnected&&(L.debug("websocket connection closed: ".concat(e.reason)),a.isConnected=!1,a.onClose&&a.onClose(e.reason),a.ws=void 0)};case 12:case"end":return t.stop()}}),t)})));return function(e,n){return t.apply(this,arguments)}}())}},{key:"close",value:function(){var e=E(i().mark((function e(){var t,n,r=this;return i().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.closingLock.lock();case 2:if(t=e.sent,e.prev=3,this.isConnected=!1,!this.ws){e.next=13;break}return this.ws.onclose=null,this.ws.onmessage=null,this.ws.onopen=null,n=new Promise((function(e){r.ws?r.ws.onclose=e:e(!0)})),this.ws.close(),e.next=13,Promise.race([n,na(250)]);case 13:this.ws=void 0,this.clearPingInterval();case 15:return e.prev=15,t(),e.finish(15);case 18:case"end":return e.stop()}}),e,this,[[3,,15,18]])})));return function(){return e.apply(this,arguments)}}()},{key:"sendOffer",value:function(e){L.debug("sending offer",e),this.sendRequest({$case:"offer",offer:La(e)})}},{key:"sendAnswer",value:function(e){return L.debug("sending answer"),this.sendRequest({$case:"answer",answer:La(e)})}},{key:"sendIceCandidate",value:function(e,t){return L.trace("sending ice candidate",e),this.sendRequest({$case:"trickle",trickle:{candidateInit:JSON.stringify(e),target:t}})}},{key:"sendMuteTrack",value:function(e,t){return this.sendRequest({$case:"mute",mute:{sid:e,muted:t}})}},{key:"sendAddTrack",value:function(e){return this.sendRequest({$case:"addTrack",addTrack:ii.fromPartial(e)})}},{key:"sendUpdateLocalMetadata",value:function(e,t){return this.sendRequest({$case:"updateMetadata",updateMetadata:{metadata:e,name:t}})}},{key:"sendUpdateTrackSettings",value:function(e){this.sendRequest({$case:"trackSetting",trackSetting:e})}},{key:"sendUpdateSubscription",value:function(e){return this.sendRequest({$case:"subscription",subscription:e})}},{key:"sendSyncState",value:function(e){return this.sendRequest({$case:"syncState",syncState:e})}},{key:"sendUpdateVideoLayers",value:function(e,t){return this.sendRequest({$case:"updateLayers",updateLayers:{trackSid:e,layers:t}})}},{key:"sendUpdateSubscriptionPermissions",value:function(e,t){return this.sendRequest({$case:"subscriptionPermission",subscriptionPermission:{allParticipants:e,trackPermissions:t}})}},{key:"sendSimulateScenario",value:function(e){return this.sendRequest({$case:"simulate",simulate:e})}},{key:"sendPing",value:function(){return Promise.all([this.sendRequest({$case:"ping",ping:Date.now()}),this.sendRequest({$case:"pingReq",pingReq:{timestamp:Date.now(),rtt:this.rtt}})])}},{key:"sendLeave",value:function(){return this.sendRequest({$case:"leave",leave:{canReconnect:!1,reason:Ct.CLIENT_INITIATED}})}},{key:"sendRequest",value:function(){var e=E(i().mark((function e(t){var n,r,a=this,o=arguments;return i().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!(!(n=o.length>1&&void 0!==o[1]&&o[1])&&!_a(t))||!this.isReconnecting){e.next=5;break}return this.queuedRequests.push(E(i().mark((function e(){return i().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,a.sendRequest(t,!0);case 2:case"end":return e.stop()}}),e)})))),e.abrupt("return");case 5:if(n){e.next=8;break}return e.next=8,this.requestQueue.flush();case 8:if(!this.signalLatency){e.next=11;break}return e.next=11,na(this.signalLatency);case 11:if(this.ws&&this.ws.readyState===this.ws.OPEN){e.next=14;break}return L.error("cannot send signal request before connected, type: ".concat(null===t||void 0===t?void 0:t.$case)),e.abrupt("return");case 14:r={message:t};try{this.useJSON?this.ws.send(JSON.stringify(ti.toJSON(r))):this.ws.send(ti.encode(r).finish())}catch(Cs){L.error("error sending signal message",{error:Cs})}case 16:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"handleSignalResponse",value:function(e){var t,n,r=e.message;if(void 0!=r)if("answer"===r.$case){var i=Aa(r.answer);this.onAnswer&&this.onAnswer(i)}else if("offer"===r.$case){var a=Aa(r.offer);this.onOffer&&this.onOffer(a)}else if("trickle"===r.$case){var o=JSON.parse(r.trickle.candidateInit);this.onTrickle&&this.onTrickle(o,r.trickle.target)}else"update"===r.$case?this.onParticipantUpdate&&this.onParticipantUpdate(null!==(t=r.update.participants)&&void 0!==t?t:[]):"trackPublished"===r.$case?this.onLocalTrackPublished&&this.onLocalTrackPublished(r.trackPublished):"speakersChanged"===r.$case?this.onSpeakersChanged&&this.onSpeakersChanged(null!==(n=r.speakersChanged.speakers)&&void 0!==n?n:[]):"leave"===r.$case?this.onLeave&&this.onLeave(r.leave):"mute"===r.$case?this.onRemoteMuteChanged&&this.onRemoteMuteChanged(r.mute.sid,r.mute.muted):"roomUpdate"===r.$case?this.onRoomUpdate&&r.roomUpdate.room&&this.onRoomUpdate(r.roomUpdate.room):"connectionQuality"===r.$case?this.onConnectionQuality&&this.onConnectionQuality(r.connectionQuality):"streamStateUpdate"===r.$case?this.onStreamStateUpdate&&this.onStreamStateUpdate(r.streamStateUpdate):"subscribedQualityUpdate"===r.$case?this.onSubscribedQualityUpdate&&this.onSubscribedQualityUpdate(r.subscribedQualityUpdate):"subscriptionPermissionUpdate"===r.$case?this.onSubscriptionPermissionUpdate&&this.onSubscriptionPermissionUpdate(r.subscriptionPermissionUpdate):"refreshToken"===r.$case?this.onTokenRefresh&&this.onTokenRefresh(r.refreshToken):"trackUnpublished"===r.$case?this.onLocalTrackUnpublished&&this.onLocalTrackUnpublished(r.trackUnpublished):"pong"===r.$case?this.resetPingTimeout():"pongResp"===r.$case?(this.rtt=Date.now()-r.pongResp.lastPingTimestamp,this.resetPingTimeout()):L.debug("unsupported message",r);else L.debug("received unsupported message")}},{key:"setReconnected",value:function(){for(;this.queuedRequests.length>0;){var e=this.queuedRequests.shift();e&&this.requestQueue.run(e)}this.isReconnecting=!1}},{key:"handleWSError",value:function(e){L.error("websocket error",e)}},{key:"resetPingTimeout",value:function(){var e=this;this.clearPingTimeout(),this.pingTimeoutDuration?this.pingTimeout=Hi.setTimeout((function(){L.warn("ping timeout triggered. last pong received at: ".concat(new Date(Date.now()-1e3*e.pingTimeoutDuration).toUTCString())),e.onClose&&e.onClose("ping timeout")}),1e3*this.pingTimeoutDuration):L.warn("ping timeout duration not set")}},{key:"clearPingTimeout",value:function(){this.pingTimeout&&Hi.clearTimeout(this.pingTimeout)}},{key:"startPingInterval",value:function(){var e=this;this.clearPingInterval(),this.resetPingTimeout(),this.pingIntervalDuration?(L.debug("start ping interval"),this.pingInterval=Hi.setInterval((function(){e.sendPing()}),1e3*this.pingIntervalDuration)):L.warn("ping interval duration not set")}},{key:"clearPingInterval",value:function(){L.debug("clearing ping interval"),this.clearPingTimeout(),this.pingInterval&&Hi.clearInterval(this.pingInterval)}}]),e}();function Aa(e){var t={type:"offer",sdp:e.sdp};switch(e.type){case"answer":case"offer":case"pranswer":case"rollback":t.type=e.type}return t}function La(e){return{sdp:e.sdp,type:e.type}}var Ma="default",Ua=function(){function e(){x(this,e)}return T(e,[{key:"getDevices",value:function(){var t=E(i().mark((function t(n){var r,a,o,s,c,u=arguments;return i().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(r=!(u.length>1&&void 0!==u[1])||u[1],!((null===(a=e.userMediaPromiseMap)||void 0===a?void 0:a.size)>0)){t.next=16;break}if(L.debug("awaiting getUserMedia promise"),t.prev=3,!n){t.next=9;break}return t.next=7,e.userMediaPromiseMap.get(n);case 7:t.next=11;break;case 9:return t.next=11,Promise.all(e.userMediaPromiseMap.values());case 11:t.next=16;break;case 13:t.prev=13,t.t0=t.catch(3),L.warn("error waiting for media permissons");case 16:return t.next=18,navigator.mediaDevices.enumerateDevices();case 18:if(o=t.sent,!r||!n||e.userMediaPromiseMap.get(n)&&da()){t.next=30;break}if(!(0===o.length||o.some((function(e){var t=""===e.label,r=!n||e.kind===n;return t&&r})))){t.next=30;break}return s={video:"audioinput"!==n&&"audiooutput"!==n,audio:"videoinput"!==n},t.next=25,navigator.mediaDevices.getUserMedia(s);case 25:return c=t.sent,t.next=28,navigator.mediaDevices.enumerateDevices();case 28:o=t.sent,c.getTracks().forEach((function(e){e.stop()}));case 30:return n&&(o=o.filter((function(e){return e.kind===n}))),t.abrupt("return",o);case 32:case"end":return t.stop()}}),t,null,[[3,13]])})));return function(e){return t.apply(this,arguments)}}()},{key:"normalizeDeviceId",value:function(){var e=E(i().mark((function e(t,n,r){var a,o;return i().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n===Ma){e.next=2;break}return e.abrupt("return",n);case 2:return e.next=4,this.getDevices(t);case 4:return a=e.sent,o=a.find((function(e){return e.groupId===r&&e.deviceId!==Ma})),e.abrupt("return",null===o||void 0===o?void 0:o.deviceId);case 7:case"end":return e.stop()}}),e,this)})));return function(t,n,r){return e.apply(this,arguments)}}()}],[{key:"getInstance",value:function(){return void 0===this.instance&&(this.instance=new e),this.instance}}]),e}();Ua.mediaDeviceKinds=["audioinput","audiooutput","videoinput"],Ua.userMediaPromiseMap=new Map;var Fa={},ja={exports:{}},Ba=ja.exports={v:[{name:"version",reg:/^(\d*)$/}],o:[{name:"origin",reg:/^(\S*) (\d*) (\d*) (\S*) IP(\d) (\S*)/,names:["username","sessionId","sessionVersion","netType","ipVer","address"],format:"%s %s %d %s IP%d %s"}],s:[{name:"name"}],i:[{name:"description"}],u:[{name:"uri"}],e:[{name:"email"}],p:[{name:"phone"}],z:[{name:"timezones"}],r:[{name:"repeats"}],t:[{name:"timing",reg:/^(\d*) (\d*)/,names:["start","stop"],format:"%d %d"}],c:[{name:"connection",reg:/^IN IP(\d) (\S*)/,names:["version","ip"],format:"IN IP%d %s"}],b:[{push:"bandwidth",reg:/^(TIAS|AS|CT|RR|RS):(\d*)/,names:["type","limit"],format:"%s:%s"}],m:[{reg:/^(\w*) (\d*) ([\w/]*)(?: (.*))?/,names:["type","port","protocol","payloads"],format:"%s %d %s %s"}],a:[{push:"rtp",reg:/^rtpmap:(\d*) ([\w\-.]*)(?:\s*\/(\d*)(?:\s*\/(\S*))?)?/,names:["payload","codec","rate","encoding"],format:function(e){return e.encoding?"rtpmap:%d %s/%s/%s":e.rate?"rtpmap:%d %s/%s":"rtpmap:%d %s"}},{push:"fmtp",reg:/^fmtp:(\d*) ([\S| ]*)/,names:["payload","config"],format:"fmtp:%d %s"},{name:"control",reg:/^control:(.*)/,format:"control:%s"},{name:"rtcp",reg:/^rtcp:(\d*)(?: (\S*) IP(\d) (\S*))?/,names:["port","netType","ipVer","address"],format:function(e){return null!=e.address?"rtcp:%d %s IP%d %s":"rtcp:%d"}},{push:"rtcpFbTrrInt",reg:/^rtcp-fb:(\*|\d*) trr-int (\d*)/,names:["payload","value"],format:"rtcp-fb:%s trr-int %d"},{push:"rtcpFb",reg:/^rtcp-fb:(\*|\d*) ([\w-_]*)(?: ([\w-_]*))?/,names:["payload","type","subtype"],format:function(e){return null!=e.subtype?"rtcp-fb:%s %s %s":"rtcp-fb:%s %s"}},{push:"ext",reg:/^extmap:(\d+)(?:\/(\w+))?(?: (urn:ietf:params:rtp-hdrext:encrypt))? (\S*)(?: (\S*))?/,names:["value","direction","encrypt-uri","uri","config"],format:function(e){return"extmap:%d"+(e.direction?"/%s":"%v")+(e["encrypt-uri"]?" %s":"%v")+" %s"+(e.config?" %s":"")}},{name:"extmapAllowMixed",reg:/^(extmap-allow-mixed)/},{push:"crypto",reg:/^crypto:(\d*) ([\w_]*) (\S*)(?: (\S*))?/,names:["id","suite","config","sessionConfig"],format:function(e){return null!=e.sessionConfig?"crypto:%d %s %s %s":"crypto:%d %s %s"}},{name:"setup",reg:/^setup:(\w*)/,format:"setup:%s"},{name:"connectionType",reg:/^connection:(new|existing)/,format:"connection:%s"},{name:"mid",reg:/^mid:([^\s]*)/,format:"mid:%s"},{name:"msid",reg:/^msid:(.*)/,format:"msid:%s"},{name:"ptime",reg:/^ptime:(\d*(?:\.\d*)*)/,format:"ptime:%d"},{name:"maxptime",reg:/^maxptime:(\d*(?:\.\d*)*)/,format:"maxptime:%d"},{name:"direction",reg:/^(sendrecv|recvonly|sendonly|inactive)/},{name:"icelite",reg:/^(ice-lite)/},{name:"iceUfrag",reg:/^ice-ufrag:(\S*)/,format:"ice-ufrag:%s"},{name:"icePwd",reg:/^ice-pwd:(\S*)/,format:"ice-pwd:%s"},{name:"fingerprint",reg:/^fingerprint:(\S*) (\S*)/,names:["type","hash"],format:"fingerprint:%s %s"},{push:"candidates",reg:/^candidate:(\S*) (\d*) (\S*) (\d*) (\S*) (\d*) typ (\S*)(?: raddr (\S*) rport (\d*))?(?: tcptype (\S*))?(?: generation (\d*))?(?: network-id (\d*))?(?: network-cost (\d*))?/,names:["foundation","component","transport","priority","ip","port","type","raddr","rport","tcptype","generation","network-id","network-cost"],format:function(e){var t="candidate:%s %d %s %d %s %d typ %s";return t+=null!=e.raddr?" raddr %s rport %d":"%v%v",t+=null!=e.tcptype?" tcptype %s":"%v",null!=e.generation&&(t+=" generation %d"),t+=null!=e["network-id"]?" network-id %d":"%v",t+=null!=e["network-cost"]?" network-cost %d":"%v"}},{name:"endOfCandidates",reg:/^(end-of-candidates)/},{name:"remoteCandidates",reg:/^remote-candidates:(.*)/,format:"remote-candidates:%s"},{name:"iceOptions",reg:/^ice-options:(\S*)/,format:"ice-options:%s"},{push:"ssrcs",reg:/^ssrc:(\d*) ([\w_-]*)(?::(.*))?/,names:["id","attribute","value"],format:function(e){var t="ssrc:%d";return null!=e.attribute&&(t+=" %s",null!=e.value&&(t+=":%s")),t}},{push:"ssrcGroups",reg:/^ssrc-group:([\x21\x23\x24\x25\x26\x27\x2A\x2B\x2D\x2E\w]*) (.*)/,names:["semantics","ssrcs"],format:"ssrc-group:%s %s"},{name:"msidSemantic",reg:/^msid-semantic:\s?(\w*) (\S*)/,names:["semantic","token"],format:"msid-semantic: %s %s"},{push:"groups",reg:/^group:(\w*) (.*)/,names:["type","mids"],format:"group:%s %s"},{name:"rtcpMux",reg:/^(rtcp-mux)/},{name:"rtcpRsize",reg:/^(rtcp-rsize)/},{name:"sctpmap",reg:/^sctpmap:([\w_/]*) (\S*)(?: (\S*))?/,names:["sctpmapNumber","app","maxMessageSize"],format:function(e){return null!=e.maxMessageSize?"sctpmap:%s %s %s":"sctpmap:%s %s"}},{name:"xGoogleFlag",reg:/^x-google-flag:([^\s]*)/,format:"x-google-flag:%s"},{push:"rids",reg:/^rid:([\d\w]+) (\w+)(?: ([\S| ]*))?/,names:["id","direction","params"],format:function(e){return e.params?"rid:%s %s %s":"rid:%s %s"}},{push:"imageattrs",reg:new RegExp("^imageattr:(\\d+|\\*)[\\s\\t]+(send|recv)[\\s\\t]+(\\*|\\[\\S+\\](?:[\\s\\t]+\\[\\S+\\])*)(?:[\\s\\t]+(recv|send)[\\s\\t]+(\\*|\\[\\S+\\](?:[\\s\\t]+\\[\\S+\\])*))?"),names:["pt","dir1","attrs1","dir2","attrs2"],format:function(e){return"imageattr:%s %s %s"+(e.dir2?" %s %s":"")}},{name:"simulcast",reg:new RegExp("^simulcast:(send|recv) ([a-zA-Z0-9\\-_~;,]+)(?:\\s?(send|recv) ([a-zA-Z0-9\\-_~;,]+))?$"),names:["dir1","list1","dir2","list2"],format:function(e){return"simulcast:%s %s"+(e.dir2?" %s %s":"")}},{name:"simulcast_03",reg:/^simulcast:[\s\t]+([\S+\s\t]+)$/,names:["value"],format:"simulcast: %s"},{name:"framerate",reg:/^framerate:(\d+(?:$|\.\d+))/,format:"framerate:%s"},{name:"sourceFilter",reg:/^source-filter: *(excl|incl) (\S*) (IP4|IP6|\*) (\S*) (.*)/,names:["filterMode","netType","addressTypes","destAddress","srcList"],format:"source-filter: %s %s %s %s %s"},{name:"bundleOnly",reg:/^(bundle-only)/},{name:"label",reg:/^label:(.+)/,format:"label:%s"},{name:"sctpPort",reg:/^sctp-port:(\d+)$/,format:"sctp-port:%s"},{name:"maxMessageSize",reg:/^max-message-size:(\d+)$/,format:"max-message-size:%s"},{push:"tsRefClocks",reg:/^ts-refclk:([^\s=]*)(?:=(\S*))?/,names:["clksrc","clksrcExt"],format:function(e){return"ts-refclk:%s"+(null!=e.clksrcExt?"=%s":"")}},{name:"mediaClk",reg:/^mediaclk:(?:id=(\S*))? *([^\s=]*)(?:=(\S*))?(?: *rate=(\d+)\/(\d+))?/,names:["id","mediaClockName","mediaClockValue","rateNumerator","rateDenominator"],format:function(e){var t="mediaclk:";return t+=null!=e.id?"id=%s %s":"%v%s",t+=null!=e.mediaClockValue?"=%s":"",t+=null!=e.rateNumerator?" rate=%s":"",t+=null!=e.rateDenominator?"/%s":""}},{name:"keywords",reg:/^keywds:(.+)$/,format:"keywds:%s"},{name:"content",reg:/^content:(.+)/,format:"content:%s"},{name:"bfcpFloorCtrl",reg:/^floorctrl:(c-only|s-only|c-s)/,format:"floorctrl:%s"},{name:"bfcpConfId",reg:/^confid:(\d+)/,format:"confid:%s"},{name:"bfcpUserId",reg:/^userid:(\d+)/,format:"userid:%s"},{name:"bfcpFloorId",reg:/^floorid:(.+) (?:m-stream|mstrm):(.+)/,names:["id","mStream"],format:"floorid:%s mstrm:%s"},{push:"invalid",names:["value"]}]};Object.keys(Ba).forEach((function(e){Ba[e].forEach((function(e){e.reg||(e.reg=/(.*)/),e.format||(e.format="%s")}))}));var za=ja.exports;!function(e){var t=function(e){return String(Number(e))===e?Number(e):e},n=function(e,n,r){var i=e.name&&e.names;e.push&&!n[e.push]?n[e.push]=[]:i&&!n[e.name]&&(n[e.name]={});var a=e.push?{}:i?n[e.name]:n;!function(e,n,r,i){if(i&&!r)n[i]=t(e[1]);else for(var a=0;a<r.length;a+=1)null!=e[a+1]&&(n[r[a]]=t(e[a+1]))}(r.match(e.reg),a,e.names,e.name),e.push&&n[e.push].push(a)},r=za,i=RegExp.prototype.test.bind(/^([a-z])=(.*)/);e.parse=function(e){var t={},a=[],o=t;return e.split(/(\r\n|\r|\n)/).filter(i).forEach((function(e){var t=e[0],i=e.slice(2);"m"===t&&(a.push({rtp:[],fmtp:[]}),o=a[a.length-1]);for(var s=0;s<(r[t]||[]).length;s+=1){var c=r[t][s];if(c.reg.test(i))return n(c,o,i)}})),t.media=a,t};var a=function(e,n){var r=n.split(/=(.+)/,2);return 2===r.length?e[r[0]]=t(r[1]):1===r.length&&n.length>1&&(e[r[0]]=void 0),e};e.parseParams=function(e){return e.split(/;\s?/).reduce(a,{})},e.parseFmtpConfig=e.parseParams,e.parsePayloads=function(e){return e.toString().split(" ").map(Number)},e.parseRemoteCandidates=function(e){for(var n=[],r=e.split(" ").map(t),i=0;i<r.length;i+=3)n.push({component:r[i],ip:r[i+1],port:r[i+2]});return n},e.parseImageAttributes=function(e){return e.split(" ").map((function(e){return e.substring(1,e.length-1).split(",").reduce(a,{})}))},e.parseSimulcastStreamList=function(e){return e.split(";").map((function(e){return e.split(",").map((function(e){var n,r=!1;return"~"!==e[0]?n=t(e):(n=t(e.substring(1,e.length)),r=!0),{scid:n,paused:r}}))}))}}(Fa);var $a=za,Va=/%[sdv%]/g,Ja=function(e){var t=1,n=arguments,r=n.length;return e.replace(Va,(function(e){if(t>=r)return e;var i=n[t];switch(t+=1,e){case"%%":return"%";case"%s":return String(i);case"%d":return Number(i);case"%v":return""}}))},Wa=function(e,t,n){var r=[e+"="+(t.format instanceof Function?t.format(t.push?n:n[t.name]):t.format)];if(t.names)for(var i=0;i<t.names.length;i+=1){var a=t.names[i];t.name?r.push(n[t.name][a]):r.push(n[t.names[i]])}else r.push(n[t.name]);return Ja.apply(null,r)},qa=["v","o","s","i","u","e","p","c","b","t","r","z","a"],Ha=["i","c","b","a"],Ga=Fa,Qa=function(e,t){t=t||{},null==e.version&&(e.version=0),null==e.name&&(e.name=" "),e.media.forEach((function(e){null==e.payloads&&(e.payloads="")}));var n=t.outerOrder||qa,r=t.innerOrder||Ha,i=[];return n.forEach((function(t){$a[t].forEach((function(n){n.name in e&&null!=e[n.name]?i.push(Wa(t,n,e)):n.push in e&&null!=e[n.push]&&e[n.push].forEach((function(e){i.push(Wa(t,n,e))}))}))})),e.media.forEach((function(e){i.push(Wa("m",$a.m[0],e)),r.forEach((function(t){$a[t].forEach((function(n){n.name in e&&null!=e[n.name]?i.push(Wa(t,n,e)):n.push in e&&null!=e[n.push]&&e[n.push].forEach((function(e){i.push(Wa(t,n,e))}))}))}))})),i.join("\r\n")+"\r\n"},Za=Qa,Ka=Ga.parse;function Ya(e,t,n){var r,i,a;void 0===t&&(t=50),void 0===n&&(n={});var o=null!=(r=n.isImmediate)&&r,s=null!=(i=n.callback)&&i,c=n.maxWait,u=Date.now(),l=[];function d(){if(void 0!==c){var e=Date.now()-u;if(e+t>=c)return c-e}return t}var f=function(){var t=[].slice.call(arguments),n=this;return new Promise((function(r,i){var c=o&&void 0===a;if(void 0!==a&&clearTimeout(a),a=setTimeout((function(){if(a=void 0,u=Date.now(),!o){var r=e.apply(n,t);s&&s(r),l.forEach((function(e){return(0,e.resolve)(r)})),l=[]}}),d()),c){var f=e.apply(n,t);return s&&s(f),r(f)}l.push({resolve:r,reject:i})}))};return f.cancel=function(e){void 0!==a&&clearTimeout(a),l.forEach((function(t){return(0,t.reject)(e)})),l=[]},f}var Xa="negotiationStarted",eo="negotiationComplete",to=function(e){m(n,e);var t=b(n);function n(e){var r;return x(this,n),(r=t.call(this)).pendingCandidates=[],r.restartingIce=!1,r.renegotiate=!1,r.trackBitrates=[],r.remoteStereoMids=[],r.remoteNackMids=[],r.negotiate=Ya((function(e){r.emit(Xa);try{r.createAndSendOffer()}catch(Cs){if(!e)throw Cs;e(Cs)}}),100),r.pc=new RTCPeerConnection(e),r}return T(n,[{key:"isICEConnected",get:function(){return"connected"===this.pc.iceConnectionState||"completed"===this.pc.iceConnectionState}},{key:"addIceCandidate",value:function(){var e=E(i().mark((function e(t){return i().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!this.pc.remoteDescription||this.restartingIce){e.next=2;break}return e.abrupt("return",this.pc.addIceCandidate(t));case 2:this.pendingCandidates.push(t);case 3:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"setRemoteDescription",value:function(){var e=E(i().mark((function e(t){var n,r,a,o=this;return i().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return"offer"===t.type&&(n=ro(t),r=n.stereoMids,a=n.nackMids,this.remoteStereoMids=r,this.remoteNackMids=a),e.next=3,this.pc.setRemoteDescription(t);case 3:this.pendingCandidates.forEach((function(e){o.pc.addIceCandidate(e)})),this.pendingCandidates=[],this.restartingIce=!1,this.renegotiate?(this.renegotiate=!1,this.createAndSendOffer()):"answer"===t.type&&this.emit(eo);case 7:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"createAndSendOffer",value:function(){var e=E(i().mark((function e(t){var n,r,a,o,s=this;return i().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(void 0!==this.onOffer){e.next=2;break}return e.abrupt("return");case 2:if((null===t||void 0===t?void 0:t.iceRestart)&&(L.debug("restarting ICE"),this.restartingIce=!0),"have-local-offer"!==this.pc.signalingState){e.next=14;break}if(r=this.pc.remoteDescription,!(null===t||void 0===t?void 0:t.iceRestart)||!r){e.next=10;break}return e.next=8,this.pc.setRemoteDescription(r);case 8:e.next=12;break;case 10:return this.renegotiate=!0,e.abrupt("return");case 12:e.next=17;break;case 14:if("closed"!==this.pc.signalingState){e.next=17;break}return L.warn("could not createOffer with closed peer connection"),e.abrupt("return");case 17:return L.debug("starting to negotiate"),e.next=20,this.pc.createOffer(t);case 20:return a=e.sent,(o=Ka(null!==(n=a.sdp)&&void 0!==n?n:"")).media.forEach((function(e){"audio"===e.type?no(e,[],[]):"video"===e.type&&s.trackBitrates.some((function(t){if(!e.msid||!e.msid.includes(t.sid))return!1;var n=0;return e.rtp.some((function(e){return e.codec.toUpperCase()===t.codec.toUpperCase()&&(n=e.payload,!0)})),n>0&&(e.fmtp.some((function(e){return e.payload===n&&(e.config.includes("x-google-max-bitrate")||(e.config+=";x-google-max-bitrate=".concat(t.maxbr)),!0)}))||e.fmtp.push({payload:n,config:"x-google-max-bitrate=".concat(t.maxbr)})),!0}))})),this.trackBitrates=[],e.next=26,this.setMungedLocalDescription(a,Za(o));case 26:this.onOffer(a);case 27:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"createAndSetAnswer",value:function(){var e=E(i().mark((function e(){var t,n,r,a=this;return i().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.pc.createAnswer();case 2:return n=e.sent,(r=Ka(null!==(t=n.sdp)&&void 0!==t?t:"")).media.forEach((function(e){"audio"===e.type&&no(e,a.remoteStereoMids,a.remoteNackMids)})),e.next=7,this.setMungedLocalDescription(n,Za(r));case 7:return e.abrupt("return",n);case 8:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"setTrackCodecBitrate",value:function(e,t,n){this.trackBitrates.push({sid:e,codec:t,maxbr:n})}},{key:"close",value:function(){this.pc.onconnectionstatechange=null,this.pc.oniceconnectionstatechange=null,this.pc.close()}},{key:"setMungedLocalDescription",value:function(){var e=E(i().mark((function e(t,n){var r,a;return i().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=t.sdp,t.sdp=n,e.prev=2,L.debug("setting munged local description"),e.next=6,this.pc.setLocalDescription(t);case 6:return e.abrupt("return");case 9:e.prev=9,e.t0=e.catch(2),L.warn("not able to set ".concat(t.type,", falling back to unmodified sdp"),{error:e.t0}),t.sdp=r;case 13:return e.prev=13,e.next=16,this.pc.setLocalDescription(t);case 16:e.next=23;break;case 18:throw e.prev=18,e.t1=e.catch(13),a="unknown error",e.t1 instanceof Error?a=e.t1.message:"string"===typeof e.t1&&(a=e.t1),new qi(a);case 23:case"end":return e.stop()}}),e,this,[[2,9],[13,18]])})));return function(t,n){return e.apply(this,arguments)}}()}]),n}(zn);function no(e,t,n){var r=0;e.rtp.some((function(e){return"opus"===e.codec&&(r=e.payload,!0)})),r>0&&(e.rtcpFb||(e.rtcpFb=[]),n.includes(e.mid)&&!e.rtcpFb.some((function(e){return e.payload===r&&"nack"===e.type}))&&e.rtcpFb.push({payload:r,type:"nack"}),t.includes(e.mid)&&e.fmtp.some((function(e){return e.payload===r&&(e.config.includes("stereo=1")||(e.config+=";stereo=1"),!0)})))}function ro(e){var t,n=[],r=[],i=Ka(null!==(t=e.sdp)&&void 0!==t?t:""),a=0;return i.media.forEach((function(e){var t;"audio"===e.type&&(e.rtp.some((function(e){return"opus"===e.codec&&(a=e.payload,!0)})),(null===(t=e.rtcpFb)||void 0===t?void 0:t.some((function(e){return e.payload===a&&"nack"===e.type})))&&r.push(e.mid),e.fmtp.some((function(t){return t.payload===a&&(t.config.includes("sprop-stereo=1")&&n.push(e.mid),!0)})))})),{stereoMids:n,nackMids:r}}var io=function(){function e(t,n){x(this,e),this.lastUpdateAt=0,this.settingsCacheTime=3e3,this.attemptedRegions=[],this.serverUrl=new URL(t),this.token=n}return T(e,[{key:"isCloud",value:function(){return va(this.serverUrl)}},{key:"getNextBestRegionUrl",value:function(){var e=E(i().mark((function e(t){var n,r,a=this;return i().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this.isCloud()){e.next=2;break}throw Error("region availability is only supported for LiveKit Cloud domains");case 2:if(this.regionSettings&&!(Date.now()-this.lastUpdateAt>this.settingsCacheTime)){e.next=6;break}return e.next=5,this.fetchRegionSettings(t);case 5:this.regionSettings=e.sent;case 6:if(!((n=this.regionSettings.regions.filter((function(e){return!a.attemptedRegions.find((function(t){return t.url===e.url}))}))).length>0)){e.next=14;break}return r=n[0],this.attemptedRegions.push(r),L.debug("next region: ".concat(r.region)),e.abrupt("return",r.url);case 14:return e.abrupt("return",null);case 15:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"resetAttempts",value:function(){this.attemptedRegions=[]}},{key:"fetchRegionSettings",value:function(){var e=E(i().mark((function e(t){var n,r;return i().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch("".concat((i=this.serverUrl,"".concat(i.protocol.replace("ws","http"),"//").concat(i.host,"/settings")),"/regions"),{headers:{authorization:"Bearer ".concat(this.token)},signal:t});case 2:if(!(n=e.sent).ok){e.next=11;break}return e.next=6,n.json();case 6:return r=e.sent,this.lastUpdateAt=Date.now(),e.abrupt("return",r);case 11:throw new zi("Could not fetch region settings: ".concat(n.statusText),401===n.status?0:void 0,n.status);case 12:case"end":return e.stop()}var i}),e,this)})));return function(t){return e.apply(this,arguments)}}()}]),e}();var ao,oo=function(){function e(t,n,r,i){x(this,e),this.width=t,this.height=n,this.encoding={maxBitrate:r,maxFramerate:i}}return T(e,[{key:"resolution",get:function(){return{width:this.width,height:this.height,frameRate:this.encoding.maxFramerate,aspectRatio:this.width/this.height}}}]),e}(),so=["vp8","h264"];function co(e){return!!so.find((function(t){return t===e}))}!function(e){e.telephone={maxBitrate:12e3},e.speech={maxBitrate:2e4},e.music={maxBitrate:32e3},e.musicStereo={maxBitrate:48e3},e.musicHighQuality={maxBitrate:64e3},e.musicHighQualityStereo={maxBitrate:96e3}}(ao||(ao={}));var uo,lo,fo,po,ho={h90:new oo(160,90,6e4,15),h180:new oo(320,180,12e4,15),h216:new oo(384,216,18e4,15),h360:new oo(640,360,3e5,20),h540:new oo(960,540,6e5,25),h720:new oo(1280,720,17e5,30),h1080:new oo(1920,1080,3e6,30),h1440:new oo(2560,1440,5e6,30),h2160:new oo(3840,2160,8e6,30)},vo={h120:new oo(160,120,8e4,15),h180:new oo(240,180,1e5,15),h240:new oo(320,240,15e4,15),h360:new oo(480,360,225e3,20),h480:new oo(640,480,3e5,20),h540:new oo(720,540,45e4,25),h720:new oo(960,720,15e5,30),h1080:new oo(1440,1080,25e5,30),h1440:new oo(1920,1440,35e5,30)},mo={h360fps3:new oo(640,360,2e5,3),h720fps5:new oo(1280,720,4e5,5),h720fps15:new oo(1280,720,1e6,15),h1080fps15:new oo(1920,1080,15e5,15),h1080fps30:new oo(1920,1080,3e6,30)},go={audioBitrate:ao.music.maxBitrate,dtx:!0,red:!0,forceStereo:!1,simulcast:!0,screenShareEncoding:mo.h1080fps15.encoding,stopMicTrackOnMute:!1,videoCodec:"vp8",backupCodec:{codec:"vp8",encoding:ho.h540.encoding}},bo={autoGainControl:!0,echoCancellation:!0,noiseSuppression:!0},yo={resolution:ho.h720.resolution},ko={adaptiveStream:!1,dynacast:!1,stopLocalTrackOnUnpublish:!0,reconnectPolicy:new bn,disconnectOnPageLeave:!0,expWebAudioMix:!1},wo={autoSubscribe:!0,maxRetries:1,peerConnectionTimeout:15e3};!function(e){e.Connected="connected",e.Reconnecting="reconnecting",e.Reconnected="reconnected",e.Disconnected="disconnected",e.ConnectionStateChanged="connectionStateChanged",e.StateChanged="connectionStateChanged",e.MediaDevicesChanged="mediaDevicesChanged",e.ParticipantConnected="participantConnected",e.ParticipantDisconnected="participantDisconnected",e.TrackPublished="trackPublished",e.TrackSubscribed="trackSubscribed",e.TrackSubscriptionFailed="trackSubscriptionFailed",e.TrackUnpublished="trackUnpublished",e.TrackUnsubscribed="trackUnsubscribed",e.TrackMuted="trackMuted",e.TrackUnmuted="trackUnmuted",e.LocalTrackPublished="localTrackPublished",e.LocalTrackUnpublished="localTrackUnpublished",e.LocalAudioSilenceDetected="localAudioSilenceDetected",e.ActiveSpeakersChanged="activeSpeakersChanged",e.ParticipantMetadataChanged="participantMetadataChanged",e.ParticipantNameChanged="participantNameChanged",e.RoomMetadataChanged="roomMetadataChanged",e.DataReceived="dataReceived",e.ConnectionQualityChanged="connectionQualityChanged",e.TrackStreamStateChanged="trackStreamStateChanged",e.TrackSubscriptionPermissionChanged="trackSubscriptionPermissionChanged",e.TrackSubscriptionStatusChanged="trackSubscriptionStatusChanged",e.AudioPlaybackStatusChanged="audioPlaybackChanged",e.MediaDevicesError="mediaDevicesError",e.ParticipantPermissionsChanged="participantPermissionsChanged",e.SignalConnected="signalConnected",e.RecordingStatusChanged="recordingStatusChanged",e.DCBufferStatusChanged="dcBufferStatusChanged"}(uo||(uo={})),function(e){e.TrackPublished="trackPublished",e.TrackSubscribed="trackSubscribed",e.TrackSubscriptionFailed="trackSubscriptionFailed",e.TrackUnpublished="trackUnpublished",e.TrackUnsubscribed="trackUnsubscribed",e.TrackMuted="trackMuted",e.TrackUnmuted="trackUnmuted",e.LocalTrackPublished="localTrackPublished",e.LocalTrackUnpublished="localTrackUnpublished",e.ParticipantMetadataChanged="participantMetadataChanged",e.ParticipantNameChanged="participantNameChanged",e.DataReceived="dataReceived",e.IsSpeakingChanged="isSpeakingChanged",e.ConnectionQualityChanged="connectionQualityChanged",e.TrackStreamStateChanged="trackStreamStateChanged",e.TrackSubscriptionPermissionChanged="trackSubscriptionPermissionChanged",e.TrackSubscriptionStatusChanged="trackSubscriptionStatusChanged",e.MediaDevicesError="mediaDevicesError",e.ParticipantPermissionsChanged="participantPermissionsChanged"}(lo||(lo={})),function(e){e.TransportsCreated="transportsCreated",e.Connected="connected",e.Disconnected="disconnected",e.Resuming="resuming",e.Resumed="resumed",e.Restarting="restarting",e.Restarted="restarted",e.SignalResumed="signalResumed",e.SignalRestarted="signalRestarted",e.Closing="closing",e.MediaTrackAdded="mediaTrackAdded",e.ActiveSpeakersUpdate="activeSpeakersUpdate",e.DataPacketReceived="dataPacketReceived",e.DCBufferStatusChanged="dcBufferStatusChanged"}(fo||(fo={})),function(e){e.Message="message",e.Muted="muted",e.Unmuted="unmuted",e.Restarted="restarted",e.Ended="ended",e.Subscribed="subscribed",e.Unsubscribed="unsubscribed",e.UpdateSettings="updateSettings",e.UpdateSubscription="updateSubscription",e.AudioPlaybackStarted="audioPlaybackStarted",e.AudioPlaybackFailed="audioPlaybackFailed",e.AudioSilenceDetected="audioSilenceDetected",e.VisibilityChanged="visibilityChanged",e.VideoDimensionsChanged="videoDimensionsChanged",e.ElementAttached="elementAttached",e.ElementDetached="elementDetached",e.UpstreamPaused="upstreamPaused",e.UpstreamResumed="upstreamResumed",e.SubscriptionPermissionChanged="subscriptionPermissionChanged",e.SubscriptionStatusChanged="subscriptionStatusChanged"}(po||(po={}));var So=[],Co=function(e){m(n,e);var t=b(n);function n(e,r){var i;return x(this,n),(i=t.call(this)).attachedElements=[],i.isMuted=!1,i.streamState=n.StreamState.Active,i.isInBackground=!1,i._currentBitrate=0,i.appVisibilityChangedListener=function(){i.backgroundTimeout&&clearTimeout(i.backgroundTimeout),"hidden"===document.visibilityState?i.backgroundTimeout=setTimeout((function(){return i.handleAppVisibilityChanged()}),5e3):i.handleAppVisibilityChanged()},i.setMaxListeners(100),i.kind=r,i._mediaStreamTrack=e,i._mediaStreamID=e.id,i.source=n.Source.Unknown,i}return T(n,[{key:"currentBitrate",get:function(){return this._currentBitrate}},{key:"mediaStreamTrack",get:function(){return this._mediaStreamTrack}},{key:"mediaStreamID",get:function(){return this._mediaStreamID}},{key:"attach",value:function(e){var t=this,r="audio";this.kind===n.Kind.Video&&(r="video"),0===this.attachedElements.length&&n.Kind.Video&&this.addAppVisibilityListener(),e||("audio"===r&&(So.forEach((function(t){null!==t.parentElement||e||(e=t)})),e&&So.splice(So.indexOf(e),1)),e||(e=document.createElement(r))),this.attachedElements.includes(e)||this.attachedElements.push(e),Eo(this._mediaStreamTrack,e);var i=e.srcObject.getTracks();return i.some((function(e){return"audio"===e.kind}))&&e.play().then((function(){t.emit(po.AudioPlaybackStarted)})).catch((function(n){"NotAllowedError"===n.name?t.emit(po.AudioPlaybackFailed,n):L.warn("could not playback audio",n),e&&i.some((function(e){return"video"===e.kind}))&&"NotAllowedError"===n.name&&(e.muted=!0,e.play().catch((function(){})))})),this.emit(po.ElementAttached,e),e}},{key:"detach",value:function(e){var t=this;try{if(e){xo(this._mediaStreamTrack,e);var n=this.attachedElements.indexOf(e);return n>=0&&(this.attachedElements.splice(n,1),this.recycleElement(e),this.emit(po.ElementDetached,e)),e}var r=[];return this.attachedElements.forEach((function(e){xo(t._mediaStreamTrack,e),r.push(e),t.recycleElement(e),t.emit(po.ElementDetached,e)})),this.attachedElements=[],r}finally{0===this.attachedElements.length&&this.removeAppVisibilityListener()}}},{key:"stop",value:function(){this.stopMonitor(),this._mediaStreamTrack.stop()}},{key:"enable",value:function(){this._mediaStreamTrack.enabled=!0}},{key:"disable",value:function(){this._mediaStreamTrack.enabled=!1}},{key:"stopMonitor",value:function(){this.monitorInterval&&clearInterval(this.monitorInterval)}},{key:"recycleElement",value:function(e){if(e instanceof HTMLAudioElement){var t=!0;e.pause(),So.forEach((function(e){e.parentElement||(t=!1)})),t&&So.push(e)}}},{key:"handleAppVisibilityChanged",value:function(){var e=E(i().mark((function e(){return i().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:this.isInBackground="hidden"===document.visibilityState;case 1:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"addAppVisibilityListener",value:function(){pa()?(this.isInBackground="hidden"===document.visibilityState,document.addEventListener("visibilitychange",this.appVisibilityChangedListener)):this.isInBackground=!1}},{key:"removeAppVisibilityListener",value:function(){pa()&&document.removeEventListener("visibilitychange",this.appVisibilityChangedListener)}}]),n}(Bn.EventEmitter);function Eo(e,t){var n,r;n=t.srcObject instanceof MediaStream?t.srcObject:new MediaStream,(r="audio"===e.kind?n.getAudioTracks():n.getVideoTracks()).includes(e)||(r.forEach((function(e){n.removeTrack(e)})),n.addTrack(e)),t.autoplay=!0,t.muted=0===n.getAudioTracks().length,t instanceof HTMLVideoElement&&(t.playsInline=!0),t.srcObject!==n&&(t.srcObject=n,(da()||la())&&t instanceof HTMLVideoElement&&setTimeout((function(){t.srcObject=n,t.play().catch((function(){}))}),0))}function xo(e,t){if(t.srcObject instanceof MediaStream){var n=t.srcObject;n.removeTrack(e),n.getTracks().length>0?t.srcObject=n:t.srcObject=null}}!function(e){var t,n,r;!function(e){e.Audio="audio",e.Video="video",e.Unknown="unknown"}(t=e.Kind||(e.Kind={})),function(e){e.Camera="camera",e.Microphone="microphone",e.ScreenShare="screen_share",e.ScreenShareAudio="screen_share_audio",e.Unknown="unknown"}(n=e.Source||(e.Source={})),function(e){e.Active="active",e.Paused="paused",e.Unknown="unknown"}(r=e.StreamState||(e.StreamState={})),e.kindToProto=function(e){switch(e){case t.Audio:return bt.AUDIO;case t.Video:return bt.VIDEO;default:return bt.UNRECOGNIZED}},e.kindFromProto=function(e){switch(e){case bt.AUDIO:return t.Audio;case bt.VIDEO:return t.Video;default:return t.Unknown}},e.sourceToProto=function(e){switch(e){case n.Camera:return yt.CAMERA;case n.Microphone:return yt.MICROPHONE;case n.ScreenShare:return yt.SCREEN_SHARE;case n.ScreenShareAudio:return yt.SCREEN_SHARE_AUDIO;default:return yt.UNRECOGNIZED}},e.sourceFromProto=function(e){switch(e){case yt.CAMERA:return n.Camera;case yt.MICROPHONE:return n.Microphone;case yt.SCREEN_SHARE:return n.ScreenShare;case yt.SCREEN_SHARE_AUDIO:return n.ScreenShareAudio;default:return n.Unknown}},e.streamStateFromProto=function(e){switch(e){case Gr.ACTIVE:return r.Active;case Gr.PAUSED:return r.Paused;default:return r.Unknown}}}(Co||(Co={}));var Po,To="_lossy",Ro="_reliable",No="leave-reconnect";!function(e){e[e.New=0]="New",e[e.Connected=1]="Connected",e[e.Disconnected=2]="Disconnected",e[e.Reconnecting=3]="Reconnecting",e[e.Closed=4]="Closed"}(Po||(Po={}));var Oo=function(e){m(n,e);var t=b(n);function n(e){var r;return x(this,n),(r=t.call(this)).options=e,r.rtcConfig={},r.peerConnectionTimeout=wo.peerConnectionTimeout,r.fullReconnectOnNext=!1,r.subscriberPrimary=!1,r.pcState=Po.New,r._isClosed=!0,r.pendingTrackResolvers={},r.hasPublished=!1,r.reconnectAttempts=0,r.reconnectStart=0,r.attemptingReconnect=!1,r.joinAttempts=0,r.maxJoinAttempts=1,r.shouldFailNext=!1,r.handleDataChannel=function(){var e=E(i().mark((function e(t){var n;return i().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=t.channel){e.next=3;break}return e.abrupt("return");case 3:if(n.label!==Ro){e.next=7;break}r.reliableDCSub=n,e.next=12;break;case 7:if(n.label!==To){e.next=11;break}r.lossyDCSub=n,e.next=12;break;case 11:return e.abrupt("return");case 12:L.debug("on data channel ".concat(n.id,", ").concat(n.label)),n.onmessage=r.handleDataMessage;case 14:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),r.handleDataMessage=function(){var e=E(i().mark((function e(t){var n,a,o,s,c;return i().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,r.dataProcessLock.lock();case 2:if(o=e.sent,e.prev=3,!(t.data instanceof ArrayBuffer)){e.next=8;break}s=t.data,e.next=16;break;case 8:if(!(t.data instanceof Blob)){e.next=14;break}return e.next=11,t.data.arrayBuffer();case 11:s=e.sent,e.next=16;break;case 14:return L.error("unsupported data type",t.data),e.abrupt("return");case 16:c=en.decode(new Uint8Array(s)),"speaker"===(null===(n=c.value)||void 0===n?void 0:n.$case)?r.emit(fo.ActiveSpeakersUpdate,c.value.speaker.speakers):"user"===(null===(a=c.value)||void 0===a?void 0:a.$case)&&r.emit(fo.DataPacketReceived,c.value.user,c.kind);case 18:return e.prev=18,o(),e.finish(18);case 21:case"end":return e.stop()}}),e,null,[[3,,18,21]])})));return function(t){return e.apply(this,arguments)}}(),r.handleDataError=function(e){var t=0===e.currentTarget.maxRetransmits?"lossy":"reliable";if(e instanceof ErrorEvent){var n=e.error.error;L.error("DataChannel error on ".concat(t,": ").concat(e.message),n)}else L.error("Unknown DataChannel Error on ".concat(t),e)},r.handleBufferedAmountLow=function(e){var t=0===e.currentTarget.maxRetransmits?Tt.LOSSY:Tt.RELIABLE;r.updateAndEmitDCBufferStatus(t)},r.handleDisconnect=function(e,t){if(!r._isClosed){L.warn("".concat(e," disconnected")),0===r.reconnectAttempts&&(r.reconnectStart=Date.now());var n=Date.now()-r.reconnectStart,i=r.getNextRetryDelay({elapsedMs:n,retryCount:r.reconnectAttempts});null!==i?(e===No&&(i=0),L.debug("reconnecting in ".concat(i,"ms")),r.clearReconnectTimeout(),r.url&&r.token&&va(new URL(r.url))&&(r.regionUrlProvider=new io(r.url,r.token)),r.reconnectTimeout=Hi.setTimeout((function(){return r.attemptReconnect(t)}),i)):function(e){L.warn("could not recover connection after ".concat(r.reconnectAttempts," attempts, ").concat(e,"ms. giving up")),r.emit(fo.Disconnected),r.close()}(n)}},r.waitForRestarted=function(){return new Promise((function(e,t){r.pcState===Po.Connected&&e();var n=function(){r.off(fo.Disconnected,i),e()},i=function(){r.off(fo.Restarted,n),t()};r.once(fo.Restarted,n),r.once(fo.Disconnected,i)}))},r.updateAndEmitDCBufferStatus=function(e){var t=r.isBufferStatusLow(e);"undefined"!==typeof t&&t!==r.dcBufferStatus.get(e)&&(r.dcBufferStatus.set(e,t),r.emit(fo.DCBufferStatusChanged,t,e))},r.isBufferStatusLow=function(e){var t=r.dataChannelForKind(e);if(t)return t.bufferedAmount<=t.bufferedAmountLowThreshold},r.handleBrowserOnLine=function(){r.client.isReconnecting&&(r.clearReconnectTimeout(),r.attemptReconnect(Et.RR_SIGNAL_DISCONNECTED))},r.client=new Da,r.client.signalLatency=r.options.expSignalLatency,r.reconnectPolicy=r.options.reconnectPolicy,r.registerOnLineListener(),r.closingLock=new Oa,r.dataProcessLock=new Oa,r.dcBufferStatus=new Map([[Tt.LOSSY,!0],[Tt.RELIABLE,!0]]),r}return T(n,[{key:"isClosed",get:function(){return this._isClosed}},{key:"join",value:function(){var e=E(i().mark((function e(t,n,r,a){var o;return i().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.url=t,this.token=n,this.signalOpts=r,e.prev=3,this.joinAttempts+=1,e.next=7,this.client.join(t,n,r,a);case 7:return o=e.sent,this._isClosed=!1,this.subscriberPrimary=o.subscriberPrimary,this.publisher||this.configure(o),this.subscriberPrimary||this.negotiate(),this.clientConfiguration=o.clientConfiguration,e.abrupt("return",o);case 16:if(e.prev=16,e.t0=e.catch(3),!(e.t0 instanceof zi)){e.next=23;break}if(1!==e.t0.reason){e.next=23;break}if(L.warn("Couldn't connect to server, attempt ".concat(this.joinAttempts," of ").concat(this.maxJoinAttempts)),!(this.joinAttempts<this.maxJoinAttempts)){e.next=23;break}return e.abrupt("return",this.join(t,n,r,a));case 23:throw e.t0;case 24:case"end":return e.stop()}}),e,this,[[3,16]])})));return function(t,n,r,i){return e.apply(this,arguments)}}()},{key:"close",value:function(){var e=E(i().mark((function e(){var t,n=this;return i().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.closingLock.lock();case 2:if(t=e.sent,!this.isClosed){e.next=6;break}return t(),e.abrupt("return");case 6:return e.prev=6,this._isClosed=!0,this.emit(fo.Closing),this.removeAllListeners(),this.deregisterOnLineListener(),this.clearPendingReconnect(),this.publisher&&"closed"!==this.publisher.pc.signalingState&&(this.publisher.pc.getSenders().forEach((function(e){var t,r;try{(null===(t=n.publisher)||void 0===t?void 0:t.pc.removeTrack)&&(null===(r=n.publisher)||void 0===r||r.pc.removeTrack(e))}catch(Cs){L.warn("could not removeTrack",{error:Cs})}})),this.publisher.close(),this.publisher=void 0),this.subscriber&&(this.subscriber.close(),this.subscriber=void 0),e.next=16,this.client.close();case 16:return e.prev=16,t(),e.finish(16);case 19:case"end":return e.stop()}}),e,this,[[6,,16,19]])})));return function(){return e.apply(this,arguments)}}()},{key:"addTrack",value:function(e){var t=this;if(this.pendingTrackResolvers[e.cid])throw new Vi("a track with the same ID has already been published");return new Promise((function(n,r){var i=setTimeout((function(){delete t.pendingTrackResolvers[e.cid],r(new zi("publication of local track timed out, no response from server"))}),1e4);t.pendingTrackResolvers[e.cid]={resolve:function(e){clearTimeout(i),n(e)},reject:function(){clearTimeout(i),r(new Error("Cancelled publication by calling unpublish"))}},t.client.sendAddTrack(e)}))}},{key:"removeTrack",value:function(e){var t;if(e.track&&this.pendingTrackResolvers[e.track.id]){var n=this.pendingTrackResolvers[e.track.id].reject;n&&n(),delete this.pendingTrackResolvers[e.track.id]}try{return null===(t=this.publisher)||void 0===t||t.pc.removeTrack(e),!0}catch(Cs){L.warn("failed to remove track",{error:Cs,method:"removeTrack"})}return!1}},{key:"updateMuteStatus",value:function(e,t){this.client.sendMuteTrack(e,t)}},{key:"dataSubscriberReadyState",get:function(){var e;return null===(e=this.reliableDCSub)||void 0===e?void 0:e.readyState}},{key:"getConnectedServerAddress",value:function(){var e=E(i().mark((function e(){return i().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(void 0!==this.primaryPC){e.next=2;break}return e.abrupt("return",void 0);case 2:return e.abrupt("return",Io(this.primaryPC));case 3:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"configure",value:function(e){var t,n=this;if(!this.publisher&&!this.subscriber){this.participantSid=null===(t=e.participant)||void 0===t?void 0:t.sid;var r=this.makeRTCConfiguration(e);this.publisher=new to(r),this.subscriber=new to(r),this.emit(fo.TransportsCreated,this.publisher,this.subscriber),this.publisher.pc.onicecandidate=function(e){e.candidate&&(L.trace("adding ICE candidate for peer",e.candidate),n.client.sendIceCandidate(e.candidate,Hr.PUBLISHER))},this.subscriber.pc.onicecandidate=function(e){e.candidate&&n.client.sendIceCandidate(e.candidate,Hr.SUBSCRIBER)},this.publisher.onOffer=function(e){n.client.sendOffer(e)};var a=this.publisher.pc,o=this.subscriber.pc,s=e.subscriberPrimary;s&&(a=this.subscriber.pc,o=this.publisher.pc,this.subscriber.pc.ondatachannel=this.handleDataChannel),this.primaryPC=a,a.onconnectionstatechange=E(i().mark((function t(){var r;return i().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:L.debug("primary PC state changed ".concat(a.connectionState)),"connected"===a.connectionState?(r=n.pcState===Po.New,n.pcState=Po.Connected,r&&n.emit(fo.Connected,e)):"failed"===a.connectionState&&n.pcState===Po.Connected&&(n.pcState=Po.Disconnected,n.handleDisconnect("primary peerconnection",s?Et.RR_SUBSCRIBER_FAILED:Et.RR_PUBLISHER_FAILED));case 2:case"end":return t.stop()}}),t)}))),o.onconnectionstatechange=E(i().mark((function e(){return i().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:L.debug("secondary PC state changed ".concat(o.connectionState)),"failed"===o.connectionState&&n.handleDisconnect("secondary peerconnection",s?Et.RR_PUBLISHER_FAILED:Et.RR_SUBSCRIBER_FAILED);case 2:case"end":return e.stop()}}),e)}))),this.subscriber.pc.ontrack=function(e){n.emit(fo.MediaTrackAdded,e.track,e.streams[0],e.receiver)},this.createDataChannels(),this.client.onAnswer=function(){var e=E(i().mark((function e(t){return i().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n.publisher){e.next=2;break}return e.abrupt("return");case 2:return L.debug("received server answer",{RTCSdpType:t.type,signalingState:n.publisher.pc.signalingState}),e.next=5,n.publisher.setRemoteDescription(t);case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),this.client.onTrickle=function(e,t){n.publisher&&n.subscriber&&(L.trace("got ICE candidate from peer",{candidate:e,target:t}),t===Hr.PUBLISHER?n.publisher.addIceCandidate(e):n.subscriber.addIceCandidate(e))},this.client.onOffer=function(){var e=E(i().mark((function e(t){var r;return i().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n.subscriber){e.next=2;break}return e.abrupt("return");case 2:return L.debug("received server offer",{RTCSdpType:t.type,signalingState:n.subscriber.pc.signalingState}),e.next=5,n.subscriber.setRemoteDescription(t);case 5:return e.next=7,n.subscriber.createAndSetAnswer();case 7:r=e.sent,n.client.sendAnswer(r);case 9:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),this.client.onLocalTrackPublished=function(e){L.debug("received trackPublishedResponse",e);var t=n.pendingTrackResolvers[e.cid].resolve;t?(delete n.pendingTrackResolvers[e.cid],t(e.track)):L.error("missing track resolver for ".concat(e.cid))},this.client.onTokenRefresh=function(e){n.token=e},this.client.onClose=function(){n.handleDisconnect("signal",Et.RR_SIGNAL_DISCONNECTED)},this.client.onLeave=function(e){(null===e||void 0===e?void 0:e.canReconnect)?(n.fullReconnectOnNext=!0,n.primaryPC=void 0,n.handleDisconnect(No)):(n.emit(fo.Disconnected,null===e||void 0===e?void 0:e.reason),n.close()),L.trace("leave request",{leave:e})}}}},{key:"makeRTCConfiguration",value:function(e){var t=Sn({},this.rtcConfig);if(e.iceServers&&!t.iceServers){var n=[];e.iceServers.forEach((function(e){var t={urls:e.urls};e.username&&(t.username=e.username),e.credential&&(t.credential=e.credential),n.push(t)})),t.iceServers=n}return e.clientConfiguration&&e.clientConfiguration.forceRelay===St.ENABLED&&(t.iceTransportPolicy="relay"),t.sdpSemantics="unified-plan",t.continualGatheringPolicy="gather_continually",t}},{key:"createDataChannels",value:function(){this.publisher&&(this.lossyDC&&(this.lossyDC.onmessage=null,this.lossyDC.onerror=null),this.reliableDC&&(this.reliableDC.onmessage=null,this.reliableDC.onerror=null),this.lossyDC=this.publisher.pc.createDataChannel(To,{ordered:!0,maxRetransmits:0}),this.reliableDC=this.publisher.pc.createDataChannel(Ro,{ordered:!0}),this.lossyDC.onmessage=this.handleDataMessage,this.reliableDC.onmessage=this.handleDataMessage,this.lossyDC.onerror=this.handleDataError,this.reliableDC.onerror=this.handleDataError,this.lossyDC.bufferedAmountLowThreshold=65535,this.reliableDC.bufferedAmountLowThreshold=65535,this.lossyDC.onbufferedamountlow=this.handleBufferedAmountLow,this.reliableDC.onbufferedamountlow=this.handleBufferedAmountLow)}},{key:"setPreferredCodec",value:function(e,t,n){if("getCapabilities"in RTCRtpSender){var r=RTCRtpSender.getCapabilities(t);if(r){L.debug("get capabilities",r);var i=[],a=[],o=[];r.codecs.forEach((function(e){var t=e.mimeType.toLowerCase();"audio/opus"!==t?t==="video/".concat(n)?"h264"!==n||e.sdpFmtpLine&&e.sdpFmtpLine.includes("profile-level-id=42e01f")?i.push(e):a.push(e):o.push(e):i.push(e)})),ua(e)&&e.setCodecPreferences(i.concat(a,o))}}}},{key:"createSender",value:function(){var e=E(i().mark((function e(t,n,r){return i().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!ia()){e.next=2;break}return e.abrupt("return",this.createTransceiverRTCRtpSender(t,n,r));case 2:if(!aa()){e.next=5;break}return L.debug("using add-track fallback"),e.abrupt("return",this.createRTCRtpSender(t.mediaStreamTrack));case 5:throw new Wi("Required webRTC APIs not supported on this device");case 6:case"end":return e.stop()}}),e,this)})));return function(t,n,r){return e.apply(this,arguments)}}()},{key:"createSimulcastSender",value:function(){var e=E(i().mark((function e(t,n,r,a){return i().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!ia()){e.next=2;break}return e.abrupt("return",this.createSimulcastTransceiverSender(t,n,r,a));case 2:if(!aa()){e.next=5;break}return L.debug("using add-track fallback"),e.abrupt("return",this.createRTCRtpSender(t.mediaStreamTrack));case 5:throw new Wi("Cannot stream on this device");case 6:case"end":return e.stop()}}),e,this)})));return function(t,n,r,i){return e.apply(this,arguments)}}()},{key:"createTransceiverRTCRtpSender",value:function(){var e=E(i().mark((function e(t,n,r){var a,o;return i().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this.publisher){e.next=2;break}throw new Wi("publisher is closed");case 2:return a={direction:"sendonly"},r&&(a.sendEncodings=r),e.next=6,this.publisher.pc.addTransceiver(t.mediaStreamTrack,a);case 6:return o=e.sent,t.kind===Co.Kind.Video&&n.videoCodec&&(this.setPreferredCodec(o,t.kind,n.videoCodec),t.codec=n.videoCodec),e.abrupt("return",o.sender);case 9:case"end":return e.stop()}}),e,this)})));return function(t,n,r){return e.apply(this,arguments)}}()},{key:"createSimulcastTransceiverSender",value:function(){var e=E(i().mark((function e(t,n,r,a){var o,s;return i().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this.publisher){e.next=2;break}throw new Wi("publisher is closed");case 2:return o={direction:"sendonly"},a&&(o.sendEncodings=a),e.next=6,this.publisher.pc.addTransceiver(n.mediaStreamTrack,o);case 6:if(s=e.sent,r.videoCodec){e.next=9;break}return e.abrupt("return");case 9:return this.setPreferredCodec(s,t.kind,r.videoCodec),t.setSimulcastTrackSender(r.videoCodec,s.sender),e.abrupt("return",s.sender);case 12:case"end":return e.stop()}}),e,this)})));return function(t,n,r,i){return e.apply(this,arguments)}}()},{key:"createRTCRtpSender",value:function(){var e=E(i().mark((function e(t){return i().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this.publisher){e.next=2;break}throw new Wi("publisher is closed");case 2:return e.abrupt("return",this.publisher.pc.addTrack(t));case 3:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"attemptReconnect",value:function(){var e=E(i().mark((function e(t){var n,r,a,o;return i().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!this._isClosed){e.next=2;break}return e.abrupt("return");case 2:if(!this.attemptingReconnect){e.next=4;break}return e.abrupt("return");case 4:if((null===(n=this.clientConfiguration)||void 0===n?void 0:n.resumeConnection)!==St.DISABLED&&"closed"!==(null!==(a=null===(r=this.primaryPC)||void 0===r?void 0:r.signalingState)&&void 0!==a?a:"closed")||(this.fullReconnectOnNext=!0),e.prev=5,this.attemptingReconnect=!0,!this.fullReconnectOnNext){e.next=12;break}return e.next=10,this.restartConnection();case 10:e.next=14;break;case 12:return e.next=14,this.resumeConnection(t);case 14:this.clearPendingReconnect(),this.fullReconnectOnNext=!1,e.next=24;break;case 18:e.prev=18,e.t0=e.catch(5),this.reconnectAttempts+=1,o=!0,e.t0 instanceof Wi?(L.debug("received unrecoverable error",{error:e.t0}),o=!1):e.t0 instanceof Do||(this.fullReconnectOnNext=!0),o?this.handleDisconnect("reconnect",Et.RR_UNKOWN):(L.info("could not recover connection after ".concat(this.reconnectAttempts," attempts, ").concat(Date.now()-this.reconnectStart,"ms. giving up")),this.emit(fo.Disconnected),this.close());case 24:return e.prev=24,this.attemptingReconnect=!1,e.finish(24);case 27:case"end":return e.stop()}}),e,this,[[5,18,24,27]])})));return function(t){return e.apply(this,arguments)}}()},{key:"getNextRetryDelay",value:function(e){try{return this.reconnectPolicy.nextRetryDelayInMs(e)}catch(Cs){L.warn("encountered error in reconnect policy",{error:Cs})}return null}},{key:"restartConnection",value:function(){var e=E(i().mark((function e(t){var n,r,a,o,s,c,u;return i().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.prev=0,this.url&&this.token){e.next=3;break}throw new Wi("could not reconnect, url or token not saved");case 3:if(L.info("reconnecting, attempt: ".concat(this.reconnectAttempts)),this.emit(fo.Restarting),!this.client.isConnected){e.next=8;break}return e.next=8,this.client.sendLeave();case 8:return e.next=10,this.client.close();case 10:if(this.primaryPC=void 0,null===(n=this.publisher)||void 0===n||n.close(),this.publisher=void 0,null===(r=this.subscriber)||void 0===r||r.close(),this.subscriber=void 0,e.prev=15,this.signalOpts){e.next=19;break}throw L.warn("attempted connection restart, without signal options present"),new Do;case 19:return e.next=21,this.join(null!==t&&void 0!==t?t:this.url,this.token,this.signalOpts);case 21:c=e.sent,e.next=29;break;case 24:if(e.prev=24,e.t0=e.catch(15),!(e.t0 instanceof zi&&0===e.t0.reason)){e.next=28;break}throw new Wi("could not reconnect, token might be expired");case 28:throw new Do;case 29:if(!this.shouldFailNext){e.next=32;break}throw this.shouldFailNext=!1,new Error("simulated failure");case 32:return this.client.setReconnected(),this.emit(fo.SignalRestarted,c),e.next=36,this.waitForPCReconnected();case 36:null===(a=this.regionUrlProvider)||void 0===a||a.resetAttempts(),this.emit(fo.Restarted),e.next=53;break;case 40:return e.prev=40,e.t1=e.catch(0),e.next=44,null===(o=this.regionUrlProvider)||void 0===o?void 0:o.getNextBestRegionUrl();case 44:if(!(u=e.sent)){e.next=51;break}return e.next=48,this.restartConnection(u);case 48:return e.abrupt("return");case 51:throw null===(s=this.regionUrlProvider)||void 0===s||s.resetAttempts(),e.t1;case 53:case"end":return e.stop()}}),e,this,[[0,40],[15,24]])})));return function(t){return e.apply(this,arguments)}}()},{key:"resumeConnection",value:function(){var e=E(i().mark((function e(t){var n,r,a,o;return i().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this.url&&this.token){e.next=2;break}throw new Wi("could not reconnect, url or token not saved");case 2:if(this.publisher&&this.subscriber){e.next=4;break}throw new Wi("publisher and subscriber connections unset");case 4:return L.info("resuming signal connection, attempt ".concat(this.reconnectAttempts)),this.emit(fo.Resuming),e.prev=6,e.next=9,this.client.reconnect(this.url,this.token,this.participantSid,t);case 9:(r=e.sent)&&(a=this.makeRTCConfiguration(r),this.publisher.pc.setConfiguration(a),this.subscriber.pc.setConfiguration(a)),e.next=20;break;case 13:if(e.prev=13,e.t0=e.catch(6),o="",e.t0 instanceof Error&&(o=e.t0.message),!(e.t0 instanceof zi&&0===e.t0.reason)){e.next=19;break}throw new Wi("could not reconnect, token might be expired");case 19:throw new Do(o);case 20:if(this.emit(fo.SignalResumed),!this.shouldFailNext){e.next=24;break}throw this.shouldFailNext=!1,new Error("simulated failure");case 24:if(this.subscriber.restartingIce=!0,!this.hasPublished){e.next=28;break}return e.next=28,this.publisher.createAndSendOffer({iceRestart:!0});case 28:return e.next=30,this.waitForPCReconnected();case 30:this.client.setReconnected(),"open"===(null===(n=this.reliableDC)||void 0===n?void 0:n.readyState)&&null===this.reliableDC.id&&this.createDataChannels(),this.emit(fo.Resumed);case 33:case"end":return e.stop()}}),e,this,[[6,13]])})));return function(t){return e.apply(this,arguments)}}()},{key:"waitForPCInitialConnection",value:function(){var e=E(i().mark((function e(t,n){var r=this;return i().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this.pcState!==Po.Connected){e.next=2;break}return e.abrupt("return");case 2:if(this.pcState===Po.New){e.next=4;break}throw new Wi("Expected peer connection to be new on initial connection");case 4:return e.abrupt("return",new Promise((function(e,i){var a=function(){L.warn("closing engine"),Hi.clearTimeout(s),i(new zi("room connection has been cancelled",3))};(null===n||void 0===n?void 0:n.signal.aborted)&&a(),null===n||void 0===n||n.signal.addEventListener("abort",a);var o=function(){Hi.clearTimeout(s),null===n||void 0===n||n.signal.removeEventListener("abort",a),e()},s=Hi.setTimeout((function(){r.off(fo.Connected,o),i(new zi("could not establish pc connection"))}),null!==t&&void 0!==t?t:r.peerConnectionTimeout);r.once(fo.Connected,o)})));case 5:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"waitForPCReconnected",value:function(){var e=E(i().mark((function e(){var t,n,r;return i().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:n=Date.now(),r=n,this.pcState=Po.Reconnecting,L.debug("waiting for peer connection to reconnect");case 4:if(!(r-n<this.peerConnectionTimeout)){e.next=17;break}if(void 0!==this.primaryPC){e.next=9;break}return e.abrupt("break",17);case 9:r-n>2e3&&"connected"===(null===(t=this.primaryPC)||void 0===t?void 0:t.connectionState)&&(this.pcState=Po.Connected);case 10:if(this.pcState!==Po.Connected){e.next=12;break}return e.abrupt("return");case 12:return e.next=14,na(100);case 14:r=Date.now(),e.next=4;break;case 17:throw new zi("could not establish PC connection");case 18:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"sendDataPacket",value:function(){var e=E(i().mark((function e(t,n){var r,a;return i().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=en.encode(t).finish(),e.next=3,this.ensurePublisherConnected(n);case 3:(a=this.dataChannelForKind(n))&&a.send(r),this.updateAndEmitDCBufferStatus(n);case 6:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"ensureDataTransportConnected",value:function(){var e=E(i().mark((function e(t){var n,r,a,o,s,c,u,l,d=arguments;return i().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=d.length>1&&void 0!==d[1]?d[1]:this.subscriberPrimary,s=n?this.subscriber:this.publisher,c=n?"Subscriber":"Publisher",s){e.next=5;break}throw new zi("".concat(c," connection not set"));case 5:if(n||(null===(r=this.publisher)||void 0===r?void 0:r.isICEConnected)||"checking"===(null===(a=this.publisher)||void 0===a?void 0:a.pc.iceConnectionState)||this.negotiate(),"open"!==(null===(u=this.dataChannelForKind(t,n))||void 0===u?void 0:u.readyState)){e.next=9;break}return e.abrupt("return");case 9:l=(new Date).getTime()+this.peerConnectionTimeout;case 10:if(!((new Date).getTime()<l)){e.next=17;break}if(!s.isICEConnected||"open"!==(null===(o=this.dataChannelForKind(t,n))||void 0===o?void 0:o.readyState)){e.next=13;break}return e.abrupt("return");case 13:return e.next=15,na(50);case 15:e.next=10;break;case 17:throw new zi("could not establish ".concat(c," connection, state: ").concat(s.pc.iceConnectionState));case 18:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"ensurePublisherConnected",value:function(){var e=E(i().mark((function e(t){return i().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.ensureDataTransportConnected(t,!1);case 2:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"negotiate",value:function(){var e=this;return new Promise((function(t,n){if(e.publisher){e.hasPublished=!0;var r=function(){L.debug("engine disconnected while negotiation was ongoing"),a(),t()};e.on(fo.Closing,r);var i=setTimeout((function(){n("negotiation timed out"),e.handleDisconnect("negotiation",Et.RR_SIGNAL_DISCONNECTED)}),e.peerConnectionTimeout),a=function(){clearTimeout(i),e.off(fo.Closing,r)};e.publisher.once(Xa,(function(){var n;null===(n=e.publisher)||void 0===n||n.once(eo,(function(){a(),t()}))})),e.publisher.negotiate((function(t){a(),n(t),t instanceof qi&&(e.fullReconnectOnNext=!0),e.handleDisconnect("negotiation",Et.RR_UNKOWN)}))}else n(new qi("publisher is not defined"))}))}},{key:"dataChannelForKind",value:function(e,t){if(t){if(e===Tt.LOSSY)return this.lossyDCSub;if(e===Tt.RELIABLE)return this.reliableDCSub}else{if(e===Tt.LOSSY)return this.lossyDC;if(e===Tt.RELIABLE)return this.reliableDC}}},{key:"failNext",value:function(){this.shouldFailNext=!0}},{key:"clearReconnectTimeout",value:function(){this.reconnectTimeout&&Hi.clearTimeout(this.reconnectTimeout)}},{key:"clearPendingReconnect",value:function(){this.clearReconnectTimeout(),this.reconnectAttempts=0}},{key:"registerOnLineListener",value:function(){pa()&&window.addEventListener("online",this.handleBrowserOnLine)}},{key:"deregisterOnLineListener",value:function(){pa()&&window.removeEventListener("online",this.handleBrowserOnLine)}}]),n}(Bn.EventEmitter);function Io(e){return _o.apply(this,arguments)}function _o(){return _o=E(i().mark((function e(t){var n,r,a,o,s;return i().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r="",a=new Map,o=new Map,e.next=5,t.getStats();case 5:if(e.sent.forEach((function(e){switch(e.type){case"transport":r=e.selectedCandidatePairId;break;case"candidate-pair":""===r&&e.selected&&(r=e.id),a.set(e.id,e);break;case"remote-candidate":o.set(e.id,"".concat(e.address,":").concat(e.port))}})),""!==r){e.next=9;break}return e.abrupt("return",void 0);case 9:if(void 0!==(s=null===(n=a.get(r))||void 0===n?void 0:n.remoteCandidateId)){e.next=12;break}return e.abrupt("return",void 0);case 12:return e.abrupt("return",o.get(s));case 13:case"end":return e.stop()}}),e)}))),_o.apply(this,arguments)}var Do=function(e){m(n,e);var t=b(n);function n(){return x(this,n),t.apply(this,arguments)}return T(n)}(k(Error)),Ao=2e3;function Lo(e,t){return t?("bytesReceived"in e?(n=e.bytesReceived,r=t.bytesReceived):"bytesSent"in e&&(n=e.bytesSent,r=t.bytesSent),void 0===n||void 0===r||void 0===e.timestamp||void 0===t.timestamp?0:8*(n-r)*1e3/(e.timestamp-t.timestamp)):0;var n,r}var Mo=function(e){m(n,e);var t=b(n);function n(e,r,i){var a;x(this,n);var o=arguments.length>3&&void 0!==arguments[3]&&arguments[3];return(a=t.call(this,e,r))._isUpstreamPaused=!1,a.handleEnded=function(){a.isInBackground&&(a.reacquireTrack=!0),a.emit(po.Ended,f(a))},a._mediaStreamTrack.addEventListener("ended",a.handleEnded),a.constraints=null!==i&&void 0!==i?i:e.getConstraints(),a.reacquireTrack=!1,a.providedByUser=o,a.muteLock=new Oa,a.pauseUpstreamLock=new Oa,a}return T(n,[{key:"id",get:function(){return this._mediaStreamTrack.id}},{key:"dimensions",get:function(){if(this.kind===Co.Kind.Video){var e=this._mediaStreamTrack.getSettings(),t=e.width,n=e.height;return t&&n?{width:t,height:n}:void 0}}},{key:"isUpstreamPaused",get:function(){return this._isUpstreamPaused}},{key:"isUserProvided",get:function(){return this.providedByUser}},{key:"waitForDimensions",value:function(){var e=E(i().mark((function e(){var t,n,r,a=arguments;return i().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t=a.length>0&&void 0!==a[0]?a[0]:2e3,this.kind!==Co.Kind.Audio){e.next=3;break}throw new Error("cannot get dimensions for audio tracks");case 3:n=Date.now();case 4:if(!(Date.now()-n<t)){e.next=12;break}if(!(r=this.dimensions)){e.next=8;break}return e.abrupt("return",r);case 8:return e.next=10,na(50);case 10:e.next=4;break;case 12:throw new Vi("unable to get track dimensions after timeout");case 13:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"getDeviceId",value:function(){var e=E(i().mark((function e(){var t,n,r,a;return i().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this.source!==Co.Source.ScreenShare){e.next=2;break}return e.abrupt("return");case 2:return t=this._mediaStreamTrack.getSettings(),n=t.deviceId,r=t.groupId,a=this.kind===Co.Kind.Audio?"audioinput":"videoinput",e.abrupt("return",Ua.getInstance().normalizeDeviceId(a,n,r));case 5:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"mute",value:function(){var e=E(i().mark((function e(){return i().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.setTrackMuted(!0),e.abrupt("return",this);case 2:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"unmute",value:function(){var e=E(i().mark((function e(){return i().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.setTrackMuted(!1),e.abrupt("return",this);case 2:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"replaceTrack",value:function(){var e=E(i().mark((function e(t){var n,r=this,a=arguments;return i().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=!(a.length>1&&void 0!==a[1])||a[1],this.sender){e.next=3;break}throw new Vi("unable to replace an unpublished track");case 3:if(this.attachedElements.forEach((function(e){xo(r._mediaStreamTrack,e)})),this._mediaStreamTrack.removeEventListener("ended",this.handleEnded),this.providedByUser||this._mediaStreamTrack.stop(),t.addEventListener("ended",this.handleEnded),L.debug("replace MediaStreamTrack"),!this.sender){e.next=11;break}return e.next=11,this.sender.replaceTrack(t);case 11:return this._mediaStreamTrack=t,this._mediaStreamTrack.enabled=!this.isMuted,e.next=15,this.resumeUpstream();case 15:return this.attachedElements.forEach((function(e){Eo(t,e)})),this.mediaStream=new MediaStream([t]),this.providedByUser=n,e.abrupt("return",this);case 19:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"restart",value:function(){var e=E(i().mark((function e(t){var n,r,a,o=this;return i().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t||(t=this.constraints),L.debug("restarting track with constraints",t),n={audio:!1,video:!1},this.kind===Co.Kind.Video?n.video=t:n.audio=t,this.attachedElements.forEach((function(e){xo(o._mediaStreamTrack,e)})),this._mediaStreamTrack.removeEventListener("ended",this.handleEnded),this._mediaStreamTrack.stop(),e.next=9,navigator.mediaDevices.getUserMedia(n);case 9:if(r=e.sent,(a=r.getTracks()[0]).addEventListener("ended",this.handleEnded),L.debug("re-acquired MediaStreamTrack"),!this.sender){e.next=16;break}return e.next=16,this.sender.replaceTrack(a);case 16:return this._mediaStreamTrack=a,e.next=19,this.resumeUpstream();case 19:return this.attachedElements.forEach((function(e){Eo(a,e)})),this.mediaStream=r,this.constraints=t,this.emit(po.Restarted,this),e.abrupt("return",this);case 24:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"setTrackMuted",value:function(e){L.debug("setting ".concat(this.kind," track ").concat(e?"muted":"unmuted")),this.isMuted===e&&this._mediaStreamTrack.enabled!==e||(this.isMuted=e,this._mediaStreamTrack.enabled=!e,this.emit(e?po.Muted:po.Unmuted,this))}},{key:"needsReAcquisition",get:function(){return"live"!==this._mediaStreamTrack.readyState||this._mediaStreamTrack.muted||!this._mediaStreamTrack.enabled||this.reacquireTrack}},{key:"handleAppVisibilityChanged",value:function(){var e=E(i().mark((function e(){return i().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,h(p(n.prototype),"handleAppVisibilityChanged",this).call(this);case 2:if(fa()){e.next=4;break}return e.abrupt("return");case 4:if(L.debug("visibility changed, is in Background: ".concat(this.isInBackground)),this.isInBackground||!this.needsReAcquisition||this.isUserProvided||this.isMuted){e.next=10;break}return L.debug("track needs to be reaquired, restarting ".concat(this.source)),e.next=9,this.restart();case 9:this.reacquireTrack=!1;case 10:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"pauseUpstream",value:function(){var e=E(i().mark((function e(){var t,n;return i().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.pauseUpstreamLock.lock();case 2:if(t=e.sent,e.prev=3,!0!==this._isUpstreamPaused){e.next=6;break}return e.abrupt("return");case 6:if(this.sender){e.next=9;break}return L.warn("unable to pause upstream for an unpublished track"),e.abrupt("return");case 9:return this._isUpstreamPaused=!0,this.emit(po.UpstreamPaused,this),n=this.kind===Co.Kind.Audio?Ra():(ka||(ka=Ta()),ka),e.next=14,this.sender.replaceTrack(n);case 14:return e.prev=14,t(),e.finish(14);case 17:case"end":return e.stop()}}),e,this,[[3,,14,17]])})));return function(){return e.apply(this,arguments)}}()},{key:"resumeUpstream",value:function(){var e=E(i().mark((function e(){var t;return i().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.pauseUpstreamLock.lock();case 2:if(t=e.sent,e.prev=3,!1!==this._isUpstreamPaused){e.next=6;break}return e.abrupt("return");case 6:if(this.sender){e.next=9;break}return L.warn("unable to resume upstream for an unpublished track"),e.abrupt("return");case 9:return this._isUpstreamPaused=!1,this.emit(po.UpstreamResumed,this),e.next=13,this.sender.replaceTrack(this._mediaStreamTrack);case 13:return e.prev=13,t(),e.finish(13);case 16:case"end":return e.stop()}}),e,this,[[3,,13,16]])})));return function(){return e.apply(this,arguments)}}()}]),n}(Co),Uo=function(e){m(n,e);var t=b(n);function n(e,r){var a;x(this,n);var o=!(arguments.length>2&&void 0!==arguments[2])||arguments[2];return(a=t.call(this,e,Co.Kind.Audio,r,o)).stopOnMute=!1,a.monitorSender=E(i().mark((function e(){var t;return i().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(a.sender){e.next=3;break}return a._currentBitrate=0,e.abrupt("return");case 3:return e.prev=3,e.next=6,a.getSenderStats();case 6:t=e.sent,e.next=13;break;case 9:return e.prev=9,e.t0=e.catch(3),L.error("could not get audio sender stats",{error:e.t0}),e.abrupt("return");case 13:t&&a.prevStats&&(a._currentBitrate=Lo(t,a.prevStats)),a.prevStats=t;case 15:case"end":return e.stop()}}),e,null,[[3,9]])}))),a.checkForSilence(),a}return T(n,[{key:"setDeviceId",value:function(){var e=E(i().mark((function e(t){return i().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this.constraints.deviceId!==t){e.next=2;break}return e.abrupt("return");case 2:if(this.constraints.deviceId=t,this.isMuted){e.next=6;break}return e.next=6,this.restartTrack();case 6:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"mute",value:function(){var e=E(i().mark((function e(){var t;return i().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.muteLock.lock();case 2:return t=e.sent,e.prev=3,this.source===Co.Source.Microphone&&this.stopOnMute&&!this.isUserProvided&&(L.debug("stopping mic track"),this._mediaStreamTrack.stop()),e.next=7,h(p(n.prototype),"mute",this).call(this);case 7:return e.abrupt("return",this);case 8:return e.prev=8,t(),e.finish(8);case 11:case"end":return e.stop()}}),e,this,[[3,,8,11]])})));return function(){return e.apply(this,arguments)}}()},{key:"unmute",value:function(){var e=E(i().mark((function e(){var t;return i().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.muteLock.lock();case 2:if(t=e.sent,e.prev=3,this.source!==Co.Source.Microphone||!this.stopOnMute&&"ended"!==this._mediaStreamTrack.readyState||this.isUserProvided){e.next=8;break}return L.debug("reacquiring mic track"),e.next=8,this.restartTrack();case 8:return e.next=10,h(p(n.prototype),"unmute",this).call(this);case 10:return e.abrupt("return",this);case 11:return e.prev=11,t(),e.finish(11);case 14:case"end":return e.stop()}}),e,this,[[3,,11,14]])})));return function(){return e.apply(this,arguments)}}()},{key:"restartTrack",value:function(){var e=E(i().mark((function e(t){var n,r;return i().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t&&"boolean"!==typeof(r=Yi({audio:t})).audio&&(n=r.audio),e.next=3,this.restart(n);case 3:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"restart",value:function(){var e=E(i().mark((function e(t){var r;return i().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,h(p(n.prototype),"restart",this).call(this,t);case 2:return r=e.sent,this.checkForSilence(),e.abrupt("return",r);case 5:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"startMonitor",value:function(){var e=this;pa()&&(this.monitorInterval||(this.monitorInterval=setInterval((function(){e.monitorSender()}),Ao)))}},{key:"getSenderStats",value:function(){var e=E(i().mark((function e(){var t,n;return i().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(null===(t=this.sender)||void 0===t?void 0:t.getStats){e.next=2;break}return e.abrupt("return",void 0);case 2:return e.next=4,this.sender.getStats();case 4:return e.sent.forEach((function(e){"outbound-rtp"===e.type&&(n={type:"audio",streamId:e.id,packetsSent:e.packetsSent,packetsLost:e.packetsLost,bytesSent:e.bytesSent,timestamp:e.timestamp,roundTripTime:e.roundTripTime,jitter:e.jitter})})),e.abrupt("return",n);case 7:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"checkForSilence",value:function(){var e=E(i().mark((function e(){var t;return i().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Xi(this);case 2:return(t=e.sent)&&(this.isMuted||L.warn("silence detected on local audio track"),this.emit(po.AudioSilenceDetected)),e.abrupt("return",t);case 5:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()}]),n}(Mo),Fo=function(e){m(n,e);var t=b(n);function n(e,r){var a;x(this,n);var o=!(arguments.length>2&&void 0!==arguments[2])||arguments[2];return(a=t.call(this,e,Co.Kind.Video,r,o)).simulcastCodecs=new Map,a.monitorSender=E(i().mark((function e(){var t,n,r;return i().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(a.sender){e.next=3;break}return a._currentBitrate=0,e.abrupt("return");case 3:return e.prev=3,e.next=6,a.getSenderStats();case 6:t=e.sent,e.next=13;break;case 9:return e.prev=9,e.t0=e.catch(3),L.error("could not get audio sender stats",{error:e.t0}),e.abrupt("return");case 13:n=new Map(t.map((function(e){return[e.rid,e]}))),a.prevStats&&(r=0,n.forEach((function(e,t){var n,i=null===(n=a.prevStats)||void 0===n?void 0:n.get(t);r+=Lo(e,i)})),a._currentBitrate=r),a.prevStats=n;case 16:case"end":return e.stop()}}),e,null,[[3,9]])}))),a.senderLock=new Oa,a}return T(n,[{key:"isSimulcast",get:function(){return!!(this.sender&&this.sender.getParameters().encodings.length>1)}},{key:"startMonitor",value:function(e){var t,n=this;if(this.signalClient=e,pa()){var r=null===(t=this.sender)||void 0===t?void 0:t.getParameters();r&&(this.encodings=r.encodings),this.monitorInterval||(this.monitorInterval=setInterval((function(){n.monitorSender()}),Ao))}}},{key:"stop",value:function(){this._mediaStreamTrack.getConstraints(),this.simulcastCodecs.forEach((function(e){e.mediaStreamTrack.stop()})),h(p(n.prototype),"stop",this).call(this)}},{key:"mute",value:function(){var e=E(i().mark((function e(){var t;return i().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.muteLock.lock();case 2:return t=e.sent,e.prev=3,this.source!==Co.Source.Camera||this.isUserProvided||(L.debug("stopping camera track"),this._mediaStreamTrack.stop()),e.next=7,h(p(n.prototype),"mute",this).call(this);case 7:return e.abrupt("return",this);case 8:return e.prev=8,t(),e.finish(8);case 11:case"end":return e.stop()}}),e,this,[[3,,8,11]])})));return function(){return e.apply(this,arguments)}}()},{key:"unmute",value:function(){var e=E(i().mark((function e(){var t;return i().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.muteLock.lock();case 2:if(t=e.sent,e.prev=3,this.source!==Co.Source.Camera||this.isUserProvided){e.next=8;break}return L.debug("reacquiring camera track"),e.next=8,this.restartTrack();case 8:return e.next=10,h(p(n.prototype),"unmute",this).call(this);case 10:return e.abrupt("return",this);case 11:return e.prev=11,t(),e.finish(11);case 14:case"end":return e.stop()}}),e,this,[[3,,11,14]])})));return function(){return e.apply(this,arguments)}}()},{key:"getSenderStats",value:function(){var e=E(i().mark((function e(){var t,n,r;return i().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(null===(t=this.sender)||void 0===t?void 0:t.getStats){e.next=2;break}return e.abrupt("return",[]);case 2:return n=[],e.next=5,this.sender.getStats();case 5:return(r=e.sent).forEach((function(e){var t;if("outbound-rtp"===e.type){var i={type:"video",streamId:e.id,frameHeight:e.frameHeight,frameWidth:e.frameWidth,firCount:e.firCount,pliCount:e.pliCount,nackCount:e.nackCount,packetsSent:e.packetsSent,bytesSent:e.bytesSent,framesSent:e.framesSent,timestamp:e.timestamp,rid:null!==(t=e.rid)&&void 0!==t?t:e.id,retransmittedPacketsSent:e.retransmittedPacketsSent,qualityLimitationReason:e.qualityLimitationReason,qualityLimitationResolutionChanges:e.qualityLimitationResolutionChanges},a=r.get(e.remoteId);a&&(i.jitter=a.jitter,i.packetsLost=a.packetsLost,i.roundTripTime=a.roundTripTime),n.push(i)}})),e.abrupt("return",n);case 8:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"setPublishingQuality",value:function(e){for(var t=[],n=kt.LOW;n<=kt.HIGH;n+=1)t.push({quality:n,enabled:n<=e});L.debug("setting publishing quality. max quality ".concat(e)),this.setPublishingLayers(t)}},{key:"setDeviceId",value:function(){var e=E(i().mark((function e(t){return i().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this.constraints.deviceId!==t){e.next=2;break}return e.abrupt("return");case 2:if(this.constraints.deviceId=t,this.isMuted){e.next=6;break}return e.next=6,this.restartTrack();case 6:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"restartTrack",value:function(){var e=E(i().mark((function e(t){var n,r;return i().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t&&"boolean"!==typeof(r=Yi({video:t})).video&&(n=r.video),e.next=3,this.restart(n);case 3:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"addSimulcastTrack",value:function(e,t){if(this.simulcastCodecs.has(e))throw new Error("".concat(e," already added"));var n={codec:e,mediaStreamTrack:this.mediaStreamTrack.clone(),sender:void 0,encodings:t};return this.simulcastCodecs.set(e,n),n}},{key:"setSimulcastTrackSender",value:function(e,t){var n=this,r=this.simulcastCodecs.get(e);r&&(r.sender=t,setTimeout((function(){n.subscribedCodecs&&n.setPublishingCodecs(n.subscribedCodecs)}),5e3))}},{key:"setPublishingCodecs",value:function(){var e=E(i().mark((function e(t){var n,r,a,o,s,c,l,d,f,p;return i().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(L.debug("setting publishing codecs",{codecs:t,currentCodec:this.codec}),this.codec||!(t.length>0)){e.next=5;break}return e.next=4,this.setPublishingLayers(t[0].qualities);case 4:return e.abrupt("return",[]);case 5:this.subscribedCodecs=t,n=[],r=!1,a=!1,e.prev=9,s=yn(t);case 11:return e.next=13,s.next();case 13:if(!(r=!(c=e.sent).done)){e.next=50;break}if(l=c.value,this.codec&&this.codec!==l.codec){e.next=20;break}return e.next=18,this.setPublishingLayers(l.qualities);case 18:e.next=47;break;case 20:if(d=this.simulcastCodecs.get(l.codec),L.debug("try setPublishingCodec for ".concat(l.codec),d),d&&d.sender){e.next=43;break}f=u(l.qualities),e.prev=24,f.s();case 26:if((p=f.n()).done){e.next=33;break}if(!p.value.enabled){e.next=31;break}return n.push(l.codec),e.abrupt("break",33);case 31:e.next=26;break;case 33:e.next=38;break;case 35:e.prev=35,e.t0=e.catch(24),f.e(e.t0);case 38:return e.prev=38,f.f(),e.finish(38);case 41:e.next=47;break;case 43:if(!d.encodings){e.next=47;break}return L.debug("try setPublishingLayersForSender ".concat(l.codec)),e.next=47,jo(d.sender,d.encodings,l.qualities,this.senderLock);case 47:r=!1,e.next=11;break;case 50:e.next=56;break;case 52:e.prev=52,e.t1=e.catch(9),a=!0,o=e.t1;case 56:if(e.prev=56,e.prev=57,!r||null==s.return){e.next=61;break}return e.next=61,s.return();case 61:if(e.prev=61,!a){e.next=64;break}throw o;case 64:return e.finish(61);case 65:return e.finish(56);case 66:return e.abrupt("return",n);case 67:case"end":return e.stop()}}),e,this,[[9,52,56,66],[24,35,38,41],[57,,61,65]])})));return function(t){return e.apply(this,arguments)}}()},{key:"setPublishingLayers",value:function(){var e=E(i().mark((function e(t){return i().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(L.debug("setting publishing layers",t),this.sender&&this.encodings){e.next=3;break}return e.abrupt("return");case 3:return e.next=5,jo(this.sender,this.encodings,t,this.senderLock);case 5:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"handleAppVisibilityChanged",value:function(){var e=E(i().mark((function e(){return i().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,h(p(n.prototype),"handleAppVisibilityChanged",this).call(this);case 2:if(fa()){e.next=4;break}return e.abrupt("return");case 4:this.isInBackground&&this.source===Co.Source.Camera&&(this._mediaStreamTrack.enabled=!1);case 5:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()}]),n}(Mo);function jo(e,t,n,r){return Bo.apply(this,arguments)}function Bo(){return(Bo=E(i().mark((function e(t,n,r,a){var o,s,c,u;return i().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,a.lock();case 2:if(o=e.sent,L.debug("setPublishingLayersForSender",{sender:t,qualities:r,senderEncodings:n}),e.prev=4,s=t.getParameters(),c=s.encodings){e.next=9;break}return e.abrupt("return");case 9:if(c.length===n.length){e.next=12;break}return L.warn("cannot set publishing layers, encodings mismatch"),e.abrupt("return");case 12:if(u=!1,c.forEach((function(e,t){var i,a=null!==(i=e.rid)&&void 0!==i?i:"";""===a&&(a="q");var o=zo(a),s=r.find((function(e){return e.quality===o}));s&&e.active!==s.enabled&&(u=!0,e.active=s.enabled,L.debug("setting layer ".concat(s.quality," to ").concat(e.active?"enabled":"disabled")),la()&&(s.enabled?(e.scaleResolutionDownBy=n[t].scaleResolutionDownBy,e.maxBitrate=n[t].maxBitrate,e.maxFrameRate=n[t].maxFrameRate):(e.scaleResolutionDownBy=4,e.maxBitrate=10,e.maxFrameRate=2)))})),!u){e.next=18;break}return s.encodings=c,e.next=18,t.setParameters(s);case 18:return e.prev=18,o(),e.finish(18);case 21:case"end":return e.stop()}}),e,null,[[4,,18,21]])})))).apply(this,arguments)}function zo(e){switch(e){case"f":return kt.HIGH;case"h":return kt.MEDIUM;case"q":return kt.LOW;default:return kt.UNRECOGNIZED}}function $o(e,t,n){return n?n.map((function(r){var i,a,o,s=null!==(i=r.scaleResolutionDownBy)&&void 0!==i?i:1,c=zo(null!==(a=r.rid)&&void 0!==a?a:"");return c===kt.UNRECOGNIZED&&1===n.length&&(c=kt.HIGH),{quality:c,width:e/s,height:t/s,bitrate:null!==(o=r.maxBitrate)&&void 0!==o?o:0,ssrc:0}})):[{quality:kt.HIGH,width:e,height:t,bitrate:0,ssrc:0}]}var Vo=function(e){m(n,e);var t=b(n);function n(e,r,i,a){var o;return x(this,n),(o=t.call(this,e,i)).sid=r,o.receiver=a,o}return T(n,[{key:"setMuted",value:function(e){this.isMuted!==e&&(this.isMuted=e,this._mediaStreamTrack.enabled=!e,this.emit(e?po.Muted:po.Unmuted,this))}},{key:"setMediaStream",value:function(e){var t=this;this.mediaStream=e,e.onremovetrack=function(){t.receiver=void 0,t._currentBitrate=0,t.emit(po.Ended,t)}}},{key:"start",value:function(){this.startMonitor(),h(p(n.prototype),"enable",this).call(this)}},{key:"stop",value:function(){this.stopMonitor(),h(p(n.prototype),"disable",this).call(this)}},{key:"startMonitor",value:function(){var e=this;this.monitorInterval||(this.monitorInterval=setInterval((function(){return e.monitorReceiver()}),Ao))}}]),n}(Co),Jo=function(e){m(n,e);var t=b(n);function n(e,r,a,o,s){var c;return x(this,n),(c=t.call(this,e,r,Co.Kind.Audio,a)).monitorReceiver=E(i().mark((function e(){var t;return i().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(c.receiver){e.next=3;break}return c._currentBitrate=0,e.abrupt("return");case 3:return e.next=5,c.getReceiverStats();case 5:(t=e.sent)&&c.prevStats&&c.receiver&&(c._currentBitrate=Lo(t,c.prevStats)),c.prevStats=t;case 8:case"end":return e.stop()}}),e)}))),c.audioContext=o,c.webAudioPluginNodes=[],s&&(c.sinkId=s.deviceId),c}return T(n,[{key:"setVolume",value:function(e){var t,n,r=u(this.attachedElements);try{for(r.s();!(n=r.n()).done;){var i=n.value;this.audioContext?null===(t=this.gainNode)||void 0===t||t.gain.setTargetAtTime(e,0,.1):i.volume=e}}catch(a){r.e(a)}finally{r.f()}this.elementVolume=e}},{key:"getVolume",value:function(){if(this.elementVolume)return this.elementVolume;var e=0;return this.attachedElements.forEach((function(t){t.volume>e&&(e=t.volume)})),e}},{key:"setSinkId",value:function(){var e=E(i().mark((function e(t){return i().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.sinkId=t,e.next=3,Promise.all(this.attachedElements.map((function(e){if(sa(e))return e.setSinkId(t)})));case 3:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"attach",value:function(e){var t=0===this.attachedElements.length;return e?h(p(n.prototype),"attach",this).call(this,e):e=h(p(n.prototype),"attach",this).call(this),this.elementVolume&&(e.volume=this.elementVolume),this.sinkId&&sa(e)&&e.setSinkId(this.sinkId),this.audioContext&&t&&(L.debug("using audio context mapping"),this.connectWebAudio(this.audioContext,e),e.volume=0,e.muted=!0),e}},{key:"detach",value:function(e){var t;return e?(t=h(p(n.prototype),"detach",this).call(this,e),this.audioContext&&(this.attachedElements.length>0?this.connectWebAudio(this.audioContext,this.attachedElements[0]):this.disconnectWebAudio())):(t=h(p(n.prototype),"detach",this).call(this),this.disconnectWebAudio()),t}},{key:"setAudioContext",value:function(e){this.audioContext=e,e&&this.attachedElements.length>0?this.connectWebAudio(e,this.attachedElements[0]):e||this.disconnectWebAudio()}},{key:"setWebAudioPlugins",value:function(e){this.webAudioPluginNodes=e,this.attachedElements.length>0&&this.audioContext&&this.connectWebAudio(this.audioContext,this.attachedElements[0])}},{key:"connectWebAudio",value:function(e,t){var n=this;this.disconnectWebAudio(),this.sourceNode=e.createMediaStreamSource(t.srcObject);var r=this.sourceNode;this.webAudioPluginNodes.forEach((function(e){r.connect(e),r=e})),this.gainNode=e.createGain(),r.connect(this.gainNode),this.gainNode.connect(e.destination),this.elementVolume&&this.gainNode.gain.setTargetAtTime(this.elementVolume,0,.1),"running"!==e.state&&e.resume().then((function(){"running"!==e.state&&n.emit(po.AudioPlaybackFailed,new Error("Audio Context couldn't be started automatically"))})).catch((function(e){n.emit(po.AudioPlaybackFailed,e)}))}},{key:"disconnectWebAudio",value:function(){var e,t;null===(e=this.gainNode)||void 0===e||e.disconnect(),null===(t=this.sourceNode)||void 0===t||t.disconnect(),this.gainNode=void 0,this.sourceNode=void 0}},{key:"getReceiverStats",value:function(){var e=E(i().mark((function e(){var t;return i().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this.receiver&&this.receiver.getStats){e.next=2;break}return e.abrupt("return");case 2:return e.next=4,this.receiver.getStats();case 4:return e.sent.forEach((function(e){"inbound-rtp"===e.type&&(t={type:"audio",timestamp:e.timestamp,jitter:e.jitter,bytesReceived:e.bytesReceived,concealedSamples:e.concealedSamples,concealmentEvents:e.concealmentEvents,silentConcealedSamples:e.silentConcealedSamples,silentConcealmentEvents:e.silentConcealmentEvents,totalAudioEnergy:e.totalAudioEnergy,totalSamplesDuration:e.totalSamplesDuration})})),e.abrupt("return",t);case 7:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()}]),n}(Vo),Wo=function(e){m(n,e);var t=b(n);function n(e,r,a,o){var s;return x(this,n),(s=t.call(this,e,r,Co.Kind.Video,a)).elementInfos=[],s.isObserved=!1,s.monitorReceiver=E(i().mark((function e(){var t;return i().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(s.receiver){e.next=3;break}return s._currentBitrate=0,e.abrupt("return");case 3:return e.next=5,s.getReceiverStats();case 5:(t=e.sent)&&s.prevStats&&s.receiver&&(s._currentBitrate=Lo(t,s.prevStats)),s.prevStats=t;case 8:case"end":return e.stop()}}),e)}))),s.debouncedHandleResize=Ya((function(){s.updateDimensions()}),100),s.adaptiveStreamSettings=o,s}return T(n,[{key:"isAdaptiveStream",get:function(){return void 0!==this.adaptiveStreamSettings}},{key:"mediaStreamTrack",get:function(){return this.isAdaptiveStream&&!this.isObserved&&L.warn("When using adaptiveStream, you need to use remoteVideoTrack.attach() to add the track to a HTMLVideoElement, otherwise your video tracks might never start"),this._mediaStreamTrack}},{key:"setMuted",value:function(e){var t=this;h(p(n.prototype),"setMuted",this).call(this,e),this.attachedElements.forEach((function(n){e?xo(t._mediaStreamTrack,n):Eo(t._mediaStreamTrack,n)}))}},{key:"attach",value:function(e){if(e?h(p(n.prototype),"attach",this).call(this,e):e=h(p(n.prototype),"attach",this).call(this),this.adaptiveStreamSettings&&void 0===this.elementInfos.find((function(t){return t.element===e}))){var t=new qo(e);this.observeElementInfo(t)}return e}},{key:"observeElementInfo",value:function(e){var t=this;this.adaptiveStreamSettings&&void 0===this.elementInfos.find((function(t){return t===e}))?(e.handleResize=function(){t.debouncedHandleResize()},e.handleVisibilityChanged=function(){t.updateVisibility()},this.elementInfos.push(e),e.observe(),this.debouncedHandleResize(),this.updateVisibility(),this.isObserved=!0):L.warn("visibility resize observer not triggered")}},{key:"stopObservingElementInfo",value:function(e){if(this.isAdaptiveStream){var t,n=this.elementInfos.filter((function(t){return t===e})),r=u(n);try{for(r.s();!(t=r.n()).done;){t.value.stopObserving()}}catch(i){r.e(i)}finally{r.f()}this.elementInfos=this.elementInfos.filter((function(t){return t!==e})),this.updateVisibility()}else L.warn("stopObservingElementInfo ignored")}},{key:"detach",value:function(e){var t;if(e)return this.stopObservingElement(e),h(p(n.prototype),"detach",this).call(this,e);var r,i=u(t=h(p(n.prototype),"detach",this).call(this));try{for(i.s();!(r=i.n()).done;){var a=r.value;this.stopObservingElement(a)}}catch(o){i.e(o)}finally{i.f()}return t}},{key:"getDecoderImplementation",value:function(){var e;return null===(e=this.prevStats)||void 0===e?void 0:e.decoderImplementation}},{key:"getReceiverStats",value:function(){var e=E(i().mark((function e(){var t;return i().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this.receiver&&this.receiver.getStats){e.next=2;break}return e.abrupt("return");case 2:return e.next=4,this.receiver.getStats();case 4:return e.sent.forEach((function(e){"inbound-rtp"===e.type&&(t={type:"video",framesDecoded:e.framesDecoded,framesDropped:e.framesDropped,framesReceived:e.framesReceived,packetsReceived:e.packetsReceived,packetsLost:e.packetsLost,frameWidth:e.frameWidth,frameHeight:e.frameHeight,pliCount:e.pliCount,firCount:e.firCount,nackCount:e.nackCount,jitter:e.jitter,timestamp:e.timestamp,bytesReceived:e.bytesReceived,decoderImplementation:e.decoderImplementation})})),e.abrupt("return",t);case 7:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"stopObservingElement",value:function(e){var t,n=this.elementInfos.filter((function(t){return t.element===e})),r=u(n);try{for(r.s();!(t=r.n()).done;){t.value.stopObserving()}}catch(i){r.e(i)}finally{r.f()}this.elementInfos=this.elementInfos.filter((function(t){return t.element!==e}))}},{key:"handleAppVisibilityChanged",value:function(){var e=E(i().mark((function e(){return i().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,h(p(n.prototype),"handleAppVisibilityChanged",this).call(this);case 2:if(this.isAdaptiveStream){e.next=4;break}return e.abrupt("return");case 4:this.updateVisibility();case 5:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"updateVisibility",value:function(){var e,t,n=this,r=this.elementInfos.reduce((function(e,t){return Math.max(e,t.visibilityChangedAt||0)}),0),i=!(null!==(t=null===(e=this.adaptiveStreamSettings)||void 0===e?void 0:e.pauseVideoInBackground)&&void 0!==t&&!t)&&this.isInBackground,a=this.elementInfos.some((function(e){return e.pictureInPicture})),o=this.elementInfos.some((function(e){return e.visible}))&&!i||a;this.lastVisible!==o&&(!o&&Date.now()-r<100?Hi.setTimeout((function(){n.updateVisibility()}),100):(this.lastVisible=o,this.emit(po.VisibilityChanged,o,this)))}},{key:"updateDimensions",value:function(){var e,t,n,r,i,a=0,o=0,s=u(this.elementInfos);try{for(s.s();!(i=s.n()).done;){var c=i.value,l=null!==(t=null===(e=this.adaptiveStreamSettings)||void 0===e?void 0:e.pixelDensity)&&void 0!==t?t:1,d="screen"===l?ga():l,f=c.width()*d,p=c.height()*d;f+p>a+o&&(a=f,o=p)}}catch(h){s.e(h)}finally{s.f()}(null===(n=this.lastDimensions)||void 0===n?void 0:n.width)===a&&(null===(r=this.lastDimensions)||void 0===r?void 0:r.height)===o||(this.lastDimensions={width:a,height:o},this.emit(po.VideoDimensionsChanged,this.lastDimensions,this))}}]),n}(Vo),qo=function(){function e(t,n){var r=this;x(this,e),this.onVisibilityChanged=function(e){var t,n=e.target,i=e.isIntersecting;n===r.element&&(r.isIntersecting=i,r.visibilityChangedAt=Date.now(),null===(t=r.handleVisibilityChanged)||void 0===t||t.call(r))},this.onEnterPiP=function(){var e;r.isPiP=!0,null===(e=r.handleVisibilityChanged)||void 0===e||e.call(r)},this.onLeavePiP=function(){var e;r.isPiP=!1,null===(e=r.handleVisibilityChanged)||void 0===e||e.call(r)},this.element=t,this.isIntersecting=null!==n&&void 0!==n?n:Ho(t),this.isPiP=pa()&&document.pictureInPictureElement===t,this.visibilityChangedAt=0}return T(e,[{key:"visible",get:function(){return this.isPiP||this.isIntersecting}},{key:"pictureInPicture",get:function(){return this.isPiP}},{key:"width",value:function(){return this.element.clientWidth}},{key:"height",value:function(){return this.element.clientHeight}},{key:"observe",value:function(){var e=this;this.isIntersecting=Ho(this.element),this.isPiP=document.pictureInPictureElement===this.element,this.element.handleResize=function(){var t;null===(t=e.handleResize)||void 0===t||t.call(e)},this.element.handleVisibilityChanged=this.onVisibilityChanged,xa().observe(this.element),Ca().observe(this.element),this.element.addEventListener("enterpictureinpicture",this.onEnterPiP),this.element.addEventListener("leavepictureinpicture",this.onLeavePiP)}},{key:"stopObserving",value:function(){var e,t;null===(e=xa())||void 0===e||e.unobserve(this.element),null===(t=Ca())||void 0===t||t.unobserve(this.element),this.element.removeEventListener("enterpictureinpicture",this.onEnterPiP),this.element.removeEventListener("leavepictureinpicture",this.onLeavePiP)}}]),e}();function Ho(e){for(var t=e.offsetTop,n=e.offsetLeft,r=e.offsetWidth,i=e.offsetHeight,a=e.hidden,o=getComputedStyle(e),s=o.opacity,c=o.display;e.offsetParent;)t+=(e=e.offsetParent).offsetTop,n+=e.offsetLeft;return t<window.pageYOffset+window.innerHeight&&n<window.pageXOffset+window.innerWidth&&t+i>window.pageYOffset&&n+r>window.pageXOffset&&!a&&(""===s||parseFloat(s)>0)&&"none"!==c}var Go=function(e){m(n,e);var t=b(n);function n(e,r,i){var a;return x(this,n),(a=t.call(this)).metadataMuted=!1,a.handleMuted=function(){a.emit(po.Muted)},a.handleUnmuted=function(){a.emit(po.Unmuted)},a.setMaxListeners(100),a.kind=e,a.trackSid=r,a.trackName=i,a.source=Co.Source.Unknown,a}return T(n,[{key:"setTrack",value:function(e){this.track&&(this.track.off(po.Muted,this.handleMuted),this.track.off(po.Unmuted,this.handleUnmuted)),this.track=e,e&&(e.on(po.Muted,this.handleMuted),e.on(po.Unmuted,this.handleUnmuted))}},{key:"isMuted",get:function(){return this.metadataMuted}},{key:"isEnabled",get:function(){return!0}},{key:"isSubscribed",get:function(){return void 0!==this.track}},{key:"audioTrack",get:function(){if(this.track instanceof Uo||this.track instanceof Jo)return this.track}},{key:"videoTrack",get:function(){if(this.track instanceof Fo||this.track instanceof Wo)return this.track}},{key:"updateInfo",value:function(e){this.trackSid=e.sid,this.trackName=e.name,this.source=Co.sourceFromProto(e.source),this.mimeType=e.mimeType,this.kind===Co.Kind.Video&&e.width>0&&(this.dimensions={width:e.width,height:e.height},this.simulcasted=e.simulcast),this.trackInfo=e,L.trace("update publication info",{info:e})}}]),n}(Bn.EventEmitter);!function(e){var t,n;(t=e.SubscriptionStatus||(e.SubscriptionStatus={})).Desired="desired",t.Subscribed="subscribed",t.Unsubscribed="unsubscribed",(n=e.PermissionStatus||(e.PermissionStatus={})).Allowed="allowed",n.NotAllowed="not_allowed"}(Go||(Go={}));var Qo,Zo=function(e){m(n,e);var t=b(n);function n(e,r,i){var a;return x(this,n),(a=t.call(this,e,r.sid,r.name)).track=void 0,a.handleTrackEnded=function(){a.emit(po.Ended)},a.updateInfo(r),a.setTrack(i),a}return T(n,[{key:"isUpstreamPaused",get:function(){var e;return null===(e=this.track)||void 0===e?void 0:e.isUpstreamPaused}},{key:"setTrack",value:function(e){this.track&&this.track.off(po.Ended,this.handleTrackEnded),h(p(n.prototype),"setTrack",this).call(this,e),e&&e.on(po.Ended,this.handleTrackEnded)}},{key:"isMuted",get:function(){return this.track?this.track.isMuted:h(p(n.prototype),"isMuted",this)}},{key:"audioTrack",get:function(){return h(p(n.prototype),"audioTrack",this)}},{key:"videoTrack",get:function(){return h(p(n.prototype),"videoTrack",this)}},{key:"mute",value:function(){var e=E(i().mark((function e(){var t;return i().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",null===(t=this.track)||void 0===t?void 0:t.mute());case 1:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"unmute",value:function(){var e=E(i().mark((function e(){var t;return i().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",null===(t=this.track)||void 0===t?void 0:t.unmute());case 1:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"pauseUpstream",value:function(){var e=E(i().mark((function e(){var t;return i().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,null===(t=this.track)||void 0===t?void 0:t.pauseUpstream();case 2:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"resumeUpstream",value:function(){var e=E(i().mark((function e(){var t;return i().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,null===(t=this.track)||void 0===t?void 0:t.resumeUpstream();case 2:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()}]),n}(Go);!function(e){e.Excellent="excellent",e.Good="good",e.Poor="poor",e.Unknown="unknown"}(Qo||(Qo={}));var Ko=function(e){m(n,e);var t=b(n);function n(e,r,i,a){var o;return x(this,n),(o=t.call(this)).audioLevel=0,o.isSpeaking=!1,o._connectionQuality=Qo.Unknown,o.setMaxListeners(100),o.sid=e,o.identity=r,o.name=i,o.metadata=a,o.audioTracks=new Map,o.videoTracks=new Map,o.tracks=new Map,o}return T(n,[{key:"getTracks",value:function(){return Array.from(this.tracks.values())}},{key:"getTrack",value:function(e){var t,n=u(this.tracks);try{for(n.s();!(t=n.n()).done;){var r=s(t.value,2)[1];if(r.source===e)return r}}catch(i){n.e(i)}finally{n.f()}}},{key:"getTrackByName",value:function(e){var t,n=u(this.tracks);try{for(n.s();!(t=n.n()).done;){var r=s(t.value,2)[1];if(r.trackName===e)return r}}catch(i){n.e(i)}finally{n.f()}}},{key:"connectionQuality",get:function(){return this._connectionQuality}},{key:"isCameraEnabled",get:function(){var e,t=this.getTrack(Co.Source.Camera);return!(null===(e=null===t||void 0===t?void 0:t.isMuted)||void 0===e||e)}},{key:"isMicrophoneEnabled",get:function(){var e,t=this.getTrack(Co.Source.Microphone);return!(null===(e=null===t||void 0===t?void 0:t.isMuted)||void 0===e||e)}},{key:"isScreenShareEnabled",get:function(){return!!this.getTrack(Co.Source.ScreenShare)}},{key:"isLocal",get:function(){return!1}},{key:"joinedAt",get:function(){return this.participantInfo?new Date(1e3*this.participantInfo.joinedAt):new Date}},{key:"updateInfo",value:function(e){return!(this.participantInfo&&this.participantInfo.sid===e.sid&&this.participantInfo.version>e.version)&&(this.identity=e.identity,this.sid=e.sid,this.setName(e.name),this.setMetadata(e.metadata),e.permission&&this.setPermissions(e.permission),this.participantInfo=e,L.trace("update participant info",{info:e}),!0)}},{key:"setMetadata",value:function(e){var t=this.metadata!==e,n=this.metadata;this.metadata=e,t&&this.emit(lo.ParticipantMetadataChanged,n)}},{key:"setName",value:function(e){var t=this.name!==e;this.name=e,t&&this.emit(lo.ParticipantNameChanged,e)}},{key:"setPermissions",value:function(e){var t,n,r,i,a,o=this,s=this.permissions,c=e.canPublish!==(null===(t=this.permissions)||void 0===t?void 0:t.canPublish)||e.canSubscribe!==(null===(n=this.permissions)||void 0===n?void 0:n.canSubscribe)||e.canPublishData!==(null===(r=this.permissions)||void 0===r?void 0:r.canPublishData)||e.hidden!==(null===(i=this.permissions)||void 0===i?void 0:i.hidden)||e.recorder!==(null===(a=this.permissions)||void 0===a?void 0:a.recorder)||e.canPublishSources.length!==this.permissions.canPublishSources.length||e.canPublishSources.some((function(e,t){var n;return e!==(null===(n=o.permissions)||void 0===n?void 0:n.canPublishSources[t])}));return this.permissions=e,c&&this.emit(lo.ParticipantPermissionsChanged,s),c}},{key:"setIsSpeaking",value:function(e){e!==this.isSpeaking&&(this.isSpeaking=e,e&&(this.lastSpokeAt=new Date),this.emit(lo.IsSpeakingChanged,e))}},{key:"setConnectionQuality",value:function(e){var t=this._connectionQuality;this._connectionQuality=function(e){switch(e){case wt.EXCELLENT:return Qo.Excellent;case wt.GOOD:return Qo.Good;case wt.POOR:return Qo.Poor;default:return Qo.Unknown}}(e),t!==this._connectionQuality&&this.emit(lo.ConnectionQualityChanged,this._connectionQuality)}},{key:"addTrackPublication",value:function(e){var t=this;e.on(po.Muted,(function(){t.emit(lo.TrackMuted,e)})),e.on(po.Unmuted,(function(){t.emit(lo.TrackUnmuted,e)}));var n=e;switch(n.track&&(n.track.sid=e.trackSid),this.tracks.set(e.trackSid,e),e.kind){case Co.Kind.Audio:this.audioTracks.set(e.trackSid,e);break;case Co.Kind.Video:this.videoTracks.set(e.trackSid,e)}}}]),n}(Bn.EventEmitter);var Yo=function(e){m(n,e);var t=b(n);function n(e,r,i){var a;return x(this,n),(a=t.call(this,e,r.sid,r.name)).track=void 0,a.allowed=!0,a.disabled=!1,a.currentVideoQuality=kt.HIGH,a.handleEnded=function(e){a.setTrack(void 0),a.emit(po.Ended,e)},a.handleVisibilityChange=function(e){L.debug("adaptivestream video visibility ".concat(a.trackSid,", visible=").concat(e),{trackSid:a.trackSid}),a.disabled=!e,a.emitTrackUpdate()},a.handleVideoDimensionsChange=function(e){L.debug("adaptivestream video dimensions ".concat(e.width,"x").concat(e.height),{trackSid:a.trackSid}),a.videoDimensions=e,a.emitTrackUpdate()},a.subscribed=i,a.updateInfo(r),a}return T(n,[{key:"setSubscribed",value:function(e){var t=this.subscriptionStatus,n=this.permissionStatus;this.subscribed=e,e&&(this.allowed=!0);var r={trackSids:[this.trackSid],subscribe:this.subscribed,participantTracks:[{participantSid:"",trackSids:[this.trackSid]}]};this.emit(po.UpdateSubscription,r),this.emitSubscriptionUpdateIfChanged(t),this.emitPermissionUpdateIfChanged(n)}},{key:"subscriptionStatus",get:function(){return!1===this.subscribed?Go.SubscriptionStatus.Unsubscribed:h(p(n.prototype),"isSubscribed",this)?Go.SubscriptionStatus.Subscribed:Go.SubscriptionStatus.Desired}},{key:"permissionStatus",get:function(){return this.allowed?Go.PermissionStatus.Allowed:Go.PermissionStatus.NotAllowed}},{key:"isSubscribed",get:function(){return!1!==this.subscribed&&h(p(n.prototype),"isSubscribed",this)}},{key:"isDesired",get:function(){return!1!==this.subscribed}},{key:"isEnabled",get:function(){return!this.disabled}},{key:"setEnabled",value:function(e){this.isManualOperationAllowed()&&this.disabled!==!e&&(this.disabled=!e,this.emitTrackUpdate())}},{key:"setVideoQuality",value:function(e){this.isManualOperationAllowed()&&this.currentVideoQuality!==e&&(this.currentVideoQuality=e,this.videoDimensions=void 0,this.emitTrackUpdate())}},{key:"setVideoDimensions",value:function(e){var t,n;this.isManualOperationAllowed()&&((null===(t=this.videoDimensions)||void 0===t?void 0:t.width)===e.width&&(null===(n=this.videoDimensions)||void 0===n?void 0:n.height)===e.height||(this.track instanceof Wo&&(this.videoDimensions=e),this.currentVideoQuality=void 0,this.emitTrackUpdate()))}},{key:"setVideoFPS",value:function(e){this.isManualOperationAllowed()&&this.track instanceof Wo&&this.fps!==e&&(this.fps=e,this.emitTrackUpdate())}},{key:"videoQuality",get:function(){return this.currentVideoQuality}},{key:"setTrack",value:function(e){var t=this.subscriptionStatus,r=this.permissionStatus,i=this.track;i!==e&&(i&&(i.off(po.VideoDimensionsChanged,this.handleVideoDimensionsChange),i.off(po.VisibilityChanged,this.handleVisibilityChange),i.off(po.Ended,this.handleEnded),i.detach(),i.stopMonitor(),this.emit(po.Unsubscribed,i)),h(p(n.prototype),"setTrack",this).call(this,e),e&&(e.sid=this.trackSid,e.on(po.VideoDimensionsChanged,this.handleVideoDimensionsChange),e.on(po.VisibilityChanged,this.handleVisibilityChange),e.on(po.Ended,this.handleEnded),this.emit(po.Subscribed,e)),this.emitPermissionUpdateIfChanged(r),this.emitSubscriptionUpdateIfChanged(t))}},{key:"setAllowed",value:function(e){var t=this.subscriptionStatus,n=this.permissionStatus;this.allowed=e,this.emitPermissionUpdateIfChanged(n),this.emitSubscriptionUpdateIfChanged(t)}},{key:"updateInfo",value:function(e){h(p(n.prototype),"updateInfo",this).call(this,e);var t=this.metadataMuted;this.metadataMuted=e.muted,this.track?this.track.setMuted(e.muted):t!==e.muted&&this.emit(e.muted?po.Muted:po.Unmuted)}},{key:"emitSubscriptionUpdateIfChanged",value:function(e){var t=this.subscriptionStatus;e!==t&&this.emit(po.SubscriptionStatusChanged,t,e)}},{key:"emitPermissionUpdateIfChanged",value:function(e){this.permissionStatus!==e&&this.emit(po.SubscriptionPermissionChanged,this.permissionStatus,e)}},{key:"isManualOperationAllowed",value:function(){return this.kind===Co.Kind.Video&&this.isAdaptiveStream?(L.warn("adaptive stream is enabled, cannot change video track settings",{trackSid:this.trackSid}),!1):!!this.isDesired||(L.warn("cannot update track settings when not subscribed",{trackSid:this.trackSid}),!1)}},{key:"isAdaptiveStream",get:function(){return this.track instanceof Wo&&this.track.isAdaptiveStream}},{key:"emitTrackUpdate",value:function(){var e=hi.fromPartial({trackSids:[this.trackSid],disabled:this.disabled,fps:this.fps});this.videoDimensions?(e.width=this.videoDimensions.width,e.height=this.videoDimensions.height):void 0!==this.currentVideoQuality?e.quality=this.currentVideoQuality:e.quality=kt.HIGH,this.emit(po.UpdateSettings,e)}}]),n}(Go),Xo=function(e){m(n,e);var t=b(n);function n(e,r,i,a,o){var s;return x(this,n),(s=t.call(this,r,i||"",a,o)).signalClient=e,s.tracks=new Map,s.audioTracks=new Map,s.videoTracks=new Map,s}return T(n,[{key:"addTrackPublication",value:function(e){var t=this;h(p(n.prototype),"addTrackPublication",this).call(this,e),e.on(po.UpdateSettings,(function(e){L.debug("send update settings",e),t.signalClient.sendUpdateTrackSettings(e)})),e.on(po.UpdateSubscription,(function(e){e.participantTracks.forEach((function(e){e.participantSid=t.sid})),t.signalClient.sendUpdateSubscription(e)})),e.on(po.SubscriptionPermissionChanged,(function(n){t.emit(lo.TrackSubscriptionPermissionChanged,e,n)})),e.on(po.SubscriptionStatusChanged,(function(n){t.emit(lo.TrackSubscriptionStatusChanged,e,n)})),e.on(po.Subscribed,(function(n){t.emit(lo.TrackSubscribed,n,e)})),e.on(po.Unsubscribed,(function(n){t.emit(lo.TrackUnsubscribed,n,e)}))}},{key:"getTrack",value:function(e){var t=h(p(n.prototype),"getTrack",this).call(this,e);if(t)return t}},{key:"getTrackByName",value:function(e){var t=h(p(n.prototype),"getTrackByName",this).call(this,e);if(t)return t}},{key:"setVolume",value:function(e){this.volume=e;var t=this.getTrack(Co.Source.Microphone);t&&t.track&&t.track.setVolume(e)}},{key:"getVolume",value:function(){var e=this.getTrack(Co.Source.Microphone);return e&&e.track?e.track.getVolume():this.volume}},{key:"addSubscribedMediaTrack",value:function(e,t,n,r,i,a){var o,s=this,c=this.getTrackPublication(t);return c||t.startsWith("TR")||this.tracks.forEach((function(t){c||e.kind!==t.kind.toString()||(c=t)})),c?"ended"===e.readyState?(L.error("unable to subscribe because MediaStreamTrack is ended. Do not call MediaStreamTrack.stop()",{participant:this.sid,trackSid:t}),void this.emit(lo.TrackSubscriptionFailed,t)):((o="video"===e.kind?new Wo(e,t,r,i):new Jo(e,t,r,this.audioContext,this.audioOutput)).source=c.source,o.isMuted=c.isMuted,o.setMediaStream(n),o.start(),c.setTrack(o),void 0!==this.volume&&o instanceof Jo&&o.source===Co.Source.Microphone&&o.setVolume(this.volume),c):0===a?(L.error("could not find published track",{participant:this.sid,trackSid:t}),void this.emit(lo.TrackSubscriptionFailed,t)):(void 0===a&&(a=20),void setTimeout((function(){s.addSubscribedMediaTrack(e,t,n,r,i,a-1)}),150))}},{key:"hasMetadata",get:function(){return!!this.participantInfo}},{key:"getTrackPublication",value:function(e){return this.tracks.get(e)}},{key:"updateInfo",value:function(e){var t=this;if(!h(p(n.prototype),"updateInfo",this).call(this,e))return!1;var r=new Map,i=new Map;return e.tracks.forEach((function(n){var a,o=t.getTrackPublication(n.sid);if(o)o.updateInfo(n);else{var s=Co.kindFromProto(n.type);if(!s)return;(o=new Yo(s,n,null===(a=t.signalClient.connectOptions)||void 0===a?void 0:a.autoSubscribe)).updateInfo(n),i.set(n.sid,o);var c=Array.from(t.tracks.values()).find((function(e){return e.source===(null===o||void 0===o?void 0:o.source)}));c&&o.source!==Co.Source.Unknown&&L.debug("received a second track publication for ".concat(t.identity," with the same source: ").concat(o.source),{oldTrack:c,newTrack:o,participant:t,participantInfo:e}),t.addTrackPublication(o)}r.set(n.sid,o)})),this.tracks.forEach((function(e){r.has(e.trackSid)||(L.trace("detected removed track on remote participant, unpublishing",{publication:e,participantSid:t.sid}),t.unpublishTrack(e.trackSid,!0))})),i.forEach((function(e){t.emit(lo.TrackPublished,e)})),!0}},{key:"unpublishTrack",value:function(e,t){var n=this.tracks.get(e);if(n){switch(this.tracks.delete(e),n.kind){case Co.Kind.Audio:this.audioTracks.delete(e);break;case Co.Kind.Video:this.videoTracks.delete(e)}var r=n.track;r&&(r.stop(),n.setTrack(void 0)),t&&this.emit(lo.TrackUnpublished,n)}}},{key:"setAudioContext",value:function(e){this.audioContext=e,this.audioTracks.forEach((function(t){return t.track instanceof Jo&&t.track.setAudioContext(e)}))}},{key:"setAudioOutput",value:function(){var e=E(i().mark((function e(t){var n;return i().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.audioOutput=t,n=[],this.audioTracks.forEach((function(e){var r;e.track instanceof Jo&&n.push(e.track.setSinkId(null!==(r=t.deviceId)&&void 0!==r?r:"default"))})),e.next=5,Promise.all(n);case 5:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"emit",value:function(e){for(var t,r=arguments.length,i=new Array(r>1?r-1:0),a=1;a<r;a++)i[a-1]=arguments[a];return L.trace("participant event",{participant:this.sid,event:e,args:i}),(t=h(p(n.prototype),"emit",this)).call.apply(t,[this,e].concat(i))}}],[{key:"fromParticipantInfo",value:function(e,t){return new n(e,t.sid,t.identity,t.name,t.metadata)}}]),n}(Ko);function es(e,t){switch(e.kind){case"audio":return new Uo(e,t,!1);case"video":return new Fo(e,t,!1);default:throw new Vi("unsupported track type: ".concat(e.kind))}}var ts=Object.values(ho),ns=Object.values(vo),rs=Object.values(mo),is=[ho.h180,ho.h360],as=[vo.h180,vo.h360],os=function(e){return[{scaleResolutionDownBy:2,fps:3}].map((function(t){var n;return new oo(Math.floor(e.width/t.scaleResolutionDownBy),Math.floor(e.height/t.scaleResolutionDownBy),Math.max(15e4,Math.floor(e.encoding.maxBitrate/(Math.pow(t.scaleResolutionDownBy,2)*((null!==(n=e.encoding.maxFramerate)&&void 0!==n?n:30)/t.fps)))),t.fps)}))},ss=["q","h","f"];function cs(e,t,n,r){var i,a,o=null===r||void 0===r?void 0:r.videoEncoding;e&&(o=null===r||void 0===r?void 0:r.screenShareEncoding);var c=null===r||void 0===r?void 0:r.simulcast,u=null===r||void 0===r?void 0:r.scalabilityMode,l=null===r||void 0===r?void 0:r.videoCodec;if(!o&&!c&&!u||!t||!n)return[{}];o||(o=function(e,t,n,r){for(var i=function(e,t,n){if(e)return rs;var r=t>n?t/n:n/t;if(Math.abs(r-16/9)<Math.abs(r-4/3))return ts;return ns}(e,t,n),a=i[0].encoding,o=Math.max(t,n),s=0;s<i.length;s+=1){var c=i[s];if(a=c.encoding,c.width>=o)break}if(r&&"av1"===r)a.maxBitrate=.7*a.maxBitrate;return a}(e,t,n,l),L.debug("using video encoding",o));var d=new oo(t,n,o.maxBitrate,o.maxFramerate);if(u&&"av1"===l){L.debug("using svc with scalabilityMode ".concat(u));var f=[];if("L3T3"===u){for(var p=0;p<3;p+=1)f.push({rid:ss[2-p],scaleResolutionDownBy:Math.pow(2,p),maxBitrate:o.maxBitrate/Math.pow(3,p),maxFramerate:d.encoding.maxFramerate,scalabilityMode:"L3T3"});return L.debug("encodings",f),f}throw new Error("unsupported scalabilityMode: ".concat(u))}if(!c)return[o];var h,v=[];if((v=e?null!==(i=fs(null===r||void 0===r?void 0:r.screenShareSimulcastLayers))&&void 0!==i?i:ls(e,d):null!==(a=fs(null===r||void 0===r?void 0:r.videoSimulcastLayers))&&void 0!==a?a:ls(e,d)).length>0){var m=v[0];if(v.length>1)h=s(v,2)[1];var g=Math.max(t,n);if(g>=960&&h)return ds(t,n,[m,h,d]);if(g>=480)return ds(t,n,[m,d])}return ds(t,n,[d])}function us(e,t,n){var r,i,a,o;if(n.backupCodec&&n.backupCodec.codec!==n.videoCodec){t!==n.backupCodec.codec&&L.warn("requested a different codec than specified as backup",{serverRequested:t,backup:n.backupCodec.codec}),n.videoCodec=t,n.videoEncoding=n.backupCodec.encoding;var s=e.mediaStreamTrack.getSettings(),c=null!==(r=s.width)&&void 0!==r?r:null===(i=e.dimensions)||void 0===i?void 0:i.width,u=null!==(a=s.height)&&void 0!==a?a:null===(o=e.dimensions)||void 0===o?void 0:o.height;return cs(e.source===Co.Source.ScreenShare,c,u,n)}}function ls(e,t){if(e)return os(t);var n=t.width,r=t.height,i=n>r?n/r:r/n;return Math.abs(i-16/9)<Math.abs(i-4/3)?is:as}function ds(e,t,n){var r=[];return n.forEach((function(n,i){if(!(i>=ss.length)){var a=Math.min(e,t),o=ss[i];r.push({rid:o,scaleResolutionDownBy:Math.max(1,a/Math.min(n.width,n.height)),maxBitrate:n.encoding.maxBitrate,maxFramerate:n.encoding.maxFramerate})}})),r}function fs(e){if(e)return e.sort((function(e,t){var n=e.encoding,r=t.encoding;return n.maxBitrate>r.maxBitrate?1:n.maxBitrate<r.maxBitrate?-1:n.maxBitrate===r.maxBitrate&&n.maxFramerate&&r.maxFramerate?n.maxFramerate>r.maxFramerate?1:-1:0}))}var ps,hs=function(e){m(n,e);var t=b(n);function n(e,r,a,o){var s;return x(this,n),(s=t.call(this,e,r)).pendingPublishing=new Set,s.pendingPublishPromises=new Map,s.participantTrackPermissions=[],s.allParticipantsAllowedToSubscribe=!0,s.handleReconnecting=function(){s.reconnectFuture||(s.reconnectFuture=new Na)},s.handleReconnected=function(){var e,t;null===(t=null===(e=s.reconnectFuture)||void 0===e?void 0:e.resolve)||void 0===t||t.call(e),s.reconnectFuture=void 0,s.updateTrackSubscriptionPermissions()},s.handleDisconnected=function(){var e,t;null===(t=null===(e=s.reconnectFuture)||void 0===e?void 0:e.reject)||void 0===t||t.call(e,"Got disconnected during publishing attempt"),s.reconnectFuture=void 0},s.updateTrackSubscriptionPermissions=function(){L.debug("updating track subscription permissions",{allParticipantsAllowed:s.allParticipantsAllowedToSubscribe,participantTrackPermissions:s.participantTrackPermissions}),s.engine.client.sendUpdateSubscriptionPermissions(s.allParticipantsAllowedToSubscribe,s.participantTrackPermissions.map((function(e){return function(e){var t,n,r;if(!e.participantSid&&!e.participantIdentity)throw new Error("Invalid track permission, must provide at least one of participantIdentity and participantSid");return{participantIdentity:null!==(t=e.participantIdentity)&&void 0!==t?t:"",participantSid:null!==(n=e.participantSid)&&void 0!==n?n:"",allTracks:null!==(r=e.allowAll)&&void 0!==r&&r,trackSids:e.allowedTrackSids||[]}}(e)})))},s.onTrackUnmuted=function(e){s.onTrackMuted(e,e.isUpstreamPaused)},s.onTrackMuted=function(e,t){void 0===t&&(t=!0),e.sid?s.engine.updateMuteStatus(e.sid,t):L.error("could not update mute status for unpublished track",e)},s.onTrackUpstreamPaused=function(e){L.debug("upstream paused"),s.onTrackMuted(e,!0)},s.onTrackUpstreamResumed=function(e){L.debug("upstream resumed"),s.onTrackMuted(e,e.isMuted)},s.handleSubscribedQualityUpdate=function(){var e=E(i().mark((function e(t){var n,r,a,o,c,u,l,d,f,p;return i().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(null===(n=s.roomOptions)||void 0===n?void 0:n.dynacast){e.next=2;break}return e.abrupt("return");case 2:if(a=s.videoTracks.get(t.trackSid)){e.next=6;break}return L.warn("received subscribed quality update for unknown track",{method:"handleSubscribedQualityUpdate",sid:t.trackSid}),e.abrupt("return");case 6:if(!(t.subscribedCodecs.length>0)){e.next=45;break}if(a.videoTrack){e.next=9;break}return e.abrupt("return");case 9:return e.next=11,a.videoTrack.setPublishingCodecs(t.subscribedCodecs);case 11:o=e.sent,c=!1,u=!1,e.prev=14,d=yn(o);case 16:return e.next=18,d.next();case 18:if(!(c=!(f=e.sent).done)){e.next=27;break}if(!co(p=f.value)){e.next=24;break}return L.debug("publish ".concat(p," for ").concat(a.videoTrack.sid)),e.next=24,s.publishAdditionalCodecForTrack(a.videoTrack,p,a.options);case 24:c=!1,e.next=16;break;case 27:e.next=33;break;case 29:e.prev=29,e.t0=e.catch(14),u=!0,l=e.t0;case 33:if(e.prev=33,e.prev=34,!c||null==d.return){e.next=38;break}return e.next=38,d.return();case 38:if(e.prev=38,!u){e.next=41;break}throw l;case 41:return e.finish(38);case 42:return e.finish(33);case 43:e.next=48;break;case 45:if(!(t.subscribedQualities.length>0)){e.next=48;break}return e.next=48,null===(r=a.videoTrack)||void 0===r?void 0:r.setPublishingLayers(t.subscribedQualities);case 48:case"end":return e.stop()}}),e,null,[[14,29,33,43],[34,,38,42]])})));return function(t){return e.apply(this,arguments)}}(),s.handleLocalTrackUnpublished=function(e){var t=s.tracks.get(e.trackSid);t?s.unpublishTrack(t.track):L.warn("received unpublished event for unknown track",{method:"handleLocalTrackUnpublished",trackSid:e.trackSid})},s.handleTrackEnded=function(){var e=E(i().mark((function e(t){var n;return i().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t.source!==Co.Source.ScreenShare&&t.source!==Co.Source.ScreenShareAudio){e.next=5;break}L.debug("unpublishing local track due to TrackEnded",{track:t.sid}),s.unpublishTrack(t),e.next=36;break;case 5:if(!t.isUserProvided){e.next=10;break}return e.next=8,t.mute();case 8:e.next=36;break;case 10:if(!(t instanceof Uo||t instanceof Fo)){e.next=36;break}if(e.prev=11,!pa()){e.next=25;break}return e.prev=13,e.next=16,null===navigator||void 0===navigator?void 0:navigator.permissions.query({name:t.source===Co.Source.Camera?"camera":"microphone"});case 16:if(!(n=e.sent)||"denied"!==n.state){e.next=21;break}throw L.warn("user has revoked access to ".concat(t.source)),n.onchange=function(){"denied"!==n.state&&(t.isMuted||t.restartTrack(),n.onchange=null)},new Error("GetUserMedia Permission denied");case 21:e.next=25;break;case 23:e.prev=23,e.t0=e.catch(13);case 25:if(t.isMuted){e.next=29;break}return L.debug("track ended, attempting to use a different device"),e.next=29,t.restartTrack();case 29:e.next=36;break;case 31:return e.prev=31,e.t1=e.catch(11),L.warn("could not restart track, muting instead"),e.next=36,t.mute();case 36:case"end":return e.stop()}}),e,null,[[11,31],[13,23]])})));return function(t){return e.apply(this,arguments)}}(),s.audioTracks=new Map,s.videoTracks=new Map,s.tracks=new Map,s.engine=a,s.roomOptions=o,s.setupEngine(a),s}return T(n,[{key:"lastCameraError",get:function(){return this.cameraError}},{key:"lastMicrophoneError",get:function(){return this.microphoneError}},{key:"getTrack",value:function(e){var t=h(p(n.prototype),"getTrack",this).call(this,e);if(t)return t}},{key:"getTrackByName",value:function(e){var t=h(p(n.prototype),"getTrackByName",this).call(this,e);if(t)return t}},{key:"setupEngine",value:function(e){var t=this;this.engine=e,this.engine.client.onRemoteMuteChanged=function(e,n){var r=t.tracks.get(e);r&&r.track&&(n?r.mute():r.unmute())},this.engine.client.onSubscribedQualityUpdate=this.handleSubscribedQualityUpdate,this.engine.client.onLocalTrackUnpublished=this.handleLocalTrackUnpublished,this.engine.on(fo.Connected,this.handleReconnected).on(fo.Restarted,this.handleReconnected).on(fo.Resumed,this.handleReconnected).on(fo.Restarting,this.handleReconnecting).on(fo.Resuming,this.handleReconnecting).on(fo.Disconnected,this.handleDisconnected)}},{key:"setMetadata",value:function(e){var t;h(p(n.prototype),"setMetadata",this).call(this,e),this.engine.client.sendUpdateLocalMetadata(e,null!==(t=this.name)&&void 0!==t?t:"")}},{key:"setName",value:function(e){var t;h(p(n.prototype),"setName",this).call(this,e),this.engine.client.sendUpdateLocalMetadata(null!==(t=this.metadata)&&void 0!==t?t:"",e)}},{key:"setCameraEnabled",value:function(e,t,n){return this.setTrackEnabled(Co.Source.Camera,e,t,n)}},{key:"setMicrophoneEnabled",value:function(e,t,n){return this.setTrackEnabled(Co.Source.Microphone,e,t,n)}},{key:"setScreenShareEnabled",value:function(e,t,n){return this.setTrackEnabled(Co.Source.ScreenShare,e,t,n)}},{key:"setTrackEnabled",value:function(){var e=E(i().mark((function e(t,n,r,a){var o,c,l,d,f,p,h,v,m,g,b;return i().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(L.debug("setTrackEnabled",{source:t,enabled:n}),l=this.getTrack(t),!n){e.next=48;break}if(!l){e.next=8;break}return e.next=6,l.unmute();case 6:e.next=46;break;case 8:if(!this.pendingPublishing.has(t)){e.next=11;break}return L.info("skipping duplicate published source",{source:t}),e.abrupt("return");case 11:this.pendingPublishing.add(t),e.prev=12,e.t0=t,e.next=e.t0===Co.Source.Camera?16:e.t0===Co.Source.Microphone?20:e.t0===Co.Source.ScreenShare?24:28;break;case 16:return e.next=18,this.createTracks({video:null===(o=r)||void 0===o||o});case 18:case 22:case 26:return d=e.sent,e.abrupt("break",29);case 20:return e.next=22,this.createTracks({audio:null===(c=r)||void 0===c||c});case 24:return e.next=26,this.createScreenTracks(Sn({},r));case 28:throw new Vi(t);case 29:f=[],p=u(d);try{for(p.s();!(h=p.n()).done;)v=h.value,L.info("publishing track",{localTrack:v}),f.push(this.publishTrack(v,a))}catch(i){p.e(i)}finally{p.f()}return e.next=34,Promise.all(f);case 34:m=e.sent,g=s(m,1),l=g[0],e.next=43;break;case 39:throw e.prev=39,e.t1=e.catch(12),e.t1 instanceof Error&&!(e.t1 instanceof Vi)&&this.emit(lo.MediaDevicesError,e.t1),e.t1;case 43:return e.prev=43,this.pendingPublishing.delete(t),e.finish(43);case 46:e.next=59;break;case 48:if(!l||!l.track){e.next=59;break}if(t!==Co.Source.ScreenShare){e.next=57;break}return e.next=52,this.unpublishTrack(l.track);case 52:l=e.sent,(b=this.getTrack(Co.Source.ScreenShareAudio))&&b.track&&this.unpublishTrack(b.track),e.next=59;break;case 57:return e.next=59,l.mute();case 59:return e.abrupt("return",l);case 60:case"end":return e.stop()}}),e,this,[[12,39,43,46]])})));return function(t,n,r,i){return e.apply(this,arguments)}}()},{key:"enableCameraAndMicrophone",value:function(){var e=E(i().mark((function e(){var t,n=this;return i().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!this.pendingPublishing.has(Co.Source.Camera)&&!this.pendingPublishing.has(Co.Source.Microphone)){e.next=2;break}return e.abrupt("return");case 2:return this.pendingPublishing.add(Co.Source.Camera),this.pendingPublishing.add(Co.Source.Microphone),e.prev=4,e.next=7,this.createTracks({audio:!0,video:!0});case 7:return t=e.sent,e.next=10,Promise.all(t.map((function(e){return n.publishTrack(e)})));case 10:return e.prev=10,this.pendingPublishing.delete(Co.Source.Camera),this.pendingPublishing.delete(Co.Source.Microphone),e.finish(10);case 14:case"end":return e.stop()}}),e,this,[[4,,10,14]])})));return function(){return e.apply(this,arguments)}}()},{key:"createTracks",value:function(){var e=E(i().mark((function e(t){var n,r,a,o,s;return i().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=Zi(t,null===(n=this.roomOptions)||void 0===n?void 0:n.audioCaptureDefaults,null===(r=this.roomOptions)||void 0===r?void 0:r.videoCaptureDefaults),o=Yi(a),e.prev=2,e.next=5,navigator.mediaDevices.getUserMedia(o);case 5:s=e.sent,e.next=12;break;case 8:throw e.prev=8,e.t0=e.catch(2),e.t0 instanceof Error&&(o.audio&&(this.microphoneError=e.t0),o.video&&(this.cameraError=e.t0)),e.t0;case 12:return o.audio&&(this.microphoneError=void 0),o.video&&(this.cameraError=void 0),e.abrupt("return",s.getTracks().map((function(e){var n,r="audio"===e.kind;r?t.audio:t.video;var i=r?o.audio:o.video;"boolean"!==typeof i&&(n=i);var a=es(e,n);return a.kind===Co.Kind.Video?a.source=Co.Source.Camera:a.kind===Co.Kind.Audio&&(a.source=Co.Source.Microphone),a.mediaStream=s,a})));case 15:case"end":return e.stop()}}),e,this,[[2,8]])})));return function(t){return e.apply(this,arguments)}}()},{key:"createScreenTracks",value:function(){var e=E(i().mark((function e(t){var n,r,a,o,s,c,u;return i().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(void 0===t&&(t={}),void 0===t.resolution&&(t.resolution=mo.h1080fps15.resolution),r=!0,t.resolution&&(r=da()?{width:{max:t.resolution.width},height:{max:t.resolution.height},frameRate:t.resolution.frameRate}:{width:{ideal:t.resolution.width},height:{ideal:t.resolution.height},frameRate:t.resolution.frameRate}),void 0!==navigator.mediaDevices.getDisplayMedia){e.next=6;break}throw new $i("getDisplayMedia not supported");case 6:return e.next=8,navigator.mediaDevices.getDisplayMedia({audio:null!==(n=t.audio)&&void 0!==n&&n,video:r,controller:t.controller,selfBrowserSurface:t.selfBrowserSurface,surfaceSwitching:t.surfaceSwitching,systemAudio:t.systemAudio});case 8:if(a=e.sent,0!==(o=a.getVideoTracks()).length){e.next=12;break}throw new Vi("no video track found");case 12:return(s=new Fo(o[0],void 0,!1)).source=Co.Source.ScreenShare,c=[s],a.getAudioTracks().length>0&&((u=new Uo(a.getAudioTracks()[0],void 0,!1)).source=Co.Source.ScreenShareAudio,c.push(u)),e.abrupt("return",c);case 17:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()},{key:"publishTrack",value:function(){var e=E(i().mark((function e(t,n){var r,a,o,s,c,u,l,d;return i().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,null===(r=this.reconnectFuture)||void 0===r?void 0:r.promise;case 2:if(!(t instanceof Mo&&this.pendingPublishPromises.has(t))){e.next=5;break}return e.next=5,this.pendingPublishPromises.get(t);case 5:if(!(t instanceof MediaStreamTrack)){e.next=14;break}e.t0=t.kind,e.next="audio"===e.t0?9:"video"===e.t0?11:13;break;case 9:return t=new Uo(t,void 0,!0),e.abrupt("break",14);case 11:return t=new Fo(t,void 0,!0),e.abrupt("break",14);case 13:throw new Vi("unsupported MediaStreamTrack kind ".concat(t.kind));case 14:if(this.tracks.forEach((function(e){e.track&&e.track===t&&(s=e)})),!s){e.next=18;break}return L.warn("track has already been published, skipping"),e.abrupt("return",s);case 18:return(c=(null===n||void 0===n?void 0:n.forceStereo)||"channelCount"in t.mediaStreamTrack.getSettings()&&2===t.mediaStreamTrack.getSettings().channelCount||2===t.mediaStreamTrack.getConstraints().channelCount)&&(n||(n={}),void 0===n.dtx&&L.info("Opus DTX will be disabled for stereo tracks by default. Enable them explicitly to make it work."),void 0===n.red&&L.info("Opus RED will be disabled for stereo tracks by default. Enable them explicitly to make it work."),null!==(a=n.dtx)&&void 0!==a||(n.dtx=!1),null!==(o=n.red)&&void 0!==o||(n.red=!1)),(u=Sn(Sn({},this.roomOptions.publishDefaults),n)).source&&(t.source=u.source),l=this.publish(t,u,n,c),this.pendingPublishPromises.set(t,l),e.prev=24,e.next=27,l;case 27:return d=e.sent,e.abrupt("return",d);case 31:throw e.prev=31,e.t1=e.catch(24),e.t1;case 34:return e.prev=34,this.pendingPublishPromises.delete(t),e.finish(34);case 37:case"end":return e.stop()}}),e,this,[[24,31,34,37]])})));return function(t,n){return e.apply(this,arguments)}}()},{key:"publish",value:function(){var e=E(i().mark((function e(t,n,r,a){var o,s,c,u,l,d,f,p,h,v,m,g;return i().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!(l=Array.from(this.tracks.values()).find((function(e){return t instanceof Mo&&e.source===t.source})))||t.source===Co.Source.Unknown){e.next=9;break}throw e.prev=2,Error("publishing a second track with the same source: ".concat(t.source));case 6:e.prev=6,e.t0=e.catch(2),e.t0 instanceof Error&&L.warn(e.t0.message,{oldTrack:l,newTrack:t,trace:e.t0.stack});case 9:if(n.stopMicTrackOnMute&&t instanceof Uo&&(t.stopOnMute=!0),t.source===Co.Source.ScreenShare&&la()&&(n.simulcast=!1),"av1"!==n.videoCodec||oa()||(n.videoCodec=void 0),t.on(po.Muted,this.onTrackMuted),t.on(po.Unmuted,this.onTrackUnmuted),t.on(po.Ended,this.handleTrackEnded),t.on(po.UpstreamPaused,this.onTrackUpstreamPaused),t.on(po.UpstreamResumed,this.onTrackUpstreamResumed),d=ii.fromPartial({cid:t.mediaStreamTrack.id,name:null===r||void 0===r?void 0:r.name,type:Co.kindToProto(t.kind),muted:t.isMuted,source:Co.sourceToProto(t.source),disableDtx:!(null===(o=n.dtx)||void 0===o||o),stereo:a,disableRed:!(null===(s=n.red)||void 0===s||s)}),t.kind!==Co.Kind.Video){e.next=36;break}return h={width:0,height:0},e.prev=20,e.next=23,t.waitForDimensions();case 23:h=e.sent,e.next=29;break;case 26:e.prev=26,e.t1=e.catch(20),L.error("could not determine track dimensions");case 29:d.width=h.width,d.height=h.height,t instanceof Fo&&("av1"===(null===n||void 0===n?void 0:n.videoCodec)&&(n.scalabilityMode=null!==(c=n.scalabilityMode)&&void 0!==c?c:"L3T3"),n.videoCodec&&n.backupCodec&&n.videoCodec!==n.backupCodec.codec&&((v=Sn({},n)).simulcast=!0,p=us(t,n.backupCodec.codec,v),d.simulcastCodecs=[{codec:n.videoCodec,cid:t.mediaStreamTrack.id,enableSimulcastLayers:!0},{codec:n.backupCodec.codec,cid:"",enableSimulcastLayers:!0}])),f=cs(t.source===Co.Source.ScreenShare,h.width,h.height,n),d.layers=$o(d.width,d.height,null!==p&&void 0!==p?p:f),e.next=37;break;case 36:t.kind===Co.Kind.Audio&&n.audioBitrate&&(f=[{maxBitrate:n.audioBitrate}]);case 37:if(this.engine&&!this.engine.isClosed){e.next=39;break}throw new Wi("cannot publish track when not connected");case 39:return e.next=41,this.engine.addTrack(d);case 41:if(m=e.sent,(g=new Zo(t.kind,m,t)).options=n,t.sid=m.sid,this.engine.publisher){e.next=47;break}throw new Wi("publisher is closed");case 47:return L.debug("publishing ".concat(t.kind," with encodings"),{encodings:f,trackInfo:m}),e.next=50,this.engine.createSender(t,n,f);case 50:return t.sender=e.sent,"av1"===t.codec&&f&&(null===(u=f[0])||void 0===u?void 0:u.maxBitrate)&&this.engine.publisher.setTrackCodecBitrate(d.cid,t.codec,f[0].maxBitrate/1e3),this.engine.negotiate(),t instanceof Fo?t.startMonitor(this.engine.client):t instanceof Uo&&t.startMonitor(),this.addTrackPublication(g),this.emit(lo.LocalTrackPublished,g),e.abrupt("return",g);case 57:case"end":return e.stop()}}),e,this,[[2,6],[20,26]])})));return function(t,n,r,i){return e.apply(this,arguments)}}()},{key:"isLocal",get:function(){return!0}},{key:"publishAdditionalCodecForTrack",value:function(){var e=E(i().mark((function e(t,n,r){var a,o,s,c,u,l,d;return i().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this.tracks.forEach((function(e){e.track&&e.track===t&&(o=e)})),o){e.next=3;break}throw new Vi("track is not published");case 3:if(t instanceof Fo){e.next=5;break}throw new Vi("track is not a video track");case 5:if(s=Sn(Sn({},null===(a=this.roomOptions)||void 0===a?void 0:a.publishDefaults),r),c=us(t,n,s)){e.next=10;break}return L.info("backup codec has been disabled, ignoring request to add additional codec for track"),e.abrupt("return");case 10:if(u=t.addSimulcastTrack(n,c),(l=ii.fromPartial({cid:u.mediaStreamTrack.id,type:Co.kindToProto(t.kind),muted:t.isMuted,source:Co.sourceToProto(t.source),sid:t.sid,simulcastCodecs:[{codec:s.videoCodec,cid:u.mediaStreamTrack.id,enableSimulcastLayers:s.simulcast}]})).layers=$o(l.width,l.height,c),this.engine&&!this.engine.isClosed){e.next=15;break}throw new Wi("cannot publish track when not connected");case 15:return e.next=17,this.engine.addTrack(l);case 17:return d=e.sent,e.next=20,this.engine.createSimulcastSender(t,u,s,c);case 20:this.engine.negotiate(),L.debug("published ".concat(n," for track ").concat(t.sid),{encodings:c,trackInfo:d});case 22:case"end":return e.stop()}}),e,this)})));return function(t,n,r){return e.apply(this,arguments)}}()},{key:"unpublishTrack",value:function(){var e=E(i().mark((function e(t,n){var r,a,o,c,l,d,f,p,h;return i().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(o=this.getPublicationForTrack(t),L.debug("unpublishing track",{track:t,method:"unpublishTrack"}),o&&o.track){e.next=5;break}return L.warn("track was not unpublished because no publication was found",{track:t,method:"unpublishTrack"}),e.abrupt("return",void 0);case 5:if((t=o.track).off(po.Muted,this.onTrackMuted),t.off(po.Unmuted,this.onTrackUnmuted),t.off(po.Ended,this.handleTrackEnded),t.off(po.UpstreamPaused,this.onTrackUpstreamPaused),t.off(po.UpstreamResumed,this.onTrackUpstreamResumed),void 0===n&&(n=null===(a=null===(r=this.roomOptions)||void 0===r?void 0:r.stopLocalTrackOnUnpublish)||void 0===a||a),n&&t.stop(),c=!1,l=t.sender,t.sender=void 0,this.engine.publisher&&"closed"!==this.engine.publisher.pc.connectionState&&l)try{if(this.engine.removeTrack(l)&&(c=!0),t instanceof Fo){d=u(t.simulcastCodecs);try{for(d.s();!(f=d.n()).done;)p=s(f.value,2),(h=p[1]).sender&&(this.engine.removeTrack(h.sender)&&(c=!0),h.sender=void 0)}catch(i){d.e(i)}finally{d.f()}t.simulcastCodecs.clear()}}catch(Cs){L.warn("failed to unpublish track",{error:Cs,method:"unpublishTrack"})}this.tracks.delete(o.trackSid),e.t0=o.kind,e.next=e.t0===Co.Kind.Audio?21:e.t0===Co.Kind.Video?23:25;break;case 21:return this.audioTracks.delete(o.trackSid),e.abrupt("break",25);case 23:return this.videoTracks.delete(o.trackSid),e.abrupt("break",25);case 25:if(this.emit(lo.LocalTrackUnpublished,o),o.setTrack(void 0),!c){e.next=30;break}return e.next=30,this.engine.negotiate();case 30:return e.abrupt("return",o);case 31:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"unpublishTracks",value:function(){var e=E(i().mark((function e(t){var n,r=this;return i().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Promise.all(t.map((function(e){return r.unpublishTrack(e)})));case 2:return n=e.sent,e.abrupt("return",n.filter((function(e){return e instanceof Zo})));case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()},{key:"republishAllTracks",value:function(){var e=E(i().mark((function e(t){var n,r=this;return i().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=[],this.tracks.forEach((function(e){e.track&&(t&&(e.options=Sn(Sn({},e.options),t)),n.push(e))})),e.next=4,Promise.all(n.map(function(){var e=E(i().mark((function e(t){var n;return i().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=t.track,e.next=3,r.unpublishTrack(n,!1);case 3:return e.next=5,r.publishTrack(n,t.options);case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()));case 4:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"publishData",value:function(){var e=E(i().mark((function e(t,n){var r,a,o,s,c,u=arguments;return i().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=u.length>2&&void 0!==u[2]?u[2]:{},a=Array.isArray(r)?r:null===r||void 0===r?void 0:r.destination,o=[],s=Array.isArray(r)?void 0:r.topic,void 0!==a&&a.forEach((function(e){e instanceof Xo?o.push(e.sid):o.push(e)})),c={kind:n,value:{$case:"user",user:{participantSid:this.sid,payload:t,destinationSids:o,topic:s}}},e.next=8,this.engine.sendDataPacket(c,n);case 8:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"setTrackSubscriptionPermissions",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[];this.participantTrackPermissions=t,this.allParticipantsAllowedToSubscribe=e,this.engine.client.isConnected&&this.updateTrackSubscriptionPermissions()}},{key:"updateInfo",value:function(e){var t=this;return e.sid===this.sid&&(!!h(p(n.prototype),"updateInfo",this).call(this,e)&&(e.tracks.forEach((function(e){var n,r,i=t.tracks.get(e.sid);if(i){var a=i.isMuted||null!==(r=null===(n=i.track)||void 0===n?void 0:n.isUpstreamPaused)&&void 0!==r&&r;a!==e.muted&&(L.debug("updating server mute state after reconcile",{sid:e.sid,muted:a}),t.engine.client.sendMuteTrack(e.sid,a))}})),!0))}},{key:"getPublicationForTrack",value:function(e){var t;return this.tracks.forEach((function(n){var r=n.track;r&&(e instanceof MediaStreamTrack?(r instanceof Uo||r instanceof Fo)&&r.mediaStreamTrack===e&&(t=n):e===r&&(t=n))})),t}},{key:"publishedTracksInfo",value:function(){var e=[];return this.tracks.forEach((function(t){void 0!==t.track&&e.push({cid:t.track.mediaStreamID,track:t.trackInfo})})),e}},{key:"dataChannelsInfo",value:function(){var e=[],t=function(t,n){void 0!==(null===t||void 0===t?void 0:t.id)&&null!==t.id&&e.push({label:t.label,id:t.id,target:n})};return t(this.engine.dataChannelForKind(Tt.LOSSY),Hr.PUBLISHER),t(this.engine.dataChannelForKind(Tt.RELIABLE),Hr.PUBLISHER),t(this.engine.dataChannelForKind(Tt.LOSSY,!0),Hr.SUBSCRIBER),t(this.engine.dataChannelForKind(Tt.RELIABLE,!0),Hr.SUBSCRIBER),e}}]),n}(Ko);!function(e){e.Disconnected="disconnected",e.Connecting="connecting",e.Connected="connected",e.Reconnecting="reconnecting"}(ps||(ps={}));var vs,ms=function(e){m(n,e);var t=b(n);function n(e){var r,a;return x(this,n),r=t.call(this),a=f(r),r.state=ps.Disconnected,r.activeSpeakers=[],r.audioEnabled=!0,r.connect=function(){var e=E(i().mark((function e(t,n,a){var o,s,c;return i().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,r.disconnectLock.lock();case 2:if(o=e.sent,r.state!==ps.Connected){e.next=7;break}return L.info("already connected to room ".concat(r.name)),o(),e.abrupt("return",Promise.resolve());case 7:if(!r.connectFuture){e.next=10;break}return o(),e.abrupt("return",r.connectFuture.promise);case 10:return r.setAndEmitConnectionState(ps.Connecting),s=new io(t,n),c=function(){var e=E(i().mark((function e(u,l,d){var f,p;return i().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r.abortController&&r.abortController.abort(),r.abortController=new AbortController,null===o||void 0===o||o(),e.prev=3,e.next=6,r.attemptConnection(null!==d&&void 0!==d?d:t,n,a,r.abortController);case 6:r.abortController=void 0,u(),e.next=35;break;case 10:if(e.prev=10,e.t0=e.catch(3),!(va(new URL(t))&&e.t0 instanceof zi&&3!==e.t0.reason)){e.next=34;break}return p=null,e.prev=14,e.next=17,s.getNextBestRegionUrl(null===(f=r.abortController)||void 0===f?void 0:f.signal);case 17:p=e.sent,e.next=25;break;case 20:if(e.prev=20,e.t1=e.catch(14),!(e.t1 instanceof zi)||401!==e.t1.status&&3!==e.t1.reason){e.next=25;break}return l(e.t1),e.abrupt("return");case 25:if(!p){e.next=31;break}return L.debug("initial connection failed, retrying with another region"),e.next=29,c(u,l,p);case 29:e.next=32;break;case 31:l(e.t0);case 32:e.next=35;break;case 34:l(e.t0);case 35:case"end":return e.stop()}}),e,null,[[3,10],[14,20]])})));return function(t,n,r){return e.apply(this,arguments)}}(),r.connectFuture=new Na(c,(function(){r.clearConnectionFutures()})),e.abrupt("return",r.connectFuture.promise);case 15:case"end":return e.stop()}}),e)})));return function(t,n,r){return e.apply(this,arguments)}}(),r.connectSignal=function(){var e=E(i().mark((function e(t,n,a,o,c,u){var l,d;return i().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,a.join(t,n,{autoSubscribe:o.autoSubscribe,publishOnly:o.publishOnly,adaptiveStream:"object"===typeof c.adaptiveStream||c.adaptiveStream,maxRetries:o.maxRetries},u.signal);case 2:if(l=e.sent,(d=l.serverInfo)||(d={version:l.serverVersion,region:l.serverRegion}),L.debug("connected to Livekit Server ".concat(Object.entries(d).map((function(e){var t=s(e,2),n=t[0],r=t[1];return"".concat(n,": ").concat(r)})).join(", "))),l.serverVersion){e.next=8;break}throw new Ji("unknown server version");case 8:return"0.15.1"===l.serverVersion&&r.options.dynacast&&(L.debug("disabling dynacast due to server version"),c.dynacast=!1),e.abrupt("return",l);case 10:case"end":return e.stop()}}),e)})));return function(t,n,r,i,a,o){return e.apply(this,arguments)}}(),r.applyJoinResponse=function(e){var t=e.participant;r.localParticipant.sid=t.sid,r.localParticipant.identity=t.identity,r.handleParticipantUpdates([t].concat(c(e.otherParticipants))),e.room&&r.handleRoomUpdate(e.room)},r.attemptConnection=function(){var e=E(i().mark((function e(t,n,a,o){var s,c,u;return i().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r.state===ps.Reconnecting?(L.info("Reconnection attempt replaced by new connection attempt"),r.recreateEngine()):r.maybeCreateEngine(),r.acquireAudioContext(),r.connOptions=Sn(Sn({},wo),a),r.connOptions.rtcConfig&&(r.engine.rtcConfig=r.connOptions.rtcConfig),r.connOptions.peerConnectionTimeout&&(r.engine.peerConnectionTimeout=r.connOptions.peerConnectionTimeout),e.prev=5,e.next=8,r.connectSignal(t,n,r.engine,r.connOptions,r.options,o);case 8:c=e.sent,r.applyJoinResponse(c),r.setupLocalParticipantEvents(),r.emit(uo.SignalConnected),e.next=23;break;case 14:throw e.prev=14,e.t0=e.catch(5),r.recreateEngine(),r.handleDisconnect(r.options.stopLocalTrackOnUnpublish),u=new zi("could not establish signal connection"),e.t0 instanceof Error&&(u.message="".concat(u.message,": ").concat(e.t0.message)),e.t0 instanceof zi&&(u.reason=e.t0.reason,u.status=e.t0.status),L.debug("error trying to establish signal connection",{error:e.t0}),u;case 23:if(!o.signal.aborted){e.next=27;break}throw r.recreateEngine(),r.handleDisconnect(r.options.stopLocalTrackOnUnpublish),new zi("Connection attempt aborted");case 27:return e.prev=27,e.next=30,r.engine.waitForPCInitialConnection(r.connOptions.peerConnectionTimeout,o);case 30:e.next=37;break;case 32:throw e.prev=32,e.t1=e.catch(27),r.recreateEngine(),r.handleDisconnect(r.options.stopLocalTrackOnUnpublish),e.t1;case 37:pa()&&r.options.disconnectOnPageLeave&&(window.addEventListener("pagehide",r.onPageLeave),window.addEventListener("beforeunload",r.onPageLeave),null===(s=navigator.mediaDevices)||void 0===s||s.addEventListener("devicechange",r.handleDeviceChange)),r.setAndEmitConnectionState(ps.Connected),r.emit(uo.Connected);case 40:case"end":return e.stop()}}),e,null,[[5,14],[27,32]])})));return function(t,n,r,i){return e.apply(this,arguments)}}(),r.disconnect=E(i().mark((function e(){var t,n,r,o,s,c,u=arguments;return i().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=!(u.length>0&&void 0!==u[0])||u[0],e.next=3,a.disconnectLock.lock();case 3:if(c=e.sent,e.prev=4,a.state!==ps.Disconnected){e.next=8;break}return L.debug("already disconnected"),e.abrupt("return");case 8:if(L.info("disconnect from room",{identity:a.localParticipant.identity}),a.state!==ps.Connecting&&a.state!==ps.Reconnecting||(L.warn("abort connection attempt"),null===(n=a.abortController)||void 0===n||n.abort(),null===(o=null===(r=a.connectFuture)||void 0===r?void 0:r.reject)||void 0===o||o.call(r,new zi("Client initiated disconnect")),a.connectFuture=void 0),!(null===(s=a.engine)||void 0===s?void 0:s.client.isConnected)){e.next=13;break}return e.next=13,a.engine.client.sendLeave();case 13:if(!a.engine){e.next=16;break}return e.next=16,a.engine.close();case 16:a.handleDisconnect(t,Ct.CLIENT_INITIATED),a.engine=void 0;case 18:return e.prev=18,c(),e.finish(18);case 21:case"end":return e.stop()}}),e,null,[[4,,18,21]])}))),r.onPageLeave=E(i().mark((function e(){return i().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,r.disconnect();case 2:case"end":return e.stop()}}),e)}))),r.handleRestarting=function(){var e,t=u(r.participants.values());try{for(t.s();!(e=t.n()).done;){var n=e.value;r.handleParticipantDisconnected(n.sid,n)}}catch(i){t.e(i)}finally{t.f()}r.setAndEmitConnectionState(ps.Reconnecting)&&r.emit(uo.Reconnecting)},r.handleSignalRestarted=function(){var e=E(i().mark((function e(t){var n;return i().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return L.debug("signal reconnected to server",{region:t.serverRegion}),r.applyJoinResponse(t),e.prev=2,n=[],r.localParticipant.tracks.forEach((function(e){e.track&&n.push(e)})),e.next=7,Promise.all(n.map(function(){var e=E(i().mark((function e(t){var n;return i().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=t.track,r.localParticipant.unpublishTrack(n,!1),n.isMuted){e.next=10;break}if(!(n instanceof Uo||n instanceof Fo)||n.isUserProvided){e.next=7;break}return L.debug("restarting existing track",{track:t.trackSid}),e.next=7,n.restartTrack();case 7:return L.debug("publishing new track",{track:t.trackSid}),e.next=10,r.localParticipant.publishTrack(n,t.options);case 10:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()));case 7:e.next=12;break;case 9:e.prev=9,e.t0=e.catch(2),L.error("error trying to re-publish tracks after reconnection",{error:e.t0});case 12:return e.prev=12,e.next=15,r.engine.waitForRestarted();case 15:L.debug("fully reconnected to server",{region:t.serverRegion}),e.next=21;break;case 18:return e.prev=18,e.t1=e.catch(12),e.abrupt("return");case 21:r.setAndEmitConnectionState(ps.Connected),r.emit(uo.Reconnected),r.participants.forEach((function(e){r.emit(uo.ParticipantConnected,e)}));case 24:case"end":return e.stop()}}),e,null,[[2,9],[12,18]])})));return function(t){return e.apply(this,arguments)}}(),r.handleParticipantUpdates=function(e){e.forEach((function(e){if(e.identity!==r.localParticipant.identity){var t=r.identityToSid.get(e.identity);t&&t!==e.sid&&r.handleParticipantDisconnected(t,r.participants.get(t));var n=r.participants.get(e.sid),i=!n;e.state===xt.DISCONNECTED?r.handleParticipantDisconnected(e.sid,n):(n=r.getOrCreateParticipant(e.sid,e),i||n.updateInfo(e))}else r.localParticipant.updateInfo(e)}))},r.handleActiveSpeakersUpdate=function(e){var t=[],n={};e.forEach((function(e){if(n[e.sid]=!0,e.sid===r.localParticipant.sid)r.localParticipant.audioLevel=e.level,r.localParticipant.setIsSpeaking(!0),t.push(r.localParticipant);else{var i=r.participants.get(e.sid);i&&(i.audioLevel=e.level,i.setIsSpeaking(!0),t.push(i))}})),n[r.localParticipant.sid]||(r.localParticipant.audioLevel=0,r.localParticipant.setIsSpeaking(!1)),r.participants.forEach((function(e){n[e.sid]||(e.audioLevel=0,e.setIsSpeaking(!1))})),r.activeSpeakers=t,r.emitWhenConnected(uo.ActiveSpeakersChanged,t)},r.handleSpeakersChanged=function(e){var t=new Map;r.activeSpeakers.forEach((function(e){t.set(e.sid,e)})),e.forEach((function(e){var n=r.participants.get(e.sid);e.sid===r.localParticipant.sid&&(n=r.localParticipant),n&&(n.audioLevel=e.level,n.setIsSpeaking(e.active),e.active?t.set(e.sid,n):t.delete(e.sid))}));var n=Array.from(t.values());n.sort((function(e,t){return t.audioLevel-e.audioLevel})),r.activeSpeakers=n,r.emitWhenConnected(uo.ActiveSpeakersChanged,n)},r.handleStreamStateUpdate=function(e){e.streamStates.forEach((function(e){var t=r.participants.get(e.participantSid);if(t){var n=t.getTrackPublication(e.trackSid);n&&n.track&&(n.track.streamState=Co.streamStateFromProto(e.state),t.emit(lo.TrackStreamStateChanged,n,n.track.streamState),r.emitWhenConnected(uo.TrackStreamStateChanged,n,n.track.streamState,t))}}))},r.handleSubscriptionPermissionUpdate=function(e){var t=r.participants.get(e.participantSid);if(t){var n=t.getTrackPublication(e.trackSid);n&&n.setAllowed(e.allowed)}},r.handleDataPacket=function(e,t){var n=r.participants.get(e.participantSid);r.emit(uo.DataReceived,e.payload,n,t,e.topic),null===n||void 0===n||n.emit(lo.DataReceived,e.payload,t)},r.handleAudioPlaybackStarted=function(){r.canPlaybackAudio||(r.audioEnabled=!0,r.emit(uo.AudioPlaybackStatusChanged,!0))},r.handleAudioPlaybackFailed=function(e){L.warn("could not playback audio",e),r.canPlaybackAudio&&(r.audioEnabled=!1,r.emit(uo.AudioPlaybackStatusChanged,!1))},r.handleDeviceChange=E(i().mark((function e(){return i().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:r.emit(uo.MediaDevicesChanged);case 1:case"end":return e.stop()}}),e)}))),r.handleRoomUpdate=function(e){var t=r.roomInfo;r.roomInfo=e,t&&t.metadata!==e.metadata&&r.emitWhenConnected(uo.RoomMetadataChanged,e.metadata),(null===t||void 0===t?void 0:t.activeRecording)!==e.activeRecording&&r.emitWhenConnected(uo.RecordingStatusChanged,e.activeRecording)},r.handleConnectionQualityUpdate=function(e){e.updates.forEach((function(e){if(e.participantSid!==r.localParticipant.sid){var t=r.participants.get(e.participantSid);t&&t.setConnectionQuality(e.quality)}else r.localParticipant.setConnectionQuality(e.quality)}))},r.onLocalParticipantMetadataChanged=function(e){r.emit(uo.ParticipantMetadataChanged,e,r.localParticipant)},r.onLocalParticipantNameChanged=function(e){r.emit(uo.ParticipantNameChanged,e,r.localParticipant)},r.onLocalTrackMuted=function(e){r.emit(uo.TrackMuted,e,r.localParticipant)},r.onLocalTrackUnmuted=function(e){r.emit(uo.TrackUnmuted,e,r.localParticipant)},r.onLocalTrackPublished=function(){var e=E(i().mark((function e(t){return i().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r.emit(uo.LocalTrackPublished,t,r.localParticipant),!(t.track instanceof Uo)){e.next=6;break}return e.next=4,t.track.checkForSilence();case 4:e.sent&&r.emit(uo.LocalAudioSilenceDetected,t);case 6:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),r.onLocalTrackUnpublished=function(e){r.emit(uo.LocalTrackUnpublished,e,r.localParticipant)},r.onLocalConnectionQualityChanged=function(e){r.emit(uo.ConnectionQualityChanged,e,r.localParticipant)},r.onMediaDevicesError=function(e){r.emit(uo.MediaDevicesError,e)},r.onLocalParticipantPermissionsChanged=function(e){r.emit(uo.ParticipantPermissionsChanged,e,r.localParticipant)},r.setMaxListeners(100),r.participants=new Map,r.identityToSid=new Map,r.options=Sn(Sn({},ko),e),r.options.audioCaptureDefaults=Sn(Sn({},bo),null===e||void 0===e?void 0:e.audioCaptureDefaults),r.options.videoCaptureDefaults=Sn(Sn({},yo),null===e||void 0===e?void 0:e.videoCaptureDefaults),r.options.publishDefaults=Sn(Sn({},go),null===e||void 0===e?void 0:e.publishDefaults),r.maybeCreateEngine(),r.disconnectLock=new Oa,r.localParticipant=new hs("","",r.engine,r.options),r}return T(n,[{key:"isRecording",get:function(){var e,t;return null!==(t=null===(e=this.roomInfo)||void 0===e?void 0:e.activeRecording)&&void 0!==t&&t}},{key:"sid",get:function(){var e,t;return null!==(t=null===(e=this.roomInfo)||void 0===e?void 0:e.sid)&&void 0!==t?t:""}},{key:"name",get:function(){var e,t;return null!==(t=null===(e=this.roomInfo)||void 0===e?void 0:e.name)&&void 0!==t?t:""}},{key:"metadata",get:function(){var e;return null===(e=this.roomInfo)||void 0===e?void 0:e.metadata}},{key:"numParticipants",get:function(){var e,t;return null!==(t=null===(e=this.roomInfo)||void 0===e?void 0:e.numParticipants)&&void 0!==t?t:0}},{key:"numPublishers",get:function(){var e,t;return null!==(t=null===(e=this.roomInfo)||void 0===e?void 0:e.numPublishers)&&void 0!==t?t:0}},{key:"maybeCreateEngine",value:function(){var e=this;this.engine||(this.engine=new Oo(this.options),this.engine.client.onParticipantUpdate=this.handleParticipantUpdates,this.engine.client.onRoomUpdate=this.handleRoomUpdate,this.engine.client.onSpeakersChanged=this.handleSpeakersChanged,this.engine.client.onStreamStateUpdate=this.handleStreamStateUpdate,this.engine.client.onSubscriptionPermissionUpdate=this.handleSubscriptionPermissionUpdate,this.engine.client.onConnectionQuality=this.handleConnectionQualityUpdate,this.engine.on(fo.MediaTrackAdded,(function(t,n,r){e.onTrackAdded(t,n,r)})).on(fo.Disconnected,(function(t){e.handleDisconnect(e.options.stopLocalTrackOnUnpublish,t)})).on(fo.ActiveSpeakersUpdate,this.handleActiveSpeakersUpdate).on(fo.DataPacketReceived,this.handleDataPacket).on(fo.Resuming,(function(){e.setAndEmitConnectionState(ps.Reconnecting)&&e.emit(uo.Reconnecting)})).on(fo.Resumed,(function(){e.setAndEmitConnectionState(ps.Connected),e.emit(uo.Reconnected),e.updateSubscriptions()})).on(fo.SignalResumed,(function(){e.state===ps.Reconnecting&&e.sendSyncState()})).on(fo.Restarting,this.handleRestarting).on(fo.SignalRestarted,this.handleSignalRestarted).on(fo.DCBufferStatusChanged,(function(t,n){e.emit(uo.DCBufferStatusChanged,t,n)})),this.localParticipant&&this.localParticipant.setupEngine(this.engine))}},{key:"prepareConnection",value:function(){var e=E(i().mark((function e(t){return i().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch("http".concat(t.substring(2)),{method:"HEAD"});case 2:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()},{key:"getParticipantByIdentity",value:function(e){if(this.localParticipant.identity===e)return this.localParticipant;var t=this.identityToSid.get(e);return t?this.participants.get(t):void 0}},{key:"clearConnectionFutures",value:function(){this.connectFuture=void 0}},{key:"simulateScenario",value:function(){var e=E(i().mark((function e(t){var n,r,a=this;return i().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:n=function(){},e.t0=t,e.next="signal-reconnect"===e.t0?4:"speaker"===e.t0?8:"node-failure"===e.t0?10:"server-leave"===e.t0?12:"migration"===e.t0?14:"resume-reconnect"===e.t0?16:"full-reconnect"===e.t0?21:"force-tcp"===e.t0||"force-tls"===e.t0?26:29;break;case 4:return e.next=6,this.engine.client.close();case 6:return this.engine.client.onClose&&this.engine.client.onClose("simulate disconnect"),e.abrupt("break",29);case 8:return r=Di.fromPartial({scenario:{$case:"speakerUpdate",speakerUpdate:3}}),e.abrupt("break",29);case 10:return r=Di.fromPartial({scenario:{$case:"nodeFailure",nodeFailure:!0}}),e.abrupt("break",29);case 12:return r=Di.fromPartial({scenario:{$case:"serverLeave",serverLeave:!0}}),e.abrupt("break",29);case 14:return r=Di.fromPartial({scenario:{$case:"migration",migration:!0}}),e.abrupt("break",29);case 16:return this.engine.failNext(),e.next=19,this.engine.client.close();case 19:return this.engine.client.onClose&&this.engine.client.onClose("simulate resume-reconnect"),e.abrupt("break",29);case 21:return this.engine.fullReconnectOnNext=!0,e.next=24,this.engine.client.close();case 24:return this.engine.client.onClose&&this.engine.client.onClose("simulate full-reconnect"),e.abrupt("break",29);case 26:return r=Di.fromPartial({scenario:{$case:"switchCandidateProtocol",switchCandidateProtocol:"force-tls"===t?2:1}}),n=function(){var e=E(i().mark((function e(){var t;return i().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:(t=a.engine.client.onLeave)&&t({reason:Ct.CLIENT_INITIATED,canReconnect:!0});case 2:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),e.abrupt("break",29);case 29:r&&(this.engine.client.sendSimulateScenario(r),n());case 30:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"startAudio",value:function(){var e=E(i().mark((function e(){var t;return i().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.acquireAudioContext();case 2:return t=[],this.participants.forEach((function(e){e.audioTracks.forEach((function(e){e.track&&e.track.attachedElements.forEach((function(e){t.push(e)}))}))})),e.prev=4,e.next=7,Promise.all(t.map((function(e){return e.muted=!1,e.play()})));case 7:this.handleAudioPlaybackStarted(),e.next=14;break;case 10:throw e.prev=10,e.t0=e.catch(4),this.handleAudioPlaybackFailed(e.t0),e.t0;case 14:case"end":return e.stop()}}),e,this,[[4,10]])})));return function(){return e.apply(this,arguments)}}()},{key:"canPlaybackAudio",get:function(){return this.audioEnabled}},{key:"getActiveAudioOutputDevice",value:function(){var e,t;return null!==(t=null===(e=this.options.audioOutput)||void 0===e?void 0:e.deviceId)&&void 0!==t?t:""}},{key:"switchActiveDevice",value:function(){var e=E(i().mark((function e(t,n){var r,a,o,s,c,u,l,d,f=arguments;return i().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(o=f.length>2&&void 0!==f[2]&&f[2]?{exact:n}:n,"audioinput"!==t){e.next=17;break}return s=this.options.audioCaptureDefaults.deviceId,this.options.audioCaptureDefaults.deviceId=o,c=Array.from(this.localParticipant.audioTracks.values()).filter((function(e){return e.source===Co.Source.Microphone})),e.prev=6,e.next=9,Promise.all(c.map((function(e){var t;return null===(t=e.audioTrack)||void 0===t?void 0:t.setDeviceId(o)})));case 9:e.next=15;break;case 11:throw e.prev=11,e.t0=e.catch(6),this.options.audioCaptureDefaults.deviceId=s,e.t0;case 15:case 30:case 41:e.next=47;break;case 17:if("videoinput"!==t){e.next=32;break}return u=this.options.videoCaptureDefaults.deviceId,this.options.videoCaptureDefaults.deviceId=o,l=Array.from(this.localParticipant.videoTracks.values()).filter((function(e){return e.source===Co.Source.Camera})),e.prev=21,e.next=24,Promise.all(l.map((function(e){var t;return null===(t=e.videoTrack)||void 0===t?void 0:t.setDeviceId(o)})));case 24:e.next=30;break;case 26:throw e.prev=26,e.t1=e.catch(21),this.options.videoCaptureDefaults.deviceId=u,e.t1;case 32:if("audiooutput"!==t){e.next=47;break}if(sa()){e.next=35;break}throw new Error("cannot switch audio output, setSinkId not supported");case 35:return null!==(r=(a=this.options).audioOutput)&&void 0!==r||(a.audioOutput={}),d=this.options.audioOutput.deviceId,this.options.audioOutput.deviceId=n,e.prev=38,e.next=41,Promise.all(Array.from(this.participants.values()).map((function(e){return e.setAudioOutput({deviceId:n})})));case 43:throw e.prev=43,e.t2=e.catch(38),this.options.audioOutput.deviceId=d,e.t2;case 47:case"end":return e.stop()}}),e,this,[[6,11],[21,26],[38,43]])})));return function(t,n){return e.apply(this,arguments)}}()},{key:"setupLocalParticipantEvents",value:function(){this.localParticipant.on(lo.ParticipantMetadataChanged,this.onLocalParticipantMetadataChanged).on(lo.ParticipantNameChanged,this.onLocalParticipantNameChanged).on(lo.TrackMuted,this.onLocalTrackMuted).on(lo.TrackUnmuted,this.onLocalTrackUnmuted).on(lo.LocalTrackPublished,this.onLocalTrackPublished).on(lo.LocalTrackUnpublished,this.onLocalTrackUnpublished).on(lo.ConnectionQualityChanged,this.onLocalConnectionQualityChanged).on(lo.MediaDevicesError,this.onMediaDevicesError).on(lo.ParticipantPermissionsChanged,this.onLocalParticipantPermissionsChanged)}},{key:"recreateEngine",value:function(){var e;null===(e=this.engine)||void 0===e||e.close(),this.engine=void 0,this.participants.clear(),this.maybeCreateEngine()}},{key:"onTrackAdded",value:function(e,t,n){var r=this;if(this.state===ps.Connecting||this.state===ps.Reconnecting){var i=function(){r.onTrackAdded(e,t,n),a()},a=function e(){r.off(uo.Reconnected,i),r.off(uo.Connected,i),r.off(uo.Disconnected,e)};return this.once(uo.Reconnected,i),this.once(uo.Connected,i),void this.once(uo.Disconnected,a)}if(this.state!==ps.Disconnected){var o=function(e){var t=e.split("|");return t.length>1?[t[0],e.substr(t[0].length+1)]:[e,""]}(t.id),s=o[0],c=o[1];if(c&&""!==c||(c=e.id),s!==this.localParticipant.sid){var u,l=this.getOrCreateParticipant(s);this.options.adaptiveStream&&(u="object"===typeof this.options.adaptiveStream?this.options.adaptiveStream:{}),l.addSubscribedMediaTrack(e,c,t,n,u)}else L.warn("tried to create RemoteParticipant for local participant")}else L.warn("skipping incoming track after Room disconnected")}},{key:"handleDisconnect",value:function(){var e,t=this,n=!(arguments.length>0&&void 0!==arguments[0])||arguments[0],r=arguments.length>1?arguments[1]:void 0;this.state!==ps.Disconnected&&(this.participants.forEach((function(e){e.tracks.forEach((function(t){e.unpublishTrack(t.trackSid)}))})),this.localParticipant.tracks.forEach((function(e){var r,i;e.track&&t.localParticipant.unpublishTrack(e.track,n),n&&(null===(r=e.track)||void 0===r||r.detach(),null===(i=e.track)||void 0===i||i.stop())})),this.localParticipant.off(lo.ParticipantMetadataChanged,this.onLocalParticipantMetadataChanged).off(lo.ParticipantNameChanged,this.onLocalParticipantNameChanged).off(lo.TrackMuted,this.onLocalTrackMuted).off(lo.TrackUnmuted,this.onLocalTrackUnmuted).off(lo.LocalTrackPublished,this.onLocalTrackPublished).off(lo.LocalTrackUnpublished,this.onLocalTrackUnpublished).off(lo.ConnectionQualityChanged,this.onLocalConnectionQualityChanged).off(lo.MediaDevicesError,this.onMediaDevicesError).off(lo.ParticipantPermissionsChanged,this.onLocalParticipantPermissionsChanged),this.localParticipant.tracks.clear(),this.localParticipant.videoTracks.clear(),this.localParticipant.audioTracks.clear(),this.participants.clear(),this.activeSpeakers=[],this.audioContext&&"boolean"===typeof this.options.expWebAudioMix&&(this.audioContext.close(),this.audioContext=void 0),pa()&&(window.removeEventListener("beforeunload",this.onPageLeave),window.removeEventListener("pagehide",this.onPageLeave),null===(e=navigator.mediaDevices)||void 0===e||e.removeEventListener("devicechange",this.handleDeviceChange)),this.setAndEmitConnectionState(ps.Disconnected),this.emit(uo.Disconnected,r))}},{key:"handleParticipantDisconnected",value:function(e,t){this.participants.delete(e),t&&(this.identityToSid.delete(t.identity),t.tracks.forEach((function(e){t.unpublishTrack(e.trackSid,!0)})),this.emit(uo.ParticipantDisconnected,t))}},{key:"acquireAudioContext",value:function(){var e=E(i().mark((function e(){var t,n,r,a=this;return i().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if("boolean"===typeof this.options.expWebAudioMix||!this.options.expWebAudioMix.audioContext){e.next=6;break}return this.audioContext=this.options.expWebAudioMix.audioContext,e.next=4,this.audioContext.resume();case 4:e.next=7;break;case 6:this.audioContext=null!==(t=ta())&&void 0!==t?t:void 0;case 7:this.options.expWebAudioMix&&this.participants.forEach((function(e){return e.setAudioContext(a.audioContext)})),(r="running"===(null===(n=this.audioContext)||void 0===n?void 0:n.state))!==this.canPlaybackAudio&&(this.audioEnabled=r,this.emit(uo.AudioPlaybackStatusChanged,r));case 10:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"createParticipant",value:function(e,t){var n;return n=t?Xo.fromParticipantInfo(this.engine.client,t):new Xo(this.engine.client,e,"",void 0,void 0),this.options.expWebAudioMix&&n.setAudioContext(this.audioContext),n}},{key:"getOrCreateParticipant",value:function(e,t){var n=this;if(this.participants.has(e))return this.participants.get(e);var r=this.createParticipant(e,t);return this.participants.set(e,r),t&&(this.identityToSid.set(t.identity,t.sid),this.emitWhenConnected(uo.ParticipantConnected,r)),r.on(lo.TrackPublished,(function(e){n.emitWhenConnected(uo.TrackPublished,e,r)})).on(lo.TrackSubscribed,(function(e,t){e.kind===Co.Kind.Audio&&(e.on(po.AudioPlaybackStarted,n.handleAudioPlaybackStarted),e.on(po.AudioPlaybackFailed,n.handleAudioPlaybackFailed)),n.emit(uo.TrackSubscribed,e,t,r)})).on(lo.TrackUnpublished,(function(e){n.emit(uo.TrackUnpublished,e,r)})).on(lo.TrackUnsubscribed,(function(e,t){n.emit(uo.TrackUnsubscribed,e,t,r)})).on(lo.TrackSubscriptionFailed,(function(e){n.emit(uo.TrackSubscriptionFailed,e,r)})).on(lo.TrackMuted,(function(e){n.emitWhenConnected(uo.TrackMuted,e,r)})).on(lo.TrackUnmuted,(function(e){n.emitWhenConnected(uo.TrackUnmuted,e,r)})).on(lo.ParticipantMetadataChanged,(function(e){n.emitWhenConnected(uo.ParticipantMetadataChanged,e,r)})).on(lo.ParticipantNameChanged,(function(e){n.emitWhenConnected(uo.ParticipantNameChanged,e,r)})).on(lo.ConnectionQualityChanged,(function(e){n.emitWhenConnected(uo.ConnectionQualityChanged,e,r)})).on(lo.ParticipantPermissionsChanged,(function(e){n.emitWhenConnected(uo.ParticipantPermissionsChanged,e,r)})).on(lo.TrackSubscriptionStatusChanged,(function(e,t){n.emitWhenConnected(uo.TrackSubscriptionStatusChanged,e,t,r)})).on(lo.TrackSubscriptionPermissionChanged,(function(e,t){n.emitWhenConnected(uo.TrackSubscriptionPermissionChanged,e,t,r)})),t&&r.updateInfo(t),r}},{key:"sendSyncState",value:function(){var e,t;if(void 0!==this.engine.subscriber&&null!==this.engine.subscriber.pc.localDescription){var n=this.engine.subscriber.pc.localDescription,r=this.engine.subscriber.pc.remoteDescription,i=null===(t=null===(e=this.connOptions)||void 0===e?void 0:e.autoSubscribe)||void 0===t||t,a=new Array;this.participants.forEach((function(e){e.tracks.forEach((function(e){e.isDesired!==i&&a.push(e.trackSid)}))})),this.engine.client.sendSyncState({answer:La({sdp:n.sdp,type:n.type}),offer:r?La({sdp:r.sdp,type:r.type}):void 0,subscription:{trackSids:a,subscribe:!i,participantTracks:[]},publishTracks:this.localParticipant.publishedTracksInfo(),dataChannels:this.localParticipant.dataChannelsInfo()})}}},{key:"updateSubscriptions",value:function(){var e,t=u(this.participants.values());try{for(t.s();!(e=t.n()).done;){var n,r=u(e.value.videoTracks.values());try{for(r.s();!(n=r.n()).done;){var i=n.value;i.isSubscribed&&i instanceof Yo&&i.emitTrackUpdate()}}catch(a){r.e(a)}finally{r.f()}}}catch(a){t.e(a)}finally{t.f()}}},{key:"setAndEmitConnectionState",value:function(e){return e!==this.state&&(this.state=e,this.emit(uo.ConnectionStateChanged,this.state),!0)}},{key:"emitWhenConnected",value:function(e){if(this.state===ps.Connected){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];return this.emit.apply(this,[e].concat(n))}return!1}},{key:"simulateParticipants",value:function(){var e=E(i().mark((function e(t){var n,r,a,o,s,u,l,d,f,p,h,v,m;return i().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(a=Sn({audio:!0,video:!0,useRealTracks:!1},t.publish),o=Sn({count:9,audio:!1,video:!0,aspectRatios:[1.66,1.7,1.3]},t.participants),this.handleDisconnect(),this.roomInfo={sid:"RM_SIMULATED",name:"simulated-room",emptyTimeout:0,maxParticipants:0,creationTime:(new Date).getTime(),metadata:"",numParticipants:1,numPublishers:1,turnPassword:"",enabledCodecs:[],activeRecording:!1},this.localParticipant.updateInfo(Zt.fromPartial({identity:"simulated-local",name:"local-name"})),this.setupLocalParticipantEvents(),this.emit(uo.SignalConnected),this.emit(uo.Connected),this.setAndEmitConnectionState(ps.Connected),!a.video){e.next=26;break}if(e.t0=Zo,e.t1=Co.Kind.Video,e.t2=Yt.fromPartial({source:yt.CAMERA,sid:Math.floor(1e4*Math.random()).toString(),type:bt.AUDIO,name:"video-dummy"}),e.t3=Fo,!a.useRealTracks){e.next=20;break}return e.next=17,navigator.mediaDevices.getUserMedia({video:!0});case 17:e.t4=e.sent.getVideoTracks()[0],e.next=21;break;case 20:e.t4=Ta(null!==(n=160*o.aspectRatios[0])&&void 0!==n?n:1,160,!0,!0);case 21:e.t5=e.t4,e.t6=new e.t3(e.t5),s=new e.t0(e.t1,e.t2,e.t6),this.localParticipant.addTrackPublication(s),this.localParticipant.emit(lo.LocalTrackPublished,s);case 26:if(!a.audio){e.next=43;break}if(e.t7=Zo,e.t8=Co.Kind.Audio,e.t9=Yt.fromPartial({source:yt.MICROPHONE,sid:Math.floor(1e4*Math.random()).toString(),type:bt.AUDIO}),e.t10=Uo,!a.useRealTracks){e.next=37;break}return e.next=34,navigator.mediaDevices.getUserMedia({audio:!0});case 34:e.t11=e.sent.getAudioTracks()[0],e.next=38;break;case 37:e.t11=Ra();case 38:e.t12=e.t11,e.t13=new e.t10(e.t12),u=new e.t7(e.t8,e.t9,e.t13),this.localParticipant.addTrackPublication(u),this.localParticipant.emit(lo.LocalTrackPublished,u);case 43:for(l=0;l<o.count-1;l+=1)d=Zt.fromPartial({sid:Math.floor(1e4*Math.random()).toString(),identity:"simulated-".concat(l),state:xt.ACTIVE,tracks:[],joinedAt:Date.now()}),f=this.getOrCreateParticipant(d.identity,d),o.video&&(p=Ta(null!==(r=160*o.aspectRatios[l%o.aspectRatios.length])&&void 0!==r?r:1,160,!1,!0),h=Yt.fromPartial({source:yt.CAMERA,sid:Math.floor(1e4*Math.random()).toString(),type:bt.AUDIO}),f.addSubscribedMediaTrack(p,h.sid,new MediaStream([p])),d.tracks=[].concat(c(d.tracks),[h])),o.audio&&(v=Ra(),m=Yt.fromPartial({source:yt.MICROPHONE,sid:Math.floor(1e4*Math.random()).toString(),type:bt.AUDIO}),f.addSubscribedMediaTrack(v,m.sid,new MediaStream([v])),d.tracks=[].concat(c(d.tracks),[m])),f.updateInfo(d);case 44:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"emit",value:function(e){for(var t,r=arguments.length,i=new Array(r>1?r-1:0),a=1;a<r;a++)i[a-1]=arguments[a];return e!==uo.ActiveSpeakersChanged&&L.debug("room event ".concat(e),{event:e,args:i}),(t=h(p(n.prototype),"emit",this)).call.apply(t,[this,e].concat(i))}}],[{key:"getLocalDevices",value:function(e){var t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];return Ua.getInstance().getDevices(e,t)}}]),n}(Bn.EventEmitter);!function(e){e[e.IDLE=0]="IDLE",e[e.RUNNING=1]="RUNNING",e[e.SKIPPED=2]="SKIPPED",e[e.SUCCESS=3]="SUCCESS",e[e.FAILED=4]="FAILED"}(vs||(vs={}));Bn.EventEmitter,n(618);function gs(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function bs(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?gs(Object(n),!0).forEach((function(t){S(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):gs(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function ys(e,t){if(null==e)return{};var n,r,i=function(e,t){if(null==e)return{};var n,r,i={},a=Object.keys(e);for(r=0;r<a.length;r++)n=a[r],t.indexOf(n)>=0||(i[n]=e[n]);return i}(e,t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(r=0;r<a.length;r++)n=a[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(i[n]=e[n])}return i}var ks=["mainAxis","crossAxis","fallbackPlacements","fallbackStrategy","fallbackAxisSideDirection","flipAlignment"],ws=["mainAxis","crossAxis","limiter"];function Ss(e){return e.split("-")[1]}function Cs(e){return"y"===e?"height":"width"}function Es(e){return e.split("-")[0]}function xs(e){return["top","bottom"].includes(Es(e))?"x":"y"}function Ps(e,t,n){var r,i=e.reference,a=e.floating,o=i.x+i.width/2-a.width/2,s=i.y+i.height/2-a.height/2,c=xs(t),u=Cs(c),l=i[u]/2-a[u]/2,d="x"===c;switch(Es(t)){case"top":r={x:o,y:i.y-a.height};break;case"bottom":r={x:o,y:i.y+i.height};break;case"right":r={x:i.x+i.width,y:s};break;case"left":r={x:i.x-a.width,y:s};break;default:r={x:i.x,y:i.y}}switch(Ss(t)){case"start":r[c]-=l*(n&&d?-1:1);break;case"end":r[c]+=l*(n&&d?-1:1)}return r}var Ts=function(){var e=E(i().mark((function e(t,n,r){var a,o,s,c,u,l,d,f,p,h,v,m,g,b,y,k,w,C,E,x,P,T,R,N,O,I;return i().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=r.placement,o=void 0===a?"bottom":a,s=r.strategy,c=void 0===s?"absolute":s,u=r.middleware,l=void 0===u?[]:u,d=r.platform,f=l.filter(Boolean),e.next=10,null==d.isRTL?void 0:d.isRTL(n);case 10:return p=e.sent,e.next=13,d.getElementRects({reference:t,floating:n,strategy:c});case 13:h=e.sent,v=Ps(h,o,p),m=v.x,g=v.y,b=o,y={},k=0,w=0;case 21:if(!(w<f.length)){e.next=56;break}return E=f[w],x=E.name,P=E.fn,e.next=27,P({x:m,y:g,initialPlacement:o,placement:b,strategy:c,middlewareData:y,rects:h,platform:d,elements:{reference:t,floating:n}});case 27:if(T=e.sent,R=T.x,N=T.y,O=T.data,I=T.reset,m=null!=R?R:m,g=null!=N?N:g,y=bs(bs({},y),{},S({},x,bs(bs({},y[x]),O))),e.t0=I&&k<=50,!e.t0){e.next=53;break}if(k++,e.t1="object"==typeof I,!e.t1){e.next=52;break}if(I.placement&&(b=I.placement),e.t2=I.rects,!e.t2){e.next=51;break}if(!0!==I.rects){e.next=49;break}return e.next=46,d.getElementRects({reference:t,floating:n,strategy:c});case 46:e.t3=e.sent,e.next=50;break;case 49:e.t3=I.rects;case 50:h=e.t3;case 51:C=Ps(h,b,p),m=C.x,g=C.y;case 52:w=-1;case 53:w++,e.next=21;break;case 56:return e.abrupt("return",{x:m,y:g,placement:b,strategy:c,middlewareData:y});case 57:case"end":return e.stop()}}),e)})));return function(t,n,r){return e.apply(this,arguments)}}();function Rs(e){return"number"!=typeof e?function(e){return bs({top:0,right:0,bottom:0,left:0},e)}(e):{top:e,right:e,bottom:e,left:e}}function Ns(e){return bs(bs({},e),{},{top:e.y,left:e.x,right:e.x+e.width,bottom:e.y+e.height})}function Os(e,t){return Is.apply(this,arguments)}function Is(){return Is=E(i().mark((function e(t,n){var r,a,o,s,c,u,l,d,f,p,h,v,m,g,b,y,k,w,S,C,E,x,P,T;return i().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return void 0===n&&(n={}),a=t.x,o=t.y,s=t.platform,c=t.rects,u=t.elements,l=t.strategy,f=(d=n).boundary,p=void 0===f?"clippingAncestors":f,h=d.rootBoundary,v=void 0===h?"viewport":h,m=d.elementContext,g=void 0===m?"floating":m,b=d.altBoundary,y=void 0!==b&&b,k=d.padding,w=Rs(void 0===k?0:k),S=u[y?"floating"===g?"reference":"floating":g],e.t0=Ns,e.t1=s,e.next=24,null==s.isElement?void 0:s.isElement(S);case 24:if(e.t3=r=e.sent,e.t2=null==e.t3,e.t2){e.next=28;break}e.t2=r;case 28:if(!e.t2){e.next=32;break}e.t4=S,e.next=38;break;case 32:if(e.t5=S.contextElement,e.t5){e.next=37;break}return e.next=36,null==s.getDocumentElement?void 0:s.getDocumentElement(u.floating);case 36:e.t5=e.sent;case 37:e.t4=e.t5;case 38:return e.t6=e.t4,e.t7=p,e.t8=v,e.t9=l,e.t10={element:e.t6,boundary:e.t7,rootBoundary:e.t8,strategy:e.t9},e.next=45,e.t1.getClippingRect.call(e.t1,e.t10);case 45:return e.t11=e.sent,C=(0,e.t0)(e.t11),E="floating"===g?bs(bs({},c.floating),{},{x:a,y:o}):c.reference,e.next=50,null==s.getOffsetParent?void 0:s.getOffsetParent(u.floating);case 50:return x=e.sent,e.next=53,null==s.isElement?void 0:s.isElement(x);case 53:if(e.t13=e.sent,!e.t13){e.next=58;break}return e.next=57,null==s.getScale?void 0:s.getScale(x);case 57:e.t13=e.sent;case 58:if(e.t12=e.t13,e.t12){e.next=61;break}e.t12={x:1,y:1};case 61:if(P=e.t12,e.t14=Ns,!s.convertOffsetParentRelativeRectToViewportRelativeRect){e.next=69;break}return e.next=66,s.convertOffsetParentRelativeRectToViewportRelativeRect({rect:E,offsetParent:x,strategy:l});case 66:e.t15=e.sent,e.next=70;break;case 69:e.t15=E;case 70:return e.t16=e.t15,T=(0,e.t14)(e.t16),e.abrupt("return",{top:(C.top-T.top+w.top)/P.y,bottom:(T.bottom-C.bottom+w.bottom)/P.y,left:(C.left-T.left+w.left)/P.x,right:(T.right-C.right+w.right)/P.x});case 73:case"end":return e.stop()}}),e)}))),Is.apply(this,arguments)}var _s=Math.min,Ds=Math.max;function As(e,t,n){return Ds(e,_s(t,n))}var Ls=["top","right","bottom","left"],Ms=(Ls.reduce((function(e,t){return e.concat(t,t+"-start",t+"-end")}),[]),{left:"right",right:"left",bottom:"top",top:"bottom"});function Us(e){return e.replace(/left|right|bottom|top/g,(function(e){return Ms[e]}))}function Fs(e,t,n){void 0===n&&(n=!1);var r=Ss(e),i=xs(e),a=Cs(i),o="x"===i?r===(n?"end":"start")?"right":"left":"start"===r?"bottom":"top";return t.reference[a]>t.floating[a]&&(o=Us(o)),{main:o,cross:Us(o)}}var js={start:"end",end:"start"};function Bs(e){return e.replace(/start|end/g,(function(e){return js[e]}))}var zs=function(e){return void 0===e&&(e={}),{name:"flip",options:e,fn:function(t){return E(i().mark((function n(){var r,a,o,s,u,l,d,f,p,h,v,m,g,b,y,k,w,S,C,E,x,P,T,R,N,O,I,_,D,A,L,M,U,F,j,B,z,$;return i().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return a=t.placement,o=t.middlewareData,s=t.rects,u=t.initialPlacement,l=t.platform,d=t.elements,p=(f=e).mainAxis,h=void 0===p||p,v=f.crossAxis,m=void 0===v||v,g=f.fallbackPlacements,b=f.fallbackStrategy,y=void 0===b?"bestFit":b,k=f.fallbackAxisSideDirection,w=void 0===k?"none":k,S=f.flipAlignment,C=void 0===S||S,E=ys(f,ks),x=Es(a),P=Es(u)===u,n.next=23,null==l.isRTL?void 0:l.isRTL(d.floating);case 23:return T=n.sent,R=g||(P||!C?[Us(u)]:function(e){var t=Us(e);return[Bs(e),t,Bs(t)]}(u)),g||"none"===w||R.push.apply(R,c(function(e,t,n,r){var i=Ss(e),a=function(e,t,n){var r=["left","right"],i=["right","left"];switch(e){case"top":case"bottom":return n?t?i:r:t?r:i;case"left":case"right":return t?["top","bottom"]:["bottom","top"];default:return[]}}(Es(e),"start"===n,r);return i&&(a=a.map((function(e){return e+"-"+i})),t&&(a=a.concat(a.map(Bs)))),a}(u,C,w,T))),N=[u].concat(c(R)),n.next=29,Os(t,E);case 29:if(O=n.sent,I=[],_=(null==(r=o.flip)?void 0:r.overflows)||[],h&&I.push(O[x]),m&&(D=Fs(a,s,T),A=D.main,L=D.cross,I.push(O[A],O[L])),_=[].concat(c(_),[{placement:a,overflows:I}]),I.every((function(e){return e<=0}))){n.next=48;break}if(F=((null==(M=o.flip)?void 0:M.index)||0)+1,!(j=N[F])){n.next=37;break}return n.abrupt("return",{data:{index:F,overflows:_},reset:{placement:j}});case 37:if(B=null==(U=_.filter((function(e){return e.overflows[0]<=0})).sort((function(e,t){return e.overflows[1]-t.overflows[1]}))[0])?void 0:U.placement,B){n.next=46;break}n.t0=y,n.next="bestFit"===n.t0?42:"initialPlacement"===n.t0?45:46;break;case 42:return $=null==(z=_.map((function(e){return[e.placement,e.overflows.filter((function(e){return e>0})).reduce((function(e,t){return e+t}),0)]})).sort((function(e,t){return e[1]-t[1]}))[0])?void 0:z[0],$&&(B=$),n.abrupt("break",46);case 45:B=u;case 46:if(a===B){n.next=48;break}return n.abrupt("return",{reset:{placement:B}});case 48:return n.abrupt("return",{});case 49:case"end":return n.stop()}}),n)})))()}}};var $s=function(e){return void 0===e&&(e=0),{name:"offset",options:e,fn:function(t){return E(i().mark((function n(){var r,a,o;return i().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return r=t.x,a=t.y,n.next=4,function(){var e=E(i().mark((function e(t,n){var r,a,o,s,c,u,l,d,f,p,h,v,m,g;return i().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=t.placement,a=t.platform,o=t.elements,e.next=5,null==a.isRTL?void 0:a.isRTL(o.floating);case 5:return s=e.sent,c=Es(r),u=Ss(r),l="x"===xs(r),d=["left","top"].includes(c)?-1:1,f=s&&l?-1:1,p="function"==typeof n?n(t):n,h="number"==typeof p?{mainAxis:p,crossAxis:0,alignmentAxis:null}:bs({mainAxis:0,crossAxis:0,alignmentAxis:null},p),v=h.mainAxis,m=h.crossAxis,g=h.alignmentAxis,e.abrupt("return",(u&&"number"==typeof g&&(m="end"===u?-1*g:g),l?{x:m*f,y:v*d}:{x:v*d,y:m*f}));case 14:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}()(t,e);case 4:return o=n.sent,n.abrupt("return",{x:r+o.x,y:a+o.y,data:o});case 6:case"end":return n.stop()}}),n)})))()}}};function Vs(e){return"x"===e?"y":"x"}var Js,Ws=function(e){return void 0===e&&(e={}),{name:"shift",options:e,fn:function(t){return E(i().mark((function n(){var r,a,o,s,c,u,l,d,f,p,h,v,m,g,b,y,k,w,C,E,x;return i().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return a=t.x,o=t.y,s=t.placement,u=(c=e).mainAxis,l=void 0===u||u,d=c.crossAxis,f=void 0!==d&&d,p=c.limiter,h=void 0===p?{fn:function(e){return{x:e.x,y:e.y}}}:p,v=ys(c,ws),m={x:a,y:o},n.next=14,Os(t,v);case 14:return g=n.sent,b=xs(Es(s)),y=Vs(b),k=m[b],w=m[y],l&&(C="y"===b?"bottom":"right",k=As(k+g["y"===b?"top":"left"],k,k-g[C])),f&&(E="y"===y?"bottom":"right",w=As(w+g["y"===y?"top":"left"],w,w-g[E])),x=h.fn(bs(bs({},t),{},(S(r={},b,k),S(r,y,w),r))),n.abrupt("return",bs(bs({},x),{},{data:{x:x.x-a,y:x.y-o}}));case 22:case"end":return n.stop()}}),n)})))()}}};function qs(e){var t;return(null==(t=e.ownerDocument)?void 0:t.defaultView)||window}function Hs(e){return qs(e).getComputedStyle(e)}function Gs(e){return e instanceof qs(e).Node}function Qs(e){return Gs(e)?(e.nodeName||"").toLowerCase():""}function Zs(){if(Js)return Js;var e=navigator.userAgentData;return e&&Array.isArray(e.brands)?Js=e.brands.map((function(e){return e.brand+"/"+e.version})).join(" "):navigator.userAgent}function Ks(e){return e instanceof qs(e).HTMLElement}function Ys(e){return e instanceof qs(e).Element}function Xs(e){return"undefined"!=typeof ShadowRoot&&(e instanceof qs(e).ShadowRoot||e instanceof ShadowRoot)}function ec(e){var t=Hs(e),n=t.overflow,r=t.overflowX,i=t.overflowY,a=t.display;return/auto|scroll|overlay|hidden|clip/.test(n+i+r)&&!["inline","contents"].includes(a)}function tc(e){return["table","td","th"].includes(Qs(e))}function nc(e){var t=/firefox/i.test(Zs()),n=Hs(e),r=n.backdropFilter||n.WebkitBackdropFilter;return"none"!==n.transform||"none"!==n.perspective||!!r&&"none"!==r||t&&"filter"===n.willChange||t&&!!n.filter&&"none"!==n.filter||["transform","perspective"].some((function(e){return n.willChange.includes(e)}))||["paint","layout","strict","content"].some((function(e){var t=n.contain;return null!=t&&t.includes(e)}))}function rc(){return/^((?!chrome|android).)*safari/i.test(Zs())}function ic(e){return["html","body","#document"].includes(Qs(e))}var ac=Math.min,oc=Math.max,sc=Math.round;function cc(e){var t=Hs(e),n=parseFloat(t.width),r=parseFloat(t.height),i=Ks(e),a=i?e.offsetWidth:n,o=i?e.offsetHeight:r,s=sc(n)!==a||sc(r)!==o;return s&&(n=a,r=o),{width:n,height:r,fallback:s}}function uc(e){return Ys(e)?e:e.contextElement}var lc={x:1,y:1};function dc(e){var t=uc(e);if(!Ks(t))return lc;var n=t.getBoundingClientRect(),r=cc(t),i=r.width,a=r.height,o=r.fallback,s=(o?sc(n.width):n.width)/i,c=(o?sc(n.height):n.height)/a;return s&&Number.isFinite(s)||(s=1),c&&Number.isFinite(c)||(c=1),{x:s,y:c}}function fc(e,t,n,r){var i,a;void 0===t&&(t=!1),void 0===n&&(n=!1);var o=e.getBoundingClientRect(),s=uc(e),c=lc;t&&(r?Ys(r)&&(c=dc(r)):c=dc(e));var u=s?qs(s):window,l=rc()&&n,d=(o.left+(l&&(null==(i=u.visualViewport)?void 0:i.offsetLeft)||0))/c.x,f=(o.top+(l&&(null==(a=u.visualViewport)?void 0:a.offsetTop)||0))/c.y,p=o.width/c.x,h=o.height/c.y;if(s)for(var v=qs(s),m=r&&Ys(r)?qs(r):r,g=v.frameElement;g&&r&&m!==v;){var b=dc(g),y=g.getBoundingClientRect(),k=getComputedStyle(g);y.x+=(g.clientLeft+parseFloat(k.paddingLeft))*b.x,y.y+=(g.clientTop+parseFloat(k.paddingTop))*b.y,d*=b.x,f*=b.y,p*=b.x,h*=b.y,d+=y.x,f+=y.y,g=qs(g).frameElement}return Ns({width:p,height:h,x:d,y:f})}function pc(e){return((Gs(e)?e.ownerDocument:e.document)||window.document).documentElement}function hc(e){return Ys(e)?{scrollLeft:e.scrollLeft,scrollTop:e.scrollTop}:{scrollLeft:e.pageXOffset,scrollTop:e.pageYOffset}}function vc(e){return fc(pc(e)).left+hc(e).scrollLeft}function mc(e){if("html"===Qs(e))return e;var t=e.assignedSlot||e.parentNode||Xs(e)&&e.host||pc(e);return Xs(t)?t.host:t}function gc(e){var t=mc(e);return ic(t)?t.ownerDocument.body:Ks(t)&&ec(t)?t:gc(t)}function bc(e,t){var n;void 0===t&&(t=[]);var r=gc(e),i=r===(null==(n=e.ownerDocument)?void 0:n.body),a=qs(r);return i?t.concat(a,a.visualViewport||[],ec(r)?r:[]):t.concat(r,bc(r))}function yc(e,t,n){var r;if("viewport"===t)r=function(e,t){var n=qs(e),r=pc(e),i=n.visualViewport,a=r.clientWidth,o=r.clientHeight,s=0,c=0;if(i){a=i.width,o=i.height;var u=rc();(!u||u&&"fixed"===t)&&(s=i.offsetLeft,c=i.offsetTop)}return{width:a,height:o,x:s,y:c}}(e,n);else if("document"===t)r=function(e){var t=pc(e),n=hc(e),r=e.ownerDocument.body,i=oc(t.scrollWidth,t.clientWidth,r.scrollWidth,r.clientWidth),a=oc(t.scrollHeight,t.clientHeight,r.scrollHeight,r.clientHeight),o=-n.scrollLeft+vc(e),s=-n.scrollTop;return"rtl"===Hs(r).direction&&(o+=oc(t.clientWidth,r.clientWidth)-i),{width:i,height:a,x:o,y:s}}(pc(e));else if(Ys(t))r=function(e,t){var n=fc(e,!0,"fixed"===t),r=n.top+e.clientTop,i=n.left+e.clientLeft,a=Ks(e)?dc(e):{x:1,y:1};return{width:e.clientWidth*a.x,height:e.clientHeight*a.y,x:i*a.x,y:r*a.y}}(t,n);else{var i=bs({},t);if(rc()){var a,o,s=qs(e);i.x-=(null==(a=s.visualViewport)?void 0:a.offsetLeft)||0,i.y-=(null==(o=s.visualViewport)?void 0:o.offsetTop)||0}r=i}return Ns(r)}function kc(e,t){return Ks(e)&&"fixed"!==Hs(e).position?t?t(e):e.offsetParent:null}function wc(e,t){var n=qs(e);if(!Ks(e))return n;for(var r=kc(e,t);r&&tc(r)&&"static"===Hs(r).position;)r=kc(r,t);return r&&("html"===Qs(r)||"body"===Qs(r)&&"static"===Hs(r).position&&!nc(r))?n:r||function(e){for(var t=mc(e);Ks(t)&&!ic(t);){if(nc(t))return t;t=mc(t)}return null}(e)||n}function Sc(e,t,n){var r=Ks(t),i=pc(t),a=fc(e,!0,"fixed"===n,t),o={scrollLeft:0,scrollTop:0},s={x:0,y:0};if(r||!r&&"fixed"!==n)if(("body"!==Qs(t)||ec(i))&&(o=hc(t)),Ks(t)){var c=fc(t,!0);s.x=c.x+t.clientLeft,s.y=c.y+t.clientTop}else i&&(s.x=vc(i));return{x:a.left+o.scrollLeft-s.x,y:a.top+o.scrollTop-s.y,width:a.width,height:a.height}}var Cc={getClippingRect:function(e){var t=e.element,n=e.boundary,r=e.rootBoundary,i=e.strategy,a="clippingAncestors"===n?function(e,t){var n=t.get(e);if(n)return n;for(var r=bc(e).filter((function(e){return Ys(e)&&"body"!==Qs(e)})),i=null,a="fixed"===Hs(e).position,o=a?mc(e):e;Ys(o)&&!ic(o);){var s=Hs(o),c=nc(o);"fixed"===s.position&&(i=null),(a?c||i:c||"static"!==s.position||!i||!["absolute","fixed"].includes(i.position))?i=s:r=r.filter((function(e){return e!==o})),o=mc(o)}return t.set(e,r),r}(t,this._c):[].concat(n),o=[].concat(c(a),[r]),s=o[0],u=o.reduce((function(e,n){var r=yc(t,n,i);return e.top=oc(r.top,e.top),e.right=ac(r.right,e.right),e.bottom=ac(r.bottom,e.bottom),e.left=oc(r.left,e.left),e}),yc(t,s,i));return{width:u.right-u.left,height:u.bottom-u.top,x:u.left,y:u.top}},convertOffsetParentRelativeRectToViewportRelativeRect:function(e){var t=e.rect,n=e.offsetParent,r=e.strategy,i=Ks(n),a=pc(n);if(n===a)return t;var o={scrollLeft:0,scrollTop:0},s={x:1,y:1},c={x:0,y:0};if((i||!i&&"fixed"!==r)&&(("body"!==Qs(n)||ec(a))&&(o=hc(n)),Ks(n))){var u=fc(n);s=dc(n),c.x=u.x+n.clientLeft,c.y=u.y+n.clientTop}return{width:t.width*s.x,height:t.height*s.y,x:t.x*s.x-o.scrollLeft*s.x+c.x,y:t.y*s.y-o.scrollTop*s.y+c.y}},isElement:Ys,getDimensions:function(e){return cc(e)},getOffsetParent:wc,getDocumentElement:pc,getScale:dc,getElementRects:function(e){var t=this;return E(i().mark((function n(){var r,a,o,s,c;return i().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return r=e.reference,a=e.floating,o=e.strategy,s=t.getOffsetParent||wc,c=t.getDimensions,n.t0=Sc,n.t1=r,n.next=6,s(a);case 6:return n.t2=n.sent,n.t3=o,n.t4=(0,n.t0)(n.t1,n.t2,n.t3),n.t5=bs,n.t6={x:0,y:0},n.next=13,c(a);case 13:return n.t7=n.sent,n.t8=(0,n.t5)(n.t6,n.t7),n.abrupt("return",{reference:n.t4,floating:n.t8});case 16:case"end":return n.stop()}}),n)})))()},getClientRects:function(e){return Array.from(e.getClientRects())},isRTL:function(e){return"rtl"===Hs(e).direction}};var Ec=function(e,t,n){var r=new Map,i=bs({platform:Cc},n),a=bs(bs({},i.platform),{},{_c:r});return Ts(e,t,bs(bs({},i),{},{platform:a}))},xc=n(895);function Pc(e){return"function"===typeof e}function Tc(e){return function(t){if(function(e){return Pc(null===e||void 0===e?void 0:e.lift)}(t))return t.lift((function(t){try{return e(t,this)}catch(n){this.error(n)}}));throw new TypeError("Unable to lift unknown Observable type")}}var Rc=function(e,t){return Rc=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])},Rc(e,t)};function Nc(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function n(){this.constructor=e}Rc(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}function Oc(e,t,n,r){return new(n||(n=Promise))((function(i,a){function o(e){try{c(r.next(e))}catch(Cs){a(Cs)}}function s(e){try{c(r.throw(e))}catch(Cs){a(Cs)}}function c(e){var t;e.done?i(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(o,s)}c((r=r.apply(e,t||[])).next())}))}function Ic(e,t){var n,r,i,a,o={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return a={next:s(0),throw:s(1),return:s(2)},"function"===typeof Symbol&&(a[Symbol.iterator]=function(){return this}),a;function s(s){return function(c){return function(s){if(n)throw new TypeError("Generator is already executing.");for(;a&&(a=0,s[0]&&(o=0)),o;)try{if(n=1,r&&(i=2&s[0]?r.return:s[0]?r.throw||((i=r.return)&&i.call(r),0):r.next)&&!(i=i.call(r,s[1])).done)return i;switch(r=0,i&&(s=[2&s[0],i.value]),s[0]){case 0:case 1:i=s;break;case 4:return o.label++,{value:s[1],done:!1};case 5:o.label++,r=s[1],s=[0];continue;case 7:s=o.ops.pop(),o.trys.pop();continue;default:if(!(i=(i=o.trys).length>0&&i[i.length-1])&&(6===s[0]||2===s[0])){o=0;continue}if(3===s[0]&&(!i||s[1]>i[0]&&s[1]<i[3])){o.label=s[1];break}if(6===s[0]&&o.label<i[1]){o.label=i[1],i=s;break}if(i&&o.label<i[2]){o.label=i[2],o.ops.push(s);break}i[2]&&o.ops.pop(),o.trys.pop();continue}s=t.call(e,o)}catch(Cs){s=[6,Cs],r=0}finally{n=i=0}if(5&s[0])throw s[1];return{value:s[0]?s[1]:void 0,done:!0}}([s,c])}}}Object.create;function _c(e){var t="function"===typeof Symbol&&Symbol.iterator,n=t&&e[t],r=0;if(n)return n.call(e);if(e&&"number"===typeof e.length)return{next:function(){return e&&r>=e.length&&(e=void 0),{value:e&&e[r++],done:!e}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")}function Dc(e,t){var n="function"===typeof Symbol&&e[Symbol.iterator];if(!n)return e;var r,i,a=n.call(e),o=[];try{for(;(void 0===t||t-- >0)&&!(r=a.next()).done;)o.push(r.value)}catch(s){i={error:s}}finally{try{r&&!r.done&&(n=a.return)&&n.call(a)}finally{if(i)throw i.error}}return o}function Ac(e,t,n){if(n||2===arguments.length)for(var r,i=0,a=t.length;i<a;i++)!r&&i in t||(r||(r=Array.prototype.slice.call(t,0,i)),r[i]=t[i]);return e.concat(r||Array.prototype.slice.call(t))}function Lc(e){return this instanceof Lc?(this.v=e,this):new Lc(e)}function Mc(e,t,n){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var r,i=n.apply(e,t||[]),a=[];return r={},o("next"),o("throw"),o("return"),r[Symbol.asyncIterator]=function(){return this},r;function o(e){i[e]&&(r[e]=function(t){return new Promise((function(n,r){a.push([e,t,n,r])>1||s(e,t)}))})}function s(e,t){try{!function(e){e.value instanceof Lc?Promise.resolve(e.value.v).then(c,u):l(a[0][2],e)}(i[e](t))}catch(Cs){l(a[0][3],Cs)}}function c(e){s("next",e)}function u(e){s("throw",e)}function l(e,t){e(t),a.shift(),a.length&&s(a[0][0],a[0][1])}}function Uc(e){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var t,n=e[Symbol.asyncIterator];return n?n.call(e):(e=_c(e),t={},r("next"),r("throw"),r("return"),t[Symbol.asyncIterator]=function(){return this},t);function r(n){t[n]=e[n]&&function(t){return new Promise((function(r,i){(function(e,t,n,r){Promise.resolve(r).then((function(t){e({value:t,done:n})}),t)})(r,i,(t=e[n](t)).done,t.value)}))}}}Object.create;function Fc(e){var t=e((function(e){Error.call(e),e.stack=(new Error).stack}));return t.prototype=Object.create(Error.prototype),t.prototype.constructor=t,t}var jc=Fc((function(e){return function(t){e(this),this.message=t?t.length+" errors occurred during unsubscription:\n"+t.map((function(e,t){return t+1+") "+e.toString()})).join("\n  "):"",this.name="UnsubscriptionError",this.errors=t}}));function Bc(e,t){if(e){var n=e.indexOf(t);0<=n&&e.splice(n,1)}}var zc=function(){function e(e){this.initialTeardown=e,this.closed=!1,this._parentage=null,this._finalizers=null}return e.prototype.unsubscribe=function(){var e,t,n,r,i;if(!this.closed){this.closed=!0;var a=this._parentage;if(a)if(this._parentage=null,Array.isArray(a))try{for(var o=_c(a),s=o.next();!s.done;s=o.next()){s.value.remove(this)}}catch(p){e={error:p}}finally{try{s&&!s.done&&(t=o.return)&&t.call(o)}finally{if(e)throw e.error}}else a.remove(this);var c=this.initialTeardown;if(Pc(c))try{c()}catch(Cs){i=Cs instanceof jc?Cs.errors:[Cs]}var u=this._finalizers;if(u){this._finalizers=null;try{for(var l=_c(u),d=l.next();!d.done;d=l.next()){var f=d.value;try{Jc(f)}catch(h){i=null!==i&&void 0!==i?i:[],h instanceof jc?i=Ac(Ac([],Dc(i)),Dc(h.errors)):i.push(h)}}}catch(v){n={error:v}}finally{try{d&&!d.done&&(r=l.return)&&r.call(l)}finally{if(n)throw n.error}}}if(i)throw new jc(i)}},e.prototype.add=function(t){var n;if(t&&t!==this)if(this.closed)Jc(t);else{if(t instanceof e){if(t.closed||t._hasParent(this))return;t._addParent(this)}(this._finalizers=null!==(n=this._finalizers)&&void 0!==n?n:[]).push(t)}},e.prototype._hasParent=function(e){var t=this._parentage;return t===e||Array.isArray(t)&&t.includes(e)},e.prototype._addParent=function(e){var t=this._parentage;this._parentage=Array.isArray(t)?(t.push(e),t):t?[t,e]:e},e.prototype._removeParent=function(e){var t=this._parentage;t===e?this._parentage=null:Array.isArray(t)&&Bc(t,e)},e.prototype.remove=function(t){var n=this._finalizers;n&&Bc(n,t),t instanceof e&&t._removeParent(this)},e.EMPTY=function(){var t=new e;return t.closed=!0,t}(),e}(),$c=zc.EMPTY;function Vc(e){return e instanceof zc||e&&"closed"in e&&Pc(e.remove)&&Pc(e.add)&&Pc(e.unsubscribe)}function Jc(e){Pc(e)?e():e.unsubscribe()}var Wc={onUnhandledError:null,onStoppedNotification:null,Promise:void 0,useDeprecatedSynchronousErrorHandling:!1,useDeprecatedNextContext:!1},qc={setTimeout:function(e){function t(t,n){return e.apply(this,arguments)}return t.toString=function(){return e.toString()},t}((function(e,t){for(var n=[],r=2;r<arguments.length;r++)n[r-2]=arguments[r];var i=qc.delegate;return(null===i||void 0===i?void 0:i.setTimeout)?i.setTimeout.apply(i,Ac([e,t],Dc(n))):setTimeout.apply(void 0,Ac([e,t],Dc(n)))})),clearTimeout:function(e){function t(t){return e.apply(this,arguments)}return t.toString=function(){return e.toString()},t}((function(e){var t=qc.delegate;return((null===t||void 0===t?void 0:t.clearTimeout)||clearTimeout)(e)})),delegate:void 0};function Hc(e){qc.setTimeout((function(){var t=Wc.onUnhandledError;if(!t)throw e;t(e)}))}function Gc(){}var Qc=Zc("C",void 0,void 0);function Zc(e,t,n){return{kind:e,value:t,error:n}}var Kc=null;function Yc(e){if(Wc.useDeprecatedSynchronousErrorHandling){var t=!Kc;if(t&&(Kc={errorThrown:!1,error:null}),e(),t){var n=Kc,r=n.errorThrown,i=n.error;if(Kc=null,r)throw i}}else e()}var Xc=function(e){function t(t){var n=e.call(this)||this;return n.isStopped=!1,t?(n.destination=t,Vc(t)&&t.add(n)):n.destination=ou,n}return Nc(t,e),t.create=function(e,t,n){return new ru(e,t,n)},t.prototype.next=function(e){this.isStopped?au(function(e){return Zc("N",e,void 0)}(e),this):this._next(e)},t.prototype.error=function(e){this.isStopped?au(Zc("E",void 0,e),this):(this.isStopped=!0,this._error(e))},t.prototype.complete=function(){this.isStopped?au(Qc,this):(this.isStopped=!0,this._complete())},t.prototype.unsubscribe=function(){this.closed||(this.isStopped=!0,e.prototype.unsubscribe.call(this),this.destination=null)},t.prototype._next=function(e){this.destination.next(e)},t.prototype._error=function(e){try{this.destination.error(e)}finally{this.unsubscribe()}},t.prototype._complete=function(){try{this.destination.complete()}finally{this.unsubscribe()}},t}(zc),eu=Function.prototype.bind;function tu(e,t){return eu.call(e,t)}var nu=function(){function e(e){this.partialObserver=e}return e.prototype.next=function(e){var t=this.partialObserver;if(t.next)try{t.next(e)}catch(n){iu(n)}},e.prototype.error=function(e){var t=this.partialObserver;if(t.error)try{t.error(e)}catch(n){iu(n)}else iu(e)},e.prototype.complete=function(){var e=this.partialObserver;if(e.complete)try{e.complete()}catch(t){iu(t)}},e}(),ru=function(e){function t(t,n,r){var i,a,o=e.call(this)||this;Pc(t)||!t?i={next:null!==t&&void 0!==t?t:void 0,error:null!==n&&void 0!==n?n:void 0,complete:null!==r&&void 0!==r?r:void 0}:o&&Wc.useDeprecatedNextContext?((a=Object.create(t)).unsubscribe=function(){return o.unsubscribe()},i={next:t.next&&tu(t.next,a),error:t.error&&tu(t.error,a),complete:t.complete&&tu(t.complete,a)}):i=t;return o.destination=new nu(i),o}return Nc(t,e),t}(Xc);function iu(e){var t;Wc.useDeprecatedSynchronousErrorHandling?(t=e,Wc.useDeprecatedSynchronousErrorHandling&&Kc&&(Kc.errorThrown=!0,Kc.error=t)):Hc(e)}function au(e,t){var n=Wc.onStoppedNotification;n&&qc.setTimeout((function(){return n(e,t)}))}var ou={closed:!0,next:Gc,error:function(e){throw e},complete:Gc};function su(e,t,n,r,i){return new cu(e,t,n,r,i)}var cu=function(e){function t(t,n,r,i,a,o){var s=e.call(this,t)||this;return s.onFinalize=a,s.shouldUnsubscribe=o,s._next=n?function(e){try{n(e)}catch(r){t.error(r)}}:e.prototype._next,s._error=i?function(e){try{i(e)}catch(e){t.error(e)}finally{this.unsubscribe()}}:e.prototype._error,s._complete=r?function(){try{r()}catch(e){t.error(e)}finally{this.unsubscribe()}}:e.prototype._complete,s}return Nc(t,e),t.prototype.unsubscribe=function(){var t;if(!this.shouldUnsubscribe||this.shouldUnsubscribe()){var n=this.closed;e.prototype.unsubscribe.call(this),!n&&(null===(t=this.onFinalize)||void 0===t||t.call(this))}},t}(Xc);function uu(e,t){return Tc((function(n,r){var i=0;n.subscribe(su(r,(function(n){r.next(e.call(t,n,i++))})))}))}var lu=function(e){return e&&"number"===typeof e.length&&"function"!==typeof e};function du(e){return Pc(null===e||void 0===e?void 0:e.then)}var fu="function"===typeof Symbol&&Symbol.observable||"@@observable";function pu(e){return e}function hu(e){return 0===e.length?pu:1===e.length?e[0]:function(t){return e.reduce((function(e,t){return t(e)}),t)}}var vu=function(){function e(e){e&&(this._subscribe=e)}return e.prototype.lift=function(t){var n=new e;return n.source=this,n.operator=t,n},e.prototype.subscribe=function(e,t,n){var r,i=this,a=(r=e)&&r instanceof Xc||function(e){return e&&Pc(e.next)&&Pc(e.error)&&Pc(e.complete)}(r)&&Vc(r)?e:new ru(e,t,n);return Yc((function(){var e=i,t=e.operator,n=e.source;a.add(t?t.call(a,n):n?i._subscribe(a):i._trySubscribe(a))})),a},e.prototype._trySubscribe=function(e){try{return this._subscribe(e)}catch(t){e.error(t)}},e.prototype.forEach=function(e,t){var n=this;return new(t=mu(t))((function(t,r){var i=new ru({next:function(t){try{e(t)}catch(n){r(n),i.unsubscribe()}},error:r,complete:t});n.subscribe(i)}))},e.prototype._subscribe=function(e){var t;return null===(t=this.source)||void 0===t?void 0:t.subscribe(e)},e.prototype[fu]=function(){return this},e.prototype.pipe=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];return hu(e)(this)},e.prototype.toPromise=function(e){var t=this;return new(e=mu(e))((function(e,n){var r;t.subscribe((function(e){return r=e}),(function(e){return n(e)}),(function(){return e(r)}))}))},e.create=function(t){return new e(t)},e}();function mu(e){var t;return null!==(t=null!==e&&void 0!==e?e:Wc.Promise)&&void 0!==t?t:Promise}function gu(e){return Pc(e[fu])}function bu(e){return Symbol.asyncIterator&&Pc(null===e||void 0===e?void 0:e[Symbol.asyncIterator])}function yu(e){return new TypeError("You provided "+(null!==e&&"object"===typeof e?"an invalid object":"'"+e+"'")+" where a stream was expected. You can provide an Observable, Promise, ReadableStream, Array, AsyncIterable, or Iterable.")}var ku="function"===typeof Symbol&&Symbol.iterator?Symbol.iterator:"@@iterator";function wu(e){return Pc(null===e||void 0===e?void 0:e[ku])}function Su(e){return Mc(this,arguments,(function(){var t,n,r;return Ic(this,(function(i){switch(i.label){case 0:t=e.getReader(),i.label=1;case 1:i.trys.push([1,,9,10]),i.label=2;case 2:return[4,Lc(t.read())];case 3:return n=i.sent(),r=n.value,n.done?[4,Lc(void 0)]:[3,5];case 4:return[2,i.sent()];case 5:return[4,Lc(r)];case 6:return[4,i.sent()];case 7:return i.sent(),[3,2];case 8:return[3,10];case 9:return t.releaseLock(),[7];case 10:return[2]}}))}))}function Cu(e){return Pc(null===e||void 0===e?void 0:e.getReader)}function Eu(e){if(e instanceof vu)return e;if(null!=e){if(gu(e))return i=e,new vu((function(e){var t=i[fu]();if(Pc(t.subscribe))return t.subscribe(e);throw new TypeError("Provided object does not correctly implement Symbol.observable")}));if(lu(e))return r=e,new vu((function(e){for(var t=0;t<r.length&&!e.closed;t++)e.next(r[t]);e.complete()}));if(du(e))return n=e,new vu((function(e){n.then((function(t){e.closed||(e.next(t),e.complete())}),(function(t){return e.error(t)})).then(null,Hc)}));if(bu(e))return xu(e);if(wu(e))return t=e,new vu((function(e){var n,r;try{for(var i=_c(t),a=i.next();!a.done;a=i.next()){var o=a.value;if(e.next(o),e.closed)return}}catch(s){n={error:s}}finally{try{a&&!a.done&&(r=i.return)&&r.call(i)}finally{if(n)throw n.error}}e.complete()}));if(Cu(e))return xu(Su(e))}var t,n,r,i;throw yu(e)}function xu(e){return new vu((function(t){(function(e,t){var n,r,i,a;return Oc(this,void 0,void 0,(function(){var o,s;return Ic(this,(function(c){switch(c.label){case 0:c.trys.push([0,5,6,11]),n=Uc(e),c.label=1;case 1:return[4,n.next()];case 2:if((r=c.sent()).done)return[3,4];if(o=r.value,t.next(o),t.closed)return[2];c.label=3;case 3:return[3,1];case 4:return[3,11];case 5:return s=c.sent(),i={error:s},[3,11];case 6:return c.trys.push([6,,9,10]),r&&!r.done&&(a=n.return)?[4,a.call(n)]:[3,8];case 7:c.sent(),c.label=8;case 8:return[3,10];case 9:if(i)throw i.error;return[7];case 10:return[7];case 11:return t.complete(),[2]}}))}))})(e,t).catch((function(e){return t.error(e)}))}))}function Pu(e,t,n,r,i){void 0===r&&(r=0),void 0===i&&(i=!1);var a=t.schedule((function(){n(),i?e.add(this.schedule(null,r)):this.unsubscribe()}),r);if(e.add(a),!i)return a}function Tu(e,t,n){return void 0===n&&(n=1/0),Pc(t)?Tu((function(n,r){return uu((function(e,i){return t(n,e,r,i)}))(Eu(e(n,r)))}),n):("number"===typeof t&&(n=t),Tc((function(t,r){return function(e,t,n,r,i,a,o,s){var c=[],u=0,l=0,d=!1,f=function(){!d||c.length||u||t.complete()},p=function(e){return u<r?h(e):c.push(e)},h=function e(s){a&&t.next(s),u++;var d=!1;Eu(n(s,l++)).subscribe(su(t,(function(e){null===i||void 0===i||i(e),a?p(e):t.next(e)}),(function(){d=!0}),void 0,(function(){if(d)try{u--;for(var n=function(){var n=c.shift();o?Pu(t,o,(function(){return e(n)})):e(n)};c.length&&u<r;)n();f()}catch(i){t.error(i)}})))};return e.subscribe(su(t,p,(function(){d=!0,f()}))),function(){null===s||void 0===s||s()}}(t,r,e,n)})))}function Ru(e){return void 0===e&&(e=1/0),Tu(pu,e)}function Nu(e){return e[e.length-1]}function Ou(e){return(t=Nu(e))&&Pc(t.schedule)?e.pop():void 0;var t}function Iu(e,t){return void 0===t&&(t=0),Tc((function(n,r){n.subscribe(su(r,(function(n){return Pu(r,e,(function(){return r.next(n)}),t)}),(function(){return Pu(r,e,(function(){return r.complete()}),t)}),(function(n){return Pu(r,e,(function(){return r.error(n)}),t)})))}))}function _u(e,t){return void 0===t&&(t=0),Tc((function(n,r){r.add(e.schedule((function(){return n.subscribe(r)}),t))}))}function Du(e,t){if(!e)throw new Error("Iterable cannot be null");return new vu((function(n){Pu(n,t,(function(){var r=e[Symbol.asyncIterator]();Pu(n,t,(function(){r.next().then((function(e){e.done?n.complete():n.next(e.value)}))}),0,!0)}))}))}function Au(e,t){if(null!=e){if(gu(e))return function(e,t){return Eu(e).pipe(_u(t),Iu(t))}(e,t);if(lu(e))return function(e,t){return new vu((function(n){var r=0;return t.schedule((function(){r===e.length?n.complete():(n.next(e[r++]),n.closed||this.schedule())}))}))}(e,t);if(du(e))return function(e,t){return Eu(e).pipe(_u(t),Iu(t))}(e,t);if(bu(e))return Du(e,t);if(wu(e))return function(e,t){return new vu((function(n){var r;return Pu(n,t,(function(){r=e[ku](),Pu(n,t,(function(){var e,t,i;try{t=(e=r.next()).value,i=e.done}catch(a){return void n.error(a)}i?n.complete():n.next(t)}),0,!0)})),function(){return Pc(null===r||void 0===r?void 0:r.return)&&r.return()}}))}(e,t);if(Cu(e))return function(e,t){return Du(Su(e),t)}(e,t)}throw yu(e)}function Lu(e,t){return t?Au(e,t):Eu(e)}function Mu(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];return Ru(1)(Lu(e,Ou(e)))}function Uu(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];var n=Ou(e);return Tc((function(t,r){(n?Mu(e,t,n):Mu(e,t)).subscribe(r)}))}var Fu=Fc((function(e){return function(){e(this),this.name="ObjectUnsubscribedError",this.message="object unsubscribed"}})),ju=function(e){function t(){var t=e.call(this)||this;return t.closed=!1,t.currentObservers=null,t.observers=[],t.isStopped=!1,t.hasError=!1,t.thrownError=null,t}return Nc(t,e),t.prototype.lift=function(e){var t=new Bu(this,this);return t.operator=e,t},t.prototype._throwIfClosed=function(){if(this.closed)throw new Fu},t.prototype.next=function(e){var t=this;Yc((function(){var n,r;if(t._throwIfClosed(),!t.isStopped){t.currentObservers||(t.currentObservers=Array.from(t.observers));try{for(var i=_c(t.currentObservers),a=i.next();!a.done;a=i.next()){a.value.next(e)}}catch(o){n={error:o}}finally{try{a&&!a.done&&(r=i.return)&&r.call(i)}finally{if(n)throw n.error}}}}))},t.prototype.error=function(e){var t=this;Yc((function(){if(t._throwIfClosed(),!t.isStopped){t.hasError=t.isStopped=!0,t.thrownError=e;for(var n=t.observers;n.length;)n.shift().error(e)}}))},t.prototype.complete=function(){var e=this;Yc((function(){if(e._throwIfClosed(),!e.isStopped){e.isStopped=!0;for(var t=e.observers;t.length;)t.shift().complete()}}))},t.prototype.unsubscribe=function(){this.isStopped=this.closed=!0,this.observers=this.currentObservers=null},Object.defineProperty(t.prototype,"observed",{get:function(){var e;return(null===(e=this.observers)||void 0===e?void 0:e.length)>0},enumerable:!1,configurable:!0}),t.prototype._trySubscribe=function(t){return this._throwIfClosed(),e.prototype._trySubscribe.call(this,t)},t.prototype._subscribe=function(e){return this._throwIfClosed(),this._checkFinalizedStatuses(e),this._innerSubscribe(e)},t.prototype._innerSubscribe=function(e){var t=this,n=this,r=n.hasError,i=n.isStopped,a=n.observers;return r||i?$c:(this.currentObservers=null,a.push(e),new zc((function(){t.currentObservers=null,Bc(a,e)})))},t.prototype._checkFinalizedStatuses=function(e){var t=this,n=t.hasError,r=t.thrownError,i=t.isStopped;n?e.error(r):i&&e.complete()},t.prototype.asObservable=function(){var e=new vu;return e.source=this,e},t.create=function(e,t){return new Bu(e,t)},t}(vu),Bu=function(e){function t(t,n){var r=e.call(this)||this;return r.destination=t,r.source=n,r}return Nc(t,e),t.prototype.next=function(e){var t,n;null===(n=null===(t=this.destination)||void 0===t?void 0:t.next)||void 0===n||n.call(t,e)},t.prototype.error=function(e){var t,n;null===(n=null===(t=this.destination)||void 0===t?void 0:t.error)||void 0===n||n.call(t,e)},t.prototype.complete=function(){var e,t;null===(t=null===(e=this.destination)||void 0===e?void 0:e.complete)||void 0===t||t.call(e)},t.prototype._subscribe=function(e){var t,n;return null!==(n=null===(t=this.source)||void 0===t?void 0:t.subscribe(e))&&void 0!==n?n:$c},t}(ju);var zu=function(e){function t(t){var n=e.call(this)||this;return n._value=t,n}return Nc(t,e),Object.defineProperty(t.prototype,"value",{get:function(){return this.getValue()},enumerable:!1,configurable:!0}),t.prototype._subscribe=function(t){var n=e.prototype._subscribe.call(this,t);return!n.closed&&t.next(this._value),n},t.prototype.getValue=function(){var e=this,t=e.hasError,n=e.thrownError,r=e._value;if(t)throw n;return this._throwIfClosed(),r},t.prototype.next=function(t){e.prototype.next.call(this,this._value=t)},t}(ju),$u=Array.isArray;function Vu(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];var n=Ou(e),r=function(e,t){return"number"===typeof Nu(e)?e.pop():t}(e,1/0);return e=function(e){return 1===e.length&&$u(e[0])?e[0]:e}(e),Tc((function(t,i){Ru(r)(Lu(Ac([t],Dc(e)),n)).subscribe(i)}))}function Ju(e){return Tc((function(t,n){Eu(e).subscribe(su(n,(function(){return n.complete()}),Gc)),!n.closed&&t.subscribe(n)}))}function Wu(e,t){return Tc(function(e,t,n,r,i){return function(a,o){var s=n,c=t,u=0;a.subscribe(su(o,(function(t){var n=u++;c=s?e(c,t,n):(s=!0,t),r&&o.next(c)}),i&&function(){s&&o.next(c),o.complete()}))}}(e,t,arguments.length>=2,!0))}function qu(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];return Lu(e,Ou(e))}var Hu=Array.isArray;function Gu(e){return uu((function(t){return function(e,t){return Hu(t)?e.apply(void 0,Ac([],Dc(t))):e(t)}(e,t)}))}var Qu=["addListener","removeListener"],Zu=["addEventListener","removeEventListener"],Ku=["on","off"];function Yu(e,t,n,r){if(Pc(n)&&(r=n,n=void 0),r)return Yu(e,t,n).pipe(Gu(r));var i=Dc(function(e){return Pc(e.addEventListener)&&Pc(e.removeEventListener)}(e)?Zu.map((function(r){return function(i){return e[r](t,i,n)}})):function(e){return Pc(e.addListener)&&Pc(e.removeListener)}(e)?Qu.map(Xu(e,t)):function(e){return Pc(e.on)&&Pc(e.off)}(e)?Ku.map(Xu(e,t)):[],2),a=i[0],o=i[1];if(!a&&lu(e))return Tu((function(e){return Yu(e,t,n)}))(Eu(e));if(!a)throw new TypeError("Invalid event target");return new vu((function(e){var t=function(){for(var t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];return e.next(1<t.length?t:t[0])};return a(t),function(){return o(t)}}))}function Xu(e,t){return function(n){return function(r){return e[n](t,r)}}}var el=function(e){function t(t,n){return e.call(this)||this}return Nc(t,e),t.prototype.schedule=function(e,t){return void 0===t&&(t=0),this},t}(zc),tl={setInterval:function(e){function t(t,n){return e.apply(this,arguments)}return t.toString=function(){return e.toString()},t}((function(e,t){for(var n=[],r=2;r<arguments.length;r++)n[r-2]=arguments[r];var i=tl.delegate;return(null===i||void 0===i?void 0:i.setInterval)?i.setInterval.apply(i,Ac([e,t],Dc(n))):setInterval.apply(void 0,Ac([e,t],Dc(n)))})),clearInterval:function(e){function t(t){return e.apply(this,arguments)}return t.toString=function(){return e.toString()},t}((function(e){var t=tl.delegate;return((null===t||void 0===t?void 0:t.clearInterval)||clearInterval)(e)})),delegate:void 0},nl=function(e){function t(t,n){var r=e.call(this,t,n)||this;return r.scheduler=t,r.work=n,r.pending=!1,r}return Nc(t,e),t.prototype.schedule=function(e,t){var n;if(void 0===t&&(t=0),this.closed)return this;this.state=e;var r=this.id,i=this.scheduler;return null!=r&&(this.id=this.recycleAsyncId(i,r,t)),this.pending=!0,this.delay=t,this.id=null!==(n=this.id)&&void 0!==n?n:this.requestAsyncId(i,this.id,t),this},t.prototype.requestAsyncId=function(e,t,n){return void 0===n&&(n=0),tl.setInterval(e.flush.bind(e,this),n)},t.prototype.recycleAsyncId=function(e,t,n){if(void 0===n&&(n=0),null!=n&&this.delay===n&&!1===this.pending)return t;null!=t&&tl.clearInterval(t)},t.prototype.execute=function(e,t){if(this.closed)return new Error("executing a cancelled action");this.pending=!1;var n=this._execute(e,t);if(n)return n;!1===this.pending&&null!=this.id&&(this.id=this.recycleAsyncId(this.scheduler,this.id,null))},t.prototype._execute=function(e,t){var n,r=!1;try{this.work(e)}catch(Cs){r=!0,n=Cs||new Error("Scheduled action threw falsy error")}if(r)return this.unsubscribe(),n},t.prototype.unsubscribe=function(){if(!this.closed){var t=this.id,n=this.scheduler,r=n.actions;this.work=this.state=this.scheduler=null,this.pending=!1,Bc(r,this),null!=t&&(this.id=this.recycleAsyncId(n,t,null)),this.delay=null,e.prototype.unsubscribe.call(this)}},t}(el),rl={now:function(){return(rl.delegate||Date).now()},delegate:void 0},il=function(){function e(t,n){void 0===n&&(n=e.now),this.schedulerActionCtor=t,this.now=n}return e.prototype.schedule=function(e,t,n){return void 0===t&&(t=0),new this.schedulerActionCtor(this,e).schedule(n,t)},e.now=rl.now,e}(),al=new(function(e){function t(t,n){void 0===n&&(n=il.now);var r=e.call(this,t,n)||this;return r.actions=[],r._active=!1,r}return Nc(t,e),t.prototype.flush=function(e){var t=this.actions;if(this._active)t.push(e);else{var n;this._active=!0;do{if(n=e.execute(e.state,e.delay))break}while(e=t.shift());if(this._active=!1,n){for(;e=t.shift();)e.unsubscribe();throw n}}},t}(il))(nl);var ol=Fc((function(e){return function(t){void 0===t&&(t=null),e(this),this.message="Timeout has occurred",this.name="TimeoutError",this.info=t}}));function sl(e,t){var n,r=(n=e)instanceof Date&&!isNaN(n)?{first:e}:"number"===typeof e?{each:e}:e,i=r.first,a=r.each,o=r.with,s=void 0===o?cl:o,c=r.scheduler,u=void 0===c?null!==t&&void 0!==t?t:al:c,l=r.meta,d=void 0===l?null:l;if(null==i&&null==a)throw new TypeError("No timeout provided.");return Tc((function(e,t){var n,r,o=null,c=0,l=function(e){r=Pu(t,u,(function(){try{n.unsubscribe(),Eu(s({meta:d,lastValue:o,seen:c})).subscribe(t)}catch(e){t.error(e)}}),e)};n=e.subscribe(su(t,(function(e){null===r||void 0===r||r.unsubscribe(),c++,t.next(o=e),a>0&&l(a)}),void 0,void 0,(function(){(null===r||void 0===r?void 0:r.closed)||null===r||void 0===r||r.unsubscribe(),o=null}))),!c&&l(null!=i?"number"===typeof i?i:+i-u.now():a)}))}function cl(e){throw new ol(e)}function ul(e,t){return e===t}var ll=Object.defineProperty,dl=Object.defineProperties,fl=Object.getOwnPropertyDescriptors,pl=Object.getOwnPropertySymbols,hl=Object.prototype.hasOwnProperty,vl=Object.prototype.propertyIsEnumerable,ml=function(e,t,n){return t in e?ll(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n},gl=function(e,t){for(var n in t||(t={}))hl.call(t,n)&&ml(e,n,t[n]);if(pl){var r,i=u(pl(t));try{for(i.s();!(r=i.n()).done;){n=r.value;vl.call(t,n)&&ml(e,n,t[n])}}catch(a){i.e(a)}finally{i.f()}}return e},bl=function(e,t){return dl(e,fl(t))},yl=function(e,t,n){return new Promise((function(r,i){var a=function(e){try{s(n.next(e))}catch(Cs){i(Cs)}},o=function(e){try{s(n.throw(e))}catch(Cs){i(Cs)}},s=function(e){return e.done?r(e.value):Promise.resolve(e.value).then(a,o)};s((n=n.apply(e,t)).next())}))},kl="lk";function wl(e){return e instanceof hs}function Sl(){return"undefined"!==typeof document&&/Mobi/i.test(window.navigator.userAgent)}var Cl=[uo.ConnectionStateChanged,uo.RoomMetadataChanged,uo.ActiveSpeakersChanged,uo.ConnectionQualityChanged,uo.ParticipantConnected,uo.ParticipantDisconnected,uo.ParticipantPermissionsChanged,uo.ParticipantMetadataChanged,uo.TrackMuted,uo.TrackUnmuted,uo.TrackPublished,uo.TrackUnpublished,uo.TrackStreamStateChanged,uo.TrackSubscriptionFailed,uo.TrackSubscriptionPermissionChanged,uo.TrackSubscriptionStatusChanged],El=[].concat(Cl,[uo.LocalTrackPublished,uo.LocalTrackUnpublished]),xl=[lo.ConnectionQualityChanged,lo.IsSpeakingChanged,lo.ParticipantMetadataChanged,lo.ParticipantPermissionsChanged,lo.TrackMuted,lo.TrackUnmuted,lo.TrackPublished,lo.TrackUnpublished,lo.TrackStreamStateChanged,lo.TrackSubscriptionFailed,lo.TrackSubscriptionPermissionChanged,lo.TrackSubscriptionStatusChanged],Pl=([].concat(xl,[lo.LocalTrackPublished,lo.LocalTrackUnpublished]),xc.getLogger("lk-components-js"));Pl.setDefaultLevel("WARN");var Tl=Pl,Rl=[{columns:1,rows:1,name:"1x1",minTiles:1,maxTiles:1,minWidth:0,minHeight:0},{columns:1,rows:2,name:"1x2",minTiles:2,maxTiles:2,minWidth:0,minHeight:0},{columns:2,rows:1,name:"2x1",minTiles:2,maxTiles:2,minWidth:800,minHeight:0},{columns:2,rows:2,name:"2x2",minTiles:3,maxTiles:4,minWidth:560,minHeight:0},{columns:3,rows:3,name:"3x3",minTiles:5,maxTiles:9,minWidth:700,minHeight:0},{columns:4,rows:4,name:"4x4",minTiles:10,maxTiles:16,minWidth:960,minHeight:0},{columns:5,rows:5,name:"5x5",minTiles:17,maxTiles:25,minWidth:1100,minHeight:0}];function Nl(e,t,n,r){var i=0,a=e.find((function(e,n,r){i=n;var a=-1!==r.findIndex((function(t,r){var i=r>n,a=t.maxTiles===e.maxTiles;return i&&a}));return e.maxTiles>=t&&!a}));if(void 0===a){if(!(a=e[e.length-1]))throw new Error("No layout or fallback layout found.");Tl.warn("No layout found for: participantCount: ".concat(t,", width/height: ").concat(n,"/").concat(r," fallback to biggest available layout (").concat(a.name,")."))}if((n<a.minWidth||r<a.minHeight)&&i>0){var o=e[i-1];a=Nl(e.slice(0,i),o.maxTiles,n,r)}return a}var Ol=[],Il={showChat:!1};function _l(e){return"object"===typeof e}function Dl(e){return Array.isArray(e)&&e.filter(_l).length>0}function Al(e){return"undefined"!==typeof e&&(function(e){var t;if(!e)return!1;return e.hasOwnProperty("participant")&&e.hasOwnProperty("source")&&e.hasOwnProperty("track")&&"undefined"!==typeof(null==(t=e.publication)?void 0:t.track)}(e)||function(e){if(!e)return!1;return e.hasOwnProperty("participant")&&e.hasOwnProperty("source")&&e.hasOwnProperty("publication")&&"undefined"!==typeof e.publication}(e))}function Ll(e){return!!e&&(e.hasOwnProperty("participant")&&e.hasOwnProperty("source")&&"undefined"===typeof e.publication)}function Ml(e){return"string"===typeof e||"number"===typeof e?"".concat(e):Al(e)?"".concat(e.participant.identity,"_").concat(e.publication.source):"".concat(e.participant.identity,"_").concat(e.source)}function Ul(e,t){return t.audioLevel-e.audioLevel}function Fl(e,t){return e.isSpeaking===t.isSpeaking?0:e.isSpeaking?-1:1}function jl(e,t){var n,r,i,a;return void 0!==e.lastSpokeAt||void 0!==t.lastSpokeAt?(null!=(r=null==(n=t.lastSpokeAt)?void 0:n.getTime())?r:0)-(null!=(a=null==(i=e.lastSpokeAt)?void 0:i.getTime())?a:0):0}function Bl(e,t){var n,r,i,a;return(null!=(r=null==(n=e.joinedAt)?void 0:n.getTime())?r:0)-(null!=(a=null==(i=t.joinedAt)?void 0:i.getTime())?a:0)}function zl(e){var t=[],n=[],r=[],i=[];e.forEach((function(e){e.participant.isLocal&&e.source===Co.Source.Camera?t.push(e):e.source===Co.Source.ScreenShare?n.push(e):e.source===Co.Source.Camera?r.push(e):i.push(e)}));var a=function(e){var t=[],n=[];return e.forEach((function(e){e.participant.isLocal?t.push(e):n.push(e)})),t.sort((function(e,t){return Bl(e.participant,t.participant)})),n.sort((function(e,t){return Bl(e.participant,t.participant)})),[].concat(n,t)}(n),o=function(e){var t=[],n=[];return e.forEach((function(e){e.participant.isLocal?t.push(e):n.push(e)})),n.sort((function(e,t){return e.participant.isSpeaking&&t.participant.isSpeaking?Ul(e.participant,t.participant):e.participant.isSpeaking!==t.participant.isSpeaking?Fl(e.participant,t.participant):e.participant.lastSpokeAt!==t.participant.lastSpokeAt?jl(e.participant,t.participant):Al(e)!==Al(t)?function(e,t){return Al(e)?Al(t)?0:-1:Al(t)?1:0}(e,t):e.participant.isCameraEnabled!==t.participant.isCameraEnabled?function(e,t){var n=e.participant.isCameraEnabled;return n!==t.participant.isCameraEnabled?n?-1:1:0}(e,t):Bl(e.participant,t.participant)})),[].concat(t,n)}(r);return[].concat(t,c(a),c(o),i)}function $l(e,t){var n=Math.max(e.length,t.length);return new Array(n).fill([]).map((function(n,r){return[e[r],t[r]]}))}function Vl(e,t,n){return e.filter((function(e){return!t.map((function(e){return n(e)})).includes(n(e))}))}function Jl(e){return e.map((function(e){return"string"===typeof e||"number"===typeof e?"".concat(e):Ml(e)}))}function Wl(e,t){var n=t.findIndex((function(t){return Ml(t)===Ml(e)}));if(-1===n)throw new Error("Element not part of the array: ".concat(Ml(e)," not in ").concat(Jl(t)));return n}function ql(e,t){var n;return n=t,e.reduce((function(e,t,r){return r%n===0?[].concat(c(e),[[t]]):[].concat(c(e.slice(0,-1)),[[].concat(c(e.slice(-1)[0]),[t])])}),[])}function Hl(e,t,n){var r=c(e);if(e.length<t.length){var i=Vl(t,e,Ml);r=[].concat(c(r),c(i))}if($l(ql(e,n),ql(t,n)).forEach((function(e,t){var i,a,o=s(e,2),u=o[0],l=o[1];if(u&&l){var d=ql(r,n)[t],f={dropped:Vl(i=d,a=l,Ml),added:Vl(a,i,Ml)};(function(e){return 0!==e.added.length||0!==e.dropped.length})(f)&&(Tl.debug("Detected visual changes on page: ".concat(t,", current: ").concat(Jl(u),", next: ").concat(Jl(l)),{changes:f}),f.added.length===f.dropped.length&&$l(f.added,f.dropped).forEach((function(e){var t=s(e,2),n=t[0],i=t[1];if(!n||!i)throw new Error("For a swap action we need a addition and a removal one is missing: ".concat(n,", ").concat(i));r=function(e,t,n){var r=Wl(e,n),i=Wl(t,n);return n.splice(r,1,t),n.splice(i,1,e),n}(n,i,r)})),0===f.added.length&&f.dropped.length>0&&f.dropped.forEach((function(e){r=function(e,t){var n=Wl(e,t);return t.splice(n,1),t}(e,r)})),f.added.length>0&&0===f.dropped.length&&f.added.forEach((function(e){var t;t=e,r=[].concat(c(r),[t])})))}})),r.length>t.length){var a=Vl(e,t,Ml);r=r.filter((function(e){return!a.map(Ml).includes(Ml(e))}))}return r}function Gl(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];return new vu((function(t){var r=function(){t.next(e)};n.forEach((function(t){e.on(t,r)}));return function(){n.forEach((function(t){e.off(t,r)}))}})).pipe(Uu(e))}function Ql(e,t){var n=new vu((function(n){var r=function(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];n.next(t)};e.on(t,r);return function(){e.off(t,r)}}));return n}function Zl(e){var t,n,r=this,a=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],o=function(){return yl(r,null,i().mark((function t(){var n;return i().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,ms.getLocalDevices(e,a);case 2:n=t.sent,s.next(n);case 4:case"end":return t.stop()}}),t)})))},s=new ju,c=s.pipe((n=function(){var e;null==(e=null==navigator?void 0:navigator.mediaDevices)||e.removeEventListener("devicechange",o)},Tc((function(e,t){try{e.subscribe(t)}finally{t.add(n)}}))));if("undefined"!==typeof window){if(!window.isSecureContext)throw new Error("Accessing media devices is available only in secure contexts (HTTPS and localhost), in some or all supporting browsers. See: https://developer.mozilla.org/en-US/docs/Web/API/Navigator/mediaDevices");null==(t=null==navigator?void 0:navigator.mediaDevices)||t.addEventListener("devicechange",o),o()}return c}function Kl(e){return"".concat(kl,"-").concat(e)}function Yl(e){if(Al(e))return e.publication;var t=e.source,n=e.name,r=e.participant;if(t&&n)return r.getTracks().find((function(e){return e.source===t&&e.trackName===n}));if(n)return r.getTrackByName(n);if(t)return r.getTrack(t);throw new Error("At least one of source and name needs to be defined")}function Xl(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];return new vu((function(t){var r=function(){t.next(e)};n.forEach((function(t){e.on(t,r)}));return function(){n.forEach((function(t){e.off(t,r)}))}})).pipe(Uu(e))}function ed(e){var t=Xl(e,lo.TrackMuted,lo.TrackUnmuted,lo.ParticipantPermissionsChanged,lo.TrackPublished,lo.TrackUnpublished,lo.TrackSubscribed,lo.TrackUnsubscribed,lo.LocalTrackPublished,lo.LocalTrackUnpublished).pipe(uu((function(e){var t=e.isMicrophoneEnabled,n=e.isCameraEnabled,r=e.isScreenShareEnabled,i=e.getTrack(Co.Source.Microphone);return{isCameraEnabled:n,isMicrophoneEnabled:t,isScreenShareEnabled:r,cameraTrack:e.getTrack(Co.Source.Camera),microphoneTrack:i,participant:e}})));return t}function td(e,t){var n=new vu((function(n){var r=function(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];n.next(t)};e.on(t,r);return function(){e.off(t,r)}}));return n}function nd(e,t){var n,r;return Xl(e,lo.TrackMuted,lo.TrackUnmuted,lo.TrackSubscribed,lo.TrackUnsubscribed,lo.LocalTrackPublished,lo.LocalTrackUnpublished).pipe(uu((function(e){var n,r=e.getTrack(t);return null==(n=null==r?void 0:r.isMuted)||n})),Uu(null==(r=null==(n=e.getTrack(t))?void 0:n.isMuted)||r))}function rd(e,t){var n=this,r=new zu(void 0),a=t?ed(t.localParticipant).pipe(uu((function(t){var n,r,i,a;switch(e){case"videoinput":a=null==(n=t.cameraTrack)?void 0:n.track;break;case"audioinput":a=null==(r=t.microphoneTrack)?void 0:r.track;break;default:a=void 0}return null==(i=null==a?void 0:a.mediaStreamTrack.getSettings())?void 0:i.deviceId})),function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];return Vu.apply(void 0,Ac([],Dc(e)))}(r)):r.asObservable();return{className:Kl("media-device-select"),activeDeviceObservable:a,setActiveMediaDevice:function(a){return yl(n,null,i().mark((function n(){var o,s,c,u,l;return i().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if(!t){n.next=19;break}return Tl.debug('Switching active device of kind "'.concat(e,'" with id ').concat(a,".")),n.next=4,t.switchActiveDevice(e,a);case 4:if(l=a,"videoinput"!==e){n.next=11;break}return n.next=8,null==(s=null==(o=t.localParticipant.getTrack(Co.Source.Camera))?void 0:o.track)?void 0:s.getDeviceId();case 8:l=n.sent,n.next=15;break;case 11:if("audioinput"!==e){n.next=15;break}return n.next=14,null==(u=null==(c=t.localParticipant.getTrack(Co.Source.Microphone))?void 0:c.track)?void 0:u.getDeviceId();case 14:l=n.sent;case 15:l!==a&&"default"!==a&&Tl.warn("Failed to select the desired device. Desired: ".concat(a,". Actual: ").concat(l)),r.next("default"===a?a:l),n.next=21;break;case 19:Tl.debug("Skip the device switch because the room object is not available. "),r.next(a);case 21:case"end":return n.stop()}}),n)})))}}}function id(e){var t=Kl("connection-quality"),n=function(e){return td(e,lo.ConnectionQualityChanged).pipe(uu((function(e){return s(e,1)[0]})),Uu(e.connectionQuality))}(e);return{className:t,connectionQualityObserver:n}}function ad(e){var t=function(e){return Xl(e,lo.ParticipantMetadataChanged).pipe(uu((function(e){return{name:e.name,identity:e.identity,metadata:e.metadata}})),Uu({name:e.name,identity:e.identity,metadata:e.metadata}))}(e);return{className:"lk-participant-name",infoObserver:t}}var od={CHAT:"lk-chat-topic"};function sd(e,t,n){return yl(this,arguments,(function(e,t,n){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{};return i().mark((function a(){var o,s;return i().wrap((function(i){for(;;)switch(i.prev=i.next){case 0:return o=r.kind,s=r.destination,i.next=3,e.publishData(t,null!=o?o:Tt.RELIABLE,{destination:s,topic:n});case 3:case"end":return i.stop()}}),a)}))()}))}function cd(e,t,n){var r,a,o,c=this,u=function(e){return Ql(e,uo.DataReceived)}(e).pipe((r=function(e){var n=s(e,4)[3];return void 0===n||n===t},Tc((function(e,t){var n=0;e.subscribe(su(t,(function(e){return r.call(a,e,n++)&&t.next(e)})))}))),uu((function(e){var t=s(e,4),r=t[0],i=t[1],a={payload:r,topic:t[3],from:i};return null==n||n(a),a})));return{messageObservable:u,isSendingObservable:new vu((function(e){o=e})),send:function(n){for(var r=arguments.length,a=new Array(r>1?r-1:0),s=1;s<r;s++)a[s-1]=arguments[s];return yl(c,[n].concat(a),(function(n){var r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return i().mark((function a(){return i().wrap((function(i){for(;;)switch(i.prev=i.next){case 0:return o.next(!0),i.prev=1,i.next=4,sd(e.localParticipant,n,t,r);case 4:return i.prev=4,o.next(!1),i.finish(4);case 7:case"end":return i.stop()}}),a,null,[[1,,4,7]])}))()}))}}}var ud=new TextEncoder,ld=new TextDecoder;function dd(e){return Gl(e,uo.AudioPlaybackStatusChanged).pipe(uu((function(e){return{canPlayAudio:e.canPlaybackAudio}})))}function fd(){var e=this;return{className:Kl("start-audio-button"),roomAudioPlaybackAllowedObservable:dd,handleStartAudioPlayback:function(t){return yl(e,null,i().mark((function e(){return i().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return Tl.info("Start Audio for room: ",t),e.next=3,t.startAudio();case 3:case"end":return e.stop()}}),e)})))}}}function pd(e,t){var n=!(arguments.length>2&&void 0!==arguments[2])||arguments[2],r=[e.localParticipant].concat(c(Array.from(e.participants.values()))),i=[];return r.forEach((function(e){t.forEach((function(t){var r=Array.from(e.tracks.values()).filter((function(e){return e.source===t&&(!n||e.track)})).map((function(t){return{participant:e,publication:t,track:t.track,source:t.source}}));i.push.apply(i,c(r))}))})),{trackReferences:i,participants:r}}function hd(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1e3;if(null===e)return qu(!1);var n,r,i=Yu(e,"mousemove").pipe(uu((function(){return!0}))),a=i.pipe(sl({each:t,with:function(){return Mu(qu(!1),a.pipe((e=i,Tc((function(t,n){var r=!1,i=su(n,(function(){null===i||void 0===i||i.unsubscribe(),r=!0}),Gc);Eu(e).subscribe(i),t.subscribe(su(n,(function(e){return r&&n.next(e)})))})))));var e}}),(void 0===r&&(r=pu),n=null!==n&&void 0!==n?n:ul,Tc((function(e,t){var i,a=!0;e.subscribe(su(t,(function(e){var o=r(e);!a&&n(i,o)||(a=!1,i=o,t.next(e))})))}))));return a}var vd=Tl,md=function(t){var n=e.useRef(t);return e.useEffect((function(){n.current=t})),n},gd=Object.defineProperty,bd=Object.defineProperties,yd=Object.getOwnPropertyDescriptors,kd=Object.getOwnPropertySymbols,wd=Object.prototype.hasOwnProperty,Sd=Object.prototype.propertyIsEnumerable,Cd=function(e,t,n){return t in e?gd(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n},Ed=function(e,t){for(var n in t||(t={}))wd.call(t,n)&&Cd(e,n,t[n]);if(kd){var r,i=u(kd(t));try{for(i.s();!(r=i.n()).done;){n=r.value;Sd.call(t,n)&&Cd(e,n,t[n])}}catch(a){i.e(a)}finally{i.f()}}return e},xd=function(e,t){return bd(e,yd(t))},Pd=function(e,t){var n={};for(var r in e)wd.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(null!=e&&kd){var i,a=u(kd(e));try{for(a.s();!(i=a.n()).done;){r=i.value;t.indexOf(r)<0&&Sd.call(e,r)&&(n[r]=e[r])}}catch(o){a.e(o)}finally{a.f()}}return n},Td=function(e,t,n){return new Promise((function(r,i){var a=function(e){try{s(n.next(e))}catch(Cs){i(Cs)}},o=function(e){try{s(n.throw(e))}catch(Cs){i(Cs)}},s=function(e){return e.done?r(e.value):Promise.resolve(e.value).then(a,o)};s((n=n.apply(e,t)).next())}))};function Rd(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return function(){for(var e=0,n=t;e<n.length;e++){var r=n[e];"function"===typeof r&&r.apply(void 0,arguments)}}}function Nd(){for(var e=Ed({},arguments.length<=0?void 0:arguments[0]),t=1;t<arguments.length;t++){var n=t<0||arguments.length<=t?void 0:arguments[t];for(var r in n){var i=e[r],a=n[r];"function"===typeof i&&"function"===typeof a&&"o"===r[0]&&"n"===r[1]&&r.charCodeAt(2)>=65&&r.charCodeAt(2)<=90?e[r]=Rd(i,a):e[r]="className"!==r&&"UNSAFE_className"!==r||"string"!==typeof i||"string"!==typeof a?void 0!==a?a:i:d(i,a)}}return e}function Od(e){return void 0!==e}function Id(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return Nd.apply(void 0,c(t.filter(Od)))}var _d=Id({className:"test","data-lk-participant-name":"my_name"});function Dd(t,n,r){return e.Children.map(t,(function(i){return e.isValidElement(i)&&e.Children.only(t)?e.cloneElement(i,xd(Ed({},n),{key:r})):i}))}function Ad(e,t){return"show_chat"===t.msg?xd(Ed({},e),{showChat:!0}):"hide_chat"===t.msg?xd(Ed({},e),{showChat:!1}):"toggle_chat"===t.msg?xd(Ed({},e),{showChat:!e.showChat}):Ed({},e)}function Ld(e,t){return"set_pin"===t.msg?[t.trackReference]:"clear_pin"===t.msg?[]:Ed({},e)}console.log({merged:_d});var Md=e.createContext(void 0);function Ud(){var t=e.useContext(Md);if(!t)throw Error("Tried to access LayoutContext context outside a LayoutContextProvider provider.");return t}function Fd(){return e.useContext(Md)}var jd=e.createContext(void 0);function Bd(){return e.useContext(jd)}var zd=e.createContext(void 0);function $d(){return e.useContext(zd)}function Vd(e){var t,n=$d(),r=Bd(),i=null!=(t=null!=e?e:n)?t:null==r?void 0:r.participant;if(!i)throw new Error("No participant provided, make sure you are inside a participant context or pass the participant explicitly");return i}var Jd=e.createContext(void 0);function Wd(){var t=e.useContext(Jd);if(!t)throw Error("tried to access room context outside of livekit room component");return t}function qd(){return e.useContext(Jd)}function Hd(e){var t=qd(),n=null!=e?e:t;if(!n)throw new Error("No room provided, make sure you are inside a Room context or pass the room explicitly");return n}function Gd(t,n){var r=s(e.useState(n),2),i=r[0],a=r[1];return e.useEffect((function(){if("undefined"!==typeof window&&t){var e=t.subscribe(a);return function(){return e.unsubscribe()}}}),[t]),i}function Qd(t){var n=Hd(t),r=e.useMemo((function(){return function(e){return Ql(e,uo.ConnectionStateChanged).pipe(uu((function(e){return s(e,1)[0]})),Uu(e.state))}(n)}),[n]);return Gd(r,n.state)}function Zd(t){var n=t.props,r=Ud().widget.dispatch,i=e.useMemo((function(){return{className:[Kl("button"),Kl("chat-toggle")].join(" ")}}),[]).className;return{mergedProps:e.useMemo((function(){return Id(n,{className:i,onClick:function(){r&&r({msg:"toggle_chat"})}})}),[n,i,r])}}function Kd(t){var n=Zd({props:t}).mergedProps;return e.createElement("button",Ed({},n),t.children)}function Yd(t){var n=Wd(),r=Qd(n),i=e.useMemo((function(){var e=function(e){return{className:Kl("disconnect-button"),disconnect:function(t){e.disconnect(t)}}}(n),i=e.className,a=e.disconnect;return Id(t,{className:i,onClick:function(){var e;return a(null==(e=t.stopTracks)||e)},disabled:r===ps.Disconnected})}),[n,t,r]);return{buttonProps:i}}function Xd(t){var n=Yd(t).buttonProps;return e.createElement("button",Ed({},n),t.children)}var ef=function(t){return e.createElement("svg",Ed({xmlns:"http://www.w3.org/2000/svg",width:16,height:16,fill:"currentColor"},t),e.createElement("path",{d:"M1.354.646a.5.5 0 1 0-.708.708l14 14a.5.5 0 0 0 .708-.708L11 10.293V4.5A1.5 1.5 0 0 0 9.5 3H3.707zM0 4.5a1.5 1.5 0 0 1 .943-1.393l9.532 9.533c-.262.224-.603.36-.975.36h-8A1.5 1.5 0 0 1 0 11.5z"}),e.createElement("path",{d:"m15.2 3.6-2.8 2.1a1 1 0 0 0-.4.8v3a1 1 0 0 0 .4.8l2.8 2.1a.5.5 0 0 0 .8-.4V4a.5.5 0 0 0-.8-.4z"}))},tf=function(t){return e.createElement("svg",Ed({xmlns:"http://www.w3.org/2000/svg",width:16,height:16,fill:"currentColor"},t),e.createElement("path",{d:"M0 4.5A1.5 1.5 0 0 1 1.5 3h8A1.5 1.5 0 0 1 11 4.5v7A1.5 1.5 0 0 1 9.5 13h-8A1.5 1.5 0 0 1 0 11.5zM15.2 3.6l-2.8 2.1a1 1 0 0 0-.4.8v3a1 1 0 0 0 .4.8l2.8 2.1a.5.5 0 0 0 .8-.4V4a.5.5 0 0 0-.8-.4z"}))},nf=function(t){return e.createElement("svg",Ed({xmlns:"http://www.w3.org/2000/svg",width:16,height:18,fill:"none"},t),e.createElement("path",{fill:"currentColor",fillRule:"evenodd",d:"M0 2.75A2.75 2.75 0 0 1 2.75 0h10.5A2.75 2.75 0 0 1 16 2.75v13.594a.75.75 0 0 1-1.234.572l-3.691-3.12a1.25 1.25 0 0 0-.807-.296H2.75A2.75 2.75 0 0 1 0 10.75v-8ZM2.75 1.5c-.69 0-1.25.56-1.25 1.25v8c0 .69.56 1.25 1.25 1.25h7.518c.65 0 1.279.23 1.775.65l2.457 2.077V2.75c0-.69-.56-1.25-1.25-1.25H2.75Z",clipRule:"evenodd"}),e.createElement("path",{fill:"currentColor",fillRule:"evenodd",d:"M3 4.5a.5.5 0 0 1 .5-.5h9a.5.5 0 0 1 0 1h-9a.5.5 0 0 1-.5-.5Zm0 2a.5.5 0 0 1 .5-.5h9a.5.5 0 0 1 0 1h-9a.5.5 0 0 1-.5-.5Zm0 2a.5.5 0 0 1 .5-.5h5a.5.5 0 0 1 0 1h-5a.5.5 0 0 1-.5-.5Z",clipRule:"evenodd"}))},rf=function(t){return e.createElement("svg",Ed({xmlns:"http://www.w3.org/2000/svg",width:16,height:16,fill:"none"},t),e.createElement("path",{fill:"currentcolor",fillRule:"evenodd",d:"M5.293 2.293a1 1 0 0 1 1.414 0l4.823 4.823a1.25 1.25 0 0 1 0 1.768l-4.823 4.823a1 1 0 0 1-1.414-1.414L9.586 8 5.293 3.707a1 1 0 0 1 0-1.414z",clipRule:"evenodd"}))},af=function(t){return e.createElement("svg",Ed({xmlns:"http://www.w3.org/2000/svg",width:16,height:16,fill:"none"},t),e.createElement("g",{stroke:"currentColor",strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:1.5},e.createElement("path",{d:"M10 1.75h4.25m0 0V6m0-4.25L9 7M6 14.25H1.75m0 0V10m0 4.25L7 9"})))},of=function(t){return e.createElement("svg",Ed({xmlns:"http://www.w3.org/2000/svg",width:16,height:16,fill:"none"},t),e.createElement("path",{fill:"currentColor",fillRule:"evenodd",d:"M2 2.75A2.75 2.75 0 0 1 4.75 0h6.5A2.75 2.75 0 0 1 14 2.75v10.5A2.75 2.75 0 0 1 11.25 16h-6.5A2.75 2.75 0 0 1 2 13.25v-.5a.75.75 0 0 1 1.5 0v.5c0 .69.56 1.25 1.25 1.25h6.5c.69 0 1.25-.56 1.25-1.25V2.75c0-.69-.56-1.25-1.25-1.25h-6.5c-.69 0-1.25.56-1.25 1.25v.5a.75.75 0 0 1-1.5 0v-.5Z",clipRule:"evenodd"}),e.createElement("path",{fill:"currentColor",fillRule:"evenodd",d:"M8.78 7.47a.75.75 0 0 1 0 1.06l-2.25 2.25a.75.75 0 1 1-1.06-1.06l.97-.97H1.75a.75.75 0 0 1 0-1.5h4.69l-.97-.97a.75.75 0 0 1 1.06-1.06l2.25 2.25Z",clipRule:"evenodd"}))},sf=function(t){return e.createElement("svg",Ed({xmlns:"http://www.w3.org/2000/svg",width:16,height:16,fill:"currentColor"},t),e.createElement("path",{d:"M12.227 11.52a5.477 5.477 0 0 0 1.246-2.97.5.5 0 0 0-.995-.1 4.478 4.478 0 0 1-.962 2.359l-1.07-1.07C10.794 9.247 11 8.647 11 8V3a3 3 0 0 0-6 0v1.293L1.354.646a.5.5 0 1 0-.708.708l14 14a.5.5 0 0 0 .708-.708zM8 12.5c.683 0 1.33-.152 1.911-.425l.743.743c-.649.359-1.378.59-2.154.66V15h2a.5.5 0 0 1 0 1h-5a.5.5 0 0 1 0-1h2v-1.522a5.502 5.502 0 0 1-4.973-4.929.5.5 0 0 1 .995-.098A4.5 4.5 0 0 0 8 12.5z"}),e.createElement("path",{d:"M8.743 10.907 5 7.164V8a3 3 0 0 0 3.743 2.907z"}))},cf=function(t){return e.createElement("svg",Ed({xmlns:"http://www.w3.org/2000/svg",width:16,height:16,fill:"currentColor"},t),e.createElement("path",{fillRule:"evenodd",d:"M2.975 8.002a.5.5 0 0 1 .547.449 4.5 4.5 0 0 0 8.956 0 .5.5 0 1 1 .995.098A5.502 5.502 0 0 1 8.5 13.478V15h2a.5.5 0 0 1 0 1h-5a.5.5 0 0 1 0-1h2v-1.522a5.502 5.502 0 0 1-4.973-4.929.5.5 0 0 1 .448-.547z",clipRule:"evenodd"}),e.createElement("path",{d:"M5 3a3 3 0 1 1 6 0v5a3 3 0 0 1-6 0z"}))},uf=function(t){return e.createElement("svg",Ed({xmlns:"http://www.w3.org/2000/svg",width:16,height:16,fill:"currentcolor"},t),e.createElement("path",{d:"M0 11.5a.5.5 0 0 1 .5-.5h3a.5.5 0 0 1 .5.5v4a.5.5 0 0 1-.5.5h-3a.5.5 0 0 1-.5-.5zm6-5a.5.5 0 0 1 .5-.5h3a.5.5 0 0 1 .5.5v9a.5.5 0 0 1-.5.5h-3a.5.5 0 0 1-.5-.5zm6-6a.5.5 0 0 1 .5-.5h3a.5.5 0 0 1 .5.5v15a.5.5 0 0 1-.5.5h-3a.5.5 0 0 1-.5-.5z"}),e.createElement("path",{d:"M0 11.5a.5.5 0 0 1 .5-.5h3a.5.5 0 0 1 .5.5v4a.5.5 0 0 1-.5.5h-3a.5.5 0 0 1-.5-.5zm6-5a.5.5 0 0 1 .5-.5h3a.5.5 0 0 1 .5.5v9a.5.5 0 0 1-.5.5h-3a.5.5 0 0 1-.5-.5zm6-6a.5.5 0 0 1 .5-.5h3a.5.5 0 0 1 .5.5v15a.5.5 0 0 1-.5.5h-3a.5.5 0 0 1-.5-.5z"}))},lf=function(t){return e.createElement("svg",Ed({xmlns:"http://www.w3.org/2000/svg",width:16,height:16,fill:"currentcolor"},t),e.createElement("path",{d:"M0 11.5a.5.5 0 0 1 .5-.5h3a.5.5 0 0 1 .5.5v4a.5.5 0 0 1-.5.5h-3a.5.5 0 0 1-.5-.5zm6-5a.5.5 0 0 1 .5-.5h3a.5.5 0 0 1 .5.5v9a.5.5 0 0 1-.5.5h-3a.5.5 0 0 1-.5-.5z"}),e.createElement("path",{d:"M0 11.5a.5.5 0 0 1 .5-.5h3a.5.5 0 0 1 .5.5v4a.5.5 0 0 1-.5.5h-3a.5.5 0 0 1-.5-.5zm6-5a.5.5 0 0 1 .5-.5h3a.5.5 0 0 1 .5.5v9a.5.5 0 0 1-.5.5h-3a.5.5 0 0 1-.5-.5z"}),e.createElement("g",{opacity:.25},e.createElement("path",{d:"M12 .5a.5.5 0 0 1 .5-.5h3a.5.5 0 0 1 .5.5v15a.5.5 0 0 1-.5.5h-3a.5.5 0 0 1-.5-.5z"}),e.createElement("path",{d:"M12 .5a.5.5 0 0 1 .5-.5h3a.5.5 0 0 1 .5.5v15a.5.5 0 0 1-.5.5h-3a.5.5 0 0 1-.5-.5z"})))},df=function(t){return e.createElement("svg",Ed({xmlns:"http://www.w3.org/2000/svg",width:16,height:16,fill:"currentcolor"},t),e.createElement("path",{d:"M0 11.5a.5.5 0 0 1 .5-.5h3a.5.5 0 0 1 .5.5v4a.5.5 0 0 1-.5.5h-3a.5.5 0 0 1-.5-.5z"}),e.createElement("path",{d:"M0 11.5a.5.5 0 0 1 .5-.5h3a.5.5 0 0 1 .5.5v4a.5.5 0 0 1-.5.5h-3a.5.5 0 0 1-.5-.5z"}),e.createElement("g",{opacity:.25},e.createElement("path",{d:"M6 6.5a.5.5 0 0 1 .5-.5h3a.5.5 0 0 1 .5.5v9a.5.5 0 0 1-.5.5h-3a.5.5 0 0 1-.5-.5z"}),e.createElement("path",{d:"M6 6.5a.5.5 0 0 1 .5-.5h3a.5.5 0 0 1 .5.5v9a.5.5 0 0 1-.5.5h-3a.5.5 0 0 1-.5-.5zm6-6a.5.5 0 0 1 .5-.5h3a.5.5 0 0 1 .5.5v15a.5.5 0 0 1-.5.5h-3a.5.5 0 0 1-.5-.5z"}),e.createElement("path",{d:"M12 .5a.5.5 0 0 1 .5-.5h3a.5.5 0 0 1 .5.5v15a.5.5 0 0 1-.5.5h-3a.5.5 0 0 1-.5-.5z"})))},ff=function(t){return e.createElement("svg",Ed({xmlns:"http://www.w3.org/2000/svg",width:16,height:16,fill:"currentColor"},t),e.createElement("g",{opacity:.25},e.createElement("path",{d:"M0 11.5a.5.5 0 0 1 .5-.5h3a.5.5 0 0 1 .5.5v4a.5.5 0 0 1-.5.5h-3a.5.5 0 0 1-.5-.5v-4Zm6-5a.5.5 0 0 1 .5-.5h3a.5.5 0 0 1 .5.5v9a.5.5 0 0 1-.5.5h-3a.5.5 0 0 1-.5-.5v-9Zm6-6a.5.5 0 0 1 .5-.5h3a.5.5 0 0 1 .5.5v15a.5.5 0 0 1-.5.5h-3a.5.5 0 0 1-.5-.5V.5Z"}),e.createElement("path",{d:"M0 11.5a.5.5 0 0 1 .5-.5h3a.5.5 0 0 1 .5.5v4a.5.5 0 0 1-.5.5h-3a.5.5 0 0 1-.5-.5v-4Zm6-5a.5.5 0 0 1 .5-.5h3a.5.5 0 0 1 .5.5v9a.5.5 0 0 1-.5.5h-3a.5.5 0 0 1-.5-.5v-9Zm6-6a.5.5 0 0 1 .5-.5h3a.5.5 0 0 1 .5.5v15a.5.5 0 0 1-.5.5h-3a.5.5 0 0 1-.5-.5V.5Z"})))},pf=function(t){return e.createElement("svg",Ed({xmlns:"http://www.w3.org/2000/svg",width:20,height:16,fill:"none"},t),e.createElement("path",{fill:"currentColor",fillRule:"evenodd",d:"M0 2.75A2.75 2.75 0 0 1 2.75 0h14.5A2.75 2.75 0 0 1 20 2.75v10.5A2.75 2.75 0 0 1 17.25 16H2.75A2.75 2.75 0 0 1 0 13.25V2.75ZM2.75 1.5c-.69 0-1.25.56-1.25 1.25v10.5c0 .69.56 1.25 1.25 1.25h14.5c.69 0 1.25-.56 1.25-1.25V2.75c0-.69-.56-1.25-1.25-1.25H2.75Z",clipRule:"evenodd"}),e.createElement("path",{fill:"currentColor",fillRule:"evenodd",d:"M9.47 4.22a.75.75 0 0 1 1.06 0l2.25 2.25a.75.75 0 0 1-1.06 1.06l-.97-.97v4.69a.75.75 0 0 1-1.5 0V6.56l-.97.97a.75.75 0 0 1-1.06-1.06l2.25-2.25Z",clipRule:"evenodd"}))},hf=function(t){return e.createElement("svg",Ed({xmlns:"http://www.w3.org/2000/svg",width:20,height:16,fill:"none"},t),e.createElement("g",{fill:"currentColor"},e.createElement("path",{d:"M7.28 4.22a.75.75 0 0 0-1.06 1.06L8.94 8l-2.72 2.72a.75.75 0 1 0 1.06 1.06L10 9.06l2.72 2.72a.75.75 0 1 0 1.06-1.06L11.06 8l2.72-2.72a.75.75 0 0 0-1.06-1.06L10 6.94z"}),e.createElement("path",{fillRule:"evenodd",d:"M2.75 0A2.75 2.75 0 0 0 0 2.75v10.5A2.75 2.75 0 0 0 2.75 16h14.5A2.75 2.75 0 0 0 20 13.25V2.75A2.75 2.75 0 0 0 17.25 0zM1.5 2.75c0-.69.56-1.25 1.25-1.25h14.5c.69 0 1.25.56 1.25 1.25v10.5c0 .69-.56 1.25-1.25 1.25H2.75c-.69 0-1.25-.56-1.25-1.25z",clipRule:"evenodd"})))},vf=function(t){return e.createElement("svg",Ed({xmlns:"http://www.w3.org/2000/svg",width:16,height:16,fill:"none"},t),e.createElement("path",{fill:"currentColor",fillRule:"evenodd",d:"M8 0a.75.75 0 0 1 .75.75v2.5a.75.75 0 0 1-1.5 0V.75A.75.75 0 0 1 8 0Z",clipRule:"evenodd"}),e.createElement("path",{fill:"currentColor",fillRule:"evenodd",d:"M8 12a.75.75 0 0 1 .75.75v2.5a.75.75 0 0 1-1.5 0v-2.5A.75.75 0 0 1 8 12Z",clipRule:"evenodd",opacity:.7}),e.createElement("path",{fill:"currentColor",fillRule:"evenodd",d:"M12 1.072a.75.75 0 0 1 .274 1.024l-1.25 2.165a.75.75 0 0 1-1.299-.75l1.25-2.165A.75.75 0 0 1 12 1.072Z",clipRule:"evenodd"}),e.createElement("path",{fill:"currentColor",fillRule:"evenodd",d:"M6 11.464a.75.75 0 0 1 .274 1.025l-1.25 2.165a.75.75 0 0 1-1.299-.75l1.25-2.165A.75.75 0 0 1 6 11.464Z",clipRule:"evenodd",opacity:.6}),e.createElement("path",{fill:"currentColor",fillRule:"evenodd",d:"M14.928 4a.75.75 0 0 1-.274 1.025l-2.165 1.25a.75.75 0 1 1-.75-1.3l2.165-1.25A.75.75 0 0 1 14.928 4Z",clipRule:"evenodd"}),e.createElement("path",{fill:"currentColor",fillRule:"evenodd",d:"M4.536 10a.75.75 0 0 1-.275 1.024l-2.165 1.25a.75.75 0 0 1-.75-1.298l2.165-1.25A.75.75 0 0 1 4.536 10Z",clipRule:"evenodd",opacity:.5}),e.createElement("path",{fill:"currentColor",fillRule:"evenodd",d:"M16 8a.75.75 0 0 1-.75.75h-2.5a.75.75 0 0 1 0-1.5h2.5A.75.75 0 0 1 16 8Z",clipRule:"evenodd"}),e.createElement("path",{fill:"currentColor",fillRule:"evenodd",d:"M4 8a.75.75 0 0 1-.75.75H.75a.75.75 0 0 1 0-1.5h2.5A.75.75 0 0 1 4 8Z",clipRule:"evenodd",opacity:.4}),e.createElement("path",{fill:"currentColor",fillRule:"evenodd",d:"M14.928 12a.75.75 0 0 1-1.024.274l-2.165-1.25a.75.75 0 0 1 .75-1.299l2.165 1.25A.75.75 0 0 1 14.928 12Z",clipRule:"evenodd",opacity:.9}),e.createElement("path",{fill:"currentColor",fillRule:"evenodd",d:"M4.536 6a.75.75 0 0 1-1.025.275l-2.165-1.25a.75.75 0 1 1 .75-1.3l2.165 1.25A.75.75 0 0 1 4.536 6Z",clipRule:"evenodd",opacity:.3}),e.createElement("path",{fill:"currentColor",fillRule:"evenodd",d:"M12 14.928a.75.75 0 0 1-1.024-.274l-1.25-2.165a.75.75 0 0 1 1.298-.75l1.25 2.165A.75.75 0 0 1 12 14.928Z",clipRule:"evenodd",opacity:.8}),e.createElement("path",{fill:"currentColor",fillRule:"evenodd",d:"M6 4.536a.75.75 0 0 1-1.024-.275l-1.25-2.165a.75.75 0 1 1 1.299-.75l1.25 2.165A.75.75 0 0 1 6 4.536Z",clipRule:"evenodd",opacity:.2}))},mf=function(t){return e.createElement("svg",Ed({xmlns:"http://www.w3.org/2000/svg",width:16,height:16,fill:"none"},t),e.createElement("g",{stroke:"currentColor",strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:1.5},e.createElement("path",{d:"M13.25 7H9m0 0V2.75M9 7l5.25-5.25M2.75 9H7m0 0v4.25M7 9l-5.25 5.25"})))};function gf(t){var n=t.trackSource,r=t.participant,i=t.props,a=Vd(r),o=Fd(),s=e.useMemo((function(){return{className:[Kl("button"),Kl("focus-toggle-button")].join(" ")}}),[]).className,c=e.useMemo((function(){var e,t,r=a.getTrack(n);return!(!(null==o?void 0:o.pin.state)||!r)&&(e={participant:a,source:n,publication:r},"undefined"!==typeof(t=o.pin.state)&&(Al(e)?t.some((function(t){return t.participant.identity===e.participant.identity&&Al(t)&&t.publication.trackSid===e.publication.trackSid})):!!Ll(e)&&t.some((function(t){return t.participant.identity===e.participant.identity&&Ll(t)&&t.source===e.source}))))}),[a,n,o]);return{mergedProps:e.useMemo((function(){return Id(i,{className:s,onClick:function(e){var t;null==(t=i.onClick)||t.call(i,e);var r=a.getTrack(n);(null==o?void 0:o.pin.dispatch)&&r&&(c?o.pin.dispatch({msg:"clear_pin"}):o.pin.dispatch({msg:"set_pin",trackReference:{participant:a,publication:r,source:r.source}}))}})}),[i,s,a,n,c,o]),inFocus:c}}function bf(t){var n=t,r=n.trackSource,i=n.participant,a=Pd(n,["trackSource","participant"]),o=gf({trackSource:r,participant:i,props:a}),s=o.mergedProps,c=o.inFocus;return e.createElement(Md.Consumer,null,(function(t){return void 0!==t&&e.createElement("button",Ed({},s),a.children?a.children:c?e.createElement(mf,null):e.createElement(af,null))}))}function yf(t){var n=this,r=t,a=r.kind,o=r.initialSelection,c=r.onActiveDeviceChange,u=r.onDeviceListChange,l=Pd(r,["kind","initialSelection","onActiveDeviceChange","onDeviceListChange"]),d=function(t){var n=t.kind,r=t.room,i=qd(),a=Gd(e.useMemo((function(){return Zl(n)}),[n]),[]),o=s(e.useState(""),2),c=o[0],u=o[1],l=e.useMemo((function(){return rd(n,null!=r?r:i)}),[n,r,i]),d=l.className,f=l.activeDeviceObservable,p=l.setActiveMediaDevice;return e.useEffect((function(){var e=f.subscribe((function(e){e&&u(e)}));return function(){null==e||e.unsubscribe()}}),[f]),{devices:a,className:d,activeDeviceId:c,setActiveMediaDevice:p}}({kind:a,room:qd()}),f=d.devices,p=d.activeDeviceId,h=d.setActiveMediaDevice,v=d.className;e.useEffect((function(){o&&h(o)})),e.useEffect((function(){"function"===typeof u&&u(f)}),[u,f]);var m=e.useMemo((function(){return Id(l,{className:v},{className:"lk-list"})}),[v,l]);return e.createElement("ul",Ed({},m),f.map((function(t){return e.createElement("li",{key:t.deviceId,id:t.deviceId,"data-lk-active":t.deviceId===p,"aria-selected":t.deviceId===p,role:"option"},e.createElement("button",{className:"lk-button",onClick:function(){return e=t.deviceId,Td(n,null,i().mark((function t(){return i().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:h(e),null==c||c(e);case 2:case"end":return t.stop()}}),t)})));var e}},t.label))})))}function kf(t){var n=t,r=n.label,i=void 0===r?"Allow Audio":r,a=Pd(n,["label"]),o=function(t){var n=t.room,r=t.props,i=e.useMemo((function(){return fd()}),[]),a=i.className,o=i.roomAudioPlaybackAllowedObservable,s=i.handleStartAudioPlayback,c=Gd(e.useMemo((function(){return o(n)}),[n,o]),{canPlayAudio:!1}).canPlayAudio;return{mergedProps:e.useMemo((function(){return Id(r,{className:a,onClick:function(){s(n)},style:{display:c?"none":"block"}})}),[r,a,c,s,n]),canPlayAudio:c}}({room:Wd(),props:a}),s=o.mergedProps;return e.createElement("button",Ed({},s),i)}function wf(t,n){switch(t){case Co.Source.Microphone:return n?e.createElement(cf,null):e.createElement(sf,null);case Co.Source.Camera:return n?e.createElement(tf,null):e.createElement(ef,null);case Co.Source.ScreenShare:return n?e.createElement(hf,null):e.createElement(pf,null);default:return}}function Sf(t){var n,r=t,a=r.source,o=r.onChange,s=r.initialState,c=r.captureOptions,u=Pd(r,["source","onChange","initialState","captureOptions"]),l=qd(),d=null==(n=null==l?void 0:l.localParticipant)?void 0:n.getTrack(a),f=e.useMemo((function(){return l?function(e,t,n){var r=this,a=t.localParticipant,o=function(e,t){var n=!1;switch(e){case Co.Source.Camera:n=t.isCameraEnabled;break;case Co.Source.Microphone:n=t.isMicrophoneEnabled;break;case Co.Source.ScreenShare:n=t.isScreenShareEnabled}return n},s=ed(a).pipe(uu((function(t){return o(e,t.participant)})),Uu(o(e,a))),c=new ju;return{className:Kl("button"),toggle:function(t,o){return yl(r,null,i().mark((function r(){return i().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:r.prev=0,null!=o||(o=n),c.next(!0),r.t0=e,r.next=r.t0===Co.Source.Camera?6:r.t0===Co.Source.Microphone?9:r.t0===Co.Source.ScreenShare?12:15;break;case 6:return r.next=8,a.setCameraEnabled(null!=t?t:!a.isCameraEnabled,o);case 8:case 11:case 14:case 15:return r.abrupt("break",16);case 9:return r.next=11,a.setMicrophoneEnabled(null!=t?t:!a.isMicrophoneEnabled,o);case 12:return r.next=14,a.setScreenShareEnabled(null!=t?t:!a.isScreenShareEnabled,o);case 16:return r.prev=16,c.next(!1),r.finish(16);case 19:case"end":return r.stop()}}),r,null,[[0,,16,19]])})))},enabledObserver:s,pendingObserver:c.asObservable()}}(a,l,c):function(){var e=!1,t=new ju,n=new ju;return{className:Kl("button"),toggle:function(r){n.next(!0),e=null!=r?r:!e,t.next(e),n.next(!1)},enabledObserver:t.asObservable(),pendingObserver:n.asObservable()}}()}),[l,a,JSON.stringify(c)]),p=f.toggle,h=f.className,v=f.pendingObserver,m=f.enabledObserver,g=Gd(v,!1),b=Gd(m,null!=s?s:!!(null==d?void 0:d.isEnabled));e.useEffect((function(){null==o||o(b)}),[b,o]),e.useEffect((function(){void 0!==s&&(vd.debug("forcing initial toggle state",a,s),p(s))}),[]);var y=e.useMemo((function(){return Nd(u,{className:h})}),[u,h]),k=e.useCallback((function(e){var t;p(),null==(t=u.onClick)||t.call(u,e)}),[u,p]);return{toggle:p,enabled:b,pending:g,track:d,buttonProps:xd(Ed({},y),{"aria-pressed":b,"data-lk-source":a,"data-lk-enabled":b,disabled:g,onClick:k})}}function Cf(t){var n=t,r=n.showIcon,i=Pd(n,["showIcon"]),a=Sf(i),o=a.buttonProps,s=a.enabled;return e.createElement("button",Ed({},o),(null==r||r)&&wf(i.source,s),i.children)}function Ef(t){var n,r=function(){var t=Vd((arguments.length>0&&void 0!==arguments[0]?arguments[0]:{}).participant),n=e.useMemo((function(){return id(t)}),[t]);return{className:n.className,quality:Gd(n.connectionQualityObserver,Qo.Unknown)}}(t),i=r.className,a=r.quality,o=e.useMemo((function(){return xd(Ed({},Id(t,{className:i})),{"data-lk-quality":a})}),[a,t,i]);return e.createElement("div",Ed({},o),null!=(n=t.children)?n:function(t){switch(t){case Qo.Excellent:return e.createElement(uf,null);case Qo.Good:return e.createElement(lf,null);case Qo.Poor:return e.createElement(df,null);default:return e.createElement(ff,null)}}(a))}function xf(t){var n=t,r=n.participant,i=Pd(n,["participant"]),a=Vd(r),o=e.useMemo((function(){return ad(a)}),[a]),s=o.className,c=Gd(o.infoObserver,{name:a.name,identity:a.identity,metadata:a.metadata}),u=c.identity,l=c.name,d=e.useMemo((function(){return Id(i,{className:s,"data-lk-participant-name":l})}),[i,s,l]);return e.createElement("span",Ed({},d),""!==l?l:u,i.children)}var Pf,Tf=function(t){var n,r=Vd((arguments.length>1&&void 0!==arguments[1]?arguments[1]:{}).participant),i=e.useMemo((function(){return function(e,t){var n="track-muted-indicator-camera";switch(t){case Co.Source.Camera:n="track-muted-indicator-camera";break;case Co.Source.Microphone:n="track-muted-indicator-microphone"}return{className:Kl(n),mediaMutedObserver:nd(e,t)}}(r,t)}),[r,t]),a=i.className;return{isMuted:Gd(i.mediaMutedObserver,!!(null==(n=r.getTrack(t))?void 0:n.isMuted)),className:a}},Rf=function(t){var n,r=t,i=r.source,a=r.participant,o=r.show,s=void 0===o?"always":o,c=Pd(r,["source","participant","show"]),u=Tf(i,{participant:a}),l=u.className,d=u.isMuted,f="always"===s||"muted"===s&&d||"unmuted"===s&&!d,p=e.useMemo((function(){return Id(c,{className:l})}),[l,c]);return f?e.createElement("div",xd(Ed({},p),{"data-lk-muted":d}),null!=(n=c.children)?n:wf(i,!d)):null};var Nf=function(){return Pf||(Pf=function(){var e=!1,t=[],n=new Map;if("undefined"!==typeof window){var r=new ResizeObserver((function(r,i){t=t.concat(r),e||window.requestAnimationFrame((function(){for(var r=new Set,a=function(e){if(r.has(t[e].target))return"continue";r.add(t[e].target);var a=n.get(t[e].target);null==a||a.forEach((function(n){return n(t[e],i)}))},o=0;o<t.length;o++)a(o);t=[],e=!1})),e=!0}));return{observer:r,subscribe:function(e,t){var i;r.observe(e);var a=null!=(i=n.get(e))?i:[];a.push(t),n.set(e,a)},unsubscribe:function(e,t){var i,a=null!=(i=n.get(e))?i:[];if(1===a.length)return r.unobserve(e),void n.delete(e);var o=a.indexOf(t);-1!==o&&a.splice(o,1),n.set(e,a)}}}}())},Of=function(t){var n=s(e.useState({width:0,height:0}),2),r=n[0],i=n[1];e.useLayoutEffect((function(){if(t.current){var e=t.current.getBoundingClientRect(),n=e.width,r=e.height;i({width:n,height:r})}}),[t.current]);var a=e.useCallback((function(e){return i(e.contentRect)}),[]);return function(t,n){var r=Nf(),i=md(n);e.useLayoutEffect((function(){var e=!1,n=t.current;if(n)return null==r||r.subscribe(n,a),function(){e=!0,null==r||r.unsubscribe(n,a)};function a(t,n){e||i.current(t,n)}}),[t.current,r,i]),null==r||r.observer}(t,a),r};function If(t,n){var r=Of(t),i=r.width,a=r.height,o=i>0&&a>0?Nl(Rl,n,i,a):Rl[0];return e.useEffect((function(){t.current&&o&&(t.current.style.setProperty("--lk-col-count",null==o?void 0:o.columns.toString()),t.current.style.setProperty("--lk-row-count",null==o?void 0:o.rows.toString()))}),[t,o]),{layout:o}}function _f(t){var n,r=Vd((arguments.length>1&&void 0!==arguments[1]?arguments[1]:{}).participant),i=s(e.useState(!!(null==(n=r.getTrack(t))?void 0:n.isMuted)),2),a=i[0],o=i[1];return e.useEffect((function(){var e=nd(r,t).subscribe(o);return function(){return e.unsubscribe()}}),[r,t]),a}function Df(t){var n=Vd(t),r=e.useMemo((function(){return function(e){return td(e,lo.IsSpeakingChanged).pipe(uu((function(e){return s(e,1)[0]})))}(n)}),[n]);return Gd(r,n.isSpeaking)}function Af(){var t=Wd();return Gd(e.useMemo((function(){return td(e=t.localParticipant,lo.ParticipantPermissionsChanged).pipe(uu((function(){return e.permissions})),Uu(e.permissions));var e}),[t]),t.localParticipant.permissions)}function Lf(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=s(e.useState(Yl(t)),2),i=r[0],a=r[1],o=s(e.useState(null==i?void 0:i.isMuted),2),c=o[0],u=o[1],l=s(e.useState(null==i?void 0:i.isSubscribed),2),d=l[0],f=l[1],p=s(e.useState(null==i?void 0:i.track),2),h=p[0],v=p[1],m=s(e.useState("landscape"),2),g=m[0],b=m[1],y=e.useRef(),k=e.useMemo((function(){return function(e){var t=Yl(e),n=ed(e.participant).pipe(uu((function(){return Yl(e)})),Uu(t));return{className:Kl(e.source===Co.Source.Camera||e.source===Co.Source.ScreenShare?"participant-media-video":"participant-media-audio"),trackObserver:n}}(t)}),[t.participant.identity,t.source,Al(t)&&t.publication.trackSid]),w=k.className,S=k.trackObserver;return e.useEffect((function(){var e=S.subscribe((function(e){vd.debug("update track",e),a(e),u(null==e?void 0:e.isMuted),f(null==e?void 0:e.isSubscribed),v(null==e?void 0:e.track)}));return function(){return null==e?void 0:e.unsubscribe()}}),[S]),e.useEffect((function(){var e,r;return h&&(y.current&&h.detach(y.current),!(null==(e=n.element)?void 0:e.current)||wl(t.participant)&&"audio"===(null==h?void 0:h.kind)||h.attach(n.element.current)),y.current=null==(r=n.element)?void 0:r.current,function(){y.current&&(null==h||h.detach(y.current))}}),[h,n.element]),e.useEffect((function(){var e,t;if("number"===typeof(null==(e=null==i?void 0:i.dimensions)?void 0:e.width)&&"number"===typeof(null==(t=null==i?void 0:i.dimensions)?void 0:t.height)){var n=i.dimensions.width>i.dimensions.height?"landscape":"portrait";b(n)}}),[i]),{publication:i,isMuted:c,isSubscribed:d,track:h,elementProps:Id(n.props,Ed({className:w,"data-lk-local-participant":t.participant.isLocal,"data-lk-source":null==i?void 0:i.source},(null==i?void 0:i.source)===Co.Source.Camera||(null==i?void 0:i.source)===Co.Source.ScreenShare?{"data-lk-orientation":g}:{}))}}function Mf(t,n){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},i=e.useRef([]),a=e.useRef(-1),o=n!==a.current,s="function"===typeof r.customSortFunction?r.customSortFunction(t):zl(t),u=c(s);if(!1===o)try{u=Hl(i.current,s,n)}catch(l){vd.error("Error while running updatePages(): ",l)}return i.current=o?s:u,a.current=n,u}function Uf(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[Co.Source.Camera,Co.Source.Microphone,Co.Source.ScreenShare,Co.Source.ScreenShareAudio,Co.Source.Unknown],n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=Hd(n.room),i=s(e.useState([]),2),a=i[0],o=i[1],l=s(e.useState([]),2),d=l[0],f=l[1],p=e.useMemo((function(){return t.map((function(e){return _l(e)?e.source:e}))}),[JSON.stringify(t)]);e.useEffect((function(){var e=function(e,t,n){var r,i,a=null!=(r=n.additionalRoomEvents)?r:El,o=null==(i=n.onlySubscribed)||i,s=Array.from(new Set([uo.ParticipantConnected,uo.ConnectionStateChanged,uo.LocalTrackPublished,uo.LocalTrackUnpublished,uo.TrackPublished,uo.TrackUnpublished,uo.TrackSubscriptionStatusChanged].concat(c(a))).values());return Gl.apply(void 0,[e].concat(s)).pipe(uu((function(e){var n=pd(e,t,o);return Tl.debug("TrackReference[] was updated. (length ".concat(n.trackReferences.length,")"),n),n})),Uu(pd(e,t,o)))}(r,p,{additionalRoomEvents:n.updateOnlyOn,onlySubscribed:n.onlySubscribed}).subscribe((function(e){var t=e.trackReferences,n=e.participants;vd.debug("setting track bundles",t,n),o(t),f(n)}));return function(){return e.unsubscribe()}}),[r,JSON.stringify(n.updateOnlyOn),JSON.stringify(t)]);var h=e.useMemo((function(){if(Dl(t)){var e=function(e,t){var n=new Map;if(Dl(e)){var r=e.filter((function(e){return e.withPlaceholder})).map((function(e){return e.source}));t.forEach((function(e){var t=e.getTracks().map((function(e){var t;return null==(t=e.track)?void 0:t.source})).filter((function(e){return void 0!==e})),i=Array.from(function(e,t){var n,r=new Set(e),i=u(t);try{for(i.s();!(n=i.n()).done;){var a=n.value;r.delete(a)}}catch(o){i.e(o)}finally{i.f()}return r}(new Set(r),new Set(t)));i.length>0&&n.set(e.identity,i)}))}return n}(t,d),n=Array.from(a);return d.forEach((function(t){var r;e.has(t.identity)&&(null!=(r=e.get(t.identity))?r:[]).forEach((function(e){if(!a.find((function(n){var r=n.participant,i=n.publication;return t.identity===r.identity&&i.source===e}))){vd.debug("Add ".concat(e," placeholder for participant ").concat(t.identity,"."));var r={participant:t,source:e};n.push(r)}}))})),n}return a}),[a,d,t]);return h}function Ff(t){return t=function(e){var t=Fd();if(null!=e||(e=t),!e)throw Error("Tried to access LayoutContext context outside a LayoutContextProvider provider.");return e}(t),e.useMemo((function(){return void 0!==(null==t?void 0:t.pin.state)&&t.pin.state.length>=1?t.pin.state:[]}),[t])}var jf=function(t){return e.createElement("svg",Ed({width:320,height:320,viewBox:"0 0 320 320",preserveAspectRatio:"xMidYMid meet",fill:"none",xmlns:"http://www.w3.org/2000/svg"},t),e.createElement("path",{d:"M160 180C204.182 180 240 144.183 240 100C240 55.8172 204.182 20 160 20C115.817 20 79.9997 55.8172 79.9997 100C79.9997 144.183 115.817 180 160 180Z",fill:"white",fillOpacity:.25}),e.createElement("path",{d:"M97.6542 194.614C103.267 191.818 109.841 192.481 115.519 195.141C129.025 201.466 144.1 205 159.999 205C175.899 205 190.973 201.466 204.48 195.141C210.158 192.481 216.732 191.818 222.345 194.614C262.703 214.719 291.985 253.736 298.591 300.062C300.15 310.997 291.045 320 280 320H39.9997C28.954 320 19.8495 310.997 21.4087 300.062C28.014 253.736 57.2966 214.72 97.6542 194.614Z",fill:"white",fillOpacity:.25}))};function Bf(t){var n=t,r=n.onTrackClick,i=n.onClick,a=n.onSubscriptionStatusChanged,o=n.name,s=n.publication,c=n.source,u=Pd(n,["onTrackClick","onClick","onSubscriptionStatusChanged","name","publication","source"]),l=e.useRef(null),d=Vd(u.participant),f=Lf({participant:d,name:o,source:c,publication:s},{element:l,props:u}),p=f.elementProps,h=f.publication,v=f.isSubscribed;e.useEffect((function(){null==a||a(!!v)}),[v,a]);return e.createElement("video",xd(Ed({ref:l},p),{muted:!0,onClick:function(e){null==i||i(e),null==r||r({participant:d,track:h})}}))}function zf(t){var n=t,r=n.onSubscriptionStatusChanged,i=n.volume,a=Pd(n,["onSubscriptionStatusChanged","volume"]),o=a.source,s=a.name,c=a.publication,u=e.useRef(null),l=Lf({source:o,name:s,participant:Vd(a.participant),publication:c},{element:u,props:a}),d=l.elementProps,f=l.isSubscribed,p=l.track;return e.useEffect((function(){null==r||r(!!f)}),[f,r]),e.useEffect((function(){i&&p instanceof Jo?p.setVolume(i):vd.warn("volume can only be set on remote audio tracks")}),[i,p]),e.createElement("audio",Ed({ref:u},d))}function $f(t){var n=t.participant,r=t.source,i=t.publication,a=t.onParticipantClick,o=t.disableSpeakingIndicator,s=t.htmlProps,c=Vd(n),u=e.useMemo((function(){var e={className:Kl("participant-tile")};return Id(s,{className:e.className,onClick:function(e){var t;if(null==(t=s.onClick)||t.call(s,e),"function"===typeof a){var n=null!=i?i:c.getTrack(r);a({participant:c,track:n})}}})}),[s,r,a,c,i]),l=_f(Co.Source.Camera,{participant:n}),d=_f(Co.Source.Microphone,{participant:n}),f=Df(n);return{elementProps:Ed({"data-lk-audio-muted":d,"data-lk-video-muted":l,"data-lk-speaking":!0!==o&&f,"data-lk-local-participant":n.isLocal,"data-lk-source":r},u)}}function Vf(t){var n=!!$d();return t.participant&&!n?e.createElement(zd.Provider,{value:t.participant},t.children):e.createElement(e.Fragment,null,t.children)}var Jf=function(t){var n=t,r=n.participant,i=n.children,a=n.source,o=void 0===a?Co.Source.Camera:a,s=n.onParticipantClick,c=n.publication,u=n.disableSpeakingIndicator,l=Pd(n,["participant","children","source","onParticipantClick","publication","disableSpeakingIndicator"]),d=Vd(r),f=$f({participant:d,htmlProps:l,source:o,publication:c,disableSpeakingIndicator:u,onParticipantClick:s}).elementProps,p=Fd(),h=e.useCallback((function(e){o&&!e&&p&&p.pin.dispatch&&function(e,t,n){return void 0!==n&&n.some((function(n){var r=n.source,i=n.participant;return r===t&&i.identity===e.identity}))}(d,o,p.pin.state)&&p.pin.dispatch({msg:"clear_pin"})}),[d,p,o]);return e.createElement("div",Ed({style:{position:"relative"}},f),e.createElement(Vf,{participant:d},null!=i?i:e.createElement(e.Fragment,null,"video"===(null==c?void 0:c.kind)||o===Co.Source.Camera||o===Co.Source.ScreenShare?e.createElement(Bf,{participant:d,source:o,publication:c,onSubscriptionStatusChanged:h}):e.createElement(zf,{participant:d,source:o,publication:c,onSubscriptionStatusChanged:h}),e.createElement("div",{className:"lk-participant-placeholder"},e.createElement(jf,null)),e.createElement("div",{className:"lk-participant-metadata"},e.createElement("div",{className:"lk-participant-metadata-item"},o===Co.Source.Camera?e.createElement(e.Fragment,null,e.createElement(Rf,{source:Co.Source.Microphone,show:"muted"}),e.createElement(xf,null)):e.createElement(e.Fragment,null,e.createElement(pf,{style:{marginRight:"0.25rem"}}),e.createElement(xf,null,"'s screen"))),e.createElement(Ef,{className:"lk-participant-metadata-item"}))),e.createElement(bf,{trackSource:o})))};function Wf(t){var n=Id(t,{className:"lk-focus-layout"});return e.createElement("div",Ed({},n),t.children)}function qf(t){var n=t,r=n.track,i=Pd(n,["track"]);return e.createElement(Jf,Ed(Ed({},r),i))}var Hf=function(t){var n=t,r=n.tracks,i=Pd(n,["tracks"]);return e.createElement(e.Fragment,null,r.map((function(t){var n=Al(t)?t.publication.source:t.source;return e.createElement(jd.Provider,{value:t,key:"".concat(t.participant.identity,"_").concat(n)},Dd(i.children))})))};function Gf(t){var n=t.totalPageCount,r=t.nextPage,i=t.prevPage,a=t.currentPage,o=t.pagesContainer,c=s(e.useState(!1),2),u=c[0],l=c[1];return e.useEffect((function(){var e;return o&&(e=hd(o.current,2e3).subscribe(l)),function(){e&&e.unsubscribe()}}),[o]),e.createElement("div",{className:"lk-pagination-control","data-lk-user-interaction":u},e.createElement("button",{className:"lk-button",onClick:i},e.createElement(rf,null)),e.createElement("span",{className:"lk-pagination-count"},"".concat(a," of ").concat(n)),e.createElement("button",{className:"lk-button",onClick:r},e.createElement(rf,null)))}function Qf(t){var n=t.totalPageCount,r=t.currentPage,i=new Array(n).fill("").map((function(t,n){return n+1===r?e.createElement("span",{"data-lk-active":!0,key:n}):e.createElement("span",{key:n})}));return e.createElement("div",{className:"lk-pagination-indicator"},i)}function Zf(t){var n=t,r=n.tracks,i=Pd(n,["tracks"]),a=e.createRef(),o=e.useMemo((function(){return Id(i,{className:"lk-grid-layout"})}),[i]),c=If(a,r.length).layout,u=function(t,n){var r=s(e.useState(1),2),i=r[0],a=r[1],o=Math.max(Math.ceil(n.length/t),1);i>o&&a(o);var c=i*t,u=c-t,l=function(e){a((function(t){return"next"===e?t===o?t:t+1:1===t?t:t-1}))},d=Mf(n,t);return{totalPageCount:o,nextPage:function(){return l("next")},prevPage:function(){return l("previous")},setPage:function(e){a(e>o?o:e<1?1:e)},firstItemIndex:u,lastItemIndex:c,tracks:d.slice(u,c),currentPage:i}}(c.maxTiles,r);return function(t){var n,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},i=e.useRef(null),a=e.useRef(null),o=null!=(n=r.minSwipeDistance)?n:50,s=function(e){a.current=null,i.current=e.targetTouches[0].clientX},c=function(e){a.current=e.targetTouches[0].clientX},u=e.useCallback((function(){if(i.current&&a.current){var e=i.current-a.current,t=e<-o;e>o&&r.onLeftSwipe&&r.onLeftSwipe(),t&&r.onRightSwipe&&r.onRightSwipe()}}),[o,r]);e.useEffect((function(){var e=t.current;return e&&(e.addEventListener("touchstart",s),e.addEventListener("touchmove",c),e.addEventListener("touchend",u)),function(){e&&(e.removeEventListener("touchstart",s),e.removeEventListener("touchmove",c),e.removeEventListener("touchend",u))}}),[t,u])}(a,{onLeftSwipe:u.nextPage,onRightSwipe:u.prevPage}),e.createElement("div",Ed({ref:a,"data-lk-pagination":u.totalPageCount>1},o),e.createElement(Hf,{tracks:u.tracks},i.children),r.length>c.maxTiles&&e.createElement(e.Fragment,null,e.createElement(Qf,{totalPageCount:u.totalPageCount,currentPage:u.currentPage}),e.createElement(Gf,Ed({pagesContainer:a},u))))}var Kf=130,Yf=140,Xf=1,ep=1.6,tp=-1*(1-ep);function np(t){var n=t,r=n.tracks,i=n.orientation,a=Pd(n,["tracks","orientation"]),o=e.useRef(null),s=Of(o),c=s.width,u=s.height,l=i||(u>=c?"vertical":"horizontal"),d=Math.max(c*tp,Kf),f=Math.max(u*ep,Yf),p="vertical"===l?Math.max(Math.floor(u/d),Xf):Math.max(Math.floor(c/f),Xf);if(r.length>p){var h=function(){var e=document.createElement("p");e.style.width="100%",e.style.height="200px";var t=document.createElement("div");t.style.position="absolute",t.style.top="0px",t.style.left="0px",t.style.visibility="hidden",t.style.width="200px",t.style.height="150px",t.style.overflow="hidden",t.appendChild(e),document.body.appendChild(t);var n=e.offsetWidth;t.style.overflow="scroll";var r=e.offsetWidth;return n===r&&(r=t.clientWidth),document.body.removeChild(t),n-r}();p="vertical"===l?Math.max(Math.floor(u/(d-h)),Xf):Math.max(Math.floor(c/(f-h)),Xf)}var v=Mf(r,p);return e.useLayoutEffect((function(){o.current&&(o.current.dataset.lkOrientation=l,o.current.style.setProperty("--lk-max-visible-tiles",p.toString()))}),[p,l]),e.createElement("aside",Ed({key:l,className:"lk-carousel",ref:o},a),e.createElement(Hf,{tracks:v},a.children))}function rp(t){var n=t.value,r=t.onPinChange,i=t.onWidgetChange,a=t.children,o=function(t){var n=s(e.useReducer(Ld,Ol),2),r=n[0],i=n[1],a=s(e.useReducer(Ad,Il),2),o=a[0],c=a[1];return null!=t?t:{pin:{dispatch:i,state:r},widget:{dispatch:c,state:o}}}(n);return e.useEffect((function(){vd.debug("PinState Updated",{state:o.pin.state}),r&&o.pin.state&&r(o.pin.state)}),[o.pin.state,r]),e.useEffect((function(){vd.debug("Widget Updated",{widgetState:o.widget.state}),i&&o.widget.state&&i(o.widget.state)}),[i,o.widget.state]),e.createElement(Md.Provider,{value:o},a)}var ip={connect:!0,audio:!1,video:!1};function ap(t){var n=function(t){var n=Ed(Ed({},ip),t),r=n.token,i=n.serverUrl,a=n.options,o=n.room,c=n.connectOptions,u=n.connect,l=n.audio,d=n.video,f=n.screen,p=n.onConnected,h=n.onDisconnected,v=n.onError,m=n.onMediaDeviceFailure,g=n.simulateParticipants,b=Pd(n,["token","serverUrl","options","room","connectOptions","connect","audio","video","screen","onConnected","onDisconnected","onError","onMediaDeviceFailure","simulateParticipants"]);a&&o&&vd.warn("when using a manually created room, the options object will be ignored. set the desired options directly when creating the room instead.");var y=s(e.useState(),2),k=y[0],w=y[1];e.useEffect((function(){w(null!=o?o:new ms(a))}),[a,o]);var S=e.useMemo((function(){return Id(b,{className:"lk-room-container"})}),[b]);return e.useEffect((function(){if(k){var e=function(){var e=k.localParticipant;try{vd.debug("trying to publish local tracks"),e.setMicrophoneEnabled(!!l,"boolean"!==typeof l?l:void 0),e.setCameraEnabled(!!d,"boolean"!==typeof d?d:void 0),e.setScreenShareEnabled(!!f,"boolean"!==typeof f?f:void 0)}catch(Cs){vd.warn(Cs),null==v||v(Cs)}},t=function(e){var t=ji.getFailure(e);null==m||m(t)};return k.on(uo.SignalConnected,e),k.on(uo.MediaDevicesError,t),function(){k.off(uo.SignalConnected,e),k.off(uo.MediaDevicesError,t)}}}),[k,l,d,f,v]),e.useEffect((function(){if(k)if(g)k.simulateParticipants({participants:{count:g},publish:{audio:!0,useRealTracks:!0}});else{if(r)return i?void(u?(vd.debug("connecting"),k.connect(i,r,c).catch((function(e){vd.warn(e),null==v||v(e)}))):(vd.debug("disconnecting because connect is false"),k.disconnect())):(vd.warn("no livekit url provided"),void(null==v||v(Error("no livekit url provided"))));vd.debug("no token yet")}}),[u,r,c,k,v,i,g]),e.useEffect((function(){if(k){var e=function(e){switch(e){case ps.Disconnected:h&&h();break;case ps.Connected:p&&p()}};return k.on(uo.ConnectionStateChanged,e),function(){k.off(uo.ConnectionStateChanged,e)}}}),[r,p,h,k]),e.useEffect((function(){if(k)return function(){vd.info("disconnecting on onmount"),k.disconnect()}}),[k]),{room:k,htmlProps:S}}(t),r=n.room,i=n.htmlProps;return e.createElement("div",Ed({},i),r&&e.createElement(Jd.Provider,{value:r},t.children))}var op=function(){var t=Uf([Co.Source.Microphone,Co.Source.ScreenShareAudio],{updateOnlyOn:[]}).filter((function(e){return!wl(e.participant)}));return e.createElement("div",{style:{display:"none"}},t.map((function(t){return e.createElement(zf,Ed({key:t.publication.trackSid},t))})))};function sp(t){var n=e.useMemo((function(){return Id(t,{className:"lk-toast"})}),[t]);return e.createElement("div",Ed({},n),t.children)}function cp(t){var n=s(e.useState(void 0),2),r=n[0],i=n[1],a=Qd(t.room);return e.useEffect((function(){switch(a){case ps.Reconnecting:i(e.createElement(e.Fragment,null,e.createElement(vf,{className:"lk-spinner"})," Reconnecting"));break;case ps.Connecting:i(e.createElement(e.Fragment,null,e.createElement(vf,{className:"lk-spinner"})," Connecting"));break;case ps.Disconnected:i(e.createElement(e.Fragment,null,"Disconnected"));break;default:i(void 0)}}),[a]),r?e.createElement(sp,{className:"lk-toast-connection-state"},r):e.createElement(e.Fragment,null)}function up(t){var n,r,i,a,o=t,s=o.entry,c=o.hideName,u=void 0!==c&&c,l=o.hideTimestamp,d=void 0!==l&&l,f=o.messageFormatter,p=Pd(o,["entry","hideName","hideTimestamp","messageFormatter"]),h=e.useMemo((function(){return f?f(s.message):s.message}),[s.message,f]),v=new Date(s.timestamp),m=navigator?navigator.language:"en-US";return e.createElement("li",Ed({className:"lk-chat-entry",title:v.toLocaleTimeString(m,{timeStyle:"full"}),"data-lk-message-origin":(null==(n=s.from)?void 0:n.isLocal)?"local":"remote"},p),(!d||!u)&&e.createElement("span",{className:"lk-meta-data"},!u&&e.createElement("strong",{className:"lk-participant-name"},null!=(a=null==(r=s.from)?void 0:r.name)?a:null==(i=s.from)?void 0:i.identity),!d&&e.createElement("span",{className:"lk-timestamp"},v.toLocaleTimeString(m,{timeStyle:"short"}))),e.createElement("span",{className:"lk-message-body"},h))}function lp(){var t=Wd(),n=s(e.useState(),2),r=n[0],a=n[1],o=Gd(null==r?void 0:r.isSendingObservable,!1),u=Gd(null==r?void 0:r.messageObservable,[]);return e.useEffect((function(){var e=function(e){var t=this,n=new ju,r=new ju;cd(e,od.CHAT).messageObservable.pipe(Ju(n)).subscribe(r);var a=r.pipe(uu((function(e){var t=JSON.parse(ld.decode(e.payload));return bl(gl({},t),{from:e.from})})),Wu((function(e,t){return[].concat(c(e),[t])}),[]),Ju(n)),o=new zu(!1);return{messageObservable:a,isSendingObservable:o,send:function(n){return yl(t,null,i().mark((function t(){var a,s;return i().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return a=Date.now(),s=ud.encode(JSON.stringify({timestamp:a,message:n})),o.next(!0),t.prev=3,t.next=6,sd(e.localParticipant,s,od.CHAT,{kind:Tt.RELIABLE});case 6:r.next({payload:s,topic:od.CHAT,from:e.localParticipant});case 7:return t.prev=7,o.next(!1),t.finish(7);case 10:case"end":return t.stop()}}),t,null,[[3,,7,10]])})))},destroy:function(){n.next(),n.complete()}}}(t);return a(e),e.destroy}),[t]),{send:null==r?void 0:r.send,chatMessages:u,isSending:o}}function dp(t){var n=t,r=n.messageFormatter,a=Pd(n,["messageFormatter"]),o=e.useRef(null),s=e.useRef(null),c=lp(),u=c.send,l=c.chatMessages,d=c.isSending;return e.useEffect((function(){var e;s&&(null==(e=s.current)||e.scrollTo({top:s.current.scrollHeight}))}),[s,l]),e.createElement("div",xd(Ed({},a),{className:"lk-chat"}),e.createElement("ul",{className:"lk-list lk-chat-messages",ref:s},a.children?l.map((function(e,t){return Dd(a.children,{entry:e,key:t,messageFormatter:r})})):l.map((function(t,n,i){var a=n>=1&&i[n-1].from===t.from,o=n>=1&&t.timestamp-i[n-1].timestamp<6e4;return e.createElement(up,{key:n,hideName:a,hideTimestamp:!1!==a&&o,entry:t,messageFormatter:r})}))),e.createElement("form",{className:"lk-chat-form",onSubmit:function(e){return Td(this,null,i().mark((function t(){return i().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(e.preventDefault(),!o.current||""===o.current.value.trim()){t.next=7;break}if(!u){t.next=7;break}return t.next=5,u(o.current.value);case 5:o.current.value="",o.current.focus();case 7:case"end":return t.stop()}}),t)})))}},e.createElement("input",{className:"lk-form-control lk-chat-form-input",disabled:d,ref:o,type:"text",placeholder:"Enter a message..."}),e.createElement("button",{type:"submit",className:"lk-button lk-chat-form-button",disabled:d},"Send")))}var fp=function(t){var n=t,r=n.kind,a=n.initialSelection,o=n.onActiveDeviceChange,c=Pd(n,["kind","initialSelection","onActiveDeviceChange"]),u=s(e.useState(!1),2),l=u[0],d=u[1],f=s(e.useState([]),2),p=f[0],h=f[1],v=s(e.useState(!0),2),m=v[0],g=v[1],b=function(e,t){vd.debug("handle device change"),d(!1),null==o||o(e,t)},y=e.useRef(null),k=e.useRef(null);e.useLayoutEffect((function(){y.current&&k.current&&(p||m)&&function(e,t){return yl(this,null,i().mark((function n(){var r,a,o;return i().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,Ec(e,t,{placement:"top",middleware:[$s(6),zs(),Ws({padding:5})]});case 2:return r=n.sent,a=r.x,o=r.y,n.abrupt("return",{x:a,y:o});case 6:case"end":return n.stop()}}),n)})))}(y.current,k.current).then((function(e){var t=e.x,n=e.y;k.current&&Object.assign(k.current.style,{left:"".concat(t,"px"),top:"".concat(n,"px")})})),g(!1)}),[y,k,p,m]);var w=e.useCallback((function(e){k.current&&e.target!==y.current&&l&&function(e,t){return!e.contains(t.target)}(k.current,e)&&d(!1)}),[l,k,y]);return e.useEffect((function(){return document.addEventListener("click",w),window.addEventListener("resize",(function(){return g(!0)})),function(){document.removeEventListener("click",w),window.removeEventListener("resize",(function(){return g(!0)}))}}),[w,g]),e.createElement(e.Fragment,null,e.createElement("button",xd(Ed({className:"lk-button lk-button-menu","aria-pressed":l},c),{onClick:function(){return d(!l)},ref:y}),c.children),e.createElement("div",{className:"lk-device-menu",ref:k,style:{visibility:l?"visible":"hidden"}},r?e.createElement(yf,{initialSelection:a,onActiveDeviceChange:function(e){return b(r,e)},onDeviceListChange:h,kind:r}):e.createElement(e.Fragment,null,e.createElement("div",{className:"lk-device-menu-heading"},"Audio inputs"),e.createElement(yf,{kind:"audioinput",onActiveDeviceChange:function(e){return b("audioinput",e)},onDeviceListChange:h}),e.createElement("div",{className:"lk-device-menu-heading"},"Video inputs"),e.createElement(yf,{kind:"videoinput",onActiveDeviceChange:function(e){return b("videoinput",e)},onDeviceListChange:h}))))};function pp(t){var n,r=t,i=r.variation,a=r.controls,o=Pd(r,["variation","controls"]),c=s(e.useState(!1),2),u=c[0],l=c[1],d=Fd();e.useEffect((function(){var e,t;void 0!==(null==(e=null==d?void 0:d.widget.state)?void 0:e.showChat)&&l(null==(t=null==d?void 0:d.widget.state)?void 0:t.showChat)}),[null==(n=null==d?void 0:d.widget.state)?void 0:n.showChat]);var f=function(t){var n=function(e){return"undefined"!==typeof window&&window.matchMedia(e).matches},r=s(e.useState(n(t)),2),i=r[0],a=r[1];function o(){a(n(t))}return e.useEffect((function(){var e=window.matchMedia(t);return o(),e.addListener?e.addListener(o):e.addEventListener("change",o),function(){e.removeListener?e.removeListener(o):e.removeEventListener("change",o)}}),[t]),i}("(max-width: ".concat(u?1e3:760,"px)"));null!=i||(i=f?"minimal":"verbose");var p=Ed({leave:!0},a),h=Af();h?(null!=p.camera||(p.camera=h.canPublish),null!=p.microphone||(p.microphone=h.canPublish),null!=p.screenShare||(p.screenShare=h.canPublish),null!=p.chat||(p.chat=h.canPublishData&&(null==a?void 0:a.chat))):(p.camera=!1,p.chat=!1,p.microphone=!1,p.screenShare=!1);var v=e.useMemo((function(){return"minimal"===i||"verbose"===i}),[i]),m=e.useMemo((function(){return"textOnly"===i||"verbose"===i}),[i]),g=e.useMemo((function(){return Sl()}),[]),b=s(e.useState(!1),2),y=b[0],k=b[1];return e.createElement("div",Ed({className:"lk-control-bar"},o),p.microphone&&e.createElement("div",{className:"lk-button-group"},e.createElement(Cf,{source:Co.Source.Microphone,showIcon:v},m&&"Microphone"),e.createElement("div",{className:"lk-button-group-menu"},e.createElement(fp,{kind:"audioinput"}))),p.camera&&e.createElement("div",{className:"lk-button-group"},e.createElement(Cf,{source:Co.Source.Camera,showIcon:v},m&&"Camera"),e.createElement("div",{className:"lk-button-group-menu"},e.createElement(fp,{kind:"videoinput"}))),p.screenShare&&!g&&e.createElement(Cf,{source:Co.Source.ScreenShare,captureOptions:{audio:!0,selfBrowserSurface:"include"},showIcon:v,onChange:function(e){k(e)}},m&&(y?"Stop screen share":"Share screen")),p.chat&&e.createElement(Kd,null,v&&e.createElement(nf,null),m&&"Chat"),p.leave&&e.createElement(Xd,null,v&&e.createElement(of,null),m&&"Leave"),e.createElement(kf,{label:"Start Audio"}))}function hp(t){var n,r,i=t,a=i.chatMessageFormatter,o=Pd(i,["chatMessageFormatter"]),c=s(e.useState({showChat:!1}),2),u=c[0],l=c[1],d=Uf([{source:Co.Source.Camera,withPlaceholder:!0},{source:Co.Source.ScreenShare,withPlaceholder:!1}],{updateOnlyOn:[uo.ActiveSpeakersChanged]}),f=function(){var t=s(e.useReducer(Ld,Ol),2),n=t[0],r=t[1],i=s(e.useReducer(Ad,Il),2),a=i[0];return{pin:{dispatch:r,state:n},widget:{dispatch:i[1],state:a}}}(),p=d.filter(Al).filter((function(e){return e.publication.source===Co.Source.ScreenShare})),h=null==(n=Ff(f))?void 0:n[0],v=d.filter((function(e){return!function(e,t){return Al(e)&&Al(t)?e.publication.trackSid===t.publication.trackSid:!(!Ll(e)||!Ll(t))&&e.participant.identity===t.participant.identity&&e.source===t.source}(e,h)}));return e.useEffect((function(){var e,t,n,r;p.length>0&&void 0===h?null==(t=(e=f.pin).dispatch)||t.call(e,{msg:"set_pin",trackReference:p[0]}):(0===p.length&&(null==h?void 0:h.source)===Co.Source.ScreenShare||d.length<=1)&&(null==(r=(n=f.pin).dispatch)||r.call(n,{msg:"clear_pin"}))}),[JSON.stringify(p.map((function(e){return e.publication.trackSid}))),d.length,null==(r=null==h?void 0:h.publication)?void 0:r.trackSid]),e.createElement("div",Ed({className:"lk-video-conference"},o),e.createElement(rp,{value:f,onWidgetChange:function(e){vd.debug("updating widget state",e),l(e)}},e.createElement("div",{className:"lk-video-conference-inner"},h?e.createElement("div",{className:"lk-focus-layout-wrapper"},e.createElement(Wf,null,e.createElement(np,{tracks:v},e.createElement(Jf,null)),h&&e.createElement(qf,{track:h}))):e.createElement("div",{className:"lk-grid-layout-wrapper"},e.createElement(Zf,{tracks:d},e.createElement(Jf,null))),e.createElement(pp,{controls:{chat:!0}})),e.createElement(dp,{style:{display:u.showChat?"flex":"none"},messageFormatter:a})),e.createElement(op,null),e.createElement(cp,null))}var vp=n(184);var mp=function(){var e=localStorage.getItem("live_token"),t=localStorage.getItem("live_host");return console.log("token",e),console.log("LIVEKIT_SERVER_URL",t),(0,vp.jsx)("div",{style:{height:"100vh"},children:(0,vp.jsx)(ap,{"data-lk-theme":"default",token:e,serverUrl:t,connect:!0,children:(0,vp.jsx)(hp,{})})})},gp=function(e){e&&e instanceof Function&&n.e(787).then(n.bind(n,787)).then((function(t){var n=t.getCLS,r=t.getFID,i=t.getFCP,a=t.getLCP,o=t.getTTFB;n(e),r(e),i(e),a(e),o(e)}))};t.createRoot(document.getElementById("root")).render((0,vp.jsx)(e.StrictMode,{children:(0,vp.jsx)(mp,{})})),gp()}()}();
//# sourceMappingURL=main.34ef74c2.js.map